(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{282:function(e,t,o){"use strict";o.d(t,"E",(function(){return n})),o.d(t,"z",(function(){return s})),o.d(t,"k",(function(){return a})),o.d(t,"v",(function(){return c})),o.d(t,"h",(function(){return d})),o.d(t,"x",(function(){return u})),o.d(t,"j",(function(){return p})),o.d(t,"y",(function(){return h})),o.d(t,"w",(function(){return g})),o.d(t,"i",(function(){return m})),o.d(t,"l",(function(){return f})),o.d(t,"m",(function(){return b})),o.d(t,"t",(function(){return x})),o.d(t,"D",(function(){return v})),o.d(t,"p",(function(){return C})),o.d(t,"g",(function(){return w})),o.d(t,"e",(function(){return O})),o.d(t,"n",(function(){return E})),o.d(t,"d",(function(){return y})),o.d(t,"o",(function(){return T})),o.d(t,"C",(function(){return R})),o.d(t,"A",(function(){return S})),o.d(t,"f",(function(){return j})),o.d(t,"B",(function(){return D})),o.d(t,"c",(function(){return F})),o.d(t,"a",(function(){return $})),o.d(t,"u",(function(){return k})),o.d(t,"s",(function(){return M})),o.d(t,"r",(function(){return A})),o.d(t,"q",(function(){return I}));var r=o(279);o.d(t,"b",(function(){return r.c}));var l=o(283);const n="3.16.5";r.c.version=n,r.c.tableVersion=n,r.c.setConfig({emptyCell:"　",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,padding:!0,minHeight:144,resizeConfig:{},resizableConfig:{dragMode:"auto",showDragTip:!0,isSyncAutoHeight:!0,isSyncAutoWidth:!0,minHeight:18},radioConfig:{strict:!0},rowDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},columnDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},validConfig:{showMessage:!0,autoClear:!0,autoPos:!0,message:"inline",msgMode:"single",theme:"beautify"},columnConfig:{maxFixedSize:4},cellConfig:{padding:!0},headerCellConfig:{height:"unset"},footerCellConfig:{height:"unset"},customConfig:{allowVisible:!0,allowResizable:!0,allowFixed:!0,allowSort:!0,showFooter:!0,placement:"top-right",storeOptions:{visible:!0,resizable:!0,sort:!0,fixed:!0},modalOptions:{showMaximize:!0,mask:!0,lockView:!0,resize:!0,escClosable:!0},drawerOptions:{mask:!0,lockView:!0,escClosable:!0,resize:!0}},sortConfig:{showIcon:!0,allowClear:!0,allowBtn:!0,iconLayout:"vertical"},filterConfig:{showIcon:!0},aggregateConfig:{padding:!0,rowField:"id",parentField:"_X_ROW_PARENT_KEY",childrenField:"_X_ROW_CHILDREN",mapChildrenField:"_X_ROW_CHILD_LIST",indent:20,showIcon:!0,maxGroupSize:4,showAggFuncTitle:!0},treeConfig:{padding:!0,rowField:"id",parentField:"parentId",childrenField:"children",hasChildField:"hasChild",mapChildrenField:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0,mode:"fixed"},editConfig:{showIcon:!0,showAsterisk:!0,autoFocus:!0},importConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},exportConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},printConfig:{},mouseConfig:{extension:!0},keyboardConfig:{isAll:!0,isEsc:!0},areaConfig:{autoClear:!0,selectCellByHeader:!0,selectCellByBody:!0,extendDirection:{top:!0,left:!0,bottom:!0,right:!0}},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},virtualXConfig:{gt:24,preSize:0,oSize:0},virtualYConfig:{gt:100,preSize:1,oSize:0},scrollbarConfig:{}},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,showLoading:!0,showResponseMsg:!0,showActionMsg:!0,response:{list:null,result:"result",total:"page.total",message:"message"}}},toolbar:{}});const i="vxe-table-icon-";r.c.setIcon({TABLE_SORT_ASC:i+"caret-up",TABLE_SORT_DESC:i+"caret-down",TABLE_FILTER_NONE:i+"funnel",TABLE_FILTER_MATCH:i+"funnel",TABLE_EDIT:i+"edit",TABLE_TITLE_PREFIX:i+"question-circle-fill",TABLE_TITLE_SUFFIX:i+"question-circle-fill",TABLE_TREE_LOADED:i+"spinner roll",TABLE_TREE_OPEN:i+"caret-right rotate90",TABLE_TREE_CLOSE:i+"caret-right",TABLE_EXPAND_LOADED:i+"spinner roll",TABLE_EXPAND_OPEN:i+"arrow-right rotate90",TABLE_EXPAND_CLOSE:i+"arrow-right",TABLE_CHECKBOX_CHECKED:i+"checkbox-checked-fill",TABLE_CHECKBOX_UNCHECKED:i+"checkbox-unchecked",TABLE_CHECKBOX_INDETERMINATE:i+"checkbox-indeterminate-fill",TABLE_CHECKBOX_DISABLED_UNCHECKED:i+"checkbox-unchecked-fill",TABLE_RADIO_CHECKED:i+"radio-checked-fill",TABLE_RADIO_UNCHECKED:i+"radio-unchecked",TABLE_RADIO_DISABLED_UNCHECKED:i+"radio-unchecked-fill",TABLE_CUSTOM_SORT:i+"drag-handle",TABLE_MENU_OPTIONS:i+"arrow-right",TABLE_DRAG_ROW:i+"drag-handle",TABLE_DRAG_COLUMN:i+"drag-handle",TABLE_DRAG_STATUS_ROW:i+"sort",TABLE_DRAG_STATUS_SUB_ROW:i+"add-sub",TABLE_DRAG_STATUS_AGG_GROUP:i+"grouping",TABLE_DRAG_STATUS_AGG_VALUES:i+"values",TABLE_DRAG_STATUS_COLUMN:i+"swap",TABLE_DRAG_DISABLED:i+"no-drop",TABLE_ROW_GROUP_OPEN:i+"arrow-right rotate90",TABLE_ROW_GROUP_CLOSE:i+"arrow-right",TABLE_AGGREGATE_GROUPING:i+"grouping",TABLE_AGGREGATE_VALUES:i+"values",TABLE_AGGREGATE_SORT:i+"drag-handle",TABLE_AGGREGATE_DELETE:i+"close",TOOLBAR_TOOLS_REFRESH:i+"repeat",TOOLBAR_TOOLS_REFRESH_LOADING:i+"repeat roll",TOOLBAR_TOOLS_IMPORT:i+"upload",TOOLBAR_TOOLS_EXPORT:i+"download",TOOLBAR_TOOLS_PRINT:i+"print",TOOLBAR_TOOLS_FULLSCREEN:i+"fullscreen",TOOLBAR_TOOLS_MINIMIZE:i+"minimize",TOOLBAR_TOOLS_CUSTOM:i+"custom-column",TOOLBAR_TOOLS_FIXED_LEFT:i+"fixed-left",TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:i+"fixed-left-fill",TOOLBAR_TOOLS_FIXED_RIGHT:i+"fixed-right",TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:i+"fixed-right-fill"});const s=r.c.setTheme,a=r.c.getTheme,c=r.c.setConfig,d=r.c.getConfig,u=r.c.setIcon,p=r.c.getIcon,h=r.c.setLanguage,g=r.c.setI18n,m=r.c.getI18n,f=r.c.globalEvents,b=r.c.globalResize,x=r.c.renderer,v=r.c.validators,C=r.c.menus,w=r.c.formats,O=r.c.commands,E=r.c.interceptor,y=r.c.clipboard,T=r.c.log,R=r.c.use,S=e=>r.c.setConfig(e);r.c.setup=S;const j=e=>r.c.setConfig(e);r.c.config=j;const D=(e,t)=>r.c.getI18n(e,t);r.c.t=D;const F=(e,t)=>Object(l.d)(e,t);r.c._t=F;const $=r.c,k=e=>r.c.saveFile(e),M=e=>r.c.readFile(e),A=e=>r.c.print(e),I={get:e=>r.c.modal.get(e),close:e=>r.c.modal.close(e),open:e=>r.c.modal.open(e),alert:(e,t,o)=>r.c.modal.alert(e,t,o),confirm:(e,t,o)=>r.c.modal.confirm(e,t,o),message:(e,t)=>r.c.modal.message(e,t),notification:(e,t,o)=>r.c.modal.notification(e,t,o)};r.c},283:function(e,t,o){"use strict";o.d(t,"h",(function(){return s})),o.d(t,"g",(function(){return a})),o.d(t,"j",(function(){return c})),o.d(t,"i",(function(){return d})),o.d(t,"e",(function(){return u})),o.d(t,"f",(function(){return p})),o.d(t,"d",(function(){return h})),o.d(t,"b",(function(){return g})),o.d(t,"a",(function(){return m})),o.d(t,"c",(function(){return f}));var r=o(278),l=o.n(r),n=o(279),i=o(384);function s(e){return e&&!1!==e.enabled}function a(e){return null==e||""===e}function c(e){const t=e.name,o=l.a.lastIndexOf(t,"."),r=t.substring(o+1,t.length).toLowerCase();return{filename:t.substring(0,o),type:r}}function d(){return i.a.getNext()}function u(){return i.a.getCurrent()}function p(e){return e&&e.children&&e.children.length>0}function h(e,t){if(e){const o=n.c.getConfig().translate;return l.a.toValueString(o?o(""+e,t):e)}return""}function g(e,t){return""+(a(e)?t?n.c.getConfig().emptyCell:"":e)}function m(e){return""===e||l.a.eqNull(e)}function f(e,t){return e?l.a.isFunction(e)?e(t):e:""}},286:function(e,t,o){"use strict";o.d(t,"j",(function(){return s})),o.d(t,"g",(function(){return a})),o.d(t,"k",(function(){return d})),o.d(t,"l",(function(){return u})),o.d(t,"h",(function(){return p})),o.d(t,"n",(function(){return h})),o.d(t,"a",(function(){return g})),o.d(t,"i",(function(){return m})),o.d(t,"r",(function(){return f})),o.d(t,"m",(function(){return b})),o.d(t,"c",(function(){return x})),o.d(t,"e",(function(){return v})),o.d(t,"f",(function(){return C})),o.d(t,"q",(function(){return w})),o.d(t,"p",(function(){return O})),o.d(t,"t",(function(){return E})),o.d(t,"d",(function(){return y})),o.d(t,"b",(function(){return T})),o.d(t,"o",(function(){return R})),o.d(t,"s",(function(){return S}));var r=o(278),l=o.n(r);const n={};let i;function s(){return i||(i=new Image,i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),i}function a(){return i||s()}function c(e){return n[e]||(n[e]=new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g")),n[e]}function d(e){return e&&/^\d+(px)?$/.test(e)}function u(e){return e&&/^\d+%$/.test(e)}function p(e,t){return!!(e&&e.className&&e.className.match&&e.className.match(c(t)))}function h(e,t){e&&p(e,t)&&(e.className=e.className.replace(c(t),""))}function g(e,t){e&&!p(e,t)&&(h(e,t),e.className=`${e.className} ${t}`)}function m(e){return e.ctrlKey||e.metaKey}function f(e,t="px"){return l.a.isNumber(e)||/^\d+$/.test(""+e)?`${e}${t}`:""+(e||"")}function b(e,t){return e?e.querySelector(t):null}function x(){const e=document.documentElement,t=document.body;return{scrollTop:e.scrollTop||t.scrollTop,scrollLeft:e.scrollLeft||t.scrollLeft,visibleHeight:e.clientHeight||t.clientHeight,visibleWidth:e.clientWidth||t.clientWidth}}function v(e){return e?e.offsetHeight:0}function C(e){if(e){const t=getComputedStyle(e);return l.a.toNumber(t.paddingTop)+l.a.toNumber(t.paddingBottom)}return 0}function w(e,t){e&&(e.scrollTop=t)}function O(e,t){e&&(e.scrollLeft=t)}function E(e,t){const o="html"===t.type?e.innerText:e.textContent;e.getAttribute("title")!==o&&e.setAttribute("title",o)}function y(e,t,o,r){let l,n=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;for(;n&&n.nodeType&&n!==document;){if(o&&p(n,o)&&(!r||r(n)))l=n;else if(n===t)return{flag:!o||!!l,container:t,targetElem:l};n=n.parentNode}return{flag:!1}}function T(e){const t=e.getBoundingClientRect(),o=t.top,r=t.left,{scrollTop:l,scrollLeft:n,visibleHeight:i,visibleWidth:s}=x();return{boundingTop:o,top:l+o,boundingLeft:r,left:n+r,visibleHeight:i,visibleWidth:s}}function R(e){e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView&&e.scrollIntoView())}function S(e,t){e&&e.dispatchEvent(new Event(t))}},287:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return i}));var r=o(279);const{log:l}=r.c,n=l.create("warn","table v3.16.5"),i=l.create("error","table v3.16.5")},291:function(e,t,o){"use strict";o.d(t,"e",(function(){return h})),o.d(t,"x",(function(){return g})),o.d(t,"B",(function(){return m})),o.d(t,"q",(function(){return f})),o.d(t,"v",(function(){return b})),o.d(t,"s",(function(){return x})),o.d(t,"r",(function(){return v})),o.d(t,"h",(function(){return C})),o.d(t,"g",(function(){return w})),o.d(t,"j",(function(){return D})),o.d(t,"t",(function(){return F})),o.d(t,"u",(function(){return $})),o.d(t,"k",(function(){return k})),o.d(t,"a",(function(){return M})),o.d(t,"i",(function(){return A})),o.d(t,"p",(function(){return I})),o.d(t,"A",(function(){return L})),o.d(t,"m",(function(){return _})),o.d(t,"n",(function(){return H})),o.d(t,"b",(function(){return P})),o.d(t,"l",(function(){return z})),o.d(t,"z",(function(){return N})),o.d(t,"o",(function(){return V})),o.d(t,"c",(function(){return W})),o.d(t,"w",(function(){return G})),o.d(t,"f",(function(){return q})),o.d(t,"y",(function(){return X})),o.d(t,"d",(function(){return Y}));var r=o(278),l=o.n(r),n=o(282),i=o(283),s=o(287);const{getI18n:a,formats:c}=n.b;class d{constructor(e,t,{renderHeader:o,renderCell:r,renderFooter:n,renderData:i}={}){const a=e,d=e.$xeGrid,{field:u,editRender:p}=t,h=d?d.computeProxyOpts:null,g=t.formatter,m=!l.a.isBoolean(t.visible)||t.visible,f=["seq","checkbox","radio","expand","html"];if(t.type&&-1===f.indexOf(t.type)&&Object(s.b)("vxe.error.errProp",["type="+t.type,f.join(", ")]),(l.a.isBoolean(t.cellRender)||t.cellRender&&!l.a.isObject(t.cellRender))&&Object(s.b)("vxe.error.errProp",["column.cell-render="+t.cellRender,"column.cell-render={}"]),(l.a.isBoolean(t.editRender)||t.editRender&&!l.a.isObject(t.editRender))&&Object(s.b)("vxe.error.errProp",["column.edit-render="+t.editRender,"column.edit-render={}"]),"expand"===t.type){const{treeConfig:t}=a;t&&(e.treeOpts.showLine||e.treeOpts.line)&&Object(s.a)("vxe.error.errConflicts",["tree-config.line","column.type=expand"])}if(t.remoteSort&&Object(s.b)("vxe.error.delProp",["column.remote-sort","sort-config.remote"]),t.sortMethod&&Object(s.b)("vxe.error.delProp",["column.sort-method","sort-config.sortMethod"]),g)if(l.a.isString(g)){const e=c.get(g)||l.a[g];e&&l.a.isFunction(e.tableCellFormatMethod||e.cellFormatMethod)||Object(s.a)("vxe.error.notFormats",[g])}else if(l.a.isArray(g)){const e=c.get(g[0])||l.a[g[0]];e&&l.a.isFunction(e.tableCellFormatMethod||e.cellFormatMethod)||Object(s.a)("vxe.error.notFormats",[g[0]])}t.aggFunc&&(e.handlePivotTableAggregateData||!0===t.aggFunc||Object(s.a)("vxe.error.errProp",["column.agg-func="+t.aggFunc,"column.agg-func=true"])),u&&p&&(p.startField&&(""+p.startField).indexOf(u)>=0&&Object(s.a)("vxe.error.modelConflicts",["field="+u,"edit-render.startField="+p.startField]),p.endField&&(""+p.endField).indexOf(u)>=0&&Object(s.a)("vxe.error.modelConflicts",["field="+u,"edit-render.endField="+p.endField])),Object.assign(this,{type:t.type,property:t.field,field:u,title:t.title,width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,resizable:t.resizable,fixed:t.fixed,align:t.align,headerAlign:t.headerAlign,footerAlign:t.footerAlign,showOverflow:t.showOverflow,showHeaderOverflow:t.showHeaderOverflow,showFooterOverflow:t.showFooterOverflow,className:t.className,headerClassName:t.headerClassName,footerClassName:t.footerClassName,formatter:g,footerFormatter:t.footerFormatter,padding:t.padding,verticalAlign:t.verticalAlign,sortable:t.sortable,sortBy:t.sortBy,sortType:t.sortType,sortMethod:t.sortMethod,remoteSort:t.remoteSort,filters:L(t.filters),filterMultiple:!l.a.isBoolean(t.filterMultiple)||t.filterMultiple,filterMethod:t.filterMethod,filterResetMethod:t.filterResetMethod,filterRecoverMethod:t.filterRecoverMethod,filterRender:t.filterRender,rowGroupNode:t.rowGroupNode,treeNode:t.treeNode,dragSort:t.dragSort,rowResize:t.rowResize,cellType:t.cellType,cellRender:t.cellRender,editRender:p,contentRender:t.contentRender,headerExportMethod:t.headerExportMethod,exportMethod:t.exportMethod,footerExportMethod:t.footerExportMethod,titleHelp:t.titleHelp,titlePrefix:t.titlePrefix,titleSuffix:t.titleSuffix,aggFunc:t.aggFunc,params:t.params,id:t.colId||l.a.uniqueId("col_"),parentId:null,visible:m,halfVisible:!1,defaultVisible:m,defaultFixed:t.fixed,defaultAggFunc:t.aggFunc,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderAggFn:"",renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:o||t.renderHeader,renderCell:r||t.renderCell,renderFooter:n||t.renderFooter,renderData:i,slots:t.slots}),h&&h.beforeColumn&&h.beforeColumn({$grid:d,column:this})}getTitle(){return Object(i.d)(this.title||("seq"===this.type?a("vxe.table.seqTitle"):""))}getKey(){const{type:e}=this;return this.field||(e?"type="+e:null)}update(e,t){"filters"!==e&&("field"===e&&(this.property=t),this[e]=t)}}var u=o(286);const p=(e,t)=>{const o=[];return e.forEach(e=>{e.parentId=t?t.id:null,e.visible&&(e.children&&e.children.length&&e.children.some(e=>e.visible)?(o.push(e),o.push(...p(e.children,e))):o.push(e))}),o},h=e=>{let t=1;const o=(e,r)=>{if(r&&(e.level=r.level+1,t<e.level&&(t=e.level)),e.children&&e.children.length&&e.children.some(e=>e.visible)){let t=0;e.children.forEach(r=>{r.visible&&(o(r,e),t+=r.colSpan)}),e.colSpan=t}else e.colSpan=1};e.forEach(e=>{e.level=1,o(e)});const r=[];for(let e=0;e<t;e++)r.push([]);return p(e).forEach(e=>{e.children&&e.children.length&&e.children.some(e=>e.visible)?e.rowSpan=1:e.rowSpan=t-e.level+1,r[e.level-1].push(e)}),r};function g(e,t,o){const r=e;return t||o?(r.intoRunScroll=!1,r.inVirtualScroll=!1,r.inWheelScroll=!1,r.inHeaderScroll=!1,r.inBodyScroll=!1,r.inFooterScroll=!1,r.scrollRenderType="",e.scrollTo(t,o)):e.clearScroll()}function m(e){return e.map((e,t)=>t%2==0?Number(e)+1:".").join("")}function f(){return l.a.uniqueId("row_")}function b(e){return e.indexOf(".")>-1}function x(e){const t=e,{currKeyField:o}=t;return o}function v(e,t){const o=e,{isCurrDeepKey:r,currKeyField:l}=o;return t?O((r?E:T)(t,l)):""}function C(e){const t=e,{isCurrDeepKey:o,currKeyField:r}=t,l=o?y:R;return{rowKey:r,handleUpdateRowId:e=>e?l(e,r):""}}function w(e){const t=e,{isCurrDeepKey:o,currKeyField:r}=t,l=o?E:T;return{rowKey:r,handleGetRowId:e=>e?O(l(e,r)):""}}function O(e){return l.a.eqNull(e)?"":encodeURIComponent(e)}function E(e,t){return l.a.get(e,t)}function y(e,t){let o=O(E(e,t));return Object(i.a)(o)&&(o=f(),l.a.set(e,t,o)),o}function T(e,t){return e[t]}function R(e,t){let o=O(T(e,t));return Object(i.a)(o)&&(o=f(),e[t]=o),o}function S(e){if(e){const t=getComputedStyle(e);return l.a.toNumber(t.paddingLeft)+l.a.toNumber(t.paddingRight)}return 0}function j(e){if(e){const t=getComputedStyle(e),o=l.a.toNumber(t.marginLeft),r=l.a.toNumber(t.marginRight);return e.offsetWidth+o+r}return 0}function D(e){return"unset"===e?0:e||0}function F(e,t){return t?l.a.isString(t)||l.a.isNumber(t)?e.getColumnByField(""+t):t:null}function $(e,t){if(t){const o=l.a.isString(t)||l.a.isNumber(t)?t:v(e,t);return e.getRowById(o)}return null}function k(e,t,o,r){return e.resizeHeight||t.height||o.height||e.height||r}function M(e){const t=e.$xeTable,o=t,{staticColumns:r}=o,{$el:n,$xeColumn:i,columnConfig:a}=e,c=i?i.columnConfig:null;c?("vxe-table-column"===i.$options._componentTag?Object(s.a)("vxe.error.groupTag",[`<vxe-table-colgroup title=${i.title} ...>`,`<vxe-table-column title=${i.title} ...>`]):"vxe-column"===i.$options._componentTag&&Object(s.b)("vxe.error.groupTag",[`<vxe-colgroup title=${i.title} ...>`,`<vxe-column title=${i.title} ...>`]),c.children||(c.children=[]),c.children.splice(l.a.arrayIndexOf(i.$el.children,n),0,a)):r.splice(l.a.arrayIndexOf(t.$refs.hideColumn.children,n),0,a)}function A(e){const t=e.$xeTable,{staticColumns:o}=t,{columnConfig:r}=e,n=l.a.findTree(o,e=>e===r);n&&n.items.splice(n.index,1)}function I(e,t){const o=e,{fullColumnIdData:r}=o;if(!t)return null;let l=t.parentId;for(;r[l];){const e=r[l].column;if(l=e.parentId,!l)return e}return t}function L(e){return e&&l.a.isArray(e)?e.map(({label:e,value:t,data:o,resetValue:r,checked:l})=>({label:e,value:t,data:o,resetValue:r,checked:!!l,_checked:!!l})):e}function _(e){const{$table:t,column:o,cell:r}=e,n=t,{showHeaderOverflow:i,resizableOpts:s}=t,{minWidth:a}=s;if(a){const t=l.a.isFunction(a)?a(e):a;if("auto"!==t)return Math.max(1,l.a.toNumber(t))}const{elemStore:c}=n,{showHeaderOverflow:d,minWidth:p}=o,h=l.a.isUndefined(d)||l.a.isNull(d)?i:d,g="title"===h||(!0===h||"tooltip"===h)||"ellipsis"===h;let m=l.a.floor(1.8*(l.a.toNumber(getComputedStyle(r).fontSize)||14))+(S(r)+S(Object(u.m)(r,".vxe-cell")));if(g){const e=j(Object(u.m)(r,".vxe-cell--drag-handle")),t=j(Object(u.m)(r,".vxe-cell--checkbox")),o=j(Object(u.m)(r,".vxe-cell--required-icon")),l=j(Object(u.m)(r,".vxe-cell--edit-icon")),n=j(Object(u.m)(r,".vxe-cell-title-prefix-icon")),i=j(Object(u.m)(r,".vxe-cell-title-suffix-icon")),s=j(Object(u.m)(r,".vxe-cell--sort"));m+=e+t+o+l+n+i+j(Object(u.m)(r,".vxe-cell--filter"))+s}if(p){const e=V(c["main-body-scroll"]);if(e){if(Object(u.l)(p)){const t=(e.clientWidth-1)/100;return Math.max(m,Math.floor(l.a.toInteger(p)*t))}if(Object(u.k)(p))return Math.max(m,l.a.toInteger(p))}}return m}const B={mini:3,small:2,medium:1,large:0};function H(e){const t=e.computeSize;return t&&B[t]||0}function P(e,t){const{$table:o,row:r}=e,l=o,n=o,i=o,{showOverflow:s}=l,{scrollYLoad:a}=n,{fullAllDataRowIdData:c}=i,d=o.computeRowOpts,u=o.computeCellOpts,p=o.computeDefaultRowHeight,h=c[v(o,r)],g=h.resizeHeight||u.height||d.height||h.height||p;let m=1;t&&(m=function e(t,o){let r=1;if(!t)return r;const{$table:l}=o,n=l,{treeExpandedFlag:i}=n,s=l,{treeExpandedMaps:a}=s,c=l.computeTreeOpts,{transform:d,mapChildrenField:u}=c,p=c.children||c.childrenField,h=t[d?u:p];if(h&&i&&a[v(l,t)])for(let t=0;t<h.length;t++)r+=e(h[t],o);return r}(t,e));let f=g;const b=h.height;return a&&(s||(f=b||g)),f*m-(t?1:12-H(o))}function z(e,t){return l.a.get(e,t.field)}function N(e,t,o){return l.a.set(e,t.field,o)}function V(e){return e?e.$el||e:null}function W(e){return e.clearFilter&&e.clearFilter(),function(e){return e.initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearEdit&&e.clearEdit(),e.clearSelected&&(e.keyboardConfig||e.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&e.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll()}(e)}function G(e){return e instanceof d}function q(e,t,o){return G(t)?t:new d(e,t,o)}function X(e,t){const o=e,r=e,l=e,{showOverflow:n}=o,{scrollYLoad:i,scrollYTop:s}=r,{elemStore:a,afterFullData:c,fullAllDataRowIdData:d,isResizeCellHeight:u}=l,p=e.computeRowOpts,h=e.computeCellOpts,g=e.computeDefaultRowHeight,m=e.computeLeftFixedWidth,f=e.computeRightFixedWidth,b=V(a["main-body-scroll"]),x=v(e,t);if(b){const o=b.clientHeight,r=b.scrollTop,l=b.querySelector(`[rowid="${x}"]`);if(l){const t=l.offsetTop+(i?s:0),n=l.clientHeight;if(t<r||t>r+o)return e.scrollTo(null,t);if(t+n>=o+r)return e.scrollTo(null,r+n)}else if(i){if(!(u||h.height||p.height)&&n)return e.scrollTo(null,(e.findRowIndexOf(c,t)-1)*g);let l=0;const i=d[x],s=i.resizeHeight||h.height||p.height||i.height||g;for(let o=0;o<c.length;o++){const r=c[o],n=v(e,r);if(r===t||n===x)break;const i=d[n];l+=i.resizeHeight||h.height||p.height||i.height||g}return l<r?e.scrollTo(null,l-m-1):e.scrollTo(null,l+s-(o-f-1))}}return Promise.resolve()}function Y(e,t,o){const r=e,l=e,{scrollXLoad:n,scrollXLeft:i}=r,{elemStore:s,visibleColumn:a}=l,c=e.computeLeftFixedWidth,d=e.computeRightFixedWidth,u=V(s["main-body-scroll"]);if(t.fixed)return Promise.resolve();if(u){const r=u.clientWidth,l=u.scrollLeft;let s=null;if(o){const r=v(e,o);s=u.querySelector(`[rowid="${r}"] .${t.id}`)}if(s||(s=u.querySelector("."+t.id)),s){const t=s.offsetLeft+(n?i:0),o=s.clientWidth;if(t<l+c)return e.scrollTo(t-c-1);if(t+o-l>r-d)return e.scrollTo(t+o-(r-d-1))}else if(n){let o=0;const n=t.renderWidth;for(let e=0;e<a.length;e++){const r=a[e];if(r===t||r.id===t.id)break;o+=r.renderWidth}return o<l?e.scrollTo(o-c-1):e.scrollTo(o+n-(r-d-1))}}return Promise.resolve()}},308:function(e,t,o){"use strict";o.d(t,"b",(function(){return R})),o.d(t,"a",(function(){return S}));var r=o(282),l=(o(360),o(278)),n=o.n(l),i=o(283),s=o(286),a=o(463),c=o(462),d=o(461),u=o(315),p=o(287);const{getConfig:h,getI18n:g,commands:m,globalEvents:f,globalMixins:b,createEvent:x,GLOBAL_EVENT_KEYS:v,renderEmptyElement:C}=r.b,w={},O=Object.keys(d.a),E=[["Form"],["Toolbar","Top","Table","Bottom","Pager"]];function y(e){const{$listeners:t,proxyConfig:o,proxyOpts:r}=e,l={};return n.a.each(t,(t,o)=>{l[o]=(...t)=>{e.$emit(o,...t)}}),o&&(r.sort&&(l["sort-change"]=e.sortChangeEvent),r.filter&&(l["filter-change"]=e.filterChangeEvent)),l}n.a.each(a.a.methods,(e,t)=>{w[t]=function(...e){const o=this.$refs.refTable;return o&&o[t](...e)}});var T={name:"VxeGrid",mixins:[b.sizeMixin],props:Object.assign(Object.assign({round:{type:Boolean,default:()=>h().table.round},height:[Number,String],minHeight:{type:[Number,String],default:()=>h().table.minHeight},maxHeight:[Number,String],seqConfig:Object,sortConfig:Object,filterConfig:Object,editConfig:[Boolean,Object],loading:Boolean,validConfig:Object,editRules:Object,animat:{type:Boolean,default:()=>h().table.animat}},d.a),{layouts:Array,columns:Array,pagerConfig:Object,proxyConfig:Object,toolbarConfig:Object,formConfig:Object,zoomConfig:Object,size:{type:String,default:()=>h().grid.size||h().size}}),provide(){return{$xeGrid:this}},data(){var e;return{xID:n.a.uniqueId(),reactData:{tableLoading:!1,proxyInited:!1,isZMax:!1,tableData:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:(null===(e=h().pager)||void 0===e?void 0:e.pageSize)||10,currentPage:1}}}},computed:Object.assign(Object.assign({},{}),{isRespMsg(){return this.computeIsRespMsg},computeIsRespMsg(){const e=this.computeProxyOpts;return!!(n.a.isBoolean(e.message)?e.message:e.showResponseMsg)},isActiveMsg(){return this.computeIsActiveMsg},computeIsActiveMsg(){const e=this.computeProxyOpts;return n.a.isBoolean(e.showActionMsg)?e.showActionMsg:!!e.showActiveMsg},proxyOpts(){return this.computeProxyOpts},computeProxyOpts(){return n.a.merge({},n.a.clone(h().grid.proxyConfig,!0),this.proxyConfig)},pagerOpts(){return this.computePagerOpts},computePagerOpts(){return Object.assign({},h().grid.pagerConfig,this.pagerConfig)},formOpts(){return this.computeFormOpts},computeFormOpts(){return Object.assign({},h().grid.formConfig,this.formConfig)},toolbarOpts(){return this.computeToolbarOpts},computeToolbarOpts(){return Object.assign({},h().grid.toolbarConfig,this.toolbarConfig)},zoomOpts(){return this.computeZoomOpts},computeZoomOpts(){return Object.assign({},h().grid.zoomConfig,this.zoomConfig)},computeStyles(){const e=this.reactData,{height:t,maxHeight:o}=this,{isZMax:r,tZindex:l}=e,n={};return r?n.zIndex=l:(t&&(n.height="auto"===t||"100%"===t?"100%":Object(s.r)(t)),o&&(n.maxHeight="auto"===o||"100%"===o?"100%":Object(s.r)(o))),n},computeTableExtendProps(){const e={},t=this;return O.forEach(o=>{e[o]=t[o]}),e},computeTableProps(){const e=this.reactData,{seqConfig:t,pagerConfig:o,editConfig:r,proxyConfig:l}=this,{isZMax:n,tablePage:s}=e,a=this.computeTableExtendProps,c=this.computeProxyOpts,d=this.computePagerOpts,u=this.computeIsLoading,p=Object.assign({},a);return n&&(a.maxHeight?p.maxHeight="100%":p.height="100%"),l&&Object(i.h)(c)&&(p.loading=u,o&&c.seq&&Object(i.h)(d)&&(p.seqConfig=Object.assign({},t,{startIndex:(s.currentPage-1)*s.pageSize}))),r&&(p.editConfig=Object.assign({},r)),p},tableProps(){return this.computeTableProps},computeCurrLayoutConf(){const{layouts:e}=this;let t=[];t=e&&e.length?e:h().grid.layouts||E;let o=[],r=[],l=[];return t.length&&(n.a.isArray(t[0])?(o=t[0],r=t[1]||[],l=t[2]||[]):r=t),{headKeys:o,bodyKeys:r,footKeys:l}},computeCustomCurrentPageFlag(){return this.computePagerOpts.currentPage},computeCustomPageSizeFlag(){return this.computePagerOpts.pageSize},computeCustomTotalFlag(){return this.computePagerOpts.total},computeIsLoading(){const e=this.reactData,{loading:t,proxyConfig:o}=this,{tableLoading:r}=e,l=this.computeProxyOpts,{showLoading:n}=l;return t||r&&n&&o&&Object(i.h)(l)}}),watch:{columns(e){const t=this;t.$nextTick(()=>t.loadColumn(e))},toolbar(e){e&&this.initToolbar()},toolbarConfig(e){e&&this.initToolbar()},proxyConfig(){this.initProxy()},computeCustomCurrentPageFlag(){this.initPages("currentPage")},computeCustomPageSizeFlag(){this.initPages("pageSize")},computeCustomTotalFlag(){this.initPages("total")}},methods:Object.assign(Object.assign({},w),{dispatchEvent(e,t,o){this.$emit(e,x(o,{$grid:this},t))},initPages(e){const t=this.reactData,{tablePage:o}=t,{pagerConfig:r}=this,l=this.computePagerOpts;if(r&&Object(i.h)(l))if(e)l[e]&&(o[e]=n.a.toNumber(l[e]));else{const{currentPage:e,pageSize:t,total:r}=l;e&&(o.currentPage=e),t&&(o.pageSize=t),r&&(o.pageSize=r)}},callSlot(e,t,o,r){const l=this.$scopedSlots;return e&&(n.a.isString(e)&&(e=l[e]||null),n.a.isFunction(e))?Object(u.d)(e.call(this,t,o,r)):[]},getEl(){return this.$refs.refElem},getExcludeHeight(){const e=this,t=e.reactData,{isZMax:o}=t,r=e.$refs.refElem;if(r){const t=e.$refs.refFormWrapper,l=e.$refs.refToolbarWrapper,n=e.$refs.refTopWrapper,i=e.$refs.refBottomWrapper,a=e.$refs.refPagerWrapper,c=r.parentElement;return(o?0:c?Object(s.f)(c):0)+Object(s.f)(r)+Object(s.e)(t)+Object(s.e)(l)+Object(s.e)(n)+Object(s.e)(i)+Object(s.e)(a)}return 0},getParentHeight(){const e=this,t=e.reactData,o=e.$refs.refElem;if(o){const r=o.parentElement;return(t.isZMax?Object(s.c)().visibleHeight:r?n.a.toNumber(getComputedStyle(r).height):0)-e.getExcludeHeight()}return 0},initToolbar(){const e=this;e.$nextTick(()=>{const t=e.$refs.refTable,o=e.$refs.refToolbar;t&&o&&t.connect(o)})},getDefaultFormData(){const e=this.computeFormOpts;if(e.items){const t={};return e.items.forEach(e=>{const{field:o,itemRender:r}=e;if(o){let l=null;if(r){const{defaultValue:t}=r;n.a.isFunction(t)?l=t({item:e}):n.a.isUndefined(t)||(l=t)}t[o]=l}}),t}return{}},initProxy(){const e=this,t=e,o=e.reactData,{proxyConfig:r,formConfig:l}=t,{proxyInited:n}=o,s=e.computeProxyOpts,a=e.computeFormOpts;r&&(Object(i.h)(l)&&s.form&&a.items&&(o.formData=e.getDefaultFormData()),n||!1===s.autoLoad||(o.proxyInited=!0,e.$nextTick().then(()=>e.commitProxy("initial")).then(t=>{e.dispatchEvent("proxy-query",Object.assign(Object.assign({},t),{isInited:!0}),new Event("initial"))})))},handleGlobalKeydownEvent(e){const t=this,o=t.reactData,r=t.computeZoomOpts;f.hasKey(e,v.ESCAPE)&&o.isZMax&&!1!==r.escRestore&&t.triggerZoomEvent(e)},getRespMsg(e,t){const o=this,r=o.computeProxyOpts,l=(r.response||r.props||{}).message;let i;return e&&l&&(i=n.a.isFunction(l)?l({data:e,$grid:o}):n.a.get(e,l)),i||g(t)},handleDeleteRow(e,t,o){const l=this.computeIsActiveMsg,n=this.getCheckboxRecords();if(l)if(n.length){if(r.b.modal)return r.b.modal.confirm({id:"cfm_"+e,content:g(t),escClosable:!0}).then(e=>{if("confirm"===e)return o()})}else r.b.modal&&r.b.modal.message({id:"msg_"+e,content:g("vxe.grid.selectOneRecord"),status:"warning"});else n.length&&o();return Promise.resolve()},triggerPendingEvent(e){const t=this,o=t.computeIsActiveMsg,l=t.$refs.refTable,n=l.getCheckboxRecords();n.length?(l.togglePendingRow(n),t.clearCheckboxRow()):o&&r.b.modal&&r.b.modal.message({id:e,content:g("vxe.grid.selectOneRecord"),status:"warning"})},commitProxy(e,...t){const o=this,l=o,s=o.reactData,a=l.toolbar,{proxyConfig:c,toolbarConfig:d,pagerConfig:u,editRules:h,validConfig:f}=l,{tablePage:b}=s,x=o.computeIsActiveMsg,v=o.computeIsRespMsg,C=o.computeProxyOpts,w=o.computePagerOpts,O=o.computeToolbarOpts,{beforeQuery:E,afterQuery:y,beforeDelete:T,afterDelete:R,beforeSave:S,afterSave:j,ajax:D={}}=C,F=C.response||C.props||{},$=o.$refs.refTable;let k=o.getFormData(),M=null,A=null;if(n.a.isString(e)){const{buttons:t}=O,o=(d||a)&&Object(i.h)(O)&&t?n.a.findTree(t,t=>t.code===e,{children:"dropdowns"}):null;M=o?o.item:null,A=e}else M=e,A=M.code;const I=M?M.params:null;switch(A){case"insert":return $.insert({});case"insert_edit":case"insert_actived":return $.insert({}).then(({row:e})=>$.setEditRow(e,!0));case"mark_cancel":o.triggerPendingEvent(A);break;case"remove":return o.handleDeleteRow(A,"vxe.grid.removeSelectRecord",()=>$.removeCheckboxRow());case"import":$.importData(I);break;case"open_import":$.openImport(I);break;case"export":$.exportData(I);break;case"open_export":$.openExport(I);break;case"reset_custom":$.resetCustom(!0);break;case"initial":case"reload":case"query":{const e=D.query,r=D.querySuccess,l=D.queryError;if(e){const a="initial"===A,d="reload"===A;if(!a&&s.tableLoading)return o.$nextTick();let p=[],h=[],g={};if(u&&((a||d)&&(b.currentPage=1),Object(i.h)(u)&&(g=Object.assign({},b))),a){if(c&&Object(i.h)(C)&&C.form&&(k=o.getDefaultFormData(),s.formData=k),$){const e=$,{tableFullColumn:t,fullColumnFieldData:o}=e;let r=$.computeSortOpts.defaultSort;t.forEach(e=>{e.order=null}),r&&(n.a.isArray(r)||(r=[r]),p=r.map(e=>{const{field:t,order:r}=e,l=o[t];if(l){const e=l.column;e&&(e.order=r)}return{field:t,property:t,order:r}})),h=$.getCheckedFilters()}}else $&&(d?$.clearAll():(p=$.getSortColumns(),h=$.getCheckedFilters()));const m={code:A,button:M,isInited:a,isReload:d,$grid:o,page:g,sort:p.length?p[0]:{},sorts:p,filters:h,form:k,options:e};s.sortData=p,s.filterData=h,s.tableLoading=!0;const f=[m].concat(t);return Promise.resolve((E||e)(...f)).then(e=>{let t=[];if(s.tableLoading=!1,e)if(u&&Object(i.h)(w)){const r=F.total,l=(n.a.isFunction(r)?r({data:e,$grid:o}):n.a.get(e,r||"page.total"))||0;b.total=n.a.toNumber(l);const i=F.result;t=(n.a.isFunction(i)?i({data:e,$grid:o}):n.a.get(e,i||"result"))||[];const s=Math.max(Math.ceil(l/b.pageSize),1);b.currentPage>s&&(b.currentPage=s)}else{const r=F.list;t=(r?n.a.isFunction(r)?r({data:e,$grid:o}):n.a.get(e,r):e)||[]}return $?$.loadData(t):$.$nextTick(()=>{$&&$.loadData(t)}),y&&y(...f),r&&r(Object.assign(Object.assign({},m),{response:e})),{status:!0}}).catch(e=>(s.tableLoading=!1,l&&l(Object.assign(Object.assign({},m),{response:e})),{status:!1}))}Object(p.a)("vxe.error.notFunc",["proxy-config.ajax.query"]);break}case"delete":{const e=D.delete,l=D.deleteSuccess,n=D.deleteError;if(e){const i=$.getCheckboxRecords(),a=i.filter(e=>!$.isInsertByRow(e)),c={$grid:o,code:A,button:M,body:{removeRecords:a},form:k,options:e},d=[c].concat(t);if(i.length)return o.handleDeleteRow(A,"vxe.grid.deleteSelectRecord",()=>a.length?(s.tableLoading=!0,Promise.resolve((T||e)(...d)).then(e=>(s.tableLoading=!1,$.setPendingRow(a,!1),v&&(r.b.modal||Object(p.a)("vxe.error.reqModule",["Modal"]),r.b.modal.message({content:o.getRespMsg(e,"vxe.grid.delSuccess"),status:"success"})),R?R(...d):o.commitProxy("query"),l&&l(Object.assign(Object.assign({},c),{response:e})),{status:!0})).catch(e=>(s.tableLoading=!1,v&&(r.b.modal||Object(p.a)("vxe.error.reqModule",["Modal"]),r.b.modal.message({id:A,content:o.getRespMsg(e,"vxe.grid.operError"),status:"error"})),n&&n(Object.assign(Object.assign({},c),{response:e})),{status:!1}))):$.remove(i));x&&(r.b.modal||Object(p.a)("vxe.error.reqModule",["Modal"]),r.b.modal.message({id:A,content:g("vxe.grid.selectOneRecord"),status:"warning"}))}else Object(p.a)("vxe.error.notFunc",["proxy-config.ajax.delete"]);break}case"save":{const e=D.save,l=D.saveSuccess,n=D.saveError;if(e){const i=o.getRecordset(),{insertRecords:a,removeRecords:c,updateRecords:d,pendingRecords:u}=i,m={$grid:o,code:A,button:M,body:i,form:k,options:e},b=[m].concat(t);a.length&&(i.pendingRecords=u.filter(e=>-1===a.indexOf(e))),u.length&&(i.insertRecords=a.filter(e=>-1===u.indexOf(e)));let C=Promise.resolve();return h&&(C=o[f&&"full"===f.msgMode?"fullValidate":"validate"](i.insertRecords.concat(d))),C.then(t=>{if(!t)return i.insertRecords.length||c.length||d.length||i.pendingRecords.length?(s.tableLoading=!0,Promise.resolve((S||e)(...b)).then(e=>(s.tableLoading=!1,$.clearPendingRow(),v&&(r.b.modal||Object(p.a)("vxe.error.reqModule",["Modal"]),r.b.modal.message({content:o.getRespMsg(e,"vxe.grid.saveSuccess"),status:"success"})),j?j(...b):o.commitProxy("query"),l&&l(Object.assign(Object.assign({},m),{response:e})),{status:!0})).catch(e=>(s.tableLoading=!1,v&&(r.b.modal||Object(p.a)("vxe.error.reqModule",["Modal"]),r.b.modal.message({id:A,content:o.getRespMsg(e,"vxe.grid.operError"),status:"error"})),n&&n(Object.assign(Object.assign({},m),{response:e})),{status:!1}))):void(x&&(r.b.modal||Object(p.a)("vxe.error.reqModule",["Modal"]),r.b.modal.message({id:A,content:g("vxe.grid.dataUnchanged"),status:"info"})))})}Object(p.a)("vxe.error.notFunc",["proxy-config.ajax.save"]);break}default:{const e=m.get(A);e&&(e.commandMethod?e.commandMethod({code:A,button:M,$grid:o,$table:$},...t):Object(p.a)("vxe.error.notCommands",[A]))}}return o.$nextTick()},getFormData(){const e=this.reactData,{proxyConfig:t}=this,{formData:o}=e,r=this.computeProxyOpts,l=this.computeFormOpts;return t&&Object(i.h)(r)&&r.form?o:l.data},getFormItems(e){const t=this.computeFormOpts,{formConfig:o}=this,{items:r}=t,l=[];return n.a.eachTree(o&&Object(i.h)(t)&&r?r:[],e=>{l.push(e)},{children:"children"}),n.a.isUndefined(e)?l:l[e]},triggerToolbarCommitEvent(e,t){const o=this,{code:r}=e;return o.commitProxy(e,t).then(e=>{r&&e&&e.status&&["query","reload","delete","save"].includes(r)&&o.dispatchEvent("delete"===r||"save"===r?"proxy-"+r:"proxy-query",Object.assign(Object.assign({},e),{isReload:"reload"===r}),t)})},triggerToolbarBtnEvent(e,t){this.triggerToolbarCommitEvent(e,t),this.dispatchEvent("toolbar-button-click",{code:e.code,button:e},t)},triggerToolbarTolEvent(e,t){this.triggerToolbarCommitEvent(e,t),this.dispatchEvent("toolbar-tool-click",{code:e.code,tool:e},t)},sortChangeEvent(e){const t=this,o=t,r=t.reactData,l=t.$refs.refTable,{proxyConfig:n}=o,s=t.computeProxyOpts;l.computeSortOpts.remote&&(r.sortData=e.sortList,n&&Object(i.h)(s)&&(r.tablePage.currentPage=1,t.commitProxy("query").then(o=>{t.dispatchEvent("proxy-query",o,e.$event)}))),t.dispatchEvent("sort-change",e,e.$event)},pageChangeEvent(e){const t=this,o=t,r=t.reactData,{proxyConfig:l}=o,{tablePage:n}=r,{$event:s,currentPage:a,pageSize:c}=e,d=t.computeProxyOpts;n.currentPage=a,n.pageSize=c,t.dispatchEvent("page-change",e,s),l&&Object(i.h)(d)&&t.commitProxy("query").then(e=>{t.dispatchEvent("proxy-query",e,s)})},filterChangeEvent(e){const t=this,o=t,r=t.reactData,l=t.$refs.refTable,{proxyConfig:n}=o,s=t.computeProxyOpts;l.computeFilterOpts.remote&&(r.filterData=e.filterList,n&&Object(i.h)(s)&&(r.tablePage.currentPage=1,t.commitProxy("query").then(o=>{t.dispatchEvent("proxy-query",o,e.$event)}))),t.dispatchEvent("filter-change",e,e.$event)},submitFormEvent(e){const t=this,o=t,r=t.reactData,{proxyConfig:l}=o,n=t.computeProxyOpts;r.tableLoading||(l&&Object(i.h)(n)&&t.commitProxy("reload").then(o=>{t.dispatchEvent("proxy-query",Object.assign(Object.assign({},o),{isReload:!0}),e.$event)}),t.dispatchEvent("form-submit",e,e.$event))},resetFormEvent(e){const t=this,o=t,r=t.$refs.refTable,{proxyConfig:l}=o,{$event:n}=e,s=t.computeProxyOpts;l&&Object(i.h)(s)&&(r.clearScroll(),t.commitProxy("reload").then(e=>{t.dispatchEvent("proxy-query",Object.assign(Object.assign({},e),{isReload:!0}),n)})),t.dispatchEvent("form-reset",e,n)},submitInvalidEvent(e){this.dispatchEvent("form-submit-invalid",e,e.$event)},collapseEvent(e){const{$event:t}=e;this.dispatchEvent("form-toggle-collapse",e,t),this.dispatchEvent("form-collapse",e,t)},triggerZoomEvent(e){const t=this.reactData;this.zoom(),this.dispatchEvent("zoom",{type:t.isZMax?"max":"revert"},e)},zoom(){return this[this.reactData.isZMax?"revert":"maximize"]()},isMaximized(){return this.reactData.isZMax},maximize(){return this.handleZoom(!0)},revert(){return this.handleZoom()},handleZoom(e){const t=this,o=t.reactData,{isZMax:r}=o;return(e?!r:r)&&(o.isZMax=!r,o.tZindex<Object(i.e)()&&(o.tZindex=Object(i.i)())),t.$nextTick().then(()=>t.recalculate(!0)).then(()=>(setTimeout(()=>t.recalculate(!0),15),o.isZMax))},getProxyInfo(){const e=this,t=e,o=e.$refs.refTable,r=e.reactData;if(t.proxyConfig){const{sortData:t}=r;return{data:o?o.getFullData():[],filter:r.filterData,form:e.getFormData(),sort:t.length?t[0]:{},sorts:t,pager:r.tablePage,pendingRecords:o?o.getPendingRecords():[]}}return null},loadColumn(e){const t=this.$scopedSlots,o=this.$refs.refTable;return n.a.eachTree(e,e=>{e.slots&&n.a.each(e.slots,e=>{n.a.isFunction(e)||t[e]||Object(p.a)("vxe.error.notSlot",[e])})}),o.loadColumn(e)},reloadColumn(e){return this.clearAll(),this.loadColumn(e)},getConfigSlot(e){const t=this.$scopedSlots,o={};return n.a.objectMap(e,(e,r)=>{e&&(n.a.isString(e)?t[e]?o[r]=t[e]:Object(p.a)("vxe.error.notSlot",[e]):o[r]=e)}),o},getToolbarSlots(){const e=this,t=e.$scopedSlots,o=e.computeToolbarOpts.slots,r={};if(!t.buttons||o&&"buttons"===o.buttons||Object(p.b)("vxe.error.reqProp",["toolbar-config.slots.buttons"]),!t.tools||o&&"tools"===o.tools||Object(p.b)("vxe.error.reqProp",["toolbar-config.slots.tools"]),o){const t=e.getFuncSlot(o,"buttons"),l=e.getFuncSlot(o,"buttonPrefix"),n=e.getFuncSlot(o,"buttonSuffix"),i=e.getFuncSlot(o,"tools"),s=e.getFuncSlot(o,"toolPrefix"),a=e.getFuncSlot(o,"toolSuffix");t&&(r.buttons=t),l&&(r.buttonPrefix=l),n&&(r.buttonSuffix=n),i&&(r.tools=i),s&&(r.toolPrefix=s),a&&(r.toolSuffix=a)}return r},getFuncSlot(e,t){const o=this.$scopedSlots,r=e[t];if(r){if(!n.a.isString(r))return r;if(o[r])return o[r];Object(p.a)("vxe.error.notSlot",[r])}return null},renderDefaultForm(e){const t=r.b.getComponent("VxeForm"),o=this,l=o,s=o.$scopedSlots,a=o.reactData,{proxyConfig:c,formConfig:d}=l,{formData:u}=a,p=o.computeProxyOpts,h=o.computeFormOpts;if(Object(i.h)(d)&&h.items&&h.items.length){const r={};if(!h.inited){h.inited=!0;const e=p.beforeItem;p&&e&&h.items.forEach(t=>{e.call(o,{$grid:o,item:t})})}return h.items.forEach(e=>{n.a.each(e.slots,e=>{n.a.isFunction(e)||s[e]&&(r[e]=s[e])})}),[t?e(t,{props:Object.assign({},h,{data:c&&p.form?u:h.data}),on:{submit:o.submitFormEvent,reset:o.resetFormEvent,collapse:o.collapseEvent,"submit-invalid":o.submitInvalidEvent},scopedSlots:r}):C(o)]}return[]},renderForm(e){const t=this,o=t,r=t.$scopedSlots,{formConfig:l}=o,n=r.form;return!(!n&&!Object(i.h)(l))?e("div",{key:"form",ref:"refFormWrapper",class:"vxe-grid--form-wrapper"},n?n.call(t,{$grid:t}):t.renderDefaultForm(e)):C(t)},renderToolbar(e){const t=this,o=t,r=t.$scopedSlots,{toolbarConfig:l}=o,n=r.toolbar,s=!!(n||Object(i.h)(l)||toolbar),a=t.computeToolbarOpts;return s?e("div",{key:"toolbar",ref:"refToolbarWrapper",class:"vxe-grid--toolbar-wrapper"},n?n.call(t,{$grid:t}):[e(c.a,{props:Object.assign({},a,{slots:void 0}),ref:"refToolbar",scopedSlots:t.getToolbarSlots()})]):C(t)},renderTop(e){const t=this.$scopedSlots.top;return t?e("div",{key:"top",ref:"refTopWrapper",class:"vxe-grid--top-wrapper"},t.call(this,{$grid:this})):C(this)},renderTableLeft(e){const t=this,o=t.$scopedSlots.left;return o?e("div",{class:"vxe-grid--left-wrapper"},o({$grid:t})):C(t)},renderTableRight(e){const t=this,o=t.$scopedSlots.right;return o?e("div",{class:"vxe-grid--right-wrapper"},o({$grid:t})):C(t)},renderTable(e){const t=this.$scopedSlots,o=this.computeTableProps;return e("div",{class:"vxe-grid--table-wrapper"},[e(a.a,{key:"table",props:o,on:y(this),scopedSlots:t,ref:"refTable"})])},renderBottom(e){const t=this.$scopedSlots.bottom;return t?e("div",{key:"bottom",ref:"refBottomWrapper",class:"vxe-grid--bottom-wrapper"},t.call(this,{$grid:this})):C(this)},renderPager(e){const t=r.b.getComponent("VxePager"),o=this,l=o,n=o.$scopedSlots,s=o.reactData,{proxyConfig:a,pagerConfig:c}=l,d=o.computeProxyOpts,u=o.computePagerOpts,p=n.pager;return c&&Object(i.h)(u)||n.pager?e("div",{ref:"refPagerWrapper",key:"pager",class:"vxe-grid--pager-wrapper"},p?p.call(o,{$grid:o}):[t?e(t,{ref:"refPager",props:Object.assign(Object.assign({},u),a&&Object(i.h)(d)?s.tablePage:{}),on:{"page-change":o.pageChangeEvent},scopedSlots:o.getConfigSlot(u.slots)}):C(o)]):C(o)},renderChildLayout(e,t){const o=this,r=[];return t.forEach(t=>{switch(t){case"Form":r.push(o.renderForm(e));break;case"Toolbar":r.push(o.renderToolbar(e));break;case"Top":r.push(o.renderTop(e));break;case"Table":r.push(e("div",{key:"table",class:"vxe-grid--table-container"},[o.renderTableLeft(e),o.renderTable(e),o.renderTableRight(e)]));break;case"Bottom":r.push(o.renderBottom(e));break;case"Pager":r.push(o.renderPager(e));break;default:Object(p.a)("vxe.error.notProp",["layouts -> "+t])}}),r},renderLayout(e){const t=this.$scopedSlots,o=this.computeCurrLayoutConf,{headKeys:r,bodyKeys:l,footKeys:n}=o,i=t.asideLeft||t["aside-left"],s=t.asideRight||t["aside-right"];return[e("div",{class:"vxe-grid--layout-header-wrapper"},this.renderChildLayout(e,r)),e("div",{class:"vxe-grid--layout-body-wrapper"},[i?e("div",{class:"vxe-grid--layout-aside-left-wrapper"},i({})):C(this),e("div",{class:"vxe-grid--layout-body-content-wrapper"},this.renderChildLayout(e,l)),s?e("div",{class:"vxe-grid--layout-aside-right-wrapper"},s({})):C(this)]),e("div",{class:"vxe-grid--layout-footer-wrapper"},this.renderChildLayout(e,n))]},renderVN(e){const t=this.reactData,o=this.computeSize,r=this.computeStyles,l=this.computeIsLoading;return e("div",{ref:"refElem",class:["vxe-grid",{["size--"+o]:o,"is--animat":!!this.animat,"is--round":this.round,"is--maximize":t.isZMax,"is--loading":l}],style:r},this.renderLayout(e))}}),created(){const e=r.b.getComponent("VxeForm"),t=r.b.getComponent("VxePager"),o=this,l=this.computeProxyOpts;o.toolbar&&Object(p.a)("vxe.error.delProp",["grid.toolbar","grid.toolbar-config"]),o.toolbarConfig&&!n.a.isObject(o.toolbarConfig)&&Object(p.a)("vxe.error.errProp",["grid.toolbar-config="+o.toolbarConfig,"grid.toolbar-config={}"]),l.props&&Object(p.b)("vxe.error.delProp",["proxy-config.props","proxy-config.response"]),this.$nextTick(()=>{o.formConfig&&(e||Object(p.a)("vxe.error.reqComp",["vxe-form"])),o.pagerConfig&&(t||Object(p.a)("vxe.error.reqComp",["vxe-pager"]))}),this.initPages(),f.on(this,"keydown",this.handleGlobalKeydownEvent)},mounted(){const e=this,t=e,{columns:o}=t;o&&o.length&&e.loadColumn(o),e.initToolbar(),e.initProxy()},destroyed(){f.off(this,"keydown")},render(e){return this.renderVN(e)}};const R=Object.assign({},T,{install(e){e.component(T.name,T)}});r.b.dynamicApp&&r.b.dynamicApp.component(T.name,T),r.b.component(T);const S=R},315:function(e,t,o){"use strict";o.d(t,"c",(function(){return n})),o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return s})),o.d(t,"d",(function(){return a}));var r=o(278),l=o.n(r);function n(e){return l.a.kebabCase(e)}function i(e){switch(e.name){case"input":case"textarea":return"input";case"select":return"change"}return"modelValue"}function s(e){switch(e.name){case"input":case"textarea":case"VxeInput":case"VxeNumberInput":case"VxeTextarea":case"$input":case"$textarea":return"input"}return"change"}function a(e){return null==e?[]:l.a.isArray(e)?e:[e]}},360:function(e,t,o){"use strict"},385:function(e,t,o){"use strict";var r=o(278),l=o.n(r),n=o(282),i=o(283),s=o(286),a=o(291),c=o(315);const{getI18n:d,getIcon:u,renderer:p,formats:h,renderEmptyElement:g}=n.b;function m(e,t){const{$table:o,column:r}=t,l=r.titlePrefix||r.titleHelp;return l?e("i",{class:["vxe-cell-title-prefix-icon",l.iconStatus?"theme--"+l.iconStatus:""],on:{mouseenter(e){o.triggerHeaderTitleEvent(e,l,t)},mouseleave(e){o.handleTargetLeaveEvent(e)}}},[e("i",{class:l.icon||u().TABLE_TITLE_PREFIX})]):g(o)}function f(e,t){const{$table:o,column:r}=t,l=r.titleSuffix;return l?e("i",{class:["vxe-cell-title-suffix-icon",l.iconStatus?"theme--"+l.iconStatus:""],on:{mouseenter(e){o.triggerHeaderTitleEvent(e,l,t)},mouseleave(e){o.handleTargetLeaveEvent(e)}}},[e("i",{class:l.icon||u().TABLE_TITLE_SUFFIX})]):g(o)}function b(e,t){const{$table:o}=t,r=o.$scopedSlots,l=o,{dragConfig:n}=l,i=o.computeRowDragOpts,{icon:s,trigger:a,disabledMethod:c}=i,d=c||(n?n.rowDisabledMethod:null),p=d&&d(t),h=r.rowDragIcon||r["row-drag-icon"],g={};return"cell"!==a&&(g.mousedown=e=>{p||o.handleCellDragMousedownEvent(e,t)},g.mouseup=o.handleCellDragMouseupEvent),e("span",{key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":p}],on:g},h?o.callSlot(h,t,e):[e("i",{class:s||(n?n.rowIcon:"")||u().TABLE_DRAG_ROW})])}function x(e,t,o){const{$table:r,column:n,level:i}=t,{dragSort:s}=n,a=r,{treeConfig:c,dragConfig:d}=a,u=r.computeRowOpts,p=r.computeRowDragOpts,h=r.computeTreeOpts,{showIcon:g,isPeerDrag:m,isCrossDrag:f,visibleMethod:x}=p,v=x||(d?d.rowVisibleMethod:null),C=[];return s&&u.drag&&(g||d&&d.showRowIcon)&&(!v||v(t))&&(c?h.transform&&(m||f||!i)&&C.unshift(b(e,t)):C.unshift(b(e,t))),C.concat(l.a.isArray(o)?o:[o])}function v(e,t){const{$table:o,column:r}=t,l=o.$scopedSlots,{slots:n}=r,i=o.computeColumnOpts,s=o.computeColumnDragOpts,{showIcon:a,icon:c,trigger:d,isPeerDrag:p,isCrossDrag:h,visibleMethod:m,disabledMethod:f}=s;if(i.drag&&a&&(!m||m(t))&&!r.fixed&&(p||h||!r.parentId)){const r=f&&f(t),i=(n?n.columnDragIcon||n["column-drag-icon"]:null)||l.columnDragIcon||l["column-drag-icon"],s={};return"cell"!==d&&(s.mousedown=e=>{r||o.handleHeaderCellDragMousedownEvent(e,t)},s.mouseup=o.handleHeaderCellDragMouseupEvent),e("span",{key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":r}],on:s},i?o.callSlot(i,t,e):[e("i",{class:c||u().TABLE_DRAG_COLUMN})])}return g(o)}function C(e,t,o){return[m(e,t),v(e,t),...l.a.isArray(o)?o:[o],f(e,t)]}function w(e,t,o){const{$table:r,column:n}=t,i=r,a=r,{showHeaderOverflow:d}=i,{isRowGroupStatus:u}=a,{showHeaderOverflow:p}=n,h=r.computeTooltipOpts.showAll,g=l.a.eqNull(p)?d:p,m="title"===g,f=!0===g||"tooltip"===g,b={};(m||f||h)&&(b.mouseenter=e=>{a.isDragResize||(m?Object(s.t)(e.currentTarget,n):(f||h)&&r.triggerHeaderTooltipEvent(e,t))}),(f||h)&&(b.mouseleave=e=>{a.isDragResize||(f||h)&&r.handleTargetLeaveEvent(e)});const x=function(e,t,o){return"html"===t.type&&l.a.isString(o)?e("span",{key:"ch",domProps:{innerHTML:o}}):e("span",{key:"ct"},Object(c.d)(o))}(e,n,o);return[e("span",{class:"vxe-cell--title",on:b},u&&n.aggFunc&&r.getPivotTableAggregateRenderColTitles?r.getPivotTableAggregateRenderColTitles(e,n,x):[x])]}function O(e){const{$table:t,row:o,column:r}=e;return Object(i.b)(t.getCellLabel(o,r),1)}function E(e,t){const{column:o,row:r,$table:l}=t,n=l,s=l,{editConfig:a}=n,{isRowGroupStatus:c}=s,{type:d,treeNode:u,rowGroupNode:p,editRender:h}=o,g=l.computeAggregateOpts,{mode:m}=g,f=l.computeCheckboxOpts,b=l.computeEditOpts,x=u||c&&("column"===m?o.field===r.groupField:p);switch(d){case"seq":return x?R.renderDeepIndexCell(e,t):R.renderSeqCell(e,t);case"radio":return x?R.renderDeepRadioCell(e,t):R.renderRadioCell(e,t);case"checkbox":return f.checkField?x?R.renderDeepSelectionCellByProp(e,t):R.renderCheckboxCellByProp(e,t):x?R.renderDeepSelectionCell(e,t):R.renderCheckboxCell(e,t);case"expand":return R.renderExpandCell(e,t);case"html":return x?R.renderDeepHTMLCell(e,t):R.renderHTMLCell(e,t)}return Object(i.h)(a)&&h?"cell"===b.mode?x?R.renderDeepCellEdit(e,t):R.renderCellEdit(e,t):x?R.renderDeepRowEdit(e,t):R.renderRowEdit(e,t):x?R.renderDeepCell(e,t):R.renderDefaultCell(e,t)}function y(e,t){const{column:o,$table:r}=t,l=r,{editConfig:n}=l,{type:i,filters:s,sortable:a,editRender:c}=o;switch(i){case"seq":return R.renderSeqHeader(e,t);case"radio":return R.renderRadioHeader(e,t);case"checkbox":return R.renderCheckboxHeader(e,t);case"html":if(s&&a)return R.renderSortAndFilterHeader(e,t);if(a)return R.renderSortHeader(e,t);if(s)return R.renderFilterHeader(e,t)}return n&&c?R.renderEditHeader(e,t):s&&a?R.renderSortAndFilterHeader(e,t):a?R.renderSortHeader(e,t):s?R.renderFilterHeader(e,t):R.renderDefaultHeader(e,t)}function T(e,t){return R.renderDefaultFooter(e,t)}const R={createColumn(e,t){const{type:o}=t,r={renderHeader:y,renderCell:E,renderFooter:T};return"expand"===o&&(r.renderData=R.renderExpandData),Object(a.f)(e,t,r)},renderHeaderTitle(e,t){const{$table:o,column:r}=t,{slots:l,editRender:n,cellRender:s}=r,a=n||s;if(l&&l.header)return w(e,t,o.callSlot(l.header,t,e));if(a){const r=p.get(a.name),l=r?r.renderTableHeader||r.renderHeader:null;if(l)return Object(c.d)(w(e,t,l.call(o,e,a,t)))}return w(e,t,Object(i.b)(r.getTitle(),1))},renderDefaultHeader:(e,t)=>C(e,t,R.renderHeaderTitle(e,t)),renderDefaultCell(e,t){const{$table:o,row:r,column:l}=t,n=o,s=o,{isRowGroupStatus:a}=n,{field:u,slots:h,editRender:g,cellRender:m,rowGroupNode:f,aggFunc:b}=l,v=g||m;let C="";if(a&&u&&r.isAggregate){const e=r,{fullColumnFieldData:n}=s,i=o.computeAggregateOpts,{mode:a,showTotal:c,totalMethod:p,countFields:h,contentMethod:g,mapChildrenField:m}=i,x=i.aggregateMethod||i.countMethod,v=e.groupField,w=e.groupContent,O=m&&e[m]||[],E=e.childCount,y=n[v]||{},T={$table:o,groupField:v,groupColumn:y?y.column:null,column:l,groupValue:w,children:O,childCount:E,aggValue:null,totalValue:E};("column"===a?u===e.groupField:f)?(C=w,g&&(C=""+g(T)),c&&(C=d("vxe.table.rowGroupContentTotal",[C,p?p(T):E,E]))):o.getPivotTableAggregateCellAggValue?C=o.getPivotTableAggregateCellAggValue(t):(!0===b||h&&h.includes(u))&&x&&(T.aggValue=E,C=""+x(T))}else{if(h&&h.default)return x(e,t,o.callSlot(h.default,t,e));if(v){const r=p.get(v.name),l=r?r.renderTableDefault||r.renderDefault:null,n=r?r.renderTableCell||r.renderCell:null,i=g?n:l;if(i)return x(e,t,Object(c.d)(i.call(o,e,v,Object.assign({$type:g?"edit":"cell"},t))))}C=o.getCellLabel(r,l)}const w=g?g.placeholder:"";return x(e,t,[e("span",{class:"vxe-cell--label"},[g&&Object(i.a)(C)?e("span",{class:"vxe-cell--placeholder"},Object(i.b)(Object(i.d)(w),1)):e("span",Object(i.b)(C,1))])])},renderDeepCell(e,t){return R.renderDeepNodeBtn(e,t,R.renderDefaultCell.call(this,e,t))},renderDefaultFooter:(e,t)=>function(e,t){const{$table:o,column:r,_columnIndex:n,row:s,items:a}=t,{slots:d,editRender:u,cellRender:g,footerFormatter:m}=r,f=u||g;if(d&&d.footer)return o.callSlot(d.footer,t,e);let b="";b=l.a.isArray(a)?a[n]:l.a.get(s,r.field);const x=Object.assign(t,{itemValue:b});if(m){if(l.a.isFunction(m))return""+m(x);const e=l.a.isArray(m),t=e?h.get(m[0]):h.get(m),o=t?t.tableFooterCellFormatMethod:null;return o?""+(e?o(x,...m.slice(1)):o(x)):""}if(f){const t=p.get(f.name),r=t?t.renderTableFooter||t.renderFooter:null;if(r)return Object(c.d)(r.call(o,e,f,x))}return[Object(i.b)(b,1)]}(e,t),renderRowGroupBtn(e,t,o){const{$table:r}=t,l=r,n=r,{row:i,level:s}=t,{rowGroupExpandedFlag:c}=l,{rowGroupExpandedMaps:d}=n,p=r.computeAggregateOpts,{padding:h,indent:m}=p,f=Object(a.r)(r,i),b=!!c&&!!d[f];return e("div",{class:["vxe-row-group--tree-node",{"is--expanded":b}],style:h&&m?{paddingLeft:s*m+"px"}:void 0},[i.isAggregate?e("span",{class:"vxe-row-group--node-btn",on:{click(e){r.triggerRowGroupExpandEvent(e,t)}}},[e("i",{class:b?u().TABLE_ROW_GROUP_OPEN:u().TABLE_ROW_GROUP_CLOSE})]):g(r),e("div",{class:"vxe-row-group-cell"},o)])},renderTreeNodeBtn(e,t,o){const{$table:r,isHidden:l}=t,n=r,i=r,{treeExpandedFlag:s}=n,{fullAllDataRowIdData:c,treeExpandedMaps:d,treeExpandLazyLoadedMaps:p}=i,h=r.computeTreeOpts,{row:g,column:m,level:f}=t,{slots:b}=m,{padding:x,indent:v,lazy:C,trigger:w,iconLoaded:O,showIcon:E,iconOpen:y,iconClose:T}=h,R=h.children||h.childrenField,S=h.hasChild||h.hasChildField,j=g[R],D=j&&j.length,F=b?b.icon:null;let $=!1,k=!1,M=!1,A=!1;const I={};if(F)return r.callSlot(F,t,e);if(!l){const e=Object(a.r)(r,g);if(k=!!s&&!!d[e],C){const t=c[e];M=!!p[e],$=g[S],A=!!t.treeLoaded}}return w&&"default"!==w||(I.click=e=>{r.triggerTreeExpandEvent(e,t)}),[e("div",{class:["vxe-cell--tree-node",{"is--active":k}],style:x&&v?{paddingLeft:f*v+"px"}:void 0},[E&&(C?A?D:D||$:D)?[e("div",{class:"vxe-cell--tree-btn",on:I},[e("i",{class:M?O||u().TABLE_TREE_LOADED:k?y||u().TABLE_TREE_OPEN:T||u().TABLE_TREE_CLOSE})])]:null,e("div",{class:"vxe-tree-cell"},o)])]},renderDeepNodeBtn(e,t,o){const{$table:r,row:l,column:n}=t,{rowGroupNode:i}=n,s=r,{rowGroupList:a}=s;if(a.length){const s=r.computeAggregateOpts,{mode:a}=s;if("column"===a?n.field===l.groupField:i)return[R.renderRowGroupBtn(e,t,o)]}return[R.renderTreeNodeBtn(e,t,o)]},renderSeqHeader(e,t){const{$table:o,column:r}=t,{slots:l}=r;return C(e,t,w(e,t,l&&l.header?o.callSlot(l.header,t,e):Object(i.b)(r.getTitle(),1)))},renderSeqCell(e,t){const{$table:o,column:r}=t,l=o,{treeConfig:n}=l,s=o.computeSeqOpts,{slots:a}=r;if(a&&a.default)return x(e,t,o.callSlot(a.default,t,e));const{seq:c}=t,d=s.seqMethod;return x(e,t,[e("span",""+Object(i.b)(d?d(t):n?c:(s.startIndex||0)+c,1))])},renderDeepIndexCell:(e,t)=>R.renderDeepNodeBtn(e,t,R.renderSeqCell(e,t)),renderRadioHeader(e,t){const{$table:o,column:r}=t,{slots:l}=r,n=l?l.header:null,s=l?l.title:null;return C(e,t,w(e,t,n?o.callSlot(n,t,e):[e("span",{class:"vxe-radio--label"},s?o.callSlot(s,t,e):Object(i.b)(r.getTitle(),1))]))},renderRadioCell(e,t){const{$table:o,column:r,isHidden:n}=t,i=o,{selectRadioRow:s}=i,a=o.computeRadioOpts,{slots:c}=r,{labelField:d,checkMethod:p,visibleMethod:h}=a,{row:g}=t,m=c?c.default:null,f=c?c.radio:null,b=g===s,v=!h||h({$table:o,row:g});let C,w=!!p;n||(C={click(e){!w&&v&&o.triggerRadioRowEvent(e,t)}},p&&(w=!p({$table:o,row:g})));const O=Object.assign(Object.assign({},t),{checked:b,disabled:w,visible:v});if(f)return x(e,t,o.callSlot(f,O,e));const E=[];return v&&E.push(e("span",{class:["vxe-radio--icon",b?u().TABLE_RADIO_CHECKED:w?u().TABLE_RADIO_DISABLED_UNCHECKED:u().TABLE_RADIO_UNCHECKED]})),(m||d)&&E.push(e("span",{class:"vxe-radio--label"},m?o.callSlot(m,O,e):l.a.get(g,d))),x(e,t,[e("span",{class:["vxe-cell--radio",{"is--checked":b,"is--disabled":w}],on:C},E)])},renderDeepRadioCell:(e,t)=>R.renderDeepNodeBtn(e,t,R.renderRadioCell(e,t)),renderCheckboxHeader(e,t){const{$table:o,column:r,isHidden:n}=t,i=o,{isAllSelected:s,isIndeterminate:a}=i,c=o.computeIsAllCheckboxDisabled,{slots:p}=r,h=p?p.header:null,g=p?p.title:null,m=o.computeCheckboxOpts,{checkStrictly:f,showHeader:b,headerTitle:x}=m,v=r.getTitle(),O={};n||(O.click=e=>{c||o.triggerCheckAllEvent(e,!s)});const E=Object.assign(Object.assign({},t),{checked:s,disabled:c,indeterminate:a});return C(e,t,w(e,E,h?o.callSlot(h,E,e):(f?b:!1!==b)?[e("span",{class:["vxe-cell--checkbox",{"is--checked":s,"is--disabled":c,"is--indeterminate":a}],attrs:{title:l.a.eqNull(x)?d("vxe.table.allTitle"):""+(x||"")},on:O},[e("span",{class:["vxe-checkbox--icon",a?u().TABLE_CHECKBOX_INDETERMINATE:s?u().TABLE_CHECKBOX_CHECKED:c?u().TABLE_CHECKBOX_DISABLED_UNCHECKED:u().TABLE_CHECKBOX_UNCHECKED]})].concat(g||v?[e("span",{class:"vxe-checkbox--label"},g?o.callSlot(g,E,e):v)]:[]))]:[e("span",{class:"vxe-checkbox--label"},g?o.callSlot(g,E,e):v)]))},renderCheckboxCell(e,t){const{$table:o,row:r,column:n,isHidden:i}=t,s=o,c=o,d=o,{treeConfig:p}=s,{updateCheckboxFlag:h,isRowGroupStatus:g}=c,{selectCheckboxMaps:m,treeIndeterminateRowMaps:f}=d,b=o.computeCheckboxOpts,{labelField:v,checkMethod:C,visibleMethod:w}=b,{slots:O}=n,E=O?O.default:null,y=O?O.checkbox:null;let T=!1,R=!1;const S=!w||w({$table:o,row:r});let j=!!C;const D={};if(!i){const e=Object(a.r)(o,r);R=!!h&&!!m[e],D.click=e=>{!j&&S&&o.triggerCheckRowEvent(e,t,!R)},C&&(j=!C({$table:o,row:r})),(p||g)&&(T=!!f[e])}const F=Object.assign(Object.assign({},t),{checked:R,disabled:j,visible:S,indeterminate:T});if(y)return x(e,t,o.callSlot(y,F,e));const $=[];return S&&$.push(e("span",{class:["vxe-checkbox--icon",T?u().TABLE_CHECKBOX_INDETERMINATE:R?u().TABLE_CHECKBOX_CHECKED:j?u().TABLE_CHECKBOX_DISABLED_UNCHECKED:u().TABLE_CHECKBOX_UNCHECKED]})),(E||v)&&$.push(e("span",{class:"vxe-checkbox--label"},E?o.callSlot(E,F,e):l.a.get(r,v))),x(e,t,[e("span",{class:["vxe-cell--checkbox",{"is--checked":R,"is--disabled":j,"is--indeterminate":T,"is--hidden":!S}],on:D},$)])},renderDeepSelectionCell:(e,t)=>R.renderDeepNodeBtn(e,t,R.renderCheckboxCell(e,t)),renderCheckboxCellByProp(e,t){const{$table:o,row:r,column:n,isHidden:i}=t,s=o,c=o,d=o,{treeConfig:p}=s,{updateCheckboxFlag:h,isRowGroupStatus:g}=c,{treeIndeterminateRowMaps:m}=d,f=o.computeCheckboxOpts,{labelField:b,checkField:v,checkMethod:C,visibleMethod:w}=f,O=f.indeterminateField||f.halfField,{slots:E}=n,y=E?E.default:null,T=E?E.checkbox:null;let R=!1,S=!1;const j=!w||w({$table:o,row:r});let D=!!C;const F={};if(!i){const e=Object(a.r)(o,r);S=!!h&&l.a.get(r,v),F.click=e=>{!D&&j&&o.triggerCheckRowEvent(e,t,!S)},C&&(D=!C({$table:o,row:r})),(p||g)&&(R=!!m[e])}const $=Object.assign(Object.assign({},t),{checked:S,disabled:D,visible:j,indeterminate:R});if(T)return x(e,t,o.callSlot(T,$,e));const k=[];return j&&k.push(e("span",{class:["vxe-checkbox--icon",R?u().TABLE_CHECKBOX_INDETERMINATE:S?u().TABLE_CHECKBOX_CHECKED:D?u().TABLE_CHECKBOX_DISABLED_UNCHECKED:u().TABLE_CHECKBOX_UNCHECKED]})),(y||b)&&k.push(e("span",{class:"vxe-checkbox--label"},y?o.callSlot(y,$,e):l.a.get(r,b))),x(e,t,[e("span",{class:["vxe-cell--checkbox",{"is--checked":S,"is--disabled":D,"is--indeterminate":O&&!S?r[O]:R,"is--hidden":!j}],on:F},k)])},renderDeepSelectionCellByProp:(e,t)=>R.renderDeepNodeBtn(e,t,R.renderCheckboxCellByProp(e,t)),renderExpandCell(e,t){const{$table:o,isHidden:r,row:n,column:i}=t,s=o,c=o,{isRowGroupStatus:d}=s,{rowExpandedMaps:p,rowExpandLazyLoadedMaps:h}=c,m=o.computeExpandOpts,{lazy:f,labelField:b,iconLoaded:v,showIcon:C,iconOpen:w,iconClose:O,visibleMethod:E}=m,{slots:y}=i,T=y?y.default:null,R=y?y.icon:null;let S=!1,j=!1;if(d&&n.isAggregate)return x(e,t,[]);if(R)return x(e,t,o.callSlot(R,t,e));if(!r){const e=Object(a.r)(o,n);S=!!p[e],f&&(j=!!h[e])}return x(e,t,[!C||E&&!E(t)?g(o):e("span",{class:["vxe-table--expanded",{"is--active":S}],on:{mousedown(e){e.stopPropagation()},click(e){o.triggerRowExpandEvent(e,t)}}},[e("i",{class:["vxe-table--expand-btn",j?v||u().TABLE_EXPAND_LOADED:S?w||u().TABLE_EXPAND_OPEN:O||u().TABLE_EXPAND_CLOSE]})]),T||b?e("span",{class:"vxe-table--expand-label"},T?o.callSlot(T,t,e):l.a.get(n,b)):g(o)])},renderExpandData(e,t){const{$table:o,column:r}=t,{slots:l,contentRender:n}=r;if(l&&l.content)return o.callSlot(l.content,t,e);if(n){const r=p.get(n.name),l=r?r.renderTableExpand||r.renderExpand:null;if(l)return Object(c.d)(l.call(o,e,n,t))}return[]},renderHTMLCell(e,t){const{$table:o,column:r}=t,{slots:l}=r;return l&&l.default?x(e,t,o.callSlot(l.default,t,e)):x(e,t,[e("span",{class:"vxe-cell--html",domProps:{innerHTML:O(t)}})])},renderDeepHTMLCell:(e,t)=>R.renderDeepNodeBtn(e,t,R.renderHTMLCell(e,t)),renderSortAndFilterHeader:(e,t)=>C(e,t,R.renderHeaderTitle(e,t).concat(R.renderSortIcon(e,t).concat(R.renderFilterIcon(e,t)))),renderSortHeader:(e,t)=>C(e,t,R.renderHeaderTitle(e,t).concat(R.renderSortIcon(e,t))),renderSortIcon(e,t){const{$table:o,column:r}=t,n=o.computeSortOpts,{showIcon:i,allowBtn:s,ascTitle:a,descTitle:c,iconLayout:p,iconAsc:h,iconDesc:g,iconVisibleMethod:m}=n;return!i||m&&!m(t)?[]:[e("span",{class:["vxe-cell--sort",`vxe-cell--sort-${p}-layout`]},[e("i",{class:["vxe-sort--asc-btn",h||u().TABLE_SORT_ASC,{"sort--active":"asc"===r.order}],attrs:{title:l.a.eqNull(a)?d("vxe.table.sortAsc"):""+(a||"")},on:s?{click(e){e.stopPropagation(),o.triggerSortEvent(e,r,"asc")}}:void 0}),e("i",{class:["vxe-sort--desc-btn",g||u().TABLE_SORT_DESC,{"sort--active":"desc"===r.order}],attrs:{title:l.a.eqNull(c)?d("vxe.table.sortDesc"):""+(c||"")},on:s?{click(e){e.stopPropagation(),o.triggerSortEvent(e,r,"desc")}}:void 0})])]},renderFilterHeader:(e,t)=>C(e,t,R.renderHeaderTitle(e,t).concat(R.renderFilterIcon(e,t))),renderFilterIcon(e,t){const{$table:o,column:r,hasFilter:l}=t,n=o,{filterStore:i}=n,s=o.computeFilterOpts,{showIcon:a,iconNone:c,iconMatch:p,iconVisibleMethod:h}=s;return!a||h&&!h(t)?[]:[e("span",{class:["vxe-cell--filter",{"is--active":i.visible&&i.column===r}],on:{click(e){o.triggerFilterEvent&&o.triggerFilterEvent(e,t.column,t)}}},[e("i",{class:["vxe-filter--btn",l?p||u().TABLE_FILTER_MATCH:c||u().TABLE_FILTER_NONE],attrs:{title:d("vxe.table.filter")}})])]},renderEditHeader(e,t){const{$table:o,column:r}=t,n=o,{editConfig:s,editRules:a}=n,c=o.computeEditOpts,{sortable:d,filters:p,editRender:h}=r;let m=!1;if(a){const e=l.a.get(a,r.field);e&&(m=e.some(e=>e.required))}let f=[];return Object(i.h)(s)&&(f=[m&&c.showAsterisk?e("i",{class:"vxe-cell--required-icon"},[e("i",{class:"vxe-cell--required-icon"})]):g(o),Object(i.h)(h)&&c.showIcon?e("i",{class:"vxe-cell--edit-icon"},[e("i",{class:c.icon||u().TABLE_EDIT})]):g(o)]),C(e,t,f.concat(R.renderHeaderTitle(e,t)).concat(d?R.renderSortIcon(e,t):[]).concat(p?R.renderFilterIcon(e,t):[]))},renderRowEdit(e,t){const{$table:o,column:r}=t,l=o,{editStore:n}=l,{actived:s}=n,{editRender:a}=r;return R.runRenderer(e,t,this,Object(i.h)(a)&&s&&s.row===t.row)},renderDeepRowEdit:(e,t)=>R.renderDeepNodeBtn(e,t,R.renderRowEdit(e,t)),renderCellEdit(e,t){const{$table:o,column:r}=t,l=o,{editStore:n}=l,{actived:s}=n,{editRender:a}=r;return R.runRenderer(e,t,this,Object(i.h)(a)&&s&&s.row===t.row&&s.column===t.column)},renderDeepCellEdit:(e,t)=>R.renderDeepNodeBtn(e,t,R.renderCellEdit(e,t)),runRenderer(e,t,o,r){const{$table:l,column:n}=t,{slots:i,editRender:s,formatter:a}=n,d=p.get(s.name),u=d?d.renderTableEdit||d.renderEdit:null,h=Object.assign({$type:"",isEdit:r},t);return r?i&&i.edit?l.callSlot(i.edit,h,e):u?Object(c.d)(u.call(l,e,s,h)):[]:i&&i.default?x(e,t,l.callSlot(i.default,h,e)):a?x(e,t,[e("span",{class:"vxe-cell--label"},[O(h)])]):R.renderDefaultCell.call(o,e,h)}};t.a=R},461:function(e,t,o){"use strict";var r=o(282);const{getConfig:l}=r.b;t.a={id:[String,Function],data:Array,height:[Number,String],minHeight:{type:[Number,String],default:()=>l().table.minHeight},maxHeight:[Number,String],resizable:{type:Boolean,default:()=>l().table.resizable},stripe:{type:Boolean,default:()=>l().table.stripe},border:{type:[Boolean,String],default:()=>l().table.border},padding:{type:Boolean,default:null},round:{type:Boolean,default:()=>l().table.round},size:{type:String,default:()=>l().table.size||l().size},fit:{type:Boolean,default:()=>l().table.fit},loading:Boolean,align:{type:String,default:()=>l().table.align},headerAlign:{type:String,default:()=>l().table.headerAlign},footerAlign:{type:String,default:()=>l().table.footerAlign},showHeader:{type:Boolean,default:()=>l().table.showHeader},highlightCurrentRow:{type:Boolean,default:()=>l().table.highlightCurrentRow},highlightHoverRow:{type:Boolean,default:()=>l().table.highlightHoverRow},highlightCurrentColumn:{type:Boolean,default:()=>l().table.highlightCurrentColumn},highlightHoverColumn:{type:Boolean,default:()=>l().table.highlightHoverColumn},highlightCell:Boolean,showFooter:Boolean,footerData:Array,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],mergeCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:()=>l().table.showOverflow},showHeaderOverflow:{type:[Boolean,String],default:()=>l().table.showHeaderOverflow},showFooterOverflow:{type:[Boolean,String],default:()=>l().table.showFooterOverflow},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:()=>l().table.rowId},zIndex:Number,emptyText:{type:String,default:()=>l().table.emptyText},keepSource:{type:Boolean,default:()=>l().table.keepSource},autoResize:{type:Boolean,default:()=>l().table.autoResize},syncResize:[Boolean,String,Number],resizeConfig:Object,columnConfig:Object,currentColumnConfig:Object,cellConfig:Object,headerCellConfig:Object,footerCellConfig:Object,rowConfig:Object,aggregateConfig:Object,rowGroupConfig:Object,currentRowConfig:Object,dragConfig:Object,rowDragConfig:Object,columnDragConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,exportConfig:[Boolean,Object],importConfig:[Boolean,Object],printConfig:Object,expandConfig:Object,treeConfig:[Boolean,Object],menuConfig:[Boolean,Object],contextMenu:[Boolean,Object],mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:[Boolean,Object],validConfig:Object,editRules:Object,loadingConfig:Object,emptyRender:[Boolean,Object],customConfig:Object,scrollX:Object,scrollY:Object,virtualXConfig:Object,virtualYConfig:Object,scrollbarConfig:Object,animat:{type:Boolean,default:()=>l().table.animat},delayHover:{type:Number,default:()=>l().table.delayHover},params:Object}},462:function(e,t,o){"use strict";o(360);var r=o(278),l=o.n(r),n=o(282),i=o(315),s=o(287);const{getConfig:a,getIcon:c,getI18n:d,renderer:u,commands:p,createEvent:h,globalMixins:g,renderEmptyElement:m}=n.b;t.a={name:"VxeToolbar",mixins:[g.sizeMixin],props:{loading:Boolean,refresh:[Boolean,Object],refreshOptions:Object,import:[Boolean,Object],importOptions:Object,export:[Boolean,Object],exportOptions:Object,print:[Boolean,Object],printOptions:Object,zoom:[Boolean,Object],zoomOptions:Object,custom:[Boolean,Object],customOptions:Object,buttons:{type:Array,default:()=>a().toolbar.buttons},tools:{type:Array,default:()=>a().toolbar.tools},perfect:{type:Boolean,default:()=>a().toolbar.perfect},size:{type:String,default:()=>a().toolbar.size||a().size},className:[String,Function]},inject:{$xeGrid:{default:null}},data:()=>({xID:l.a.uniqueId(),reactData:{isRefresh:!1,connectFlag:0,columns:[]},internalData:{connectTable:null}}),computed:Object.assign(Object.assign({},{}),{computeRefreshOpts(){return Object.assign({},l.a.clone(a().toolbar.refresh,!0),this.refreshOptions,this.refresh)},computeImportOpts(){return Object.assign({},l.a.clone(a().toolbar.import,!0),this.importOptions,this.import)},computeExportOpts(){return Object.assign({},l.a.clone(a().toolbar.export,!0),this.exportOptions,this.export)},computePrintOpts(){return Object.assign({},l.a.clone(a().toolbar.print,!0),this.printOptions,this.print)},computeZoomOpts(){return Object.assign({},l.a.clone(a().toolbar.zoom,!0),this.zoomOptions,this.zoom)},computeCustomOpts(){return Object.assign({},l.a.clone(a().toolbar.custom,!0),this.customOptions,this.custom)},computeTableCustomOpts(){const e=this.reactData,t=this.internalData,{connectTable:o}=t,r=o;return(e.connectFlag||r)&&r?r.computeCustomOpts:{trigger:""}},computeTrigger(){return this.computeTableCustomOpts.trigger}}),methods:{dispatchEvent(e,t,o){this.$emit(e,h(o,{$toolbar:this},t))},fintTable(){const{$children:e}=this.$parent,t=e.indexOf(this);return l.a.find(e,(e,o)=>e&&e.loadData&&o>t&&"vxe-table"===e.$vnode.componentOptions.tag)},syncUpdate(e){const t=this.reactData;this.internalData.connectTable=e.$table,t.columns=e.collectColumn,t.connectFlag++},checkTable(){const e=this.internalData,{connectTable:t}=e;if(t)return!0;Object(s.a)("vxe.error.barUnableLink")},handleClickSettingEvent({$event:e}){const t=this.internalData,{connectTable:o}=t,r=o;r&&r.triggerCustomEvent&&r.triggerCustomEvent(e)},handleMouseenterSettingEvent({$event:e}){const t=this.internalData,{connectTable:o}=t;o&&o.customOpenEvent(e)},handleMouseleaveSettingEvent({$event:e}){const t=this.internalData,{connectTable:o}=t,r=o;if(r){const{customStore:t}=r.reactData;t.activeBtn=!1,setTimeout(()=>{t.activeBtn||t.activeWrapper||r.customCloseEvent(e)},350)}},refreshEvent({$event:e}){const t=this.reactData,o=this.$xeGrid,{isRefresh:r}=t,l=this.computeRefreshOpts;if(!r){const r=l.queryMethod||l.query;if(r){t.isRefresh=!0;try{Promise.resolve(r({})).catch(e=>e).then(()=>{t.isRefresh=!1})}catch(e){t.isRefresh=!1}}else o&&(t.isRefresh=!0,o.triggerToolbarCommitEvent({code:l.code||"reload"},e).catch(e=>e).then(()=>{t.isRefresh=!1}))}},zoomEvent({$event:e}){const t=this.$xeGrid;t?t.triggerZoomEvent(e):Object(s.b)("vxe.error.notProp",["zoom"])},importEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.importData()}},openImportEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.openImport()}},exportEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.exportData()}},openExportEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.openExport()}},printEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.print()}},openPrintEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.openPrint()}},handleDefaultCodeEvent(e,t,o){const r=this;switch(t.code){case"print":r.printEvent();break;case"open_print":r.openPrintEvent();break;case"custom":r.handleClickSettingEvent(e);break;case"export":r.exportEvent();break;case"open_export":r.openExportEvent();break;case"import":r.importEvent();break;case"open_import":r.openImportEvent();break;case"zoom":r.zoomEvent(e);break;case"refresh":r.refreshEvent(e);break;default:o()}},btnEvent(e,t){const o=this,r=o.internalData,l=o.$xeGrid,{$event:n}=e,{connectTable:i}=r,a=i,{code:c}=t;c&&o.handleDefaultCodeEvent(e,t,()=>{if(l)l.triggerToolbarBtnEvent(t,n);else{const e=p.get(c),r={code:c,button:t,$table:a,$grid:l,$event:n};if(e){const t=e.tableCommandMethod||e.commandMethod;t?t(r):Object(s.a)("vxe.error.notCommands",[c])}o.dispatchEvent("button-click",r,n)}})},tolEvent(e,t){const o=this,r=o.internalData,l=o.$xeGrid,{$event:n}=e,{connectTable:i}=r,a=i,{code:c}=t;c&&o.handleDefaultCodeEvent(e,t,()=>{if(l)l.triggerToolbarTolEvent(t,n);else{const e=p.get(c),r={code:c,button:null,tool:t,$table:a,$grid:l,$event:n};if(e){const t=e.tableCommandMethod||e.commandMethod;t?t(r):Object(s.a)("vxe.error.notCommands",[c])}o.dispatchEvent("tool-click",r,n)}})},renderDropdowns(e,t,o){const r=n.b.getComponent("VxeButton"),l=this,{dropdowns:i}=t;return i?i.map((t,n)=>!1===t.visible?m(l):r?e(r,{key:n,props:{disabled:t.disabled,loading:t.loading,type:t.type,mode:t.mode,icon:t.icon,circle:t.circle,round:t.round,status:t.status,content:t.name,title:t.title,routerLink:t.routerLink,permissionCode:t.permissionCode,prefixTooltip:t.prefixTooltip,suffixTooltip:t.suffixTooltip},on:{click:e=>o?l.btnEvent(e,t):l.tolEvent(e,t)}}):m(l)):[]},renderLeftBtns(e){const t=n.b.getComponent("VxeButton"),o=this,r=o,s=o.$scopedSlots,a=o.internalData,c=o.$xeGrid,{buttons:d}=r,{connectTable:p}=a,h=p,g=s.buttonPrefix||s["button-prefix"],m=s.buttonSuffix||s["button-suffix"],f=[];return g&&f.push(...Object(i.d)(g.call(o,{buttons:d||[],$grid:c,$table:h}))),d&&d.forEach(r=>{const{dropdowns:n,buttonRender:s}=r;if(!1!==r.visible){const a=s?u.get(s.name):null;if(s&&a&&a.renderToolbarButton){const t=a.toolbarButtonClassName,o={$grid:c,$table:h,button:r};f.push(e("span",{class:["vxe-button--item",t?l.a.isFunction(t)?t(o):t:""]},Object(i.d)(a.renderToolbarButton(e,s,o))))}else t&&f.push(e(t,{props:{disabled:r.disabled,loading:r.loading,type:r.type,mode:r.mode,icon:r.icon,circle:r.circle,round:r.round,status:r.status,content:r.name,title:r.title,routerLink:r.routerLink,permissionCode:r.permissionCode,prefixTooltip:r.prefixTooltip,suffixTooltip:r.suffixTooltip,destroyOnClose:r.destroyOnClose,placement:r.placement,transfer:r.transfer},on:{click:e=>o.btnEvent(e,r)},scopedSlots:n&&n.length?{dropdowns:()=>o.renderDropdowns(e,r,!0)}:{}}))}}),m&&f.push(...Object(i.d)(m.call(o,{buttons:d||[],$grid:c,$table:h}))),f},renderRightTools(e){const t=n.b.getComponent("VxeButton"),o=this,r=o,s=o.$scopedSlots,a=o.internalData,c=o.$xeGrid,{tools:d}=r,{connectTable:p}=a,h=p,g=s.toolPrefix||s["tool-prefix"],m=s.toolSuffix||s["tool-suffix"],f=[];return g&&f.push(...Object(i.d)(g.call(o,{tools:d||[],$grid:c,$table:h}))),d&&d.forEach((r,n)=>{const{dropdowns:s,toolRender:a}=r;if(!1!==r.visible){const d=a?a.name:null,p=a?u.get(d):null;if(a&&p&&p.renderToolbarTool){const t=p.toolbarToolClassName,o={$grid:c,$table:h,tool:r};f.push(e("span",{key:d,class:["vxe-tool--item",t?l.a.isFunction(t)?t(o):t:""]},Object(i.d)(p.renderToolbarTool(e,a,o))))}else t&&f.push(e(t,{key:n,props:{disabled:r.disabled,loading:r.loading,type:r.type,mode:r.mode,icon:r.icon,circle:r.circle,round:r.round,status:r.status,content:r.name,title:r.title,routerLink:r.routerLink,permissionCode:r.permissionCode,prefixTooltip:r.prefixTooltip,suffixTooltip:r.suffixTooltip,destroyOnClose:r.destroyOnClose,placement:r.placement,transfer:r.transfer},on:{click:e=>o.tolEvent(e,r)},scopedSlots:s&&s.length?{dropdowns:()=>o.renderDropdowns(e,r,!1)}:{}}))}}),m&&f.push(...Object(i.d)(m.call(o,{tools:d||[],$grid:c,$table:h}))),f},renderToolImport(e){const t=n.b.getComponent("VxeButton"),o=this.computeImportOpts;return t?e(t,{key:"import",props:{circle:!0,icon:o.icon||c().TOOLBAR_TOOLS_IMPORT,title:d("vxe.toolbar.import")},on:{click:this.openImportEvent}}):m(this)},renderToolExport(e){const t=n.b.getComponent("VxeButton"),o=this.computeExportOpts;return t?e(t,{key:"export",props:{circle:!0,icon:o.icon||c().TOOLBAR_TOOLS_EXPORT,title:d("vxe.toolbar.export")},on:{click:this.openExportEvent}}):m(this)},renderToolPrint(e){const t=n.b.getComponent("VxeButton"),o=this.computePrintOpts;return t?e(t,{key:"print",props:{circle:!0,icon:o.icon||c().TOOLBAR_TOOLS_PRINT,title:d("vxe.toolbar.print")},on:{click:this.openPrintEvent}}):m(this)},renderToolRefresh(e){const t=n.b.getComponent("VxeButton"),o=this.reactData,r=this.computeRefreshOpts;return t?e(t,{key:"refresh",props:{circle:!0,icon:o.isRefresh?r.iconLoading||c().TOOLBAR_TOOLS_REFRESH_LOADING:r.icon||c().TOOLBAR_TOOLS_REFRESH,title:d("vxe.toolbar.refresh")},on:{click:this.refreshEvent}}):m(this)},renderToolZoom(e){const t=n.b.getComponent("VxeButton"),o=this.$xeGrid,r=this.computeZoomOpts;return o&&t?e(t,{key:"zoom",props:{circle:!0,icon:o.isMaximized()?r.iconOut||c().TOOLBAR_TOOLS_MINIMIZE:r.iconIn||c().TOOLBAR_TOOLS_FULLSCREEN,title:d("vxe.toolbar.zoom"+(o.isMaximized()?"Out":"In"))},on:{click:this.zoomEvent}}):m(this)},renderToolCustom(e){const t=n.b.getComponent("VxeButton"),o=this,r=o.computeCustomOpts,l=o.computeTrigger,i={};return"manual"===l||("hover"===l?(i.mouseenter=o.handleMouseenterSettingEvent,i.mouseleave=o.handleMouseleaveSettingEvent):i.click=o.handleClickSettingEvent),t?e(t,{key:"custom",props:{circle:!0,icon:r.icon||c().TOOLBAR_TOOLS_CUSTOM,title:d("vxe.toolbar.custom"),className:"vxe-toolbar-custom-target"},on:i}):m(o)},renderVN(e){const t=this.$scopedSlots,o=this.internalData,r=this.$xeGrid,{perfect:n,loading:i,refresh:s,zoom:a,custom:c,className:d}=this,{connectTable:u}=o,p=u,h=t.tools,g=t.buttons,f=this.computeSize;return e("div",{ref:"refElem",class:["vxe-toolbar",d?l.a.isFunction(d)?d({$toolbar:this}):d:"",{["size--"+f]:f,"is--perfect":n,"is--loading":i}]},[e("div",{class:"vxe-buttons--wrapper"},g?g({$grid:r,$table:p}):this.renderLeftBtns(e)),e("div",{class:"vxe-tools--wrapper"},h?h({$grid:r,$table:p}):this.renderRightTools(e)),e("div",{class:"vxe-tools--operate"},[this.import?this.renderToolImport(e):m(this),this.export?this.renderToolExport(e):m(this),this.print?this.renderToolPrint(e):m(this),s?this.renderToolRefresh(e):m(this),a&&r?this.renderToolZoom(e):m(this),c?this.renderToolCustom(e):m(this)])])}},created(){const e=this,t=e,o=e.$xeGrid;e.$nextTick(()=>{const r=e.computeRefreshOpts,n=e.fintTable(),i=r.queryMethod||r.query;!t.refresh||o||i||Object(s.b)("vxe.error.notFunc",["queryMethod"]),l.a.isPlainObject(t.custom)&&Object(s.b)("vxe.error.delProp",["custom={...}","custom=boolean & custom-options={...}"]),l.a.isPlainObject(t.print)&&Object(s.b)("vxe.error.delProp",["print={...}","print=boolean & print-options={...}"]),l.a.isPlainObject(t.export)&&Object(s.b)("vxe.error.delProp",["export={...}","export=boolean & export-options={...}"]),l.a.isPlainObject(t.import)&&Object(s.b)("vxe.error.delProp",["import={...}","import=boolean & import-options={...}"]),l.a.isPlainObject(t.refresh)&&Object(s.b)("vxe.error.delProp",["refresh={...}","refresh=boolean & refresh-options={...}"]),l.a.isPlainObject(t.refresh)&&Object(s.b)("vxe.error.delProp",["zoom={...}","zoom=boolean & zoom-options={...}"]),n&&n.connect(this);const a=e.computeCustomOpts;a.isFooter&&Object(s.b)("vxe.error.delProp",["toolbar.custom.isFooter","table.custom-config.showFooter"]),a.showFooter&&Object(s.b)("vxe.error.delProp",["toolbar.custom.showFooter","table.custom-config.showFooter"]),a.immediate&&Object(s.b)("vxe.error.delProp",["toolbar.custom.immediate","table.custom-config.immediate"]),a.trigger&&Object(s.b)("vxe.error.delProp",["toolbar.custom.trigger","table.custom-config.trigger"])});const r=n.b.getComponent("VxeButton");(t.refresh||t.import||t.export||t.print||t.zoom)&&(r||Object(s.a)("vxe.error.reqComp",["vxe-button"]))},render(e){return this.renderVN(e)}}},463:function(e,t,o){"use strict";var r=o(278),l=o.n(r),n=o(283),i=o(286),s=o(291),a=o(282),c=o(385),d=o(315);function u(e,t){l.a.arrayEach(e,e=>{e.style.transform=`translateY(${t}px)`}),requestAnimationFrame(()=>{l.a.arrayEach(e,e=>{Object(i.a)(e,"row--drag-move"),e.style.transform=""})})}function p(e,t){l.a.arrayEach(e,e=>{e.style.transform=`translateX(${t}px)`}),requestAnimationFrame(()=>{l.a.arrayEach(e,e=>{Object(i.a)(e,"col--drag-move"),e.style.transform=""})})}var h=o(287);const{getConfig:g,getI18n:m,renderer:f,formats:b,interceptor:x,createEvent:v}=a.b,C=l.a.browse();function w(e,t,o){const r=l.a.get(e,o),i=l.a.get(t,o);return!(!Object(n.a)(r)||!Object(n.a)(i))||(l.a.isString(r)||l.a.isNumber(r)?""+r==""+i:l.a.isEqual(r,i))}function O(e,t){return l.a.isBoolean(e)?e:t}function E(e,t){const o=e.computeSortOpts,{orders:r=[]}=o,l=t.order||null,n=r.indexOf(l)+1;return r[n<r.length?n:0]}const y=e=>{const t=g().version,o=l.a.toStringJSON(localStorage.getItem("VXE_CUSTOM_STORE")||""),r=o&&o._v===t?o:{_v:t};return(e?r[e]:r)||{}},T=(e,t)=>{const o=e,{fullAllDataRowIdData:r}=o,n={};return l.a.each(t,(e,t)=>{r[t]&&(n[t]=e)}),n};function R(e,t){const o=e,{fullDataRowIdData:r}=o,n=[];return l.a.each(t,(e,t)=>{r[t]&&-1===n.indexOf(r[t].row)&&n.push(r[t].row)}),n}function S(e){const t=e,o=e,{isScrollXBig:r,scrollXWidth:l}=t,{elemStore:n,visibleColumn:i,fullColumnIdData:a}=o,c=e.computeLeftFixedWidth,d=e.computeRightFixedWidth,u=Object(s.o)(n["main-body-scroll"]);if(u){const e=u.clientWidth;let t=u.scrollLeft;r&&(t=Math.ceil((l-e)*Math.min(1,t/(5e6-e))));const o=t+c,n=t+e-d;let s=0,p=i.length;for(;s<p;){const e=Math.floor((s+p)/2);(a[i[e].id]||{}).oLeft<=o?s=e+1:p=e}let h=0;const g=s===i.length?s:Math.max(0,s<i.length?s-2:0);for(let e=g,t=i.length;e<t;e++){const t=a[i[e].id]||{};if(h++,t.oLeft>n||h>=60)break}return{toVisibleIndex:Math.max(0,g),visibleSize:Math.max(1,h)}}return{toVisibleIndex:0,visibleSize:6}}function j(e,t){const o=e,r=e;let{collectColumn:n}=r;const{resizableData:i,sortData:s,visibleData:a,fixedData:c}=t;let d=!1;i||s||a||c?(l.a.eachTree(n,(e,t,o,r,n)=>{const u=e.getKey();n||(c&&void 0!==c[u]&&(e.fixed=c[u]),s&&l.a.isNumber(s[u])&&(d=!0,e.renderSortNumber=s[u])),i&&l.a.isNumber(i[u])&&(e.resizeWidth=i[u]),a&&l.a.isBoolean(a[u])&&(e.visible=a[u])}),d&&(n=l.a.orderBy(n,"renderSortNumber"),r.collectColumn=n,r.tableFullColumn=ye(n)),o.isCustomStatus=!0):o.isCustomStatus=!1}function D(e){const t=e,o=e,r=e,{tableFullColumn:i,collectColumn:s}=r,a=r.fullColumnIdData={},c=r.fullColumnFieldData={},d=e.computeMouseOpts,u=e.computeExpandOpts,p=e.computeColumnOpts,g=e.computeColumnDragOpts,{isCrossDrag:m,isSelfToChildDrag:f}=g,b=e.computeCustomOpts,{storage:x}=b,v=e.computeRowOpts,C=s.some(n.f);let w,O,E,y,T,R,S,j=!!t.showOverflow;const D=(e,t,o,r,l)=>{const{id:n,field:i,fixed:s,type:d,treeNode:u,rowGroupNode:g}=e,b={$index:-1,_index:-1,column:e,colid:n,index:t,items:o,parent:l||null,width:0,oLeft:0};i?(c[i]&&Object(h.a)("vxe.error.colRepet",["field",i]),c[i]=b):(x&&!d||p.drag&&(m||f))&&Object(h.a)("vxe.error.reqProp",[(e.getTitle()||d||"")+" -> column.field=?"]),!S&&s&&(S=s),R||"html"!==d||(R=e),u&&(E&&Object(h.b)("vxe.error.colRepet",["tree-node",u]),E||(E=e)),g&&(E&&Object(h.b)("vxe.error.colRepet",["row-group-node",g]),w||(w=e)),"expand"===d&&(O&&Object(h.b)("vxe.error.colRepet",["type",d]),O||(O=e)),"checkbox"===d?(y&&Object(h.b)("vxe.error.colRepet",["type",d]),y||(y=e)):"radio"===d&&(T&&Object(h.b)("vxe.error.colRepet",["type",d]),T||(T=e)),j&&!1===e.showOverflow&&(j=!1),a[n]&&Object(h.a)("vxe.error.colRepet",["colId",n]),a[n]=b};C?l.a.eachTree(s,(e,t,o,r,l,n)=>{e.level=n.length,D(e,t,o,0,l)}):i.forEach(D),O&&"fixed"!==u.mode&&d.area&&Object(h.a)("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),R&&(p.useKey||Object(h.a)("vxe.error.reqProp",["column-config.useKey & column.type=html"]),v.useKey||Object(h.a)("vxe.error.reqProp",["row-config.useKey & column.type=html"])),o.isGroup=C,o.rowGroupColumn=w,o.treeNodeColumn=E,o.expandColumn=O,o.isAllOverflow=j}function F(e,t){const o=e,r=e,l=e,{treeConfig:n}=o,i=e.computeVirtualYOpts,s=e.computeTreeOpts,{transform:a}=s,c=t||l.tableFullData,d=(a||!n)&&!!i.enabled&&i.gt>-1&&(0===i.gt||i.gt<c.length);return r.scrollYLoad=d,d}function $(e,t,o){const r=e,n=e,{treeNodeColumn:i}=r,{fullAllDataRowIdData:a,tableFullTreeData:c,treeExpandedMaps:d,treeExpandLazyLoadedMaps:u}=n,p=e.computeTreeOpts,{reserve:h,lazy:g,accordion:m,toggleMethod:f}=p,b=p.children||p.childrenField,x=p.hasChild||p.hasChildField,v=[],C=e.getColumnIndex(i),w=e.getVMColumnIndex(i),{handleGetRowId:O}=Object(s.g)(e);let E=f?t.filter(t=>f({$table:e,expanded:o,column:i,columnIndex:C,$columnIndex:w,row:t})):t;if(m){E=E.length?[E[E.length-1]]:[];const e=l.a.findTree(c,e=>e===E[0],{children:b});e&&e.items.forEach(e=>{const t=O(e);d[t]&&delete d[t]})}return o?E.forEach(t=>{const o=O(t);if(!d[o]){const r=a[o];if(r){g&&t[x]&&!r.treeLoaded&&!u[o]?v.push(N(e,t)):t[b]&&t[b].length&&(d[o]=t)}}}):E.forEach(e=>{const t=O(e);d[t]&&delete d[t]}),h&&E.forEach(t=>V(e,t,o)),r.treeExpandedFlag++,Promise.all(v).then(()=>e.recalculate())}function k(e,t,o){const r=e;return function(e,t,o){const r=e,n=e,{fullAllDataRowIdData:i,tableFullGroupData:a,rowGroupExpandedMaps:c}=n,d=e.computeAggregateOpts,{mapChildrenField:u,accordion:p}=d,{handleGetRowId:h}=Object(s.g)(e);let g=t;if(u){if(p){g=g.length?[g[g.length-1]]:[];const t=l.a.findTree(a,t=>Object(s.r)(e,t)===Object(s.r)(e,g[0]),{children:u});t&&t.items.forEach(e=>{const t=h(e);c[t]&&delete c[t]})}o?g.forEach(e=>{const t=h(e);if(!c[t]){i[t]&&e[u]&&e[u].length&&(c[t]=e)}}):g.forEach(e=>{const t=h(e);c[t]&&delete c[t]})}return r.rowGroupExpandedFlag++,e.recalculate()}(e,t,o).then(()=>(A(e),e.handleTableData(),r.rowGroupExpandedFlag++,M(e),e.$nextTick())).then(()=>ge(e,!0,!0,!0)).then(()=>{setTimeout(()=>{e.updateCellAreas()},30)})}function M(e){const t=e,o=e,{treeConfig:r}=t,{fullDataRowIdData:n,fullAllDataRowIdData:i,afterFullData:a,afterTreeFullData:c}=o,d=e.computeTreeOpts,{transform:u}=d,p=d.children||d.childrenField,h={};if(r){const{handleGetRowId:t}=Object(s.g)(e);l.a.eachTree(c,(e,o,r,l)=>{const s=t(e),a=i[s],c=l.map((e,t)=>t%2==0?Number(e)+1:".").join("");if(a)a.seq=c,a.treeIndex=o;else{const t={row:e,rowid:s,seq:c,index:-1,$index:-1,_index:-1,treeIndex:-1,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};i[s]=t,n[s]=t}h[s]=e},{children:u?d.mapChildrenField:p}),u&&a.forEach((e,o)=>{const l=t(e),n=i[l],s=o+1;n&&(r||(n.seq=s),n._index=o)}),o.afterFullRowMaps=h}else!function(e){const t=e,o=e,{treeConfig:r}=t,{afterFullData:l,fullDataRowIdData:n,fullAllDataRowIdData:i}=o,{handleGetRowId:a}=Object(s.g)(e),c={};l.forEach((e,t)=>{const o=a(e),l=i[o],s=t+1;if(l)r||(l.seq=s),l._index=t;else{const r={row:e,rowid:o,seq:s,index:-1,$index:-1,_index:t,treeIndex:-1,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};i[o]=r,n[o]=r}c[o]=e}),o.afterFullRowMaps=c}(e)}function A(e){const t=e,o=e,r=e,{treeConfig:n}=t,{isRowGroupStatus:i}=o,{fullAllDataRowIdData:a,treeExpandedMaps:c,rowGroupExpandedMaps:d}=r,u=e.computeAggregateOpts,p=e.computeTreeOpts,{handleGetRowId:h}=Object(s.g)(e),g=[],m={};if(n&&p.transform){const t=p.children||p.childrenField;return l.a.eachTree(r.afterTreeFullData,(e,t,o,r,l)=>{const n=h(e),i=h(l);if(!l||m[i]&&c[i]){const t=a[n];t&&(t._index=g.length),m[n]=1,g.push(e)}},{children:t}),r.afterFullData=g,F(e,g),g}if(i){const{childrenField:t}=u;return l.a.eachTree(r.afterGroupFullData,(e,t,o,r,l)=>{const n=h(e),i=h(l);if(!l||m[i]&&d[i]){const t=a[n];t&&(t._index=g.length),m[n]=1,g.push(e)}},{children:t}),r.afterFullData=g,F(e,g),g}return r.afterFullData}function I(e){const t=e,o=e,r=e,{showHeaderOverflow:l,showFooterOverflow:n,mouseConfig:i,spanMethod:a,footerSpanMethod:c}=t,{isGroup:d,currentRow:u,tableColumn:p,scrollXLoad:h,scrollYLoad:g,overflowX:m,scrollbarWidth:f,overflowY:b,scrollbarHeight:x,scrollXWidth:v,columnStore:w,editStore:O,isAllOverflow:E,expandColumn:y,isColLoading:T}=o,{visibleColumn:R,tableHeight:S,headerHeight:j,footerHeight:D,elemStore:F,customHeight:$,customMinHeight:k,customMaxHeight:M}=r,A=e.$refs.refElem;if(!A)return;const I=b?f:0,L=m?x:0,_=e.$refs.refEmptyPlaceholder,B=e.computeMouseOpts,H=e.computeExpandOpts,P=Object(s.o)(F["main-body-wrapper"]),z=Object(s.o)(F["main-body-table"]);_&&(_.style.top=j+"px",_.style.height=P?P.offsetHeight-L+"px":"");let N=0,V=0;const W=k-j-D-L;M&&(V=Math.max(W,M-j-D-L)),$&&(N=$-j-D-L),N||z&&(N=z.clientHeight),N&&(V&&(N=Math.min(V,N)),N=Math.max(W,N));const G=e.$refs.computeScrollbarXToTop,q=e.$refs.refScrollXLeftCornerElem,X=e.$refs.refScrollXRightCornerElem,Y=e.$refs.refScrollXVirtualElem;Y&&(Y.style.height=L+"px",Y.style.visibility=m?"visible":"hidden");const K=e.$refs.refScrollXWrapperElem;K&&(K.style.left=G?I+"px":"",K.style.width=A.clientWidth-I+"px"),q&&(q.style.width=G?I+"px":"",q.style.display=G&&m&&L?"block":""),X&&(X.style.width=G?"":I+"px",X.style.display=G?"":m&&L?"block":"");const U=e.$refs.refScrollYVirtualElem;U&&(U.style.width=I+"px",U.style.height=N+j+D+"px",U.style.visibility=b?"visible":"hidden");const Z=e.$refs.refScrollYTopCornerElem;Z&&(Z.style.height=j+"px",Z.style.display=b&&j?"block":"");const Q=e.$refs.refScrollYWrapperElem;Q&&(Q.style.height=N+"px",Q.style.top=j+"px");const J=e.$refs.refScrollYBottomCornerElem;J&&(J.style.height=D+"px",J.style.top=j+N+"px",J.style.display=b&&D?"block":"");const ee=e.$refs.refRowExpandElem;return ee&&(ee.style.height=N+"px",ee.style.top=j+"px"),["main","left","right"].forEach((t,o)=>{const r=o>0?t:"",i="left"===r;let u,f=[];r&&(f=i?w.leftList:w.rightList,u=i?e.$refs.refLeftContainer:e.$refs.refRightContainer),["header","body","footer"].forEach(e=>{const o=Object(s.o)(F[`${t}-${e}-wrapper`]),i=Object(s.o)(F[`${t}-${e}-scroll`]),b=Object(s.o)(F[`${t}-${e}-table`]);if("header"===e){let e=p,t=!1;d?e=R:(h&&l&&(a||c||(t=!0)),t&&(T||!r&&m)||(e=R),r&&t&&(e=f||[]));const n=e.reduce((e,t)=>e+t.renderWidth,0);r&&(d?o&&(o.style.width=v?v+"px":""):t?o&&(o.style.width=n?n+"px":""):o&&(o.style.width=v?v+"px":"")),i&&(i.style.height=j+"px"),b&&(b.style.width=n?n+"px":"")}else if("body"===e){i&&(i.style.maxHeight=M?V+"px":"",i.style.height=$?N+"px":"",i.style.minHeight=W+"px"),u&&(o&&(o.style.top=j+"px"),u.style.height=($>0?$:S+j+D+L)+"px",u.style.width=f.reduce((e,t)=>e+t.renderWidth,0)+"px");let l=p,n=!1;(h||g||E)&&(y&&"fixed"!==H.mode||a||c||(n=!0)),r&&(l=R,n&&(l=f||[]));const d=l.reduce((e,t)=>e+t.renderWidth,0);r&&(n?o&&(o.style.width=d?d+"px":""):o&&(o.style.width=v?v+"px":"")),b&&(b.style.width=d?d+"px":"",b.style.paddingRight=I&&r&&(C.firefox||C.safari)?I+"px":"");const m=Object(s.o)(F[`${t}-${e}-emptyBlock`]);m&&(m.style.width=d?d+"px":"")}else if("footer"===e){let e=p,t=!1;h&&n&&(a||c||(t=!0)),t&&(T||!r&&m)||(e=R),r&&t&&(e=f||[]);const l=e.reduce((e,t)=>e+t.renderWidth,0);r&&(t?o&&(o.style.width=l?l+"px":""):o&&(o.style.width=v?v+"px":"")),i&&(i.style.height=D+"px",u&&o&&(o.style.top=($>0?$-D-L:S+j)+"px")),b&&(b.style.width=l?l+"px":"")}})}),u&&e.setCurrentRow(u),i&&B.selected&&O.selected.row&&O.selected.column&&e.addCellSelectedClass(),e.$nextTick()}function L(e,t){return e.triggerValidate?e.triggerValidate(t):e.$nextTick()}function _(e,t,o){L(e,"blur").catch(e=>e).then(()=>{e.handleEdit(o,t).then(()=>L(e,"change")).catch(e=>e)})}function B(e,t,o){const r=e,{checkboxReserveRowMap:l}=r;if(e.computeCheckboxOpts.reserve){const r=Object(s.r)(e,t);o?l[r]=t:l[r]&&delete l[r]}}function H(e,t,o){const r=e,l=e.computeRadioOpts,{checkMethod:n}=l;return t&&(o||!n||n({$table:e,row:t}))&&(r.selectRadioRow=t,function(e,t){const o=e;e.computeRadioOpts.reserve&&(o.radioReserveRow=t)}(e,t)),e.$nextTick()}function P(e,t,o,r){return t&&!l.a.isArray(t)&&(t=[t]),e.handleBatchSelectRows(t,!!o,r),e.checkSelectionStatus(),e.$nextTick()}function z(e,t,o){const r=e,n=e,i=e,{treeConfig:a}=r,{isRowGroupStatus:c}=n,{afterFullData:d,afterTreeFullData:u,afterGroupFullData:p,checkboxReserveRowMap:h,selectCheckboxMaps:g}=i,m=e.computeTreeOpts,f=e.computeAggregateOpts,b=m.children||m.childrenField,x=e.computeCheckboxOpts,{checkField:v,reserve:C,checkMethod:w}=x,{handleGetRowId:O}=Object(s.g)(e),E=x.indeterminateField||x.halfField,y={};if(v){const r=r=>{(o||!w||w({$table:e,row:r}))&&(t&&(y[O(r)]=r),l.a.set(r,v,t)),(a||c)&&E&&l.a.set(r,E,!1)};a||c?l.a.eachTree(d,r,{children:b}):d.forEach(r)}else c?t?l.a.eachTree(p,t=>{if(o||!w||w({$table:e,row:t})){const e=O(t);y[e]=t}},{children:f.mapChildrenField}):!o&&w&&l.a.eachTree(p,t=>{const o=O(t);!w({$table:e,row:t})&&g[o]&&(y[o]=t)},{children:f.mapChildrenField}):a?t?l.a.eachTree(u,t=>{if(o||!w||w({$table:e,row:t})){const e=O(t);y[e]=t}},{children:b}):!o&&w&&l.a.eachTree(u,t=>{const o=O(t);!w({$table:e,row:t})&&g[o]&&(y[o]=t)},{children:b}):t?!o&&w?d.forEach(t=>{const o=O(t);(g[o]||w({$table:e,row:t}))&&(y[o]=t)}):d.forEach(e=>{const t=O(e);y[t]=e}):!o&&w&&d.forEach(t=>{const o=O(t);!w({$table:e,row:t})&&g[o]&&(y[o]=t)});return C&&(t?l.a.each(y,(e,t)=>{h[t]=e}):d.forEach(t=>B(e,t,!1))),n.updateCheckboxFlag++,i.selectCheckboxMaps=v?{}:y,n.isAllSelected=t,n.isIndeterminate=!1,i.treeIndeterminateRowMaps={},e.checkSelectionStatus(),e.$nextTick()}const N=(e,t)=>{const o=e,r=e,n=e.computeTreeOpts,i=e.computeCheckboxOpts,{transform:a,loadMethod:c}=n,{checkStrictly:d}=i;return new Promise(n=>{if(c){const{fullAllDataRowIdData:i,treeExpandLazyLoadedMaps:u}=r,p=Object(s.r)(e,t),h=i[p];u[p]=t,Promise.resolve(c({$table:e,row:t})).then(n=>{if(h&&(h.treeLoaded=!0),u[p]&&delete u[p],l.a.isArray(n)||(n=[]),n)return e.loadTreeChildren(t,n).then(l=>{const{treeExpandedMaps:n}=r;return l.length&&!n[p]&&(n[p]=t),o.treeExpandedFlag++,!d&&e.isCheckedByCheckboxRow(t)&&P(e,l,!0),e.$nextTick().then(()=>{if(a)return e.handleTableData(),M(e),e.$nextTick()})})}).catch(()=>{const{treeExpandLazyLoadedMaps:e}=r;h&&(h.treeLoaded=!1),e[p]&&delete e[p]}).finally(()=>{o.treeExpandedFlag++,e.$nextTick().then(()=>e.recalculate()).then(()=>n())})}else n()})},V=(e,t,o)=>{const r=e,{treeExpandedReserveRowMap:l}=r;if(e.computeTreeOpts.reserve){const r=Object(s.r)(e,t);o?l[r]=t:l[r]&&delete l[r]}},W=(e,t)=>{const o=e,r=e;return new Promise(l=>{const n=e.computeExpandOpts,{loadMethod:i}=n;if(i){const{fullAllDataRowIdData:n,rowExpandLazyLoadedMaps:a}=r,c=Object(s.r)(e,t),d=n[c];a[c]=t,i({$table:e,row:t,rowIndex:e.getRowIndex(t),$rowIndex:e.getVMRowIndex(t)}).then(()=>{const{rowExpandedMaps:e}=r;d&&(d.expandLoaded=!0),e[c]=t,o.rowExpandedFlag++}).catch(()=>{d&&(d.expandLoaded=!1)}).finally(()=>{const{rowExpandLazyLoadedMaps:t}=r;t[c]&&delete t[c],o.rowExpandedFlag++,e.$nextTick().then(()=>e.recalculate()).then(()=>e.updateCellAreas()).then(()=>l())})}else l()})};function G(e,t,o){const r=e,{rowHeightStore:l}=r;o&&o.clientHeight&&(l[t]=o.clientHeight)}function q(e){const t=e,o=e,{isAllOverflow:r,expandColumn:l,isScrollYBig:n,scrollYHeight:i}=t,{elemStore:a,isResizeCellHeight:c,afterFullData:d,fullAllDataRowIdData:u}=o,p=e.computeRowOpts,h=e.computeCellOpts,g=e.computeDefaultRowHeight,m=Object(s.o)(a["main-body-scroll"]);if(m){const t=m.clientHeight;let o=m.scrollTop;n&&(o=Math.ceil((i-t)*Math.min(1,o/(5e6-t))));const a=o,f=o+t;let b=-1,x=0;if(c||h.height||p.height||l||!r){const{handleGetRowId:t}=Object(s.g)(e);let o=0,r=d.length;for(;o<r;){const e=Math.floor((o+r)/2);(u[t(d[e])]||{}).oTop<=a?o=e+1:r=e}b=o===d.length?o:Math.max(0,o<d.length?o-2:0);for(let e=b,o=d.length;e<o;e++){const o=u[t(d[e])]||{};if(x++,o.oTop>f||x>=100)break}}else b=Math.floor(a/g)-1,x=Math.ceil(t/g)+1;return{toVisibleIndex:Math.max(0,b),visibleSize:Math.max(6,x)}}return{toVisibleIndex:0,visibleSize:6}}function X(e,t,o){for(let r=0,l=e.length;r<l;r++){const l=e[r],{startIndex:n,endIndex:i}=t,s=l[o],a=s+l[o+"span"];s<n&&n<a&&(t.startIndex=s),s<i&&i<a&&(t.endIndex=a),t.startIndex===n&&t.endIndex===i||(r=-1)}}function Y(e){const t={};if(e&&e.length)for(let o=0;o<e.length;o++){const{row:r,col:l,rowspan:n,colspan:i}=e[o];for(let e=0;e<n;e++)for(let o=0;o<i;o++)t[`${r+e}:${l+o}`]=e||o?{rowspan:0,colspan:0}:{rowspan:n,colspan:i}}return t}function K(e,t,o,r){const n=e.computeSortOpts,{multiple:i,remote:s,orders:a}=n;if(l.a.isArray(o)||(o=[o]),o&&o.length){i||(o=[o[0]],U(e));let n=null;return o.forEach((t,o)=>{let{field:r,order:i}=t,s=r;l.a.isString(r)&&(s=e.getColumnByField(r)),n||(n=s),s&&s.sortable&&(a&&-1===a.indexOf(i)&&(i=E(e,s)),s.order!==i&&(s.order=i),s.sortTime=Date.now()+o)}),r&&(s||e.handleTableData(!0)),t&&e.handleColumnSortEvent(t,n),e.$nextTick().then(()=>(Le(e),e.updateCellAreas(),I(e)))}return e.$nextTick()}function U(e){const t=e,{tableFullColumn:o}=t;o.forEach(e=>{e.order=null})}function Z(e,t){const o=e,r=e,{parentHeight:n}=r,s=o[t];let a=0;if(s)if("100%"===s||"auto"===s)a=n;else{const t=e.getExcludeHeight();a=Object(i.l)(s)?Math.floor((l.a.toInteger(s)||1)/100*n):l.a.toNumber(s),a=Math.max(40,a-t)}return a}function Q(e){const t=e,o=e,r=e,{elemStore:n}=r,i=Object(s.o)(n["main-body-wrapper"]);if(!i)return;if(!e.$refs.refScrollYHandleElem)return;if(!e.$refs.refScrollXHandleElem)return;let a=0;const c=i.clientWidth;let d=c,u=d/100;const{fit:p}=t,{columnStore:h}=o,{resizeList:g,pxMinList:m,autoMinList:f,pxList:b,scaleList:x,scaleMinList:v,autoList:C,remainList:w}=h;if(m.forEach(e=>{const t=l.a.toInteger(e.minWidth);a+=t,e.renderWidth=t}),f.forEach(e=>{const t=Math.max(60,l.a.toInteger(e.renderAutoWidth));a+=t,e.renderWidth=t}),v.forEach(e=>{const t=Math.floor(l.a.toInteger(e.minWidth)*u);a+=t,e.renderWidth=t}),x.forEach(e=>{const t=Math.floor(l.a.toInteger(e.width)*u);a+=t,e.renderWidth=t}),b.forEach(e=>{const t=l.a.toInteger(e.width);a+=t,e.renderWidth=t}),C.forEach(e=>{const t=Math.max(60,l.a.toInteger(e.renderAutoWidth));a+=t,e.renderWidth=t}),g.forEach(e=>{const t=l.a.toInteger(e.resizeWidth);a+=t,e.renderWidth=t}),d-=a,u=d>0?Math.floor(d/(v.length+m.length+f.length+w.length)):0,p?d>0&&v.concat(m).concat(f).forEach(e=>{a+=u,e.renderWidth+=u}):u=40,w.forEach(e=>{const t=Math.max(u,40);e.renderWidth=t,a+=t}),p){const e=x.concat(v).concat(m).concat(f).concat(w);let t=e.length-1;if(t>0){let o=c-a;if(o>0){for(;o>0&&t>=0;)o--,e[t--].renderWidth++;a=c}}}o.scrollXWidth=a,o.resizeWidthFlag++,Ie(e),Fe(e)}const J=(e,t)=>{const o=t.querySelectorAll(`.vxe-cell--wrapper[rowid="${e.rowid}"]`);let r=e.height;for(let e=0;e<o.length;e++){const t=o[e],n=t.parentElement,i=Math.ceil(l.a.toNumber(n.style.paddingTop)+l.a.toNumber(n.style.paddingBottom)),s=t?t.clientHeight:0;r=Math.max(r-i,Math.ceil(s))}return r},ee=e=>{const t=e,o=e,{tableData:r,isAllOverflow:l,scrollYLoad:n,scrollXLoad:i}=t,{fullAllDataRowIdData:a}=o,c=e.computeDefaultRowHeight,d=e.$refs.refElem;if(!l&&n&&d){const{handleGetRowId:o}=Object(s.g)(e);r.forEach(e=>{const t=o(e),r=a[t];if(r){const e=J(r,d);r.height=Math.max(c,i?Math.max(r.height,e):e)}}),t.calcCellHeightFlag++}};function te(e,t){const{sortBy:o,sortType:r}=t;return n=>{let i;return i=o?l.a.isFunction(o)?o({row:n,column:t}):l.a.get(n,o):e.getCellLabel(n,t),r&&"auto"!==r?"number"===r?l.a.toNumber(i):"string"===r?l.a.toValueString(i):i:isNaN(i)?i:l.a.toNumber(i)}}function oe(e,t){const o=e,r=e.$refs.refTooltip;clearTimeout(o.tooltipTimeout),t?e.closeTooltip():r&&r.setActived&&r.setActived(!0)}function re(e){const t=e,{dragRow:o,dragCol:r}=t;(o||r)&&(ne(e),le(e),se(e),t.dragRow=null,t.dragCol=null)}function le(e){const t=e.$el;if(t){const e="row--drag-origin";l.a.arrayEach(t.querySelectorAll("."+e),t=>{t.draggable=!1,Object(i.n)(t,e)})}}function ne(e){const t=e.$el;if(t){const e="col--drag-origin";l.a.arrayEach(t.querySelectorAll("."+e),t=>{t.draggable=!1,Object(i.n)(t,e)})}}function ie(e,t,o,r,l,n){const i=e,s=e,a=e.$refs.refElem;if(!a)return;const{overflowX:c,scrollbarWidth:d,overflowY:u,scrollbarHeight:p}=i,{prevDragToChild:h}=s,g=a.getBoundingClientRect(),m=u?d:0,f=c?p:0,b=a.clientWidth,x=a.clientHeight;if(o){const t=e.$refs.refDragRowLineElem;if(t)if(l){const r=e.computeScrollbarYToLeft,l=o.getBoundingClientRect();let i=o.clientHeight;const s=Math.max(1,l.y-g.y);s+i>x-f&&(i=x-s-f),t.style.display="block",t.style.left=(r?m:0)+"px",t.style.top=s+"px",t.style.height=i+"px",t.style.width=b-m+"px",t.setAttribute("drag-pos",n),t.setAttribute("drag-to-child",h?"y":"n")}else t.style.display=""}else if(r){const t=e.$refs.refDragColLineElem;if(t)if(l){const o=e.computeScrollbarXToTop,l=e.$refs.refLeftContainer,i=l?l.clientWidth:0,s=e.$refs.refRightContainer,a=s?s.clientWidth:0,c=r.getBoundingClientRect();let d=r.clientWidth;const u=Math.max(0,c.y-g.y),p=i;let v=c.x-g.x;v<p&&(d-=p-v,v=p);const C=b-a-(a?0:m);v+d>C&&(d=C-v),t.style.display="block",t.style.top=u+"px",t.style.left=v+"px",t.style.width=d+"px",t.style.height=h?c.height+"px":x-u-(o?0:f)+"px",t.setAttribute("drag-pos",n),t.setAttribute("drag-to-child",h?"y":"n")}else t.style.display=""}const v=e.$refs.refDragTipElem;v&&(v.style.display="block",v.style.top=Math.min(a.clientHeight-a.scrollTop-v.clientHeight,t.clientY-g.y)+"px",v.style.left=Math.min(a.clientWidth-a.scrollLeft-v.clientWidth-16,t.clientX-g.x)+"px",v.setAttribute("drag-status",l?h?"sub":"normal":"disabled"))}function se(e){const t=e.$refs.refDragTipElem,o=e.$refs.refDragRowLineElem,r=e.$refs.refDragColLineElem;t&&(t.style.display=""),o&&(o.style.display=""),r&&(r.style.display="")}function ae(e,t,o,r,i,s){const a=e,c=r||o;if(!c)return e.$nextTick();s.cell=o;const{tooltipStore:d}=a,u=e.computeTooltipOpts,{column:p,row:h}=s,{showAll:g,contentMethod:m}=u,f=m?m(s):null,b=m&&!l.a.eqNull(f),x=b?f:l.a.toString("html"===p.type?c.innerText:c.textContent).trim(),v=c.scrollWidth>c.clientWidth;return x&&(g||b||v)&&(Object.assign(d,{row:h,column:p,visible:!0,currOpts:{}}),e.$nextTick(()=>{const t=e.$refs.refTooltip;t&&t.open&&t.open(v?c:i,Object(n.b)(x))})),e.$nextTick()}function ce(e,t,o){const r=e,{fullColumnIdData:l}=r,n=Object(s.t)(e,t);return n&&l[n.id]?Object(s.d)(e,n,o):e.$nextTick()}function de(e,t,o){const r=e,{rowExpandedReserveRowMap:l}=r;if(e.computeExpandOpts.reserve){const r=Object(s.r)(e,t);o?l[r]=t:l[r]&&delete l[r]}}function ue(e){const t=e,o=e;return e.$nextTick().then(()=>{const{scrollXLoad:r,scrollYLoad:n}=t,{scrollXStore:i,scrollYStore:s}=o,a=e.computeVirtualYOpts,c=e.computeVirtualXOpts;if(r){const{toVisibleIndex:t,visibleSize:o}=S(e),r=Math.max(0,c.oSize?l.a.toNumber(c.oSize):0);i.preloadSize=l.a.toNumber(c.preSize),i.offsetSize=r,i.visibleSize=o,i.endIndex=Math.max(i.startIndex+i.visibleSize+r,i.endIndex),i.visibleStartIndex=Math.max(i.startIndex,t),i.visibleEndIndex=Math.min(i.endIndex,t+o),e.updateScrollXData().then(()=>{Ee(e)})}else e.updateScrollXSpace();const d=function(e){const t=e,{isAllOverflow:o}=t,r=e.$refs.refTableHeader,l=e.$refs.refTableBody,n=l?l.$el:null,i=e.computeDefaultRowHeight;let s=0;if(o){if(n){const e=r?r.$el:null;let t;t=n.querySelector("tr"),!t&&e&&(t=e.querySelector("tr")),t&&(s=t.clientHeight)}s||(s=i)}else s=i;return Math.max(18,s)}(e);s.rowHeight=d,t.rowHeight=d;const{toVisibleIndex:u,visibleSize:p}=q(e);if(n){const t=Math.max(0,a.oSize?l.a.toNumber(a.oSize):0);s.preloadSize=l.a.toNumber(a.preSize),s.offsetSize=t,s.visibleSize=p,s.endIndex=Math.max(s.startIndex+p+t,s.endIndex),s.visibleStartIndex=Math.max(s.startIndex,u),s.visibleEndIndex=Math.min(s.endIndex,u+p),e.updateScrollYData().then(()=>{Se(e)})}else e.updateScrollYSpace()})}function pe(e){const t=e,o=e,{scrollXWidth:r,scrollYHeight:l}=t,{elemStore:n}=o,i=e.computeScrollbarOpts,a=Object(s.o)(n["main-body-wrapper"]),c=Object(s.o)(n["main-header-table"]),d=Object(s.o)(n["main-footer-table"]),u=e.$refs.refScrollXHandleElem,p=e.$refs.refScrollYHandleElem;let h=!1,g=!1;if(a){h=l>a.clientHeight,p&&(t.scrollbarWidth=i.width||p.offsetWidth-p.clientWidth||14),t.overflowY=h,g=r>a.clientWidth,u&&(t.scrollbarHeight=i.height||u.offsetHeight-u.clientHeight||14),t.overflowX=g;const n=c?c.clientHeight:0,s=d?d.clientHeight:0;o.tableHeight=a.offsetHeight,o.headerHeight=n,o.footerHeight=s,t.parentHeight=Math.max(o.headerHeight+s+20,e.getParentHeight())}g&&e.checkScrolling()}function he(e,t,o,r){const l=e,n=e.$refs.refElem;if(l.rceRunTime=Date.now(),!n||!n.clientWidth)return e.$nextTick();const i=e.$refs.refVarElem;if(i){const[t,o,r,l]=i.children;G(e,"default",t),G(e,"medium",o),G(e,"small",r),G(e,"mini",l)}return o&&ke(e),t&&Q(e),pe(e),I(e),_e(e),ue(e).then(()=>{if(o&&ke(e),t&&Q(e),r&&ee(e),I(e),pe(e),t&&Le(e),_e(e),t)return ue(e)})}function ge(e,t,o,r){const l=e;return new Promise(n=>{const{rceTimeout:i,rceRunTime:s}=l,a=e.computeResizeOpts.refreshDelay||20,c=e.$refs.refElem;c&&c.clientWidth&&(Q(e),_e(e)),i?(clearTimeout(i),s&&s+(a-5)<Date.now()?n(he(e,t,o,r)):e.$nextTick(()=>{n()})):n(he(e,t,o,r)),l.rceTimeout=setTimeout(()=>{l.rceTimeout=void 0,he(e,t,o,r)},a)})}function me(e){const t=e,o=e,{visibleColumn:r}=o,l=[];r.forEach(e=>{e.aggFunc&&l.push(e)}),t.aggHandleAggColumns=l}function fe(e,t){const o=e,r=[],n=[];t&&(l.a.isArray(t)?t:[t]).forEach(e=>{r.push(e),n.push({field:e})}),o.rowGroupList=n,o.aggHandleFields=r,me(e)}function be(e,t){const o=e.computeAggregateOpts,{mapChildrenField:r}=o;r&&(l.a.lastEach(t,e=>{let t=0;l.a.each(e[r],e=>{e.isAggregate?t+=e.childCount||0:t++}),e.childCount=t}),e.handlePivotTableAggregateData&&e.handlePivotTableAggregateData(t))}function xe(e,t,o){const r=e,n=e,i=e,{keepSource:a,treeConfig:c,aggregateConfig:d,rowGroupConfig:u}=r,{rowGroupList:p,scrollYLoad:g}=n,{scrollYStore:m,scrollXStore:f,lastScrollLeft:b,lastScrollTop:x}=i,v=e.computeRowOpts,C=e.computeTreeOpts,w=e.computeExpandOpts,{transform:O}=C,E=C.children||C.childrenField;let y=[],S=t?t.slice(0):[];if(S.length>5e6&&Object(h.a)("vxe.error.errMaxRow",[5e6]),c&&p.length)return Object(h.a)("vxe.error.noTree",["aggregate-config"]),e.$nextTick();if(v.drag&&p.length)return Object(h.a)("vxe.error.errConflicts",["row-config.drag","aggregate-config"]),e.$nextTick();let j=!1;if(c)O?(C.rowField||Object(h.a)("vxe.error.reqProp",["tree-config.rowField"]),C.parentField||Object(h.a)("vxe.error.reqProp",["tree-config.parentField"]),E||Object(h.a)("vxe.error.reqProp",["tree-config.childrenField"]),C.mapChildrenField||Object(h.a)("vxe.error.reqProp",["tree-config.mapChildrenField"]),E===C.mapChildrenField&&Object(h.a)("vxe.error.errConflicts",["tree-config.childrenField","tree-config.mapChildrenField"]),y=l.a.toArrayTree(S,{key:C.rowField,parentKey:C.parentField,children:E,mapChildren:C.mapChildrenField}),S=y.slice(0)):y=S.slice(0);else if((d||u)&&p.length){const t=function e(t,o,r){let n=o,i=o;if(r){const a=t.computeAggregateOpts,{rowField:c,parentField:d,childrenField:u,mapChildrenField:p}=a,h=t.computeCheckboxOpts,{checkField:g}=h,m=h.indeterminateField||h.halfField,f=r[0];if(f&&c&&d&&u&&p){n=[],i=[];const a=f.field,h=t.getColumnByField(a),b={},x=[],v=Object(s.s)(t);o.forEach(e=>{const o=h?t.getCellLabel(e,h):l.a.get(e,a),r=l.a.eqNull(o)?"":o;let n=b[r];n||(n=[],b[r]=n),e.isAggregate&&(e.isAggregate=void 0),n.push(e)}),l.a.objectEach(b,(o,l)=>{const{fullData:h,treeData:f}=e(t,o,r.slice(1)),b={isAggregate:!0,aggData:{},groupContent:l,groupField:a,childCount:0,[c]:Object(s.q)(),[d]:null,[v]:Object(s.q)(),[u]:f,[p]:f};g&&(b[g]=!1),m&&(b[m]=!1),x.push(b),i.push(b),n.push(b),h.length&&n.push(...h)}),be(t,x)}}return{treeData:i,fullData:n}}(e,S,p);y=t.treeData,S=t.fullData,j=!0}n.isRowGroupStatus=j,m.startIndex=0,m.endIndex=1,f.startIndex=0,f.endIndex=1,i.cvCacheMaps={},n.isRowLoading=!0,n.scrollVMLoading=!1,n.treeExpandedFlag++,n.rowExpandedFlag++,i.insertRowMaps={},n.insertRowFlag++,i.removeRowMaps={},n.removeRowFlag++;const D=F(e,S);return i.tableFullData=S,i.tableFullTreeData=j?[]:y,i.tableFullGroupData=j?y:[],e.cacheRowMap(o),i.tableSynchData=t,o&&(i.isResizeCellHeight=!1),a&&e.cacheSourceMap(S),e.clearCellAreas&&r.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearMergeCells(),e.clearMergeFooterItems(),e.handleTableData(!0),e.updateFooter(),e.handleUpdateBodyMerge(),e.$nextTick().then(()=>{Fe(e),I(e)}).then(()=>{ue(e)}).then(()=>(D&&(m.endIndex=m.visibleSize),D&&(n.expandColumn&&"fixed"!==w.mode&&Object(h.a)("vxe.error.notConflictProp",['column.type="expand','expand-config.mode="fixed"']),r.height||r.maxHeight||Object(h.a)("vxe.error.reqProp",["height | max-height | virtual-y-config={enabled: false}"]),r.spanMethod&&Object(h.a)("vxe.error.scrollErrProp",["table.span-method"])),function(e){const t=e,o=e,r=e,{treeConfig:l}=t,{expandColumn:n,currentRow:i,selectRadioRow:a}=o,{fullDataRowIdData:c,fullAllDataRowIdData:d,radioReserveRow:u,selectCheckboxMaps:p,treeExpandedMaps:h,rowExpandedMaps:g}=r,m=e.computeExpandOpts,f=e.computeTreeOpts,b=e.computeRadioOpts,x=e.computeCheckboxOpts;if(a&&!d[Object(s.r)(e,a)]&&(o.selectRadioRow=null),b.reserve&&u){const t=Object(s.r)(e,u);c[t]&&H(e,c[t].row,!0)}r.selectCheckboxMaps=T(e,p),o.updateCheckboxFlag++,x.reserve&&P(e,R(e,r.checkboxReserveRowMap),!0,!0),i&&!d[Object(s.r)(e,i)]&&(o.currentRow=null),r.rowExpandedMaps=n?T(e,g):{},o.rowExpandedFlag++,n&&m.reserve&&e.setRowExpand(R(e,r.rowExpandedReserveRowMap),!0),r.treeExpandedMaps=l?T(e,h):{},o.treeExpandedFlag++,l&&f.reserve&&e.setTreeExpand(R(e,r.treeExpandedReserveRowMap),!0)}(e),e.checkSelectionStatus(),new Promise(t=>{e.$nextTick().then(()=>he(e,!1,!1,!1)).then(()=>{he(e,!1,!0,!0),Le(e)}).then(()=>{let o=b,r=x;const l=e.computeVirtualXOpts,i=e.computeVirtualYOpts;l.scrollToLeftOnChange&&(o=0),i.scrollToTopOnChange&&(r=0),n.isRowLoading=!1,he(e,!1,!1,!1),g===D?Object(s.x)(e,o,r).then(()=>{he(e,!1,!0,!0),Le(e),t()}):setTimeout(()=>{Object(s.x)(e,o,r).then(()=>{he(e,!1,!0,!0),Le(e),t()})})})})))}function ve(e){!function(e){const t=e,o=e,{checkboxConfig:r}=t;if(r){const{fullDataRowIdData:t}=o,r=e.computeCheckboxOpts,{checkAll:l,checkRowKeys:n}=r;if(l)z(e,!0,!0);else if(n){const o=[];n.forEach(e=>{t[e]&&o.push(t[e].row)}),P(e,o,!0,!0)}}}(e),function(e){const t=e,o=e,{radioConfig:r}=t;if(r){const{fullDataRowIdData:t}=o,r=e.computeRadioOpts,{checkRowKey:l,reserve:n}=r;if(l&&(t[l]&&H(t[l].row,!0),n)){const t=Object(s.s)(e);o.radioReserveRow={[t]:l}}}}(e),function(e){const t=e,o=e,{expandConfig:r}=t;if(r){const{fullDataRowIdData:t}=o,r=e.computeExpandOpts,{expandAll:l,expandRowKeys:n}=r;if(l)e.setAllRowExpand(!0);else if(n){const o=[];n.forEach(e=>{t[e]&&o.push(t[e].row)}),e.setRowExpand(o,!0)}}}(e),(e=>{const t=e,o=e,{treeConfig:r}=t;if(r){const{tableFullData:t}=o,r=e.computeTreeOpts,{expandAll:n,expandRowKeys:i}=r,a=r.children||r.childrenField;if(n)e.setAllTreeExpand(!0);else if(i){const o=[],r=Object(s.s)(e);i.forEach(e=>{const n=l.a.findTree(t,t=>e===l.a.get(t,r),{children:a});n&&o.push(n.item)}),e.setTreeExpand(o,!0)}}})(e),function(e){const t=e,{mergeCells:o}=t;o&&e.setMergeCells(o)}(e),function(e){const t=e,{mergeFooterItems:o}=t;o&&e.setMergeFooterItems(o)}(e),e.$nextTick(()=>setTimeout(()=>e.recalculate()))}function Ce(e){!function(e){const t=e,{sortConfig:o}=t;if(o){const t=e.computeSortOpts;let{defaultSort:r}=t;r&&(l.a.isArray(r)||(r=[r]),r.length&&((o.multiple?r:r.slice(0,1)).forEach((t,o)=>{const{field:r,order:l}=t;if(r&&l){const t=e.getColumnByField(r);t&&t.sortable&&(t.order=l,t.sortTime=Date.now()+o)}}),t.remote||e.handleTableData(!0).then(I)))}}(e)}function we(e){const t=e,o=e,{scrollXLoad:r}=t,{visibleColumn:l,scrollXStore:n,fullColumnIdData:i}=o,s=r?l.slice(n.startIndex,n.endIndex):l.slice(0);s.forEach((e,t)=>{const o=e.id,r=i[o];r&&(r.$index=t)}),t.tableColumn=s}function Oe(e){const t=e,o=l.a.orderBy(t.collectColumn,"renderSortNumber");t.collectColumn=o;const r=ye(o);t.tableFullColumn=r,D(e)}function Ee(e){const t=e,o=e,{isScrollXBig:r}=t,{mergeBodyList:l,mergeFooterList:n,scrollXStore:i}=o,{preloadSize:s,startIndex:a,endIndex:c,offsetSize:d}=i,{toVisibleIndex:u,visibleSize:p}=S(e),h={startIndex:Math.max(0,r?u-1:u-1-d-s),endIndex:r?u+p:u+p+d+s};i.visibleStartIndex=u-1,i.visibleEndIndex=u+p+1,X(l.concat(n),h,"col");const{startIndex:g,endIndex:m}=h;(u<=a||u>=c-p-1)&&(a===g&&c===m||(i.startIndex=g,i.endIndex=m,e.updateScrollXData())),e.closeTooltip()}function ye(e){const t=[];return e.forEach(e=>{t.push(...e.children&&e.children.length?ye(e.children):[e])}),t}function Te(e,t){const o=e,r=e,i=e,s=[],a=[],c=[],{isGroup:d,columnStore:u}=r,{collectColumn:p,tableFullColumn:g,scrollXStore:m,fullColumnIdData:f}=i;if(d){const e=[],t=[],o=[];l.a.eachTree(p,(e,t,o,r,i)=>{const d=Object(n.f)(e);i&&i.fixed&&(e.fixed=i.fixed),i&&e.fixed!==i.fixed&&Object(h.a)("vxe.error.groupFixed"),d?e.visible=!!l.a.findTree(e.children,e=>!Object(n.f)(e)&&e.visible):e.visible&&("left"===e.fixed?s.push(e):"right"===e.fixed?c.push(e):a.push(e))}),p.forEach(r=>{r.visible&&("left"===r.fixed?e.push(r):"right"===r.fixed?o.push(r):t.push(r))}),r.tableGroupColumn=e.concat(t).concat(o)}else g.forEach(e=>{e.visible&&("left"===e.fixed?s.push(e):"right"===e.fixed?c.push(e):a.push(e))});const b=s.concat(a).concat(c);i.visibleColumn=b,Ie(e);const x=function(e,t){const o=e,r=e,l=e.computeVirtualXOpts,n=t||r.tableFullColumn,i=!!l.enabled&&l.gt>-1&&(0===l.gt||l.gt<n.length);return o.scrollXLoad=i,i}(e);if(r.hasFixedColumn=s.length>0||c.length>0,Object.assign(u,{leftList:s,centerList:a,rightList:c}),x&&(o.spanMethod&&Object(h.b)("vxe.error.scrollErrProp",["span-method"]),o.footerSpanMethod&&Object(h.b)("vxe.error.scrollErrProp",["footer-span-method"]),t)){const{visibleSize:t}=S(e);m.startIndex=0,m.endIndex=t,m.visibleSize=t,m.visibleStartIndex=0,m.visibleEndIndex=t}return b.length===i.visibleColumn.length&&i.visibleColumn.every((e,t)=>e===b[t])||(e.clearMergeCells(),e.clearMergeFooterItems()),b.forEach((e,t)=>{const o=e.id,r=f[o];r&&(r._index=t)}),we(e),me(e),t?e.updateFooter().then(()=>e.recalculate()).then(()=>(e.updateCellAreas(),e.recalculate())):e.updateFooter()}function Re(e,t){const o=e.$refs.$xeToolbar,r=e,l=e,i=e.computeExpandOpts;l.collectColumn=t;const s=ye(t);return l.tableFullColumn=s,r.isColLoading=!0,function(e){const t=e,{collectColumn:o}=t;o.forEach((e,t)=>{const o=t+1;e.sortNumber=o,e.renderSortNumber=o})}(e),Promise.resolve(function(e){const t=e,{customConfig:o}=t,r=e.computeTableId,l=e.computeCustomOpts,{storage:i,restoreStore:s,storeOptions:a}=l,c=!0===i,d=c?{}:Object.assign({},i||{},a),u=O(d.resizable,c),p=O(d.visible,c),g=O(d.fixed,c),m=O(d.sort,c),f=O(d.aggFunc,c);if(i&&(o?Object(n.h)(l):l.enabled)&&(u||p||g||m||f)){if(!r)return void Object(h.a)("vxe.error.reqProp",["id"]);const t=y(r);return s?Promise.resolve(s({$table:e,id:r,type:"restore",storeData:t})).then(t=>{if(t)return j(e,t)}).catch(e=>e):j(e,t)}}(e)).then(()=>{const{scrollXLoad:t,scrollYLoad:n,expandColumn:s}=r;return D(e),Te(e,!0).then(()=>{r.scrollXLoad&&Ee(e)}),e.clearMergeCells(),e.clearMergeFooterItems(),e.handleTableData(!0),e.handleAggregateSummaryData(),(t||n)&&s&&"fixed"!==i.mode&&Object(h.b)("vxe.error.scrollErrProp",["column.type=expand"]),e.$nextTick().then(()=>(o&&o.syncUpdate({collectColumn:l.collectColumn,$table:e}),e.handleUpdateCustomColumn&&e.handleUpdateCustomColumn(),r.isColLoading=!1,ge(e,!1,!0,!0)))})}function Se(e){const t=e,o=e,{isAllOverflow:r,isScrollYBig:l}=t,{mergeBodyList:n,scrollYStore:i}=o,{preloadSize:s,startIndex:a,endIndex:c,offsetSize:d}=i,u=r?d:d+1,{toVisibleIndex:p,visibleSize:h}=q(e),g={startIndex:Math.max(0,l?p-1:p-1-d-s),endIndex:l?p+h:p+h+u+s};i.visibleStartIndex=p-1,i.visibleEndIndex=p+h+1,X(n,g,"row");const{startIndex:m,endIndex:f}=g;(p<=a||p>=c-h-1)&&(a===m&&c===f||(i.startIndex=m,i.endIndex=f,e.updateScrollYData()))}const je=e=>function(t){const o=this,r=o,{fullAllDataRowIdData:l}=r;if(t){const r=l[Object(s.r)(o,t)];if(r)return r[e]}return-1},De=e=>function(t){const{fullColumnIdData:o}=this;if(t){const r=o[t.id];if(r)return r[e]}return-1};function Fe(e){const t=e,o=e;o.customHeight=Z(e,"height"),o.customMinHeight=Z(e,"minHeight"),o.customMaxHeight=Z(e,"maxHeight"),!t.scrollYLoad||o.customHeight||o.customMinHeight||(o.customHeight=300)}function $e(e,t,o){const r=e.computeColumnOpts,{autoOptions:n}=r,{isCalcHeader:i,isCalcBody:s,isCalcFooter:a}=n||{},c=[];i&&c.push(`.vxe-header-cell--wrapper[colid="${t.id}"]`),s&&c.push(`.vxe-body-cell--wrapper[colid="${t.id}"]`),a&&c.push(`.vxe-footer-cell--wrapper[colid="${t.id}"]`);const d=c.length?o.querySelectorAll(c.join(",")):[];let u=0;const p=d[0];if(p&&p.parentElement){const e=getComputedStyle(p.parentElement);u=Math.ceil(l.a.toNumber(e.paddingLeft)+l.a.toNumber(e.paddingRight))}let h=t.renderAutoWidth-u;for(let e=0;e<d.length;e++){const t=d[e];h=Math.max(h,t?Math.ceil(t.scrollWidth)+4:0)}return h+u}function ke(e){const t=e,o=e.computeAutoWidthColumnList,{fullColumnIdData:r}=t,l=e.$refs.refElem;l&&(l.setAttribute("data-calc-col","Y"),o.forEach(t=>{const o=t.id,n=r[o],i=$e(e,t,l);n&&(n.width=Math.max(i,n.width)),t.renderAutoWidth=i}),e.analyColumnWidth(),l.removeAttribute("data-calc-col"))}function Me(e,t,o){e.analyColumnWidth(),e.recalculate().then(()=>{e.saveCustomStore("update:width"),e.updateCellAreas(),e.dispatchEvent("column-resizable-change",o,t),e.dispatchEvent("resizable-change",o,t),setTimeout(()=>e.recalculate(!0),300)})}function Ae(e,t,o){e.resizeHeightFlag++,e.recalculate().then(()=>{e.updateCellAreas(),e.dispatchEvent("row-resizable-change",o,t),setTimeout(()=>e.recalculate(!0),300)})}function Ie(e){const t=e,{visibleColumn:o,fullColumnIdData:r}=t;let l=0;for(let e=0,t=o.length;e<t;e++){const t=o[e],n=r[t.id];n&&(n.oLeft=l),l+=t.renderWidth}}function Le(e){const t=e,o=e,{expandColumn:r}=t,{afterFullData:l,fullAllDataRowIdData:n,rowExpandedMaps:i}=o,a=e.computeExpandOpts,c=e.computeRowOpts,d=e.computeCellOpts,u=e.computeDefaultRowHeight,{handleGetRowId:p}=Object(s.g)(e);let h=0;for(let e=0,t=l.length;e<t;e++){const t=p(l[e]),o=n[t]||{};o.oTop=h,h+=o.resizeHeight||d.height||c.height||o.height||u,r&&i[t]&&(h+=o.expandHeight||a.height||0)}}function _e(e){const t=e,o=e,{expandColumn:r,scrollYLoad:n,scrollYTop:a,isScrollYBig:c}=t,d=e.computeExpandOpts,u=e.computeRowOpts,p=e.computeCellOpts,h=e.computeDefaultRowHeight,{mode:g}=d;if(r&&"fixed"===g){const{elemStore:r,fullAllDataRowIdData:d}=o,g=e.$refs.refRowExpandElem,m=Object(s.o)(r["main-body-scroll"]);if(g&&m){let o=!1;l.a.arrayEach(g.children,e=>{const t=e,r=t.getAttribute("rowid")||"",l=d[r];if(l){const e=t.offsetHeight+1,s=m.querySelector(`.vxe-body--row[rowid="${r}"]`);let d=0;n?d=c&&s?s.offsetTop+s.offsetHeight:l.oTop+(l.resizeHeight||p.height||u.height||l.height||h):s&&(d=s.offsetTop+s.offsetHeight),c&&(d+=a),t.style.top=Object(i.r)(d),o||l.expandHeight!==e&&(o=!0),l.expandHeight=e}}),o&&(t.rowExpandHeightFlag++,e.$nextTick(()=>{Le(e)}))}}}function Be(e){const t=e,{elemStore:o}=t,r=e.$refs.refRowExpandElem,l=Object(s.o)(o["main-body-scroll"]);r&&l&&(r.scrollTop=l.scrollTop)}const He={callSlot(e,t,o,r){const n=this.$xeGrid;if(e){if(n)return n.callSlot(e,t,o,r);if(l.a.isFunction(e))return Object(d.d)(e.call(this,t,o,r))}return[]},getEl(){return this.$refs.refElem},getParentElem(){const e=this.$xeGrid,{$el:t}=this;return e?e.$el.parentNode:t.parentNode},getParentHeight(){const e=this.$xeGrid,{height:t}=this,o=this.$refs.refElem;if(o){const r=o.parentNode,l="100%"===t||"auto"===t?Object(i.f)(r):0;let n=0;return r&&(n=e&&Object(i.h)(r,"vxe-grid--table-wrapper")?e.getParentHeight():r.clientHeight),Math.floor(n-l)}return 0},getExcludeHeight(){const e=this.$xeGrid;return e?e.getExcludeHeight():0},clearAll(){return Object(s.c)(this)},handleUpdateRowGroup(e){fe(this,e)},syncData(){const e=this,t=e,o=e;return Object(h.a)("vxe.error.delFunc",["syncData","getData"]),e.$nextTick().then(()=>(t.tableData=[],e.$nextTick().then(()=>xe(e,o.tableFullData,!0))))},updateData(){const e=this,t=e,{scrollXLoad:o,scrollYLoad:r}=t;return e.handleTableData(!0).then(()=>{if(e.updateFooter(),o||r)return o&&e.updateScrollXSpace(),r&&e.updateScrollYSpace(),e.refreshScroll()}).then(()=>(e.updateCellAreas(),ge(e,!0,!0,!0))).then(()=>{setTimeout(()=>ge(e,!1,!0,!0),50)})},handleTableData(e){const t=this,o=t,r=t,{scrollYLoad:i}=o,{scrollYStore:a,fullDataRowIdData:c}=r;let d=r.afterFullData;e&&(!function(e){const t=e,o=e,r=e,{treeConfig:i}=t,{isRowGroupStatus:a}=o,{tableFullColumn:c,tableFullData:d,tableFullTreeData:u,tableFullGroupData:p}=r,h=e.computeFilterOpts,g=e.computeSortOpts,m=e.computeAggregateOpts,b=e.computeTreeOpts,x=b.children||b.childrenField,{transform:v,rowField:C,parentField:w,mapChildrenField:O}=b,{isEvery:E,remote:y,filterMethod:T}=h,{remote:R,sortMethod:S,multiple:j,chronological:D}=g;let F=[],$=[];if(y&&R)a?($=l.a.searchTree(p,()=>!0,{original:!0,isEvery:!0,children:m.mapChildrenField,mapChildren:m.childrenField}),F=$):i&&v?($=l.a.searchTree(u,()=>!0,{original:!0,isEvery:E,children:O,mapChildren:x}),F=$):(F=i?u.slice(0):d.slice(0),$=F);else{const t=[];let o=[];if(c.forEach(e=>{const{field:r,sortable:l,order:n,filters:i}=e;if(!y&&i&&i.length){const o=[],r=[];i.forEach(e=>{e.checked&&(r.push(e),o.push(e.value))}),r.length&&t.push({column:e,valueList:o,itemList:r})}!R&&l&&n&&o.push({column:e,field:r,property:r,order:n,sortTime:e.sortTime})}),j&&D&&o.length>1&&(o=l.a.orderBy(o,"sortTime")),!y&&t.length){const o=o=>t.every(({column:t,valueList:r,itemList:i})=>{const{filterMethod:a,filterRender:c}=t,d=Object(n.h)(c)?f.get(c.name):null,u=d?d.tableFilterMethod||d.filterMethod:null,p=d?d.tableFilterDefaultMethod||d.defaultTableFilterMethod||d.defaultFilterMethod:null,h=Object(s.l)(o,t);return a?i.some(r=>a({value:r.value,option:r,cellValue:h,row:o,column:t,$table:e})):u?i.some(r=>u({value:r.value,option:r,cellValue:h,row:o,column:t,$table:e})):T?T({$table:e,options:i,values:r,cellValue:h,row:o,column:t}):p?i.some(r=>p({value:r.value,option:r,cellValue:h,row:o,column:t,$table:e})):r.indexOf(l.a.get(o,t.field))>-1});a?($=l.a.searchTree(p,o,{original:!0,isEvery:!0,children:m.mapChildrenField,mapChildren:m.childrenField}),F=$):i&&v?($=l.a.searchTree(u,o,{original:!0,isEvery:E,children:O,mapChildren:x}),F=$):(F=i?u.filter(o):d.filter(o),$=F)}else a?($=l.a.searchTree(p,()=>!0,{original:!0,isEvery:!0,children:m.mapChildrenField,mapChildren:m.childrenField}),F=$):i&&v?($=l.a.searchTree(u,()=>!0,{original:!0,isEvery:E,children:O,mapChildren:x}),F=$):(F=i?u.slice(0):d.slice(0),$=F);if(!R&&o.length)if(a){if(S){const t=S({data:$,sortList:o,$table:e});$=l.a.isArray(t)?t:$}else{const t=l.a.toTreeArray($,{key:m.rowField,parentKey:m.parentField,children:m.mapChildrenField});$=l.a.toArrayTree(l.a.orderBy(t,o.map(({column:t,order:o})=>[te(e,t),o])),{key:m.rowField,parentKey:m.parentField,children:m.childrenField,mapChildren:m.mapChildrenField})}F=$}else if(i&&v){if(S){const t=S({data:$,sortList:o,$table:e});$=l.a.isArray(t)?t:$}else{const t=l.a.toTreeArray($,{children:O});$=l.a.toArrayTree(l.a.orderBy(t,o.map(({column:t,order:o})=>[te(e,t),o])),{key:C,parentKey:w,children:x,mapChildren:O})}F=$}else{if(S){const t=S({data:F,sortList:o,$table:e});F=l.a.isArray(t)?t:F}else{if(j)F=l.a.orderBy(F,o.map(({column:t,order:o})=>[te(e,t),o]));else{const t=o[0];let r;l.a.isArray(t.sortBy)&&(r=t.sortBy.map(e=>[e,t.order])),F=l.a.orderBy(F,r||[t].map(({column:t,order:o})=>[te(e,t),o]))}F=l.a.orderBy(F,o.map(({column:t,order:o})=>[te(e,t),o]))}$=F}}r.afterFullData=F,r.afterTreeFullData=$,r.afterGroupFullData=$,M(e)}(t),d=A(t));const u=i?d.slice(a.startIndex,a.endIndex):d.slice(0),p={};return u.forEach((e,o)=>{const r=Object(s.r)(t,e),l=c[r];l&&(l.$index=o),p[r]=e}),o.tableData=u,r.visibleDataRowIdData=p,t.$nextTick()},loadTableData(e,t){return xe(this,e,t)},loadData(e){const t=this,{initStatus:o}=this;return xe(t,e,!1).then(()=>(this.inited=!0,this.initStatus=!0,o||ve(t),ge(t,!1,!0,!0)))},reloadData(e){const t=this;return this.clearAll().then(()=>(this.inited=!0,this.initStatus=!0,xe(t,e,!0))).then(()=>(ve(t),ge(t,!1,!0,!0)))},setRow(e,t){if(t){let o=e;l.a.isArray(e)||(o=[e]),o.forEach(e=>Object.assign(e,t))}return this.$nextTick()},reloadRow(e,t,o){const r=this,n=r,i=r,a=r,{keepSource:c}=n,{tableData:d}=i,{sourceDataRowIdData:u}=a;if(c){if(r.isAggregateRecord(e))return r.$nextTick();const n=u[Object(s.r)(r,e)];if(n&&e)if(o){const r=l.a.clone(l.a.get(t||e,o),!0);l.a.set(e,o,r),l.a.set(n,o,r)}else{const o=Object(s.s)(r),i=Object(s.r)(r,e),a=l.a.clone(Object.assign({},t),!0);l.a.set(a,o,i),l.a.destructuring(n,Object.assign(e,a))}i.tableData=d.slice(0)}else Object(h.a)("vxe.error.reqProp",["keep-source"]);return r.$nextTick()},loadColumn(e){const t=this,o=t,{lastScrollLeft:r,lastScrollTop:n}=o,i=l.a.mapTree(e,e=>c.a.createColumn(t,e),{children:"children"});return Re(t,i).then(()=>{let e=r,o=n;const l=t.computeVirtualXOpts,i=t.computeVirtualYOpts;l.scrollToLeftOnChange&&(e=0),i.scrollToTopOnChange&&(o=0),Object(s.x)(t,e,o)})},reloadColumn(e){return this.clearAll().then(()=>this.loadColumn(e))},handleColumn(e){return Re(this,e)},cacheRowMap(e){const t=this,o=t,r=t,n=t,{treeConfig:i}=o,{isRowGroupStatus:a}=r,{fullAllDataRowIdData:c,tableFullData:d,tableFullTreeData:u,tableFullGroupData:p,treeExpandedMaps:h}=n,g=e?{}:Object.assign({},c),m={},{handleUpdateRowId:f}=Object(s.h)(t),b=(e,t,o,r,l,n,i,s)=>{let a=g[n];a||(a={row:e,rowid:n,seq:s,index:-1,_index:-1,$index:-1,treeIndex:t,items:o,parent:l,level:i,height:0,resizeHeight:0,oTop:0,expandHeight:0}),a.treeLoaded=!1,a.expandLoaded=!1,a.row=e,a.items=o,a.parent=l,a.level=i,a.index=r,a.treeIndex=t,m[n]=a,g[n]=a};if(i){const e=t.computeTreeOpts,{lazy:o}=e,r=e.children||e.childrenField,n=e.hasChild||e.hasChildField;l.a.eachTree(u,(e,t,l,a,c,d)=>{const u=f(e);i&&o&&(e[n]&&void 0===e[r]&&(e[r]=null),h[u]&&(e[r]&&e[r].length||delete h[u])),b(e,t,l,c?-1:t,c,u,d.length-1,Object(s.B)(a))},{children:r})}else if(a){const e=t.computeAggregateOpts,{mapChildrenField:o}=e;l.a.eachTree(p,(e,t,o,r,l,n)=>{const i=f(e);b(e,t,o,l?-1:t,l,i,n.length-1,Object(s.B)(r))},{children:o})}else d.forEach((e,t,o)=>{b(e,t,o,t,null,f(e),0,t+1)});n.fullDataRowIdData=m,n.fullAllDataRowIdData=g,r.treeExpandedFlag++},cacheSourceMap(e){const t=this,{treeConfig:o}=this,r=this.computeTreeOpts,n=l.a.clone(e,!0),{handleUpdateRowId:i}=Object(s.h)(this),a={},c=e=>{const t=i(e);a[t]=e};if(o){const e=r.children||r.childrenField;l.a.eachTree(n,c,{children:r.transform?r.mapChildrenField:e})}else n.forEach(c);t.sourceDataRowIdData=a,t.tableSourceData=n},getParams(){return this.params},loadTreeChildren(e,t){const o=this,r=o,n=o,{keepSource:i}=r,{tableSourceData:a,fullDataRowIdData:c,fullAllDataRowIdData:d,sourceDataRowIdData:u}=n,p=o.computeTreeOpts,{transform:h,mapChildrenField:g}=p,m=p.children||p.childrenField,f=d[Object(s.r)(o,e)],b=f?f.level:0;return this.createData(t).then(t=>{if(i){const o=Object(s.r)(this,e),r=l.a.findTree(a,e=>o===Object(s.r)(this,e),{children:m});r&&(r.item[m]=l.a.clone(t,!0)),t.forEach(e=>{const t=Object(s.r)(this,e);u[t]=l.a.clone(e,!0)})}return l.a.eachTree(t,(e,t,r,l,n,i)=>{const a=Object(s.r)(o,e),u={row:e,rowid:a,seq:-1,index:t,_index:-1,$index:-1,treeIndex:-1,items:r,parent:n||f.row,level:b+i.length,height:0,resizeHeight:0,oTop:0,expandHeight:0};c[a]=u,d[a]=u},{children:m}),e[m]=t,h&&(e[g]=l.a.clone(t,!1)),M(o),t})},getRowNode(e){const t=this;if(e){const{fullAllDataRowIdData:o}=t,r=e.getAttribute("rowid");if(r){const e=o[r];if(e)return{rowid:e.rowid,item:e.row,index:e.index,items:e.items,parent:e.parent}}}return null},getColumnNode(e){const t=this;if(e){const{fullColumnIdData:o}=t,r=e.getAttribute("colid");if(r){const e=o[r];if(e)return{colid:e.colid,item:e.column,index:e.index,items:e.items,parent:e.parent}}}return null},getRowSeq:je("seq"),getRowIndex:je("index"),getVTRowIndex:je("_index"),getVMRowIndex:je("$index"),_getRowIndex(e){return Object(h.b)("vxe.error.delFunc",["_getRowIndex","getVTRowIndex"]),this.getVTRowIndex(e)},$getRowIndex(e){return Object(h.b)("vxe.error.delFunc",["$getRowIndex","getVMRowIndex"]),this.getVMRowIndex(e)},getColumnIndex:De("index"),getVTColumnIndex:De("_index"),getVMColumnIndex:De("$index"),_getColumnIndex(e){return Object(h.b)("vxe.error.delFunc",["_getColumnIndex","getVTColumnIndex"]),this.getVTColumnIndex(e)},$getColumnIndex(e){return Object(h.b)("vxe.error.delFunc",["$getColumnIndex","getVMColumnIndex"]),this.getVMColumnIndex(e)},isSeqColumn:e=>e&&"seq"===e.type,defineField(e){const t=this,{treeConfig:o}=this,r=this.computeExpandOpts,i=this.computeTreeOpts,a=this.computeRadioOpts,c=this.computeCheckboxOpts,d=i.children||i.childrenField,u=Object(s.s)(this);return l.a.isArray(e)||(e=[e||{}]),e.map(e=>{t.tableFullColumn.forEach(t=>{const{field:o,editRender:r}=t;if(o&&!l.a.has(e,o)){let n=null;if(r){const{defaultValue:e}=r;l.a.isFunction(e)?n=e({column:t}):l.a.isUndefined(e)||(n=e)}l.a.set(e,o,n)}});return[a.labelField,c.checkField,c.labelField,r.labelField].forEach(t=>{t&&Object(n.a)(l.a.get(e,t))&&l.a.set(e,t,null)}),o&&i.lazy&&l.a.isUndefined(e[d])&&(e[d]=null),Object(n.a)(l.a.get(e,u))&&l.a.set(e,u,Object(s.q)()),e})},createData(e){const t=this;return t.$nextTick().then(()=>t.defineField(e))},createRow(e){const t=l.a.isArray(e);return t||(e=[e]),this.createData(e).then(e=>t?e:e[0])},revertData(e,t){const o=this,r=o,n=o,i=o,{keepSource:a,treeConfig:c}=r,{fullAllDataRowIdData:d,fullDataRowIdData:u,tableSourceData:p,sourceDataRowIdData:g,tableFullData:m,afterFullData:f,removeRowMaps:b}=i,x=o.computeTreeOpts,{transform:v}=x,{handleGetRowId:C}=Object(s.g)(o);if(!a)return Object(h.a)("vxe.error.reqProp",["keep-source"]),o.$nextTick();let w=e;e?l.a.isArray(e)||(w=[e]):w=l.a.toArray(o.getUpdateRecords());let O=!1;return w.length&&w.forEach(e=>{const r=C(e),n=d[r];if(n){const e=n.row;if(!o.isInsertByRow(e)){const n=g[r];n&&e&&(t?l.a.set(e,t,l.a.clone(l.a.get(n,t),!0)):l.a.destructuring(e,l.a.clone(n,!0)),!u[r]&&o.isRemoveByRow(e)&&(b[r]&&delete b[r],m.unshift(e),f.unshift(e),O=!0))}}}),e?(O&&(n.removeRowFlag++,o.updateFooter(),o.cacheRowMap(!1),o.handleTableData(c&&v),c&&v||o.updateAfterDataIndex(),o.checkSelectionStatus(),n.scrollYLoad&&o.updateScrollYSpace()),o.$nextTick().then(()=>(o.updateCellAreas(),ge(o,!1,!0,!0)))):o.reloadData(p)},clearData(e,t){const{tableFullData:o,visibleColumn:r}=this;return arguments.length?e&&!l.a.isArray(e)&&(e=[e]):e=o,t?e.forEach(e=>l.a.set(e,t,null)):e.forEach(e=>{r.forEach(t=>{t.field&&Object(s.z)(e,t,null)})}),this.$nextTick()},getCellElement(e,t){const{elemStore:o}=this,r=Object(s.t)(this,t);if(!r)return null;const l=Object(s.r)(this,e),n=Object(s.o)(o["main-body-scroll"]),i=Object(s.o)(o["left-body-scroll"]),a=Object(s.o)(o["right-body-scroll"]);let c;return r&&(r.fixed&&("left"===r.fixed?i&&(c=i):a&&(c=a)),c||(c=n),c)?c.querySelector(`.vxe-body--row[rowid="${l}"] .${r.id}`):null},getCellLabel(e,t){const o=this,r=o,n=Object(s.t)(this,t);if(!n)return null;const i=n.formatter,a=Object(s.l)(e,n);let c=a;if(i){let t;const{fullAllDataRowIdData:d}=r,u=Object(s.r)(o,e),p=n.id,h=d[u];if(h&&(t=h.formatData,t||(t=d[u].formatData={}),h&&t[p]&&t[p].value===a))return t[p].label;const g={cellValue:a,row:e,rowIndex:this.getRowIndex(e),column:n,columnIndex:this.getColumnIndex(n)};if(l.a.isString(i)){const e=b.get(i),t=e?e.tableCellFormatMethod||e.cellFormatMethod:null;c=t?t(g):""}else if(l.a.isArray(i)){const e=b.get(i[0]),t=e?e.tableCellFormatMethod||e.cellFormatMethod:null;c=t?t(g,...i.slice(1)):""}else c=i(g);t&&(t[p]={value:a,label:c})}return c},isInsertByRow(e){const t=Object(s.r)(this,e);return!!this.insertRowFlag&&!!this.insertRowMaps[t]},isRemoveByRow(e){const t=Object(s.r)(this,e);return!!this.removeRowFlag&&!!this.removeRowMaps[t]},removeInsertRow(){const{insertRowMaps:e}=this;return this.remove(l.a.values(e))},isUpdateByRow(e,t){const o=this,r=o,n=o,{keepSource:i}=r,{tableFullColumn:a,fullDataRowIdData:c,sourceDataRowIdData:d}=n;if(i){const r=l.a.isString(e)||l.a.isNumber(e)?e:Object(s.r)(o,e),n=c[r];if(!n)return!1;const i=n.row,u=d[r];if(u){if(arguments.length>1)return!w(u,i,t);for(let e=0,t=a.length;e<t;e++){const t=a[e].field;if(t&&!w(u,i,t))return!0}}}return!1},getColumns(e){const{visibleColumn:t}=this;return l.a.isUndefined(e)?t.slice(0):t[e]},getColid(e){const t=Object(s.t)(this,e);return t?t.id:null},getColumnById(e){const{fullColumnIdData:t}=this;return t[e]?t[e].column:null},getColumnByField(e){const{fullColumnFieldData:t}=this;return t[e]?t[e].column:null},getParentColumn(e){const t=this.fullColumnIdData,o=Object(s.t)(this,e);return o&&o.parentId&&t[o.parentId]?t[o.parentId].column:null},getTableColumn(){const e=this,t=this;return{collectColumn:t.collectColumn.slice(0),fullColumn:t.tableFullColumn.slice(0),visibleColumn:t.visibleColumn.slice(0),tableColumn:e.tableColumn.slice(0)}},moveColumnTo(e,t,o){const r=this,n=r,{fullColumnIdData:i,visibleColumn:a}=n,{dragToChild:c,dragPos:d,isCrossDrag:u}=Object.assign({},o),p=Object(s.t)(r,e);let h=null;const g=p?i[p.id]:null;let m="left";if(l.a.isNumber(t)){if(g&&t){let e=g.items,o=g._index+t;u&&(e=a,o=g._index+t),o>0&&o<e.length-1&&(h=e[o]),t>0&&(m="right")}}else{h=Object(s.t)(r,t);const e=h?i[h.id]:null;g&&e&&e._index>g._index&&(m="right")}return r.handleColDragSwapEvent(null,!0,p,h,d||m,!0===c)},moveRowTo(e,t,o){const r=this,n=r,i=r,{treeConfig:a}=n,{fullAllDataRowIdData:c,afterFullData:d}=i,{dragToChild:u,dragPos:p,isCrossDrag:h}=Object.assign({},o),g=r.computeTreeOpts,m=Object(s.u)(r,e);let f=null,b="top";const x=m?c[Object(s.r)(r,m)]:null;if(l.a.isNumber(t)){if(x&&t){let e=d,o=x._index+t;a&&(e=x.items,g.transform&&(o=x.treeIndex+t,h&&(e=d,o=x._index+t))),o>=0&&o<=e.length-1&&(f=e[o]),t>0&&(b="bottom")}}else{f=Object(s.u)(r,t);const e=f?c[Object(s.r)(r,f)]:null;x&&e&&e._index>x._index&&(b="bottom")}return r.handleRowDragSwapEvent(null,!0,m,f,p||b,!0===u)},getFullColumns(){const{collectColumn:e}=this;return e.slice(0)},getData(e){const t=this.data||this.tableSynchData;return l.a.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords(e){const{treeConfig:t}=this,{updateCheckboxFlag:o}=this,{tableFullData:r,afterFullData:n,tableFullTreeData:i,fullDataRowIdData:s,afterFullRowMaps:a,selectCheckboxMaps:c}=this,d=this.computeTreeOpts,u=this.computeCheckboxOpts,{transform:p,mapChildrenField:h}=d,{checkField:g}=u,m=d.children||d.childrenField;let f=[];if(o)if(g)if(t){const t=e?p?i:r:p?i:n;f=l.a.filterTree(t,e=>l.a.get(e,g),{children:p?h:m})}else{f=(e?r:n).filter(e=>l.a.get(e,g))}else{const o=e||t&&!p?s:a;l.a.each(c,(e,t)=>{o[t]&&f.push(s[t].row)})}return f},updateAfterDataIndex(){M(this)},getTreeRowChildren(e){const t=this,o=t,r=t,{treeConfig:n}=o,{fullAllDataRowIdData:i}=r,a=t.computeTreeOpts,{transform:c,mapChildrenField:d}=a,u=a.children||a.childrenField;if(e&&n){let o;if(o=l.a.isString(e)?e:Object(s.r)(t,e),o){const e=i[o],t=e?e.row:null;if(t)return t[c?d:u]||[]}}return[]},getTreeParentRow(e){const t=this,o=t,r=t,{treeConfig:n}=o,{fullAllDataRowIdData:i}=r;if(e&&n){let o;if(o=l.a.isString(e)?e:Object(s.r)(t,e),o){const e=i[o];return e?e.parent:null}}return null},getParentRow(e){return Object(h.b)("vxe.error.delFunc",["getParentRow","getTreeParentRow"]),this.getTreeParentRow(e)},getRowById(e){const{fullAllDataRowIdData:t}=this,o=l.a.eqNull(e)?"":encodeURIComponent(e);return t[o]?t[o].row:null},getRowid(e){return Object(s.r)(this,e)},getTableData(){const{tableData:e,footerTableData:t}=this,{tableFullData:o,afterFullData:r,tableFullTreeData:l}=this;return{fullData:this.treeConfig?l.slice(0):o.slice(0),visibleData:r.slice(0),tableData:e.slice(0),footerData:t.slice(0)}},getFullData(){const e=this,t=e,o=e,{treeConfig:r}=t,{tableFullData:n,tableFullTreeData:i}=o;if(r){const t=e.computeTreeOpts,{transform:o,mapChildrenField:r,rowField:n,parentField:s}=t,a=t.children||t.childrenField;return o?l.a.toArrayTree(l.a.toTreeArray(i,{children:r}),{key:n,parentKey:s,children:a,mapChildren:r}):i.slice(0)}return n.slice(0)},handleLoadDefaults(){ve(this)},handleInitDefaults(){Ce(this)},setColumnFixed(e,t){const o=this;let r=!1;const n=l.a.isArray(e)?e:[e],i=o.computeColumnOpts,c=o.computeIsMaxFixedColumn;for(let e=0;e<n.length;e++){const d=n[e],u=Object(s.t)(o,d),p=Object(s.p)(o,u);if(p&&p.fixed!==t){if(!p.fixed&&c)return a.b.modal&&a.b.modal.message({status:"error",content:m("vxe.table.maxFixedCol",[i.maxFixedSize])}),o.$nextTick();l.a.eachTree([p],e=>{e.fixed=t,e.renderFixed=t}),o.saveCustomStore("update:fixed"),r||(r=!0)}}return r?o.refreshColumn():o.$nextTick()},clearColumnFixed(e){const t=this;let o=!1;return(l.a.isArray(e)?e:[e]).forEach(e=>{const r=Object(s.t)(t,e),n=Object(s.p)(t,r);n&&n.fixed&&(l.a.eachTree([n],e=>{e.fixed=null,e.renderFixed=null}),t.saveCustomStore("update:fixed"),o||(o=!0))}),o?t.refreshColumn():t.$nextTick()},hideColumn(e){const t=this;let o=!1;return(l.a.isArray(e)?e:[e]).forEach(e=>{const r=Object(s.t)(t,e);r&&r.visible&&(r.visible=!1,o||(o=!0))}),o?t.handleCustom():t.$nextTick()},showColumn(e){const t=this;let o=!1;return(l.a.isArray(e)?e:[e]).forEach(e=>{const r=Object(s.t)(t,e);r&&!r.visible&&(r.visible=!0,o||(o=!0))}),o?t.handleCustom():t.$nextTick()},setColumnWidth(e,t){const o=this,r=o,{elemStore:n}=r;let a=!1;const c=l.a.isArray(e)?e:[e];let d=l.a.toInteger(t);if(Object(i.l)(t)){const e=Object(s.o)(n["main-body-scroll"]),t=e?e.clientWidth-1:0;d=Math.floor(d*t)}return d&&(c.forEach(e=>{const t=Object(s.t)(o,e);t&&(t.resizeWidth=d,a||(a=!0))}),a)?o.refreshColumn().then(()=>({status:a})):o.$nextTick().then(()=>({status:a}))},getColumnWidth(e){const t=Object(s.t)(this,e);return t?t.renderWidth:0},resetColumn(e){return Object(h.b)("vxe.error.delFunc",["resetColumn","resetCustom"]),this.resetCustom(e)},handleCustom(){const e=this,t=e,{mouseConfig:o}=t;return o&&(e.clearSelected&&e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.analyColumnWidth(),e.refreshColumn(!0)},restoreCustomStorage(){const e=this,t=e,{customConfig:o}=t,r=e.computeTableId,l=e.computeCustomOpts,{storage:i,restoreStore:s,storeOptions:a}=l,c=!0===i,d=c?{}:Object.assign({},i||{},a),u=O(d.resizable,c),p=O(d.visible,c),g=O(d.fixed,c),m=O(d.sort,c);if(i&&(o?Object(n.h)(l):l.enabled)&&(u||p||g||m)){if(!r)return void Object(h.a)("vxe.error.reqProp",["id"]);const t=y(r);return s?Promise.resolve(s({$table:e,id:r,type:"restore",storeData:t})).then(t=>{if(t)return j(e,t)}).catch(e=>e):j(e,t)}},getCustomStoreData(){const e=this,t=e,o=e,{id:r}=t,n=e.computeCustomOpts,{collectColumn:i}=o,{storage:s,checkMethod:a,storeOptions:c}=n,d=!0===s,u=d?{}:Object.assign({},s||{},c),p=O(u.resizable,d),g=O(u.visible,d),m=O(u.fixed,d),f=O(u.sort,d),b=O(u.aggFunc,d),x={},v={},C={},w={},E={},y={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0,aggFuncData:void 0};if(!r)return s&&Object(h.a)("vxe.error.reqProp",["id"]),y;let T=0,R=0,S=0,j=0,D=0;return l.a.eachTree(i,(t,o,r,l,n)=>{const i=t.getKey();i?(n||(f&&(R=1,v[i]=t.renderSortNumber),m&&t.fixed!==t.defaultFixed&&(S=1,w[i]=t.fixed)),p&&t.resizeWidth&&(T=1,x[i]=t.renderWidth),!g||a&&!a({$table:e,column:t})||(!t.visible&&t.defaultVisible?(j=1,C[i]=!1):t.visible&&!t.defaultVisible&&(j=1,C[i]=!0)),b&&t.aggFunc!==t.defaultAggFunc&&(D=1,E[i]=t.aggFunc)):Object(h.a)("vxe.error.reqProp",[(t.getTitle()||t.type||"")+" -> column.field=?"])}),T&&(y.resizableData=x),R&&(y.sortData=v),S&&(y.fixedData=w),j&&(y.visibleData=C),D&&(y.aggFuncData=E),y},saveCustomStore(e){const t=this,o=t,r=t,{customConfig:i}=o,s=t.computeTableId,a=t.computeCustomOpts,{updateStore:c,storage:d,storeOptions:u}=a,p=!0===d,m=p?{}:Object.assign({},d||{},u),f=O(m.resizable,p),b=O(m.visible,p),x=O(m.fixed,p),v=O(m.sort,p),C=O(m.aggFunc,p);if("reset"!==e&&(r.isCustomStatus=!0),d&&(i?Object(n.h)(a):a.enabled)&&(f||b||x||v||C)){if(!s)return Object(h.a)("vxe.error.reqProp",["id"]),this.$nextTick();const o="reset"===e?{resizableData:{},sortData:{},visibleData:{},fixedData:{}}:this.getCustomStoreData();if(c)return c({$table:t,id:s,type:e,storeData:o});((e,t)=>{const o=g().version,r=y();r[e]=t||void 0,r._v=o,localStorage.setItem("VXE_CUSTOM_STORE",l.a.toJSONString(r))})(s,"reset"===e?null:o)}return this.$nextTick()},handleUpdateDataQueue(){this.upDataFlag++},handleRefreshColumnQueue(){this.reColumnFlag++},refreshColumn(e){const t=this;return e&&Oe(t),Te(t,!0).then(()=>this.refreshScroll()).then(()=>ge(t,!1,!0,!0))},analyColumnWidth(){const{columnOpts:e}=this,{width:t,minWidth:o}=e,r=[],l=[],n=[],s=[],a=[],c=[],d=[],u=[];this.tableFullColumn.forEach(e=>{t&&!e.width&&(e.width=t),o&&!e.minWidth&&(e.minWidth=o),e.visible&&(e.resizeWidth?r.push(e):"auto"===e.width?d.push(e):Object(i.k)(e.width)?l.push(e):Object(i.l)(e.width)?a.push(e):Object(i.k)(e.minWidth)?n.push(e):"auto"===e.minWidth?s.push(e):Object(i.l)(e.minWidth)?c.push(e):u.push(e))}),Object.assign(this.columnStore,{resizeList:r,pxList:l,pxMinList:n,autoMinList:s,scaleList:a,scaleMinList:c,autoList:d,remainList:u})},handleColResizeMousedownEvent(e,t,o){const r=this,n=r,a=r;e.stopPropagation(),e.preventDefault();const{column:c}=o,{columnStore:d,overflowX:u,scrollbarHeight:p}=n,{elemStore:h,visibleColumn:g}=a,{leftList:f,rightList:b}=d,x=r.computeResizableOpts,v=u?p:0,C=r.$refs.refElem,w=r.$refs.refLeftContainer,O=r.$refs.refRightContainer,E=r.$refs.refColResizeBar;if(!E)return;const y="left"===t,T="right"===t,R=E.firstElementChild,S=r.computeScrollbarXToTop,{clientX:j}=e,D=e.target;let F=c;c.children&&c.children.length&&l.a.eachTree(c.children,e=>{F=e});const $=D.parentNode,k=Object.assign(o,{cell:$});let M=0;if(!Object(s.o)(h["main-body-scroll"]))return;const A=C.getBoundingClientRect(),I=O?O.getBoundingClientRect():null,L=$.getBoundingClientRect(),_=D.getBoundingClientRect(),B=D.clientWidth,H=Math.floor(B/2),P=_.x-A.x+H,z=Object(s.m)(k)-H,N=T?0:L.x-A.x+B+z,V=L.x-A.x+$.clientWidth-z;let W=0,G=0;if(y||T){let e=!1;const t=y?f:b;for(let o=0;o<t.length;o++){const r=t[o];e?W+=r.renderWidth:(e=r.id===F.id,e||(G+=r.renderWidth))}}const q=e=>{e.stopPropagation(),e.preventDefault();const t=C.clientHeight,o=e.clientX-j;let r=P+o;y?I&&(r=Math.min(r,I.x-A.x-W-z)):T&&(w&&(r=Math.max(r,w.clientWidth+G+z)),r=Math.min(r,V)),M=Math.max(r,N);const l=Math.max(1,M);if(E.style.left=l+"px",E.style.top=(S?v:0)+"px",E.style.height=(S?t-v:t)+"px",x.showDragTip&&R){R.textContent=m("vxe.table.resizeColTip",[Math.floor(F.renderWidth+(T?P-M:M-P))]);const o=C.clientWidth,r=E.clientWidth,n=R.clientWidth,i=R.clientHeight;let s=-n;l<n+r?s=0:l>o&&(s+=o-l),R.style.left=s+"px",R.style.top=Math.min(t-i,Math.max(0,e.clientY-A.y-i/2))+"px"}n.isDragResize=!0};n.isDragResize=!0,Object(i.a)(C,"col-drag--resize"),E.style.display="block",document.onmousemove=q,document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,E.style.display="none",a._lastResizeTime=Date.now(),setTimeout(()=>{n.isDragResize=!1},50);const t=F.renderWidth+(T?P-M:M-P),l=Object.assign(Object.assign({},o),{resizeWidth:t,resizeColumn:F});"fixed"===x.dragMode&&g.forEach(e=>{e.id!==F.id&&(e.resizeWidth||(e.resizeWidth=e.renderWidth))}),r.handleColResizeCellAreaEvent?r.handleColResizeCellAreaEvent(e,l):(F.resizeWidth=t,Me(r,e,l)),Object(i.n)(C,"col-drag--resize")},q(e),r.closeMenu&&r.closeMenu()},handleColResizeDblclickEvent(e,t){const o=this,r=o,n=o,i=o.computeResizableOpts,{isDblclickAutoWidth:a}=i,c=o.$refs.refElem;if(a&&c){e.stopPropagation(),e.preventDefault();const{fullColumnIdData:i}=n,{column:a}=t;let d=a;a.children&&a.children.length&&l.a.eachTree(a.children,e=>{d=e});const u=i[d.id],p=e.target.parentNode,h=Object.assign(t,{cell:p}),g=Object(s.m)(h);c.setAttribute("data-calc-col","Y");let m=$e(o,d,c);c.removeAttribute("data-calc-col"),u&&(m=Math.max(m,u.width)),m=Math.max(g,m);const f=Object.assign(Object.assign({},t),{resizeWidth:m,resizeColumn:d});r.isDragResize=!1,n._lastResizeTime=Date.now(),o.handleColResizeDblclickCellAreaEvent?o.handleColResizeDblclickCellAreaEvent(e,f):(d.resizeWidth=m,Me(o,e,f))}},handleRowResizeMousedownEvent(e,t){const o=this,r=o,n=o;e.stopPropagation(),e.preventDefault();const{row:a}=t,{overflowX:c,scrollbarWidth:d,overflowY:u,scrollbarHeight:p}=r,{elemStore:h,fullAllDataRowIdData:g}=n,f=u?d:0,b=c?p:0,x=o.computeScrollbarYToLeft,v=o.computeResizableOpts,C=o.computeRowOpts,w=o.computeCellOpts,O=o.$refs.refElem,E=o.$refs.refRowResizeBar;if(!E)return;const{clientY:y}=e,T=E.firstElementChild,R=e.currentTarget.parentNode,S=R.parentNode;if(!Object(s.o)(h["main-body-scroll"]))return;const j=g[Object(s.r)(o,a)];if(!j)return;const D=o.computeDefaultRowHeight,F=j.resizeHeight||w.height||C.height||j.height||D,$=O.getBoundingClientRect(),k=S.getBoundingClientRect(),M=y-k.y-S.clientHeight;let A=F;const I=R.querySelector(".vxe-cell");let L=0;if(I){const e=getComputedStyle(I);L=Math.max(1,Math.ceil(l.a.toNumber(e.paddingTop)+l.a.toNumber(e.paddingBottom)))}const _=k.y-$.y+L,B=e=>{e.stopPropagation(),e.preventDefault();const t=O.clientWidth-f,o=O.clientHeight-b;let l=e.clientY-$.y-M;if(l<_?l=_:A=Math.max(L,F+e.clientY-y),E.style.left=(x?f:0)+"px",E.style.top=l+"px",E.style.width=t+"px",v.showDragTip&&T){T.textContent=m("vxe.table.resizeRowTip",[A]);const r=T.clientWidth,n=T.clientHeight;let i=Math.max(2,e.clientX-$.x),s=0;i+r>=t-2&&(i=t-r-2),l+n>=o&&(s=o-(l+n)),T.style.left=i+"px",T.style.top=s+"px"}r.isDragResize=!0};r.isDragResize=!0,Object(i.a)(O,"row-drag--resize"),E.style.display="block",document.onmousemove=B,document.onmouseup=function(e){if(document.onmousemove=null,document.onmouseup=null,E.style.display="none",n._lastResizeTime=Date.now(),setTimeout(()=>{r.isDragResize=!1},50),A!==F){const r=Object.assign(Object.assign({},t),{resizeHeight:A,resizeRow:a});n.isResizeCellHeight=!0,o.handleRowResizeCellAreaEvent?o.handleRowResizeCellAreaEvent(e,r):(j.resizeHeight=A,Ae(o,e,r),Le(o))}Object(i.n)(O,"row-drag--resize")},B(e)},handleRowResizeDblclickEvent(e,t){const o=this,r=o,l=o,n=o.computeResizableOpts,{isDblclickAutoHeight:i}=n,a=o.$refs.refElem;if(i&&a){e.stopPropagation(),e.preventDefault();const{editStore:n}=r,{fullAllDataRowIdData:i}=l,{actived:c}=n,{row:d}=t,u=i[Object(s.r)(o,d)];if(!u)return;const p=()=>{const n=J(u,a),i=Object.assign(Object.assign({},t),{resizeHeight:n,resizeRow:d});r.isDragResize=!1,l._lastResizeTime=Date.now(),o.handleRowResizeDblclickCellAreaEvent?o.handleRowResizeDblclickCellAreaEvent(e,i):(u.resizeHeight=n,Ae(o,e,i))};c.row||c.column?o.clearEdit().then(p):p()}},setRowHeightConf(e){const t=this,o=t,r=t,{fullAllDataRowIdData:n}=r;let i=!1;return e&&(l.a.each(e,(e,t)=>{const o=n[t];if(o){const t=l.a.toInteger(e);t&&(o.resizeHeight=t,i||(i=!0))}}),i&&(r.isResizeCellHeight=!0,o.resizeHeightFlag++)),t.$nextTick().then(()=>(Le(t),{status:i}))},getRowHeightConf(e){const{fullAllDataRowIdData:t,afterFullData:o}=this,{handleGetRowId:r}=Object(s.g)(this),l=this.computeRowOpts,n=this.computeCellOpts,i=this.computeDefaultRowHeight,a={};return o.forEach(o=>{const s=r(o),c=t[s];if(c){const t=c.resizeHeight;if(t||e){const e=t||n.height||l.height||c.height||i;a[s]=e}}}),a},setRowHeight(e,t){const o=this,r=o,n=o,{fullAllDataRowIdData:a}=n;let c=!1;const d=l.a.isArray(e)?e:[e];let u=l.a.toInteger(t);if(Object(i.l)(t)){const e=o.$refs.refTableBody,t=e?e.$el:null,r=t?t.clientHeight-1:0;u=Math.floor(u*r)}if(u){const{handleGetRowId:e}=Object(s.g)(o);d.forEach(t=>{const o=l.a.isString(t)||l.a.isNumber(t)?t:e(t),r=a[o];r&&(r.resizeHeight=u,c||(c=!0))}),c&&(n.isResizeCellHeight=!0,r.resizeHeightFlag++)}return o.$nextTick()},getRowHeight(e){const{fullAllDataRowIdData:t}=this,o=this.computeRowOpts,r=this.computeCellOpts,n=this.computeDefaultRowHeight,i=t[l.a.isString(e)||l.a.isNumber(e)?e:Object(s.r)(this,e)];return i?i.resizeHeight||r.height||o.height||i.height||n:0},refreshScroll(){const e=this,t=e,{elemStore:o,lastScrollLeft:r,lastScrollTop:l}=t,n=Object(s.o)(o["main-header-scroll"]),a=Object(s.o)(o["main-body-scroll"]),c=Object(s.o)(o["main-footer-scroll"]),d=Object(s.o)(o["left-body-scroll"]),u=Object(s.o)(o["right-body-scroll"]),p=e.$refs.refScrollXHandleElem,h=e.$refs.refScrollYHandleElem;return new Promise(o=>{if(r||l)return Object(s.x)(e,r,l).then(()=>{setTimeout(o,10)});t.intoRunScroll=!0,Object(i.q)(h,l),Object(i.q)(a,l),Object(i.q)(d,l),Object(i.q)(u,l),Object(i.p)(p,r),Object(i.p)(a,r),Object(i.p)(n,r),Object(i.p)(c,r),setTimeout(()=>{t.intoRunScroll=!1,o()},10)})},recalculate(e){const t=!!e;return ge(this,t,t,t)},updateStyle(){return I(this)},checkScrolling(){const{elemStore:e}=this,t=Object(s.o)(e["main-body-scroll"]),o=this.$refs.refLeftContainer,r=this.$refs.refRightContainer,l=this.$refs.refScrollXHandleElem||t;l&&(o&&(l.scrollLeft>0?Object(i.a)(o,"scrolling--middle"):Object(i.n)(o,"scrolling--middle")),r&&(l.clientWidth<l.scrollWidth-Math.ceil(l.scrollLeft)?Object(i.a)(r,"scrolling--middle"):Object(i.n)(r,"scrolling--middle")))},preventEvent(e,t,o,r,l){const n=this,i=n.$xeGrid;let s=x.get(t);s.length||"event.clearEdit"!==t||(s=x.get("event.clearActived"),s.length&&Object(h.b)("vxe.error.delEvent",["event.clearActived","event.clearEdit"]));let a=null,c=!1;for(let t=0;t<s.length;t++){const r=(0,s[t])(Object.assign({$grid:i,$table:n,$event:e},o));if(!1===r){c=!0;break}if(r&&!1===r.status){a=r.result,c=!0;break}}return c||r&&(a=r()),l&&l(),a},handleGlobalMousedownEvent(e){const t=this.$xeGrid,{$el:o,$refs:r,$toolbar:l,mouseConfig:n,editStore:s,ctxMenuStore:a,editRules:c,editOpts:d,validOpts:u,areaOpts:p,filterStore:h,customStore:g,getRowNode:m}=this,{actived:f}=s,b=r.refTableFilter,x=r.refTableMenu,v=r.refTableCustom,C=r.refValidTooltip;if(b&&(Object(i.d)(e,o,"vxe-cell--filter").flag||Object(i.d)(e,b.$el).flag||Object(i.d)(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearFilter",h.args,this.closeFilter)),v&&(g.btnEl===e.target||Object(i.d)(e,document.body,"vxe-toolbar-custom-target").flag||Object(i.d)(e,v.$el).flag||Object(i.d)(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearCustom",{},()=>this.closeCustom())),f.row){if(!1!==d.autoClear){const t=f.args.cell;t&&Object(i.d)(e,t).flag||C&&Object(i.d)(e,C.$el).flag||(!this.lastCallTime||this.lastCallTime+50<Date.now())&&(Object(i.d)(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearEdit",f.args,()=>{let t;if("row"===d.mode){const r=Object(i.d)(e,o,"vxe-body--row");t=!!r.flag&&m(r.targetElem).item!==f.args.row}else t=!Object(i.d)(e,o,"col--edit").flag;if(t||(t=Object(i.d)(e,o,"vxe-header--row").flag),t||(t=Object(i.d)(e,o,"vxe-footer--row").flag),!t&&this.height&&!this.overflowY){const o=e.target;Object(i.h)(o,"vxe-table--body-wrapper")&&(t=e.offsetY<o.clientHeight)}!t&&Object(i.d)(e,o).flag||setTimeout(()=>{this.handleClearEdit(e).then(()=>{!this.isActivated&&c&&u.autoClear&&(this.validErrorMaps={})})})}))}}else if(n&&!(Object(i.d)(e,o).flag||t&&Object(i.d)(e,t.$el).flag||x&&Object(i.d)(e,x.$el).flag||l&&Object(i.d)(e,l.$el).flag)&&(this.clearSelected&&this.clearSelected(),p.autoClear&&this.getCellAreas)){const t=this.getCellAreas();t&&t.length&&!Object(i.d)(e,document.body,"vxe-table--ignore-areas-clear").flag&&this.preventEvent(e,"event.clearAreas",{},()=>{this.clearCellAreas(),this.clearCopyCellArea(),this.emitEvent("clear-cell-area-selection",{cellAreas:t},e)})}a.visible&&x&&!Object(i.d)(e,x.$el).flag&&this.closeMenu();const w=Object(i.d)(e,(t||this).$el).flag;!w&&c&&u.autoClear&&(this.validErrorMaps={}),this.isActivated=w},handleGlobalBlurEvent(){this.closeFilter(),this.closeMenu()},handleGlobalMousewheelEvent(){this.closeTooltip(),this.closeMenu()},keydownEvent(e){const{filterStore:t,ctxMenuStore:o,editStore:r,keyboardConfig:l,mouseConfig:n,mouseOpts:i,keyboardOpts:s}=this,{actived:a}=r,{keyCode:c}=e;27===c&&this.preventEvent(e,"event.keydown",null,()=>{if(this.emitEvent("keydown-start",{},e),l&&n&&i.area&&this.handleKeyboardCellAreaEvent)this.handleKeyboardCellAreaEvent(e);else if((a.row||t.visible||o.visible)&&(e.stopPropagation(),this.closeFilter(),this.closeMenu(),l&&s.isEsc&&a.row)){const t=a.args;this.handleClearEdit(e),n&&i.selected&&this.$nextTick(()=>this.handleSelected(t,e))}this.emitEvent("keydown",{},e),this.emitEvent("keydown-end",{},e)})},handleGlobalKeydownEvent(e){const t=this,o=t,r=t,a=t,c=t.$xeGrid;r.isActivated&&t.preventEvent(e,"event.keydown",null,()=>{const{mouseConfig:d,keyboardConfig:u,treeConfig:p,editConfig:h,highlightCurrentRow:g,highlightCurrentColumn:m}=o,{ctxMenuStore:f,editStore:b,currentRow:x}=a,{afterFullData:v}=r,C=t.computeIsMenu,w=t.computeBodyMenu,O=t.computeKeyboardOpts,E=t.computeMouseOpts,y=t.computeEditOpts,T=t.computeTreeOpts,R=t.computeMenuList,S=t.computeRowOpts,j=t.computeColumnOpts,{selected:D,actived:F}=b,{keyCode:$}=e,k=8===$,M=9===$,A=13===$,I=27===$,L=32===$,_=37===$,B=38===$,H=39===$,P=40===$,z=46===$,N=113===$,V=93===$,W=Object(i.i)(e),G=e.shiftKey,q=e.altKey,X=_||B||H||P,Y=C&&f.visible&&(A||L||X),K=Object(n.h)(h)&&F.column&&F.row,U=T.children||T.childrenField,Z=y.beforeEditMethod||y.activeMethod;if(Y)e.preventDefault(),f.showChild&&Object(n.f)(f.selected)?t.moveCtxMenu(e,f,"selectChild",_,!1,f.selected.children):t.moveCtxMenu(e,f,"selected",H,!0,R);else if(u&&d&&E.area&&t.handleKeyboardCellAreaEvent)t.handleKeyboardCellAreaEvent(e);else if(I){if(t.closeMenu&&t.closeMenu(),t.closeFilter(),u&&O.isEsc&&F.row){const o=F.args;t.handleClearEdit(e),E.selected&&t.$nextTick(()=>t.handleSelected(o,e))}}else if(u&&L&&O.isChecked&&D.row&&D.column&&("checkbox"===D.column.type||"radio"===D.column.type))e.preventDefault(),"checkbox"===D.column.type?t.handleToggleCheckRowEvent(e,D.args):t.triggerRadioRowEvent(e,D.args);else if(N&&Object(n.h)(h))K||D.row&&D.column&&(e.stopPropagation(),e.preventDefault(),t.handleEdit(D.args,e));else if(V)r._keyCtx=D.row&&D.column&&w.length,clearTimeout(r.keyCtxTimeout),r.keyCtxTimeout=setTimeout(()=>{r._keyCtx=!1},1e3);else if(A&&!q&&u&&O.isEnter&&(D.row||F.row||p&&(S.isCurrent||g)&&x)){const{isLastEnterAppendRow:o,beforeEnterMethod:r,enterMethod:l}=O;if(W){if(F.row){const o=F.args;t.handleClearEdit(e),d&&E.selected&&t.$nextTick(()=>t.handleSelected(o,e))}}else if(D.row||F.row){const n=D.row?D.args:F.args;if(G)O.enterToTab?t.moveTabSelected(n,G,e):t.moveEnterSelected(n,_,!0,H,!1,e);else if(O.enterToTab)t.moveTabSelected(n,G,e);else{const i=D.row||F.row,s=D.column||F.column,a=t.getVTRowIndex(i),c={row:i,rowIndex:t.getRowIndex(i),$rowIndex:t.getVMRowIndex(i),_rowIndex:a,column:s,columnIndex:t.getColumnIndex(s),$columnIndex:t.getVMColumnIndex(s),_columnIndex:t.getVTColumnIndex(s),$table:t};if(!r||!1!==r(c)){if(o&&a>=v.length-1)return t.insertAt({},-1).then(({row:o})=>{t.scrollToRow(o,D.column),t.handleSelected(Object.assign(Object.assign({},n),{row:o}),e)}),void t.dispatchEvent("enter-append-row",c,e);t.moveEnterSelected(n,_,!1,H,!0,e),l&&l(c)}}}else if(p&&(S.isCurrent||g)&&x){const o=x[U];if(o&&o.length){e.preventDefault();const r=o[0],l={$table:t,row:r,rowIndex:t.getRowIndex(r),$rowIndex:t.getVMRowIndex(r)};t.setTreeExpand(x,!0).then(()=>t.scrollToRow(r)).then(()=>t.triggerCurrentRowEvent(e,l))}}}else if(X&&u&&O.isArrow)K||(E.selected&&D.row&&D.column?t.moveArrowSelected(D.args,_,B,H,P,e):((B||P)&&(S.isCurrent||g)&&t.moveCurrentRow(B,P,e),(_||H)&&(j.isCurrent||m)&&t.moveCurrentColumn(_,H,e)));else if(M&&u&&O.isTab)D.row||D.column?t.moveTabSelected(D.args,G,e):(F.row||F.column)&&t.moveTabSelected(F.args,G,e);else if(u&&O.isDel&&z&&Object(n.h)(h)&&(D.row||D.column)){if(!K){const{delMethod:o}=O,r={row:D.row,rowIndex:t.getRowIndex(D.row),column:D.column,columnIndex:t.getColumnIndex(D.column),$table:t,$grid:c};Z&&!Z(r)||(o?o(r):Object(s.z)(D.row,D.column,null),t.updateFooter(),t.dispatchEvent("cell-delete-value",r,e))}}else if(k&&u&&O.isBack&&Object(n.h)(h)&&(D.row||D.column)){if(!K){const{editMode:o,backMethod:r}=O;if(O.isDel&&Object(n.h)(h)&&(D.row||D.column)){const l={row:D.row,rowIndex:t.getRowIndex(D.row),column:D.column,columnIndex:t.getColumnIndex(D.column),$table:t,$grid:c};Z&&!Z(l)||(r?r(l):("insert"!==o&&Object(s.z)(D.row,D.column,null),t.handleEdit(D.args,e)),t.dispatchEvent("cell-backspace-value",l,e))}}}else if(k&&u&&p&&O.isBack&&(S.isCurrent||g)&&x){const{parent:o}=l.a.findTree(r.afterTreeFullData,e=>e===x,{children:U});if(o){e.preventDefault();const r={row:o,rowIndex:t.getRowIndex(o),$rowIndex:t.getVMRowIndex(o),$table:t,$grid:c};t.setTreeExpand(o,!1).then(()=>t.scrollToRow(o)).then(()=>t.triggerCurrentRowEvent(e,r))}}else if(u&&O.isEdit&&!W&&(L||$>=48&&$<=57||$>=65&&$<=90||$>=96&&$<=111||$>=186&&$<=192||$>=219&&$<=222)){const{editMethod:o}=O;if(D.column&&D.row&&Object(n.h)(D.column.editRender)){const r=y.beforeEditMethod||y.activeMethod,l={row:D.row,rowIndex:t.getRowIndex(D.row),column:D.column,columnIndex:t.getColumnIndex(D.column),$table:t,$grid:c};r&&!r(l)||(o?o(l):(Object(s.z)(D.row,D.column,null),t.handleEdit(D.args,e)))}}t.dispatchEvent("keydown",{},e)})},handleGlobalPasteEvent(e){const{isActivated:t,keyboardConfig:o,keyboardOpts:r,mouseConfig:l,mouseOpts:n,editStore:i,filterStore:s}=this,{actived:a}=i;t&&!s.visible&&(a.row||a.column||o&&r.isClip&&l&&n.area&&this.handlePasteCellAreaEvent&&this.handlePasteCellAreaEvent(e),this.emitEvent("paste",{},e))},handleGlobalCopyEvent(e){const{isActivated:t,keyboardConfig:o,keyboardOpts:r,mouseConfig:l,mouseOpts:n,editStore:i,filterStore:s}=this,{actived:a}=i;t&&!s.visible&&(a.row||a.column||o&&r.isClip&&l&&n.area&&this.handleCopyCellAreaEvent&&this.handleCopyCellAreaEvent(e),this.emitEvent("copy",{},e))},handleGlobalCutEvent(e){const{isActivated:t,keyboardConfig:o,keyboardOpts:r,mouseConfig:l,mouseOpts:n,editStore:i,filterStore:s}=this,{actived:a}=i;t&&!s.visible&&(a.row||a.column||o&&r.isClip&&l&&n.area&&this.handleCutCellAreaEvent&&this.handleCutCellAreaEvent(e),this.emitEvent("cut",{},e))},handleGlobalResizeEvent(){this.closeMenu(),this.updateCellAreas(),ge(this,!0,!0,!0),this.updateCellAreas()},handleUpdateBodyMerge(){const e=this,t=this,{mergeBodyList:o}=t;t.mergeBodyCellMaps=Y(o),e.mergeBodyFlag++},handleUpdateFooterMerge(){const e=this,t=this,{mergeFooterList:o}=t;t.mergeFooterCellMaps=Y(o),e.mergeFootFlag++},handleAggregateSummaryData(){return function(e){const t=e,o=e,r=e,{aggregateConfig:n,rowGroupConfig:i}=t,{isRowGroupStatus:s}=o,{tableFullGroupData:a}=r,c=e.computeAggregateOpts,{mapChildrenField:d}=c;if((n||i)&&s){const t=[];l.a.eachTree(a,e=>{e.isAggregate&&t.push(e)},{children:d}),be(e,t)}}(this)},handleTargetLeaveEvent(){const e=this,t=e,o=e.computeTooltipOpts;let r=e.$refs.refTooltip;r&&r.setActived&&r.setActived(!1),o.enterable?t.tooltipTimeout=setTimeout(()=>{r=e.$refs.refTooltip,r&&r.isActived&&!r.isActived()&&e.closeTooltip()},o.leaveDelay):e.closeTooltip()},triggerHeaderTitleEvent(e,t,o){const r=this,l=r,i=t.content||t.message;if(i){const{tooltipStore:s}=l,{column:a}=o,c=Object(n.d)(i);oe(r,!0),s.row=null,s.column=a,s.visible=!0,s.currOpts=t,r.$nextTick(()=>{const t=r.$refs.refTooltip;t&&t.open&&t.open(e.currentTarget,c)})}},triggerHeaderTooltipEvent(e,t){const o=this,r=o,{tooltipStore:l}=r,{column:n}=t;oe(o,!0);const s=e.currentTarget;if(!s)return;const a=s.parentElement;if(!a)return;const c=a.parentElement;if(!c)return;const d=c.parentElement;if(d&&(l.column!==n||!l.visible)){const e=d.querySelector(".vxe-cell--title");ae(o,0,d,(Object(i.h)(d,"col--ellipsis")?e:a)||a,e||c,t)}},triggerBodyTooltipEvent(e,t){const o=this,r=o,l=o,{editConfig:i}=r,{editStore:s}=l,{tooltipStore:a}=l,c=o.computeEditOpts,{actived:d}=s,{row:u,column:p}=t,h=e.currentTarget;if(oe(o,a.column!==p||a.row!==u),p.editRender&&Object(n.h)(i)){if("row"===c.mode&&d.row===u)return;if(d.row===u&&d.column===p)return}if(a.column!==p||a.row!==u||!a.visible){const e=h.querySelector(".vxe-cell--wrapper");let r=null,l=h.querySelector("html"===p.type?".vxe-cell--html":".vxe-cell--label");p.treeNode&&(r=h.querySelector(".vxe-tree-cell")),l||(l=e),ae(o,0,h,r||e,l,t)}},triggerFooterTooltipEvent(e,t){const o=this,r=o,{column:l}=t,{tooltipStore:n}=r,i=e.currentTarget;if(oe(o,n.column!==l||!!n.row),n.column!==l||!n.visible){const e=i.querySelector(".vxe-cell--wrapper");let r=null,n=i.querySelector("html"===l.type?".vxe-cell--html":".vxe-cell--label");"html"===l.type&&(r=i.querySelector(".vxe-cell--html")),n||(n=e),ae(o,0,i,r||e,n,t)}},openTooltip(e,t){const{$refs:o}=this,r=o.refCommTooltip;return r?r.open(e,t):this.$nextTick()},closeTooltip(){const{tooltipStore:e}=this,t=this.$refs.refTooltip,o=this.$refs.refCommTooltip;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1,currOpts:{}}),t&&t.close()),o&&o.close(),this.$nextTick()},isAllCheckboxChecked(){return this.isAllSelected},isAllCheckboxIndeterminate(){return!this.isAllSelected&&this.isIndeterminate},isCheckboxIndeterminate(){return Object(h.b)("vxe.error.delFunc",["isCheckboxIndeterminate","isAllCheckboxIndeterminate"]),this.isAllCheckboxIndeterminate()},getCheckboxIndeterminateRecords(e){const{treeConfig:t}=this,{fullDataRowIdData:o,treeIndeterminateRowMaps:r}=this;if(t){const t=[],n=[];return l.a.each(r,(e,r)=>{e&&(t.push(e),o[r]&&n.push(e))}),e?t:n}return[]},handleCheckedCheckboxRow(e,t,o){return P(this,e,t,o)},setCheckboxRow(e,t){return e&&!l.a.isArray(e)&&(e=[e]),P(this,e,t,!0)},setCheckboxRowKey(e,t){const{fullAllDataRowIdData:o}=this;e&&!l.a.isArray(e)&&(e=[e]);const r=[];return e.forEach(e=>{const t=o[e];t&&r.push(t.row)}),P(this,r,t,!0)},isCheckedByCheckboxRow(e){const{updateCheckboxFlag:t}=this,{selectCheckboxMaps:o}=this,r=this.computeCheckboxOpts,{checkField:n}=r;return n?l.a.get(e,n):!!t&&!!o[Object(s.r)(this,e)]},isCheckedByCheckboxRowKey(e){const{updateCheckboxFlag:t}=this,{fullAllDataRowIdData:o,selectCheckboxMaps:r}=this,n=this.computeCheckboxOpts,{checkField:i}=n;if(i){const t=o[e];return!!t&&l.a.get(t.row,i)}return!!t&&!!r[e]},isIndeterminateByCheckboxRow(e){const{treeIndeterminateRowMaps:t}=this;return!!t[Object(s.r)(this,e)]&&!this.isCheckedByCheckboxRow(e)},isIndeterminateByCheckboxRowKey(e){const{treeIndeterminateRowMaps:t}=this;return!!t[e]&&!this.isCheckedByCheckboxRowKey(e)},handleBatchSelectRows(e,t,o){const r=this,n=r,i=r,a=r,{treeConfig:c}=n,{isRowGroupStatus:d}=i,{selectCheckboxMaps:u}=a,p=r.computeAggregateOpts,h=r.computeTreeOpts,{transform:g,mapChildrenField:m}=h,f=h.children||h.childrenField,b=r.computeCheckboxOpts,{checkField:x,checkStrictly:v,checkMethod:C}=b,{handleGetRowId:w}=Object(s.g)(r),O=b.indeterminateField||b.halfField;if(x)return!c&&!d||v?(e.forEach(e=>{(o||!C||C({$table:r,row:e}))&&(l.a.set(e,x,t),B(r,e,t))}),void i.updateCheckboxFlag++):(l.a.eachTree(e,e=>{(o||!C||C({$table:r,row:e}))&&(l.a.set(e,x,t),O&&l.a.set(e,O,!1),B(r,e,t))},{children:g?m:f}),void i.updateCheckboxFlag++);if(!v){if(d)return l.a.eachTree(e,e=>{const l=w(e);(o||!C||C({$table:r,row:e}))&&(t?u[l]=e:u[l]&&delete u[l],B(r,e,t))},{children:p.mapChildrenField}),void i.updateCheckboxFlag++;if(c)return l.a.eachTree(e,e=>{const l=w(e);(o||!C||C({$table:r,row:e}))&&(t?u[l]=e:u[l]&&delete u[l],B(r,e,t))},{children:g?m:f}),void i.updateCheckboxFlag++}e.forEach(e=>{const l=w(e);(o||!C||C({$table:r,row:e}))&&(t?u[l]||(u[l]=e):u[l]&&delete u[l],B(r,e,t),i.updateCheckboxFlag++)})},handleSelectRow({row:e},t,o){this.handleBatchSelectRows([e],t,o)},handleToggleCheckRowEvent(e,t){const o=this,r=o,{selectCheckboxMaps:n}=r,i=o.computeCheckboxOpts,{checkField:a,trigger:c}=i,{row:d}=t;if("manual"===c)return;let u=!1;u=a?!l.a.get(d,a):!n[Object(s.r)(o,d)],e?o.triggerCheckRowEvent(e,t,u):(o.handleBatchSelectRows([d],u),o.checkSelectionStatus())},triggerCheckRowEvent(e,t,o){const r=this,l=r,n=r,i=r,{treeConfig:s}=l,{row:a}=t,{isRowGroupStatus:c}=n,{afterFullData:d}=i,u=r.computeCheckboxOpts,{checkMethod:p,trigger:h}=u;if("manual"!==h){if(e.stopPropagation(),u.isShiftKey&&e.shiftKey&&!s&&!c){const o=r.getCheckboxRecords();if(o.length){const l=o[0],n=r.getVTRowIndex(a),i=r.getVTRowIndex(l);if(n!==i){r.setAllCheckboxRow(!1);const o=n<i?d.slice(n,i+1):d.slice(i,n+1);return r.$nextTick(()=>{P(r,o,!0,!1)}),void r.dispatchEvent("checkbox-range-select",Object.assign({rangeRecords:o},t),e)}}}p&&!p({$table:r,row:a})||(r.handleBatchSelectRows([a],o),r.checkSelectionStatus(),r.dispatchEvent("checkbox-change",Object.assign({records:()=>r.getCheckboxRecords(),reserves:()=>r.getCheckboxReserveRecords(),indeterminates:()=>r.getCheckboxIndeterminateRecords(),checked:o},t),e))}},toggleCheckboxRow(e){const{selectCheckboxMaps:t}=this,o=this.computeCheckboxOpts,{checkField:r}=o,n=r?!l.a.get(e,r):!t[Object(s.r)(this,e)];return this.handleBatchSelectRows([e],n,!0),this.checkSelectionStatus(),this.$nextTick()},setAllCheckboxRow(e){return z(this,e,!0)},updateCheckboxStatus(){const e=this,t=e,o=e,r=e,{treeConfig:n}=t,{isRowGroupStatus:i}=o,{afterTreeFullData:a,afterGroupFullData:c,selectCheckboxMaps:d,treeIndeterminateRowMaps:u}=r,p=e.computeAggregateOpts,h=e.computeTreeOpts,g=h.children||h.childrenField,m=e.computeCheckboxOpts,{checkField:f,indeterminateField:b,checkStrictly:x,checkMethod:v}=m;if(!x){if(i||n){const{handleGetRowId:t}=Object(s.g)(e),o={},r=[];if(i){const e=p.mapChildrenField;e&&l.a.eachTree(c,l=>{const n=t(l),i=l[e];i&&i.length&&!o[n]&&(o[n]=1,r.unshift([l,n,i]))},{children:e})}else if(n){const{transform:e,mapChildrenField:n}=h;l.a.eachTree(a,i=>{const s=t(i),a=i[e?n:g];a&&a.length&&!o[s]?(o[s]=1,r.unshift([i,s,a])):b&&l.a.set(i,b,!1)},{children:e?n:g})}r.forEach(o=>{const r=o[0],n=o[1],i=o[2];let s=0,a=0,c=0;const p=i.length;i.forEach(v?o=>{const r=t(o),n=f?l.a.get(o,f):d[r];v({$table:e,row:o})?(n?s++:u[r]&&a++,c++):n?s++:u[r]&&a++}:e=>{const o=t(e);(f?l.a.get(e,f):d[o])?s++:u[o]&&a++,c++});let h=!1;h=p>0?c>0?(s>0||a>0)&&s>=c:s>0&&s>=c||!!d[n]:d[n];const g=!h&&(s>0||a>0);f&&l.a.set(r,f,h),b&&l.a.set(r,b,g),h?(f||(d[n]=r),u[n]&&delete u[n]):(f||d[n]&&delete d[n],g?u[n]=r:u[n]&&delete u[n])})}o.updateCheckboxFlag++}},updateAllCheckboxStatus(){const e=this,t=e,o=e,r=e,{treeConfig:n}=t,{isRowGroupStatus:i}=o,{afterFullData:a,afterTreeFullData:c,afterGroupFullData:d,checkboxReserveRowMap:u,selectCheckboxMaps:p,treeIndeterminateRowMaps:h}=r,g=e.computeCheckboxOpts,{checkField:m,checkMethod:f,showReserveStatus:b}=g,{handleGetRowId:x}=Object(s.g)(e);let v=0,C=0,w=0,O=0,E=0;const y=n?c:i?d:a;y.forEach(f?t=>{const o=x(t),r=m?l.a.get(t,m):p[o];f({$table:e,row:t})?(r?v++:h[o]&&w++,E++):r?C++:h[o]&&O++}:e=>{const t=x(e);(m?l.a.get(e,m):p[t])?v++:h[t]&&w++,E++});const T=y.length>0&&(E>0?v>=E:v>=y.length);let R=!T&&(v>0||w>0||C>0||O>0);T||R||!b||(R=!l.a.isEmpty(u)),o.isAllSelected=T,o.isIndeterminate=R},checkSelectionStatus(){this.updateCheckboxStatus(),this.updateAllCheckboxStatus()},getRadioReserveRecord(e){const{fullDataRowIdData:t,radioReserveRow:o,radioOpts:r,afterFullData:n,treeConfig:i,treeOpts:a}=this,c=a.children||a.childrenField;if(r.reserve&&o){const r=Object(s.r)(this,o);if(e){if(!t[r])return o}else{const e=Object(s.s)(this);if(i){if(l.a.findTree(n,t=>r===l.a.get(t,e),{children:c}))return o}else if(!n.some(t=>r===l.a.get(t,e)))return o}}return null},clearRadioReserve(){return this.radioReserveRow=null,this.$nextTick()},getCheckboxReserveRecords(e){const t=this,o=t,r=t,{treeConfig:n}=o,{afterFullData:i,fullDataRowIdData:a,checkboxReserveRowMap:c}=r,d=t.computeCheckboxOpts,u=t.computeTreeOpts,p=u.children||u.childrenField,h=[];if(d.reserve){const{handleGetRowId:o}=Object(s.g)(t),r={};n?l.a.eachTree(i,e=>{r[o(e)]=1},{children:p}):i.forEach(e=>{r[o(e)]=1}),l.a.each(c,(t,o)=>{t&&(e?a[o]||h.push(t):r[o]||h.push(t))})}return h},clearCheckboxReserve(){return this.checkboxReserveRowMap={},this.$nextTick()},handleCheckboxReserveRow(e,t){const{checkboxReserveRowMap:o,checkboxOpts:r}=this;if(r.reserve){const r=Object(s.r)(this,e);t?o[r]=e:o[r]&&delete o[r]}},handleCheckAllEvent(e,t){const o=this;z(o,t),e&&o.dispatchEvent("checkbox-all",{records:()=>o.getCheckboxRecords(),reserves:()=>o.getCheckboxReserveRecords(),indeterminates:()=>o.getCheckboxIndeterminateRecords(),checked:t},e)},triggerCheckAllEvent(e,t){const{checkboxOpts:o}=this,{trigger:r}=o;"manual"!==r&&(e&&e.stopPropagation(),this.handleCheckAllEvent(e,t))},toggleAllCheckboxRow(){return this.handleCheckAllEvent(null,!this.isAllSelected),this.$nextTick()},clearCheckboxRow(){const e=this,t=this,{treeConfig:o}=this,{tableFullData:r}=t,n=this.computeTreeOpts,i=n.children||n.childrenField,s=this.computeCheckboxOpts,{checkField:a,reserve:c}=s,d=s.indeterminateField||s.halfField;if(a){const e=e=>{o&&d&&l.a.set(e,d,!1),l.a.set(e,a,!1)};o?l.a.eachTree(r,e,{children:i}):r.forEach(e)}return c&&r.forEach(e=>this.handleCheckboxReserveRow(e,!1)),e.isAllSelected=!1,e.isIndeterminate=!1,t.selectCheckboxMaps={},t.treeIndeterminateRowMaps={},e.updateCheckboxFlag++,this.$nextTick()},triggerRadioRowEvent(e,t){const o=this,r=o,{selectRadioRow:l}=r,{row:n}=t,i=o.computeRadioOpts,{trigger:s,checkMethod:a}=i;if("manual"!==s&&(e.stopPropagation(),!a||a({$table:o,row:n}))){let r=n,s=l!==r;s?H(o,r):i.strict||(s=l===r,s&&(r=null,o.clearRadioRow())),s&&o.dispatchEvent("radio-change",Object.assign({oldValue:l,newValue:r},t),e)}},triggerCurrentColumnEvent(e,t){const o=this,r=o,{currentColumn:l}=r,n=o.computeColumnOpts,i=o.computeCurrentColumnOpts,s=i.beforeSelectMethod||n.currentMethod,{column:a}=t,{trigger:c}=i;if("manual"===c)return;const d=l!==a;!s||s({column:a,$table:o})?(o.setCurrentColumn(a),d&&o.dispatchEvent("current-column-change",Object.assign({oldValue:l,newValue:a},t),e)):o.dispatchEvent("current-column-disabled",t,e)},triggerCurrentRowEvent(e,t){const o=this,r=o,{currentRow:l}=r,n=o.computeRowOpts,i=o.computeCurrentRowOpts,s=i.beforeSelectMethod||n.currentMethod,{row:a}=t,{trigger:c}=i;if("manual"===c)return;const d=l!==a;!s||s({row:a,$table:o})?(o.setCurrentRow(a),d&&(o.dispatchEvent("current-row-change",Object.assign({oldValue:l,newValue:a},t),e),o.dispatchEvent("current-change",Object.assign({oldValue:l,newValue:a},t),e))):o.dispatchEvent("current-row-disabled",t,e)},setCurrentRow(e){const{$el:t,rowOpts:o}=this;return this.clearCurrentRow(),this.currentRow=e,(o.isCurrent||this.highlightCurrentRow)&&t&&l.a.arrayEach(t.querySelectorAll(`[rowid="${Object(s.r)(this,e)}"]`),e=>Object(i.a)(e,"row--current")),this.$nextTick()},isCheckedByRadioRow(e){const t=this,o=t,{selectRadioRow:r}=o;return!(!e||!r)&&t.eqRow(r,e)},isCheckedByRadioRowKey(e){const t=this,o=t,{selectRadioRow:r}=o;return!!r&&e===Object(s.r)(t,r)},setRadioRow(e){return H(this,e,!0)},setRadioRowKey(e){const t=this,o=t,{fullAllDataRowIdData:r}=o,l=r[e];return l?H(t,l.row,!0):t.$nextTick()},clearCurrentRow(){const{$el:e}=this;return this.currentRow=null,this.hoverRow=null,e&&l.a.arrayEach(e.querySelectorAll(".row--current"),e=>Object(i.n)(e,"row--current")),this.$nextTick()},clearRadioRow(){return this.selectRadioRow=null,this.$nextTick()},getCurrentRecord(){return this.rowOpts.isCurrent||this.highlightCurrentRow?this.currentRow:null},getRadioRecord(e){const{selectRadioRow:t,fullDataRowIdData:o,afterFullRowMaps:r}=this;if(t){const l=Object(s.r)(this,t);if(e){if(o[l])return t}else if(r[l])return t}return null},triggerHoverEvent(e,{row:t}){this.setHoverRow(t)},setHoverRow(e){const{$el:t}=this,o=Object(s.r)(this,e);this.clearHoverRow(),t&&l.a.arrayEach(t.querySelectorAll(`.vxe-body--row[rowid="${o}"]`),e=>Object(i.a)(e,"row--hover")),this.hoverRow=e},clearHoverRow(){const{$el:e}=this;e&&l.a.arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),e=>Object(i.n)(e,"row--hover")),this.hoverRow=null},triggerHeaderCellClickEvent(e,t){const o=this,r=o,l=o,{_lastResizeTime:n}=l,s=o.computeSortOpts,a=o.computeColumnOpts,c=o.computeCurrentColumnOpts,{column:d}=t,u=e.currentTarget,p=n&&n>Date.now()-300,h=Object(i.d)(e,u,"vxe-cell--sort").flag,g=Object(i.d)(e,u,"vxe-cell--filter").flag;return"cell"!==s.trigger||p||h||g||o.triggerSortEvent(e,d,E(o,d)),o.dispatchEvent("header-cell-click",Object.assign({triggerResizable:p,triggerSort:h,triggerFilter:g,cell:u},t),e),!a.isCurrent&&!r.highlightCurrentColumn||c.trigger&&!["header","default"].includes(c.trigger)||o.triggerCurrentColumnEvent(e,t),o.$nextTick()},triggerHeaderCellDblclickEvent(e,t){this.emitEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},getCurrentColumn(){return this.columnOpts.isCurrent||this.highlightCurrentColumn?this.currentColumn:null},setCurrentColumn(e){const t=this,o=t,r=t,{mouseConfig:l}=o,n=t.computeMouseOpts,i=l&&n.selected,a=Object(s.t)(t,e);return a&&(t.clearCurrentColumn(),r.currentColumn=a),t.$nextTick().then(()=>{i&&t.addCellSelectedClass()})},clearCurrentColumn(){return this.currentColumn=null,this.$nextTick()},triggerCellClickEvent(e,t){const o=this,r=o,l=o,{highlightCurrentRow:s,highlightCurrentColumn:a,editConfig:c}=r,{editStore:d,isDragResize:u}=l;if(u)return;const p=o.computeExpandOpts,h=o.computeEditOpts,g=o.computeTreeOpts,m=o.computeRadioOpts,f=o.computeCheckboxOpts,b=o.computeKeyboardOpts,x=o.computeAggregateOpts,v=o.computeRowOpts,C=o.computeColumnOpts,w=o.computeCurrentColumnOpts,{actived:O,focused:E}=d,{row:y,column:T}=t,{type:R,treeNode:S,rowGroupNode:j}=T,D="radio"===R,F="checkbox"===R,$="expand"===R,k=e.currentTarget,M=D&&Object(i.d)(e,k,"vxe-cell--radio").flag,A=F&&Object(i.d)(e,k,"vxe-cell--checkbox").flag,I=S&&Object(i.d)(e,k,"vxe-cell--tree-btn").flag,L=$&&Object(i.d)(e,k,"vxe-table--expanded").flag,B=$&&Object(i.d)(e,k,"vxe-row-group--node-btn").flag;t=Object.assign({cell:k,triggerRadio:M,triggerCheckbox:A,triggerTreeNode:I,triggerExpandNode:L},t),A||M||(!L&&("row"===p.trigger||$&&"cell"===p.trigger)&&o.triggerRowExpandEvent(e,t),("row"===g.trigger||S&&"cell"===g.trigger)&&o.triggerTreeExpandEvent(e,t),("row"===x.trigger||j&&"cell"===x.trigger)&&o.triggerRowGroupExpandEvent(e,t)),I||(L||B||((v.isCurrent||s)&&(A||M||o.triggerCurrentRowEvent(e,t)),!C.isCurrent&&!a||w.trigger&&!["cell","default"].includes(w.trigger)||A||M||o.triggerCurrentColumnEvent(e,t),!M&&("row"===m.trigger||D&&"cell"===m.trigger)&&o.triggerRadioRowEvent(e,t),!A&&("row"===f.trigger||F&&"cell"===f.trigger)&&o.handleToggleCheckRowEvent(e,t)),Object(n.h)(c)&&(b.arrowCursorLock&&e&&"cell"===h.mode&&e.target&&/^input|textarea$/i.test(e.target.tagName)&&(E.column=T,E.row=y),"manual"===h.trigger?O.args&&O.row===y&&T!==O.column&&_(o,e,t):O.args&&y===O.row&&T===O.column||("click"===h.trigger||"dblclick"===h.trigger&&"row"===h.mode&&O.row===y)&&_(o,e,t))),Object(n.h)(c)&&"dblclick"===h.trigger&&O.row&&O.column&&("row"===h.mode?o.eqRow(O.row,y)||o.handleClearEdit(e):"cell"===h.mode&&(o.eqRow(O.row,y)&&O.column.id===T.id||o.handleClearEdit(e))),o.dispatchEvent("cell-click",t,e)},triggerCellDblclickEvent(e,t){const o=this,r=o,l=o,{editConfig:i}=r,{editStore:s,isDragResize:a}=l;if(a)return;const c=o.computeEditOpts,{actived:d}=s,u=e.currentTarget;t=Object.assign({cell:u},t),Object(n.h)(i)&&"dblclick"===c.trigger&&(d.args&&e.currentTarget===d.args.cell||("row"===c.mode?L(o,"blur").catch(e=>e).then(()=>{o.handleEdit(t,e).then(()=>L(o,"change")).catch(e=>e)}):"cell"===c.mode&&o.handleEdit(t,e).then(()=>L(o,"change")).catch(e=>e))),this.emitEvent("cell-dblclick",t,e)},handleColumnSortEvent(e,t){const o=this,r=o,{mouseConfig:l}=r,n=o.computeMouseOpts,{field:i,sortable:s,order:a}=t;if(s){const r={$table:o,$event:e,column:t,field:i,property:i,order:a,sortList:o.getSortColumns(),sortTime:t.sortTime};l&&n.area&&o.handleSortEvent&&o.handleSortEvent(e,r),a||o.dispatchEvent("clear-sort",r,e),o.dispatchEvent("sort-change",r,e)}},triggerSortEvent(e,t,o){const r=this,l=r.computeSortOpts,{multiple:n,allowClear:i}=l,{field:s,sortable:a}=t;(a||t.remoteSort)&&(o&&t.order!==o?r.sort({field:s,order:o}):i&&r.clearSort(n?t:null),r.handleColumnSortEvent(e,t))},handleCellRuleUpdateStatus(e,t,o){const r=this,n=r,{validStore:i}=n,{row:a,column:c}=t;if(r.hasCellRules&&r.hasCellRules(e,a,c)){const t=r.getCellElement(a,c);if(t){const n=!l.a.isUndefined(o);return r.validCellRules(e,a,c,o).then(()=>{n&&i.visible&&Object(s.z)(a,c,o),r.clearValidate(a,c)}).catch(({rule:e})=>{n&&Object(s.z)(a,c,o),r.showValidTooltip({rule:e,row:a,column:c,cell:t})})}}return r.$nextTick()},triggerHeaderCellMousedownEvent(e,t){const o=this,r=o,{mouseConfig:l}=r,n=o.computeMouseOpts,s=o.computeColumnOpts,a=o.computeColumnDragOpts,{trigger:c,isCrossDrag:d,isPeerDrag:u,disabledMethod:p}=a,h=e.currentTarget,g=h&&h.tagName&&"input"===h.tagName.toLowerCase(),m=Object(i.d)(e,h,"vxe-cell--checkbox").flag,f=Object(i.d)(e,h,"vxe-cell--sort").flag,b=Object(i.d)(e,h,"vxe-cell--filter").flag;let x=!1;const v=s.drag&&"cell"===c;if(!(g||m||f||b)){const{column:r}=t;!v||r.fixed||!d&&!u&&r.parentId||p&&p(t)||(x=!0,o.handleHeaderCellDragMousedownEvent(e,t))}!x&&l&&n.area&&o.handleHeaderCellAreaEvent&&o.handleHeaderCellAreaEvent(e,Object.assign({cell:h,triggerSort:f,triggerFilter:b},t)),o.focus(),o.closeMenu&&o.closeMenu()},triggerCellMousedownEvent(e,t){const o=this,{column:r}=t,{type:l,treeNode:n}=r,s="radio"===l,a="checkbox"===l,c="expand"===l,d=o.computeRowOpts,u=o.computeRowDragOpts,{trigger:p,isCrossDrag:h,isPeerDrag:g,disabledMethod:m}=u,f=e.currentTarget;t.cell=f;const b=f&&f.tagName&&"input"===f.tagName.toLowerCase(),x=s&&Object(i.d)(e,f,"vxe-cell--radio").flag,v=a&&Object(i.d)(e,f,"vxe-cell--checkbox").flag,C=n&&Object(i.d)(e,f,"vxe-cell--tree-btn").flag,w=c&&Object(i.d)(e,f,"vxe-table--expanded").flag;let O=!1;d.drag&&(O="row"===p||r.dragSort&&"cell"===p);let E=!1;b||x||v||C||w||!O||!h&&!g&&t.level||m&&m(t)||(E=!0,o.handleCellDragMousedownEvent(e,t)),!E&&o.handleCellMousedownEvent&&o.handleCellMousedownEvent(e,t),o.focus(),o.closeFilter(),o.closeMenu&&o.closeMenu()},triggerCellMouseupEvent(){re(this)},handleRowDragDragstartEvent(e){e.dataTransfer&&e.dataTransfer.setDragImage(Object(i.g)(),0,0)},handleRowDragSwapEvent(e,t,o,r,n,i){const c=this,d=c,p=c,h=c,{treeConfig:g,dragConfig:f}=d,b=c.computeRowDragOpts,{afterFullData:x,tableFullData:v,fullAllDataRowIdData:C}=h,{animation:w,isPeerDrag:O,isCrossDrag:E,isSelfToChildDrag:y,dragEndMethod:T,dragToChildMethod:R}=b,S=c.computeTreeOpts,j=c.computeCellOpts,D=c.computeRowOpts,$=c.computeDefaultRowHeight,{transform:k,rowField:A,mapChildrenField:I,parentField:L}=S,_=S.children||S.childrenField,B=T||(f?f.dragEndMethod:null),H="bottom"===n?1:0,P=c.$refs.refElem,z={status:!1};if(!(P&&r&&o))return Promise.resolve(z);if(r!==o){const t={oldRow:o,newRow:r,dragRow:o,dragPos:n,dragToChild:!!i,offsetIndex:H},d=y&&R?R(t):i;return Promise.resolve(!B||B(t)).then(t=>{if(!t)return z;const i=Object(s.r)(c,o),f=C[i]||{},b=f._index;let T=0,R=-1;if(w){T=Object(s.k)(f,j,D,$);const e=P.querySelector(`.vxe-body--row[rowid="${i}"]`);e&&(R=e.offsetTop)}let S=-1,B=-1;if(g){if(k){const e=f,t=Object(s.r)(c,r),n=C[t];if(e&&n){const{level:i}=e,{level:u}=n,p={};l.a.eachTree([o],e=>{p[Object(s.r)(c,e)]=e},{children:I});let g=!1;if(i&&u)if(O&&!E){if(e.row[L]!==n.row[L])return z}else{if(!E)return z;if(p[t]&&(g=!0,!E||!y))return a.b.modal&&a.b.modal.message({status:"error",content:m("vxe.error.treeDragChild")}),z}else if(i){if(!E)return z}else if(u){if(!E)return z;if(p[t]&&(g=!0,!E||!y))return a.b.modal&&a.b.modal.message({status:"error",content:m("vxe.error.treeDragChild")}),z}const f=l.a.toTreeArray(h.afterTreeFullData,{key:A,parentKey:L,children:I}),b=c.findRowIndexOf(f,o);f.splice(b,1);const x=c.findRowIndexOf(f,r)+H;f.splice(x,0,o),g&&E&&y&&l.a.each(o[_],e=>{e[L]=o[L]}),o[L]=d?r[A]:r[L],h.tableFullTreeData=l.a.toArrayTree(f,{key:A,parentKey:L,children:_,mapChildren:I})}}}else{S=c.findRowIndexOf(x,o);const e=c.findRowIndexOf(v,o);x.splice(S,1),v.splice(e,1);const t=c.findRowIndexOf(x,r),l=c.findRowIndexOf(v,r);B=t+H;const n=l+H;x.splice(B,0,o),v.splice(n,0,o)}return c.handleTableData(g&&k),c.cacheRowMap(!1),F(c),g&&k||M(c),c.checkSelectionStatus(),p.scrollYLoad&&c.updateScrollYSpace(),e&&c.dispatchEvent("row-dragend",{oldRow:o,newRow:r,dragRow:o,dragPos:n,dragToChild:d,offsetIndex:H,_index:{newIndex:B,oldIndex:S}},e),c.$nextTick().then(()=>{if(w){const{tableData:e}=p,t=C[i],o=t._index,r=e[0],l=C[Object(s.r)(c,r)];if(l){const r=l._index,n=r+e.length;let i=-1,a=-1,d=1;if(b<r)i=0,a=o-r;else if(b>n){i=t.$index+1,a=e.length,d=-1}else o>b?(i=b-r,a=i+o-b):(i=o-r,a=i+b-o+1,d=-1);const p=e.slice(i,a);if(p.length){u(P.querySelectorAll(p.map(e=>`.vxe-body--row[rowid="${Object(s.r)(c,e)}"]`).join(",")),d*T)}}const n=P.querySelectorAll(`.vxe-body--row[rowid="${i}"]`),a=n[0];R>-1&&a&&u(n,R-a.offsetTop)}Le(c),_e(c),c.updateCellAreas(),c.recalculate()}).then(()=>({status:!0}))}).catch(()=>z)}return Promise.resolve(z)},handleRowDragDragendEvent(e){const t=this,o=t,r=t,n=t,{treeConfig:a}=o,{fullAllDataRowIdData:c,prevDragToChild:d}=n,{dragRow:u}=r,p=t.computeTreeOpts,{lazy:h}=p,g=p.hasChild||p.hasChildField,{prevDragRow:m,prevDragPos:f}=n,b=t.$refs.refElem;if(a&&h&&d){const o=c[Object(s.r)(t,m)];m[g]?o&&o.treeLoaded&&t.handleRowDragSwapEvent(e,!0,u,m,f,d):t.handleRowDragSwapEvent(e,!0,u,m,f,d)}else t.handleRowDragSwapEvent(e,!0,u,m,f,d);var x;se(t),le(t),x=b,setTimeout(()=>{x&&l.a.arrayEach(x.querySelectorAll(".vxe-body--row.row--drag-move"),e=>Object(i.n)(e,"row--drag-move"))},500),n.prevDragToChild=!1,r.dragRow=null,r.dragCol=null},handleRowDragDragoverEvent(e){const t=this,o=t,r=t,l=t,{treeConfig:n}=o,{fullAllDataRowIdData:a}=l,{dragRow:c}=r,d=t.computeTreeOpts,{lazy:u,transform:p,parentField:h}=d,g=d.hasChild||d.hasChildField,m=t.computeRowDragOpts,{isPeerDrag:f,isCrossDrag:b,isToChildDrag:x}=m;if(!c)return void e.preventDefault();const v=Object(i.i)(e),C=e.currentTarget,w=a[C.getAttribute("rowid")||""];if(w){const o=w.row,i=a[Object(s.r)(t,o)];e.preventDefault();const{dragRow:c}=r,d=e.clientY-C.getBoundingClientRect().y<C.clientHeight/2?"top":"bottom";if(l.prevDragToChild=!!(n&&p&&x&&v),l.prevDragRow=o,l.prevDragPos=d,t.eqRow(c,o)||v&&n&&u&&o[g]&&i&&!i.treeLoaded||!b&&n&&p&&(f?c[h]!==o[h]:w.level))return void ie(t,e,C,null,!1,d);ie(t,e,C,null,!0,d),t.dispatchEvent("row-dragover",{oldRow:c,targetRow:o,dragPos:d},e)}},handleCellDragMousedownEvent(e,t){var o;const r=this,n=r,a=r;e.stopPropagation();const{dragConfig:c}=n,d=r.computeRowDragOpts,{trigger:u,dragStartMethod:p}=d,{row:h}=t,g=e.currentTarget,f="cell"===u||"row"===u?g:null===(o=g.parentElement)||void 0===o?void 0:o.parentElement,b=f.parentElement,x=p||(c?c.dragStartMethod:null);if(le(r),x&&!x(t))return b.draggable=!1,a.dragRow=null,a.dragCol=null,void se(r);a.dragRow=h,a.dragCol=null,b.draggable=!0,function(e,t){const o=e.$el;if(o){const r="row--drag-origin",n=Object(s.r)(e,t);l.a.arrayEach(o.querySelectorAll(`[rowid="${n}"]`),e=>{Object(i.a)(e,r)})}}(r,h),function(e,t){const o=e,r=e,{dragConfig:l}=r,{dragRow:n}=o,i=e.computeRowDragOpts,{tooltipMethod:s}=i,a=s||(l?l.rowTooltipMethod:null);let c="";if(a){c=""+(a({$table:e,row:n})||"")}else c=m("vxe.table.dragTip",[t.textContent||""]);o.dragTipText=c}(r,f),r.dispatchEvent("row-dragstart",t,e)},handleCellDragMouseupEvent(){re(this)},handleHeaderCellDragDragstartEvent(e){e.dataTransfer&&e.dataTransfer.setDragImage(Object(i.g)(),0,0)},handleColDragSwapColumn(){const e=this;return Oe(e),Te(e,!1).then(()=>{e.updateCellAreas(),e.saveCustomStore("update:sort")})},handleColDragSwapEvent(e,t,o,r,n,i){const s=this,c=s,d=s,u=s,{mouseConfig:h}=c,g=s.computeColumnDragOpts,{animation:f,isPeerDrag:b,isCrossDrag:x,isSelfToChildDrag:v,isToChildDrag:C,dragEndMethod:w,dragToChildMethod:O}=g,{collectColumn:E,fullColumnIdData:y}=u,T=s.$refs.refElem,R="right"===n?1:0,S={status:!1};if(!(T&&r&&o))return Promise.resolve(S);if(r!==o){const c=o,g=r,j={oldColumn:c,newColumn:g,dragColumn:c,dragPos:n,dragToChild:!!i,offsetIndex:R},D=v&&O?O(j):i;return Promise.resolve(!w||w(j)).then(o=>{if(!o)return S;let r=null;const i=[];let w=0;f&&l.a.eachTree([c],e=>{r||e.children&&e.children.length||(r=e,w+=e.renderWidth),i.push(e)}),r||(r=c);const O=y[r.id]||{},j=O._index;let F=-1;if(f){const e=T.querySelector(`.vxe-table--column[colid="${r.id}"]`);e&&(F=e.offsetLeft)}let $=-1,k=-1;const M={};l.a.eachTree([c],e=>{M[e.id]=e});let A=!1;if(c.parentId&&g.parentId)if(b&&!x){if(c.parentId!==g.parentId)return S}else{if(!x)return S;if(M[g.id]&&(A=!0,!x||!v))return a.b.modal&&a.b.modal.message({status:"error",content:m("vxe.error.treeDragChild")}),S}else if(c.parentId){if(!x)return S}else if(g.parentId){if(!x)return S;if(M[g.id]&&(A=!0,!x||!v))return a.b.modal&&a.b.modal.message({status:"error",content:m("vxe.error.treeDragChild")}),S}const I=l.a.findTree(E,e=>e.id===c.id);if(A&&x&&v){if(I){const{items:e,index:t}=I,o=c.children||[];o.forEach(e=>{e.parentId=c.parentId}),e.splice(t,1,...o),c.children=[]}}else if(I){const{items:e,index:t,parent:o}=I;e.splice(t,1),o||($=t)}const L=l.a.findTree(E,e=>e.id===g.id);if(L){const{items:e,index:t,parent:o}=L;x&&C&&D?(c.parentId=g.id,g.children=(g.children||[]).concat([c])):(c.parentId=g.parentId,e.splice(t+R,0,c)),o||(k=t)}return l.a.eachTree(E,(e,t,o,r,l)=>{if(!l){const o=t+1;e.renderSortNumber=o}}),h&&(s.clearSelected&&s.clearSelected(),s.clearCellAreas&&(s.clearCellAreas(),s.clearCopyCellArea())),e&&s.dispatchEvent("column-dragend",{oldColumn:c,newColumn:g,dragColumn:c,dragPos:n,dragToChild:D,offsetIndex:R,_index:{newIndex:k,oldIndex:$}},e),s.$nextTick().then(()=>{if(t)return s.handleColDragSwapColumn()}).then(()=>{if(f){const{tableColumn:e}=d,{visibleColumn:t,fullColumnIdData:o}=u;let r=null;const n={};if(l.a.eachTree([c],e=>{r||e.children&&e.children.length||(r=e),n[e.id]=e}),r||(r=c),w&&i.length){const s=l.a.findIndexOf(t,e=>!!r&&e.id===r.id),a=o[e[0].id];if(a){const t=a._index,o=t+e.length;let r=-1,i=-1,c=1;if(j<t)r=0,i=s-t;else if(j>o){r=O.$index+1,i=e.length,c=-1}else s>j?(r=j-t,i=r+s-j):(r=s-t+1,i=r+j-s,c=-1);const d=[],u={};for(let t=r;t<i;t++){const o=e[t];u[o.id]||n[o.id]||(u[o.id]=o,d.push(o))}if(l.a.eachTree([g],e=>{u[e.id]||(u[e.id]=e,d.push(e))}),d.length){p(T.querySelectorAll(d.map(e=>`.vxe-table--column[colid="${e.id}"]`).join(",")),c*w)}}const c=T.querySelectorAll(i.map(e=>`.vxe-table--column[colid="${e.id}"]`).join(",")),d=c[0];F>-1&&d&&p(c,F-d.offsetLeft)}}return Ie(s),Ee(s),s.updateCellAreas(),{status:!0}})}).catch(()=>S)}return Promise.resolve(S)},handleHeaderCellDragDragendEvent(e){const t=this,o=this,{dragCol:r}=t,{prevDragCol:n,prevDragPos:s,prevDragToChild:a}=o,c=this.$refs.refElem;var d;this.handleColDragSwapEvent(e,!0,r,n,s,a),se(this),ne(this),d=c,setTimeout(()=>{d&&l.a.arrayEach(d.querySelectorAll(".vxe-table--column.col--drag-move"),e=>Object(i.n)(e,"col--drag-move"))},500),o.prevDragToChild=!1,t.dragRow=null,t.dragCol=null},handleHeaderCellDragDragoverEvent(e){const t=this,o=t,r=t,{dragCol:l}=o,n=t.computeColumnDragOpts,{isToChildDrag:s,isPeerDrag:a,isCrossDrag:c}=n;if(!l)return void e.preventDefault();const d=Object(i.i)(e),u=e.currentTarget,p=u.getAttribute("colid"),h=t.getColumnById(p);if(h){e.preventDefault();const{clientX:o}=e,n=o-u.getBoundingClientRect().x<u.clientWidth/2?"left":"right";if(r.prevDragToChild=!!(c&&s&&d),r.prevDragCol=h,r.prevDragPos=n,h.fixed||l&&l.id===h.id||!c&&(a?l.parentId!==h.parentId:h.parentId))return void ie(t,e,null,u,!1,n);ie(t,e,null,u,!0,n),t.dispatchEvent("column-dragover",{oldColumn:l,targetColumn:h,dragPos:n},e);const i=t.$refs.refElem;if(!i)return;const p=t.$refs.refScrollXHandleElem,g=t.$refs.refTableBody,m=g?g.$el:null,f=p||m;if(f){const e=i.getBoundingClientRect(),r=i.clientWidth,l=t.$refs.refLeftContainer,n=l?l.clientWidth:0,s=t.$refs.refRightContainer,a=s?s.clientWidth:0,c=28,d=o-(e.x+n),u=e.x+r-a-o;if(d>0&&d<=c){const e=Math.floor(r/(d>c/2?240:120));f.scrollLeft-=e*(c-d)}else if(u>0&&u<=c){const e=Math.floor(r/(u>c/2?240:120));f.scrollLeft+=e*(c-u)}}}},handleHeaderCellDragMousedownEvent(e,t){var o;const r=this,n=r;e.stopPropagation();const s=r.computeColumnDragOpts,{trigger:a,dragStartMethod:c}=s,{column:d}=t,u=e.currentTarget,p="cell"===a?u:null===(o=u.parentElement)||void 0===o?void 0:o.parentElement;if(ne(r),c&&!c(t))return p.draggable=!1,n.dragRow=null,n.dragCol=null,void se(r);n.dragCol=d,n.dragRow=null,p.draggable=!0,function(e,t){const o=e.$el;if(o){const e=[];l.a.eachTree([t],t=>{e.push(`[colid="${t.id}"]`)});const r="col--drag-origin";l.a.arrayEach(o.querySelectorAll(e.join(",")),e=>{Object(i.a)(e,r)})}}(r,d),function(e,t){const o=e,{dragCol:r}=o,l=e.computeColumnDragOpts,{tooltipMethod:n}=l;let i="";if(n){i=""+(n({$table:e,column:r})||"")}else i=m("vxe.table.dragTip",[t.textContent||""]);o.dragTipText=i}(r,p),r.dispatchEvent("column-dragstart",t,e)},handleHeaderCellDragMouseupEvent(){const e=this;ne(this),se(this),e.dragRow=null,e.dragCol=null},setPendingRow(e,t){const o=this,{handleGetRowId:r}=Object(s.g)(this),{pendingRowMaps:n}=this;return e&&!l.a.isArray(e)&&(e=[e]),t?e.forEach(e=>{const t=r(e);t&&!n[t]&&(n[t]=e)}):e.forEach(e=>{const t=r(e);t&&n[t]&&delete n[t]}),o.pendingRowFlag++,this.$nextTick()},togglePendingRow(e){const t=this,{handleGetRowId:o}=Object(s.g)(this),{pendingRowMaps:r}=this;return e&&!l.a.isArray(e)&&(e=[e]),e.forEach(e=>{const t=o(e);t&&(r[t]?delete r[t]:r[t]=e)}),t.pendingRowFlag++,this.$nextTick()},hasPendingByRow(e){return this.isPendingByRow(e)},isPendingByRow(e){const{pendingRowMaps:t}=this;return!!t[Object(s.r)(this,e)]},getPendingRecords(){const{fullAllDataRowIdData:e,pendingRowMaps:t}=this,o=[];return l.a.each(t,(t,r)=>{e[r]&&o.push(t)}),o},clearPendingRow(){const e=this;return this.pendingRowMaps={},e.pendingRowFlag++,this.$nextTick()},sort(e,t){const o=this,r=o.computeSortOpts,{multiple:n,remote:i,orders:s}=r;if(e&&l.a.isString(e)&&(e=[{field:e,order:t}]),l.a.isArray(e)||(e=[e]),e.length){let t;return n||U(o),(n?e:[e[0]]).forEach((e,r)=>{let{field:n,order:i}=e,a=n;l.a.isString(n)&&(a=o.getColumnByField(n)),a&&(a.sortable||a.remoteSort)&&(t||(t=a),s&&-1===s.indexOf(i)&&(i=E(o,a)),a.order!==i&&(a.order=i),a.sortTime=Date.now()+r)}),(!i||t&&t.remoteSort)&&o.handleTableData(!0),o.$nextTick().then(()=>(Le(o),o.updateCellAreas(),I(o)))}return o.$nextTick()},setSort(e,t){return K(this,null,e,t)},setSortByEvent(e,t,o){return K(this,e,t,o)},clearSort(e){const t=this,o=t.computeSortOpts;if(e){const o=Object(s.t)(t,e);o&&(o.order=null)}else U(t);return o.remote||t.handleTableData(!0),t.$nextTick().then(()=>(Le(t),I(t)))},clearSortByEvent(e,t){const o=this,r=o,{tableFullColumn:l}=r,n=o.computeSortOpts,i=[];let a=null;if(e)if(t?(a=Object(s.t)(o,t),a&&(a.order=null)):l.forEach(e=>{e.order&&(e.order=null,i.push(e))}),n.remote||o.handleTableData(!0),i.length){const t={$table:o,$event:e,cols:i,sortList:[]};o.dispatchEvent("clear-all-sort",t,e)}else a&&o.handleColumnSortEvent(e,a);return o.$nextTick().then(()=>(Le(o),I(o)))},getSortColumn(){return Object(h.b)("vxe.error.delFunc",["getSortColumn","getSortColumns"]),l.a.find(this.tableFullColumn,e=>(e.sortable||e.remoteSort)&&e.order)},isSort(e){if(e){const t=Object(s.t)(this,e);return t&&t.sortable&&!!t.order}return this.getSortColumns().length>0},getSortColumns(){const{multiple:e,chronological:t}=this.sortOpts,o=[];return this.tableFullColumn.forEach(e=>{const{field:t,order:r}=e;(e.sortable||e.remoteSort)&&r&&o.push({column:e,field:t,property:t,order:r,sortTime:e.sortTime})}),e&&t&&o.length>1?l.a.orderBy(o,"sortTime"):o},setFilterByEvent(e,t,o,r){const l=this,n=Object(s.t)(l,t);return n&&n.filters&&(n.filters=Object(s.A)(o||[]),r)?l.handleColumnConfirmFilter(n,e):l.$nextTick()},closeFilter(){const e=this,t=e,{filterStore:o}=t,{column:r,visible:l}=o;return o.isAllSelected=!1,o.isIndeterminate=!1,o.options=[],o.visible=!1,l&&e.dispatchEvent("filter-visible",{column:r,field:r.field,property:r.field,filterList:()=>e.getCheckedFilters(),visible:!1},null),e.$nextTick()},isActiveFilterByColumn(e){const t=Object(s.t)(this,e);return t?t.filters&&t.filters.some(e=>e.checked):this.getCheckedFilters().length>0},isFilter(e){return this.isActiveFilterByColumn(e)},clearFilterByEvent(e,t){const o=this,r=o,l=o,{filterStore:n}=r,{tableFullColumn:i}=l,a=o.computeFilterOpts,c=[];let d=null;if(t?(d=Object(s.t)(o,t),d&&o.handleClearFilter(d)):i.forEach(e=>{e.filters&&(c.push(e),o.handleClearFilter(e))}),t&&d===n.column||Object.assign(n,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),a.remote||o.updateData(),c.length){const t={$table:o,$event:e,cols:c,filterList:[]};o.dispatchEvent("clear-all-filter",t,e)}else d&&o.dispatchEvent("clear-filter",{filterList:()=>o.getCheckedFilters()},e);return o.$nextTick()},isRowExpandLoaded(e){const{fullAllDataRowIdData:t}=this,o=t[Object(s.r)(this,e)];return o&&!!o.expandLoaded},clearRowExpandLoaded(e){const t=this,{fullAllDataRowIdData:o,rowExpandLazyLoadedMaps:r}=this,l=this.computeExpandOpts,{lazy:n}=l,i=Object(s.r)(this,e),a=o[i];return n&&a&&(a.expandLoaded=!1,delete r[i]),t.rowExpandedFlag++,this.$nextTick()},reloadRowExpand(e){const t=this,o=t,{rowExpandLazyLoadedMaps:r}=o,l=t.computeExpandOpts,{lazy:n}=l,i=Object(s.r)(this,e);return n&&!r[i]&&t.clearRowExpandLoaded(e).then(()=>W(t,e)),t.$nextTick()},reloadExpandContent(e){return Object(h.b)("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),this.reloadRowExpand(e)},triggerRowExpandEvent(e,t){const o=this,r=o,l=o,{expandColumn:n}=r,{rowExpandLazyLoadedMaps:i}=l,a=o.computeExpandOpts,{row:c}=t,{lazy:d,trigger:u}=a;if("manual"===u)return;e.stopPropagation();const p=Object(s.r)(o,c);if(!d||!i[p]){const t=!o.isRowExpandByRow(c),r=n?o.getColumnIndex(n):-1,l=n?o.getVMColumnIndex(n):-1;o.setRowExpand(c,t),o.dispatchEvent("toggle-row-expand",{expanded:t,column:n,columnIndex:r,$columnIndex:l,row:c,rowIndex:o.getRowIndex(c),$rowIndex:o.getVMRowIndex(c)},e)}},toggleRowExpand(e){return this.setRowExpand(e,!this.isRowExpandByRow(e))},setAllRowExpand(e){const{treeConfig:t,treeOpts:o,tableFullData:r,tableFullTreeData:n}=this,i=o.children||o.childrenField;let s=[];return t?l.a.eachTree(n,e=>{s.push(e)},{children:i}):s=r,this.setRowExpand(s,e)},setRowExpand(e,t){const o=this,r=o,n=o,{expandColumn:i}=r;let{fullAllDataRowIdData:a,rowExpandedMaps:c,rowExpandLazyLoadedMaps:d}=n;const{handleGetRowId:u}=Object(s.g)(o),p=o.computeExpandOpts,{reserve:h,lazy:g,accordion:m,toggleMethod:f}=p,b=[],x=i?o.getColumnIndex(i):-1,v=i?o.getVMColumnIndex(i):-1;if(e){l.a.isArray(e)||(e=[e]),m&&(c={},n.rowExpandedMaps=c,e=e.slice(e.length-1,e.length));const r=f?e.filter(e=>f({$table:o,expanded:t,column:i,columnIndex:x,$columnIndex:v,row:e,rowIndex:o.getRowIndex(e),$rowIndex:o.getVMRowIndex(e)})):e;t?r.forEach(e=>{const t=u(e);if(!c[t]){const r=a[t];g&&!r.expandLoaded&&!d[t]?b.push(W(o,e)):c[t]=e}}):r.forEach(e=>{const t=u(e);c[t]&&delete c[t]}),h&&r.forEach(e=>de(o,e,t))}return r.rowExpandedFlag++,Promise.all(b).then(()=>o.$nextTick()).then(()=>ge(o,!0,!0,!0)).then(()=>(Le(o),_e(o),Be(o),o.updateCellAreas()))},isRowExpandByRow(e){const{rowExpandedFlag:t}=this,{rowExpandedMaps:o}=this,r=Object(s.r)(this,e);return!!t&&!!o[r]},isExpandByRow(e){return Object(h.b)("vxe.error.delFunc",["isExpandByRow","isRowExpandByRow"]),this.isRowExpandByRow(e)},clearRowExpand(){const e=this,t=e,o=e,{tableFullData:r,scrollYStore:l}=o,n=e.computeExpandOpts,{reserve:i}=n,s=e.getRowExpandRecords();return o.rowExpandedMaps={},i&&r.forEach(t=>de(e,t,!1)),t.rowExpandedFlag++,l.startIndex=0,l.endIndex=1,e.$nextTick().then(()=>{if(s.length)return ge(e,!0,!0,!0)}).then(()=>(Le(e),_e(e),Be(e),e.updateCellAreas()))},clearRowExpandReserve(){return this.rowExpandedReserveRowMap={},this.$nextTick()},getRowExpandRecords(){const e=[];return l.a.each(this.rowExpandedMaps,t=>{t&&e.push(t)}),e},setRowGroups(e){const t=this,o=t,r=t,{aggregateConfig:n,rowGroupConfig:i}=o,s=t.computeAggregateOpts,{maxGroupSize:c}=s;if(!n&&!i)return Object(h.a)("vxe.error.reqProp",["aggregate-config"]),t.$nextTick();const d=e?l.a.isArray(e)?e:[e]:[];return c&&d.length>c?(a.b.modal&&a.b.modal.message({status:"error",content:m("vxe.table.maxGroupCol",[c])}),t.$nextTick()):d.length?(fe(t,d.map(e=>l.a.isString(e)?e:e.field)),xe(t,r.tableSynchData,!0)):t.$nextTick()},clearRowGroups(){const e=this,t=e,o=e,{aggregateConfig:r,rowGroupConfig:l}=t;return r||l?(fe(e,[]),xe(e,o.tableSynchData,!0)):(Object(h.a)("vxe.error.reqProp",["aggregate-config"]),e.$nextTick())},isRowGroupRecord(e){return Object(h.b)("vxe.error.delFunc",["isRowGroupRecord","isAggregateRecord"]),this.isAggregateRecord(e)},isRowGroupExpandByRow(e){return Object(h.b)("vxe.error.delFunc",["isRowGroupExpandByRow","isAggregateExpandByRow"]),this.isAggregateExpandByRow(e)},isAggregateRecord(e){const{isRowGroupStatus:t}=this;return t&&e.isAggregate},getAggregateContentByRow(e){const{isRowGroupStatus:t}=this;return t&&e&&e.isAggregate?e.groupContent:""},getAggregateRowChildren(e){const t=this.computeAggregateOpts,{childrenField:o,mapChildrenField:r}=t,{isRowGroupStatus:l}=this;return l&&e&&e.isAggregate&&o&&r&&e[r]||[]},isAggregateExpandByRow(e){const{rowGroupExpandedFlag:t}=this,{rowGroupExpandedMaps:o}=this;return!!t&&!!o[Object(s.r)(this,e)]},setRowGroupExpand(e,t){const o=this;return e?(l.a.isArray(e)||(e=[e]),k(o,e,t)):o.$nextTick()},setAllRowGroupExpand(e){const t=this,o=t,r=t,{tableFullGroupData:n}=r,i=t.computeAggregateOpts,{mapChildrenField:a}=i,c={};return e&&a&&l.a.eachTree(n,e=>{e[a]&&e[a].length&&(c[Object(s.r)(t,e)]=e)},{children:a}),r.rowGroupExpandedMaps=c,A(t),t.handleTableData(),M(t),o.rowGroupExpandedFlag++,ge(t,!0,!0,!0)},clearRowGroupExpand(){const e=this;return this.rowGroupExpandedMaps={},A(this),this.handleTableData(),M(this),e.rowGroupExpandedFlag++,ge(this,!0,!0,!0)},getTreeExpandRecords(){const e=[];return l.a.each(this.treeExpandedMaps,t=>{t&&e.push(t)}),e},getTreeStatus(){return this.treeConfig?{config:this.treeOpts,rowExpandeds:this.getTreeExpandRecords()}:null},isTreeExpandLoaded(e){const{fullAllDataRowIdData:t}=this,o=t[Object(s.r)(this,e)];return o&&!!o.treeLoaded},clearTreeExpandLoaded(e){const t=this,o=t,r=t,{fullAllDataRowIdData:n,treeExpandedMaps:i}=r,a=t.computeTreeOpts,{transform:c}=a;return e?(l.a.isArray(e)||(e=[e]),e.forEach(e=>{const o=Object(s.r)(t,e),r=n[o];r&&(r.treeLoaded=!1,i[o]&&delete i[o])})):l.a.each(n,e=>{e.treeLoaded=!1}),r.treeExpandedMaps={},c&&(A(t),t.handleTableData()),o.treeExpandedFlag++,t.$nextTick()},reloadTreeExpand(e){const t=this,o=t,r=t,{treeExpandLazyLoadedMaps:l}=r,n=t.computeTreeOpts,{transform:i,lazy:a}=n,c=n.hasChild||n.hasChildField,d=Object(s.r)(t,e);return a&&e[c]&&!l[d]?t.clearTreeExpandLoaded(e).then(()=>N(t,e)).then(()=>{i&&(A(t),t.handleTableData()),o.treeExpandedFlag++}).then(()=>t.recalculate()):t.$nextTick()},reloadTreeChilds(e){return Object(h.b)("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),this.reloadTreeExpand(e)},triggerRowGroupExpandEvent(e,t){const{rowGroupExpandedMaps:o}=this,r=this.computeAggregateOpts,{row:l,column:n}=t,{trigger:i}=r;if("manual"===i)return;e.stopPropagation();const a=!o[Object(s.r)(this,l)],c=this.getColumnIndex(n),d=this.getVMColumnIndex(n);this.setRowGroupExpand(l,a),this.dispatchEvent("toggle-row-group-expand",{expanded:a,column:n,columnIndex:c,$columnIndex:d,row:l},e)},triggerTreeExpandEvent(e,t){const o=this,r=o,{treeExpandLazyLoadedMaps:l,treeEATime:n}=r,i=o.computeTreeOpts,{row:a,column:c}=t,{lazy:d,trigger:u,accordion:p}=i;if("manual"===u)return;e.stopPropagation();const h=Object(s.r)(this,a);if(!d||!l[h]){const t=!o.isTreeExpandByRow(a),l=o.getColumnIndex(c),i=o.getVMColumnIndex(c);n&&clearTimeout(n),o.setTreeExpand(a,t).then(()=>{p&&(r.treeEATime=setTimeout(()=>{r.treeEATime=void 0,o.scrollToRow(a)},30))}),o.dispatchEvent("toggle-tree-expand",{expanded:t,column:c,columnIndex:l,$columnIndex:i,row:a},e)}},toggleTreeExpand(e){return this.setTreeExpand(e,!this.isTreeExpandByRow(e))},setAllTreeExpand(e){const t=this,o=t,r=t,{tableFullData:n}=r,i=t.computeTreeOpts,{transform:s,lazy:a}=i,c=i.children||i.childrenField,d=[];return l.a.eachTree(n,e=>{const t=e[c];(a||t&&t.length)&&d.push(e)},{children:c}),t.setTreeExpand(d,e).then(()=>{if(s)return A(t),o.treeExpandedFlag++,t.recalculate()})},setTreeExpand(e,t){const o=this,{treeOpts:r}=this,{transform:n}=r;return e&&(l.a.isArray(e)||(e=[e]),e.length)?n?function(e,t,o){const r=e;return $(e,t,o).then(()=>(A(e),e.handleTableData(),r.treeExpandedFlag++,M(e),e.$nextTick())).then(()=>ge(e,!0,!0,!0)).then(()=>{setTimeout(()=>{e.updateCellAreas()},30)})}(o,e,t):$(o,e,t):this.$nextTick()},isTreeExpandByRow(e){const{treeExpandedFlag:t}=this,{treeExpandedMaps:o}=this;return!!t&&!!o[Object(s.r)(this,e)]},clearTreeExpand(){const e=this,t=e,o=e,{tableFullTreeData:r}=o,n=e.computeTreeOpts,i=n.children||n.childrenField,{transform:s,reserve:a}=n,c=e.getTreeExpandRecords();return o.treeExpandedMaps={},a&&l.a.eachTree(r,t=>V(e,t,!1),{children:i}),e.handleTableData().then(()=>{s&&(A(e),e.handleTableData()),t.treeExpandedFlag++}).then(()=>{c.length&&e.recalculate()})},clearTreeExpandReserve(){return this.treeExpandedReserveRowMap={},this.$nextTick()},getScroll(){const{scrollXLoad:e,scrollYLoad:t}=this,{elemStore:o}=this,r=Object(s.o)(o["main-body-scroll"]);return{virtualX:e,virtualY:t,scrollTop:r?r.scrollTop:0,scrollLeft:r?r.scrollLeft:0}},handleScrollEvent(e,t,o,r,l,n){const i=this,s=i,a=i,c=i,{highlightHoverRow:d}=s,{lastScrollLeft:u,lastScrollTop:p}=c,h=i.$refs.refScrollXHandleElem,g=i.$refs.refScrollYHandleElem;if(!h||!g)return;const m=i.computeRowOpts,f=i.$refs.refValidTooltip,b=i.$refs.refTooltip,x=g.clientHeight,v=h.clientWidth,C=g.scrollHeight,w=h.scrollWidth;let O=!1,E=!1,y=!1,T=!1,R="",S=!1,j=!1,D=!1,F=!1;if(o){const e=i.computeScrollXThreshold;y=l<=0,y||(T=l+v>=w),l>u?(R="right",l+v>=w-e&&(F=!0)):(R="left",l<=e&&(D=!0)),i.checkScrolling(),c.lastScrollLeft=l}if(t){const e=i.computeScrollYThreshold;O=r<=0,O||(E=r+x>=C),r>p?(R="bottom",r+x>=C-e&&(j=!0)):(R="top",r<=e&&(S=!0)),c.lastScrollTop=r}a.lastScrollTime=Date.now();const $=Object.assign({scrollTop:r,scrollLeft:l,bodyHeight:x,bodyWidth:v,scrollHeight:C,scrollWidth:w,isX:o,isY:t,isTop:O,isBottom:E,isLeft:y,isRight:T,direction:R},n);_e(i),function(e,t,o){const r=e,l=e,{scrollXLoad:n,scrollYLoad:i,isAllOverflow:s}=r,{lcsTimeout:a}=l;a&&clearTimeout(a),l.lcsTimeout=setTimeout(()=>{l.lcsRunTime=Date.now(),l.lcsTimeout=void 0,l.intoRunScroll=!1,l.inVirtualScroll=!1,l.inWheelScroll=!1,l.inHeaderScroll=!1,l.inBodyScroll=!1,l.inFooterScroll=!1,l.scrollRenderType="",s||(ee(e),Le(e)),t&&n&&e.updateScrollXData(),o&&i&&e.updateScrollYData().then(()=>{s||(ee(e),Le(e)),e.updateScrollYSpace()}),e.updateCellAreas()},200)}(i,o,t),o&&i.closeFilter(),(m.isHover||d)&&i.clearHoverRow(),f&&f.reactData.visible&&f.close(),b&&b.reactData.visible&&b.close(),(j||S||F||D)&&i.dispatchEvent("scroll-boundary",$,e),i.dispatchEvent("scroll",$,e)},triggerScrollXEvent(){const e=this;e.computeVirtualXOpts.immediate?Ee(e):function(e){const t=e,{lxTimeout:o,lxRunTime:r,scrollXStore:l}=t,{visibleSize:n}=l,i=n>26?26:n>16?14:6;o&&clearTimeout(o),(!r||r+i<Date.now())&&(t.lxRunTime=Date.now(),Ee(e)),t.lxTimeout=setTimeout(()=>{t.lxTimeout=void 0,t.lxRunTime=void 0,Ee(e)},i)}(e)},triggerScrollYEvent(){const e=this;e.computeVirtualYOpts.immediate?Se(e):function(e){const t=e,{lyTimeout:o,lyRunTime:r,scrollYStore:l}=t,{visibleSize:n}=l,i=n>30?32:n>20?18:8;o&&clearTimeout(o),(!r||r+i<Date.now())&&(t.lyRunTime=Date.now(),Se(e)),t.lyTimeout=setTimeout(()=>{t.lyTimeout=void 0,t.lyRunTime=void 0,Se(e)},i)}(e)},triggerBodyScrollEvent(e,t){const o=this,r=o,l=o,{scrollYLoad:n,scrollXLoad:a}=r,{elemStore:c,intoRunScroll:d,lastScrollTop:u,lastScrollLeft:p,inWheelScroll:h,inVirtualScroll:g,inHeaderScroll:m,inBodyScroll:f,scrollRenderType:b,inFooterScroll:x}=l;if(h||g||m||x)return;const v=o.$refs.refScrollXHandleElem,C=o.$refs.refScrollYHandleElem,w=Object(s.o)(c["left-body-scroll"]),O=Object(s.o)(c["main-body-scroll"]),E=Object(s.o)(c["right-body-scroll"]),y=Object(s.o)(c["main-header-scroll"]),T=Object(s.o)(c["main-footer-scroll"]),R=o.$refs.refRowExpandElem;if(d)return;if(!O)return;if(!v)return;if(!C)return;if(f&&b!==t)return;let S=C.scrollTop,j=v.scrollLeft;w&&"left"===t?S=w.scrollTop:E&&"right"===t?S=E.scrollTop:(S=O.scrollTop,j=O.scrollLeft);const D=j!==p,F=S!==u;l.inBodyScroll=!0,l.scrollRenderType=t,F&&("left"===t?(Object(i.q)(O,S),Object(i.q)(E,S)):"right"===t?(Object(i.q)(O,S),Object(i.q)(w,S)):(Object(i.q)(w,S),Object(i.q)(E,S)),Object(i.q)(C,S),Object(i.q)(R,S),n&&o.triggerScrollYEvent(e)),D&&(Object(i.p)(v,j),Object(i.p)(y,j),Object(i.p)(T,j),a&&o.triggerScrollXEvent(e)),o.handleScrollEvent(e,F,D,S,j,{type:"body",fixed:t})},triggerHeaderScrollEvent(e,t){const o=this,r=o,l=o,{scrollXLoad:n}=r,{elemStore:a,intoRunScroll:c,inWheelScroll:d,inVirtualScroll:u,inBodyScroll:p,inFooterScroll:h}=l;if(d||u||p||h)return;if(c)return;const g=o.$refs.refScrollXHandleElem,m=o.$refs.refScrollYHandleElem,f=Object(s.o)(a["main-body-scroll"]),b=Object(s.o)(a["main-header-scroll"]),x=Object(s.o)(a["main-footer-scroll"]);if(!b)return;if(!g)return;if(!m)return;const v=m.scrollTop,C=b.scrollLeft;l.inHeaderScroll=!0,Object(i.p)(g,C),Object(i.p)(x,C),Object(i.p)(f,C),n&&o.triggerScrollXEvent(e),o.handleScrollEvent(e,!1,!0,v,C,{type:"header",fixed:t})},triggerFooterScrollEvent(e,t){const o=this,r=o,l=o,{scrollXLoad:n}=r,{elemStore:a,intoRunScroll:c,inWheelScroll:d,inVirtualScroll:u,inHeaderScroll:p,inBodyScroll:h}=l;if(d||u||p||h)return;const g=o.$refs.refScrollXHandleElem,m=o.$refs.refScrollYHandleElem,f=Object(s.o)(a["main-body-scroll"]),b=Object(s.o)(a["main-header-scroll"]),x=Object(s.o)(a["main-footer-scroll"]);if(c)return;if(!x)return;if(!g)return;if(!m)return;const v=m.scrollTop,C=x.scrollLeft;l.inFooterScroll=!0,Object(i.p)(g,C),Object(i.p)(b,C),Object(i.p)(f,C),n&&o.triggerScrollXEvent(e),o.handleScrollEvent(e,!1,!0,v,C,{type:"footer",fixed:t})},triggerBodyWheelEvent(e){const t=this,o=t,r=t,l=t,{target:n,deltaY:a,deltaX:c,shiftKey:d}=e;if(n&&/^textarea$/i.test(n.tagName))return;const{highlightHoverRow:u}=o,{scrollXLoad:p,scrollYLoad:h,expandColumn:g}=r,m=t.computeLeftFixedWidth,f=t.computeRightFixedWidth;if(!(m||f||g))return;const{elemStore:b,lastScrollTop:x,lastScrollLeft:v}=l,w=t.computeRowOpts,O=t.$refs.refScrollXHandleElem,E=t.$refs.refScrollYHandleElem,y=Object(s.o)(b["left-body-scroll"]),T=Object(s.o)(b["main-header-scroll"]),R=Object(s.o)(b["main-body-scroll"]),S=Object(s.o)(b["main-footer-scroll"]),j=Object(s.o)(b["right-body-scroll"]),D=t.$refs.refRowExpandElem;if(!O)return;if(!E)return;if(!R)return;const F=(e=>{let t=1;const o=Date.now();return e+25>o?t=1.18:e+30>o?t=1.15:e+40>o?t=1.12:e+55>o?t=1.09:e+75>o?t=1.06:e+100>o&&(t=1.03),t})(r.lastScrollTime),$=d?0:Math.ceil(a*F),k=Math.ceil((d&&a||c)*F),M=$<0,A=R.scrollTop;if(M?A<=0:A>=R.scrollHeight-R.clientHeight)return;const I=A+$,L=R.scrollLeft+k,_=L!==v,B=I!==x;if((w.isHover||u)&&t.clearHoverRow(),_)if(e.preventDefault(),l.inWheelScroll=!0,C.firefox||C.safari){const o=L;Object(i.p)(O,o),Object(i.p)(R,o),Object(i.p)(T,o),Object(i.p)(S,o),p&&t.triggerScrollXEvent(e),t.handleScrollEvent(e,B,_,R.scrollTop,o,{type:"table",fixed:""})}else((e,t)=>{requestAnimationFrame(()=>{t(e)})})(L,o=>{const r=o;Object(i.p)(O,r),Object(i.p)(R,r),Object(i.p)(T,r),Object(i.p)(S,r),p&&t.triggerScrollXEvent(e),t.handleScrollEvent(e,B,_,R.scrollTop,r,{type:"table",fixed:""})});if(B)if(e.preventDefault(),C.firefox||C.safari){const o=I;Object(i.q)(E,o),Object(i.q)(R,o),Object(i.q)(y,o),Object(i.q)(j,o),Object(i.q)(D,o),h&&t.triggerScrollYEvent(e),t.handleScrollEvent(e,B,_,o,R.scrollLeft,{type:"table",fixed:""})}else((e,t)=>{const o=Math.abs(e),r=performance.now();let l=0;const n=i=>{let s=(i-r)/o;s>1&&(s=1);const a=Math.pow(s,2),c=Math.floor(e*a)-l;l+=c,t(c),s<1&&requestAnimationFrame(n)};requestAnimationFrame(n)})(I-A,o=>{const r=R.scrollTop+o;l.inWheelScroll=!0,Object(i.q)(E,r),Object(i.q)(R,r),Object(i.q)(y,r),Object(i.q)(j,r),Object(i.q)(D,r),h&&t.triggerScrollYEvent(e),t.handleScrollEvent(e,B,_,r,R.scrollLeft,{type:"table",fixed:""})})},triggerVirtualScrollXEvent(e){const t=this,o=t,r=t,{scrollXLoad:l}=o,{elemStore:n,inWheelScroll:a,lastScrollTop:c,inHeaderScroll:d,inBodyScroll:u,inFooterScroll:p}=r;if(d||u||p)return;if(a)return;const h=Object(s.o)(n["main-header-scroll"]),g=Object(s.o)(n["main-body-scroll"]),m=Object(s.o)(n["main-footer-scroll"]),f=t.$refs.refScrollYHandleElem,b=e.currentTarget,{scrollLeft:x}=b,v=f||g;let C=0;v&&(C=v.scrollTop);const w=C!==c;r.inVirtualScroll=!0,Object(i.p)(g,x),Object(i.p)(h,x),Object(i.p)(m,x),l&&t.triggerScrollXEvent(e),t.handleScrollEvent(e,w,!0,C,x,{type:"table",fixed:""})},triggerVirtualScrollYEvent(e){const t=this,o=t,r=t,{scrollYLoad:l}=o,{elemStore:n,inWheelScroll:a,lastScrollLeft:c,inHeaderScroll:d,inBodyScroll:u,inFooterScroll:p}=r;if(d||u||p)return;if(a)return;const h=Object(s.o)(n["left-body-scroll"]),g=Object(s.o)(n["main-body-scroll"]),m=Object(s.o)(n["right-body-scroll"]),f=t.$refs.refRowExpandElem,b=t.$refs.refScrollXHandleElem,x=e.currentTarget,{scrollTop:v}=x,C=b||g;let w=0;C&&(w=C.scrollLeft);const O=w!==c;r.inVirtualScroll=!0,Object(i.q)(g,v),Object(i.q)(h,v),Object(i.q)(m,v),Object(i.q)(f,v),l&&t.triggerScrollYEvent(e),t.handleScrollEvent(e,!0,O,v,w,{type:"table",fixed:""})},updateScrollXData(){const e=this,t=e,{isAllOverflow:o}=t;return we(e),e.updateScrollXSpace(),e.$nextTick().then(()=>{we(e),e.updateScrollXSpace(),o||e.updateScrollYSpace()})},updateScrollXSpace(){const e=this,t=e,o=e,{scrollXLoad:r,overflowX:l,scrollXWidth:n}=t,{visibleColumn:i,scrollXStore:a,elemStore:c,fullColumnIdData:d}=o,u=e.computeMouseOpts,p=e.$refs.refTableBody;if(p?p.$el:null){const o=Object(s.o)(c["main-body-scroll"]),p=Object(s.o)(c["main-body-table"]),g=Object(s.o)(c["main-header-table"]),m=Object(s.o)(c["main-footer-table"]);let f=0;const b=i[a.startIndex];if(b){f=(d[b.id]||{}).oLeft}let x=0;o&&(x=o.clientWidth);let v=!1,C=n;n>5e6&&(f=o&&p&&o.scrollLeft+x>=5e6?5e6-p.clientWidth:f/(n-x)*(5e6-x),C=5e6,v=!0),r&&l||(f=0),g&&(g.style.transform=g.getAttribute("xvm")?`translate(${f}px, 0px)`:""),p&&(p.style.transform=`translate(${f}px, ${t.scrollYTop||0}px)`),m&&(m.style.transform=m.getAttribute("xvm")?`translate(${f}px, 0px)`:"");["main"].forEach(e=>{["header","body","footer"].forEach(t=>{const o=Object(s.o)(c[`${e}-${t}-xSpace`]);o&&(o.style.width=r?C+"px":"")})}),t.scrollXLeft=f,t.scrollXWidth=C,t.isScrollXBig=v;const w=e.$refs.refScrollXSpaceElem;return w&&(w.style.width=C+"px"),v&&u.area&&Object(h.a)("vxe.error.notProp",["mouse-config.area"]),pe(e),e.$nextTick(()=>{I(e)})}},updateScrollYData(){const e=this;return e.handleTableData(),e.updateScrollYSpace(),e.$nextTick().then(()=>{e.handleTableData(),e.updateScrollYSpace()})},updateScrollYSpace(){const e=this,t=e,o=e,{isAllOverflow:r,scrollYLoad:l,expandColumn:n}=t,{scrollYStore:i,elemStore:a,isResizeCellHeight:c,afterFullData:d,fullAllDataRowIdData:u,rowExpandedMaps:p}=o,{startIndex:g}=i,m=e.computeMouseOpts,f=e.computeExpandOpts,b=e.computeRowOpts,x=e.computeCellOpts,v=e.computeDefaultRowHeight,C=Object(s.o)(a["main-body-scroll"]),w=Object(s.o)(a["main-body-table"]),O=Object(s.o)(a["left-body-table"]),E=Object(s.o)(a["right-body-table"]);let y=0,T=0,R=!1;if(l){if(c||x.height||b.height||n||!r){const t=d[g];let o=Object(s.r)(e,t),r=u[o]||{};y=r.oTop||0;const l=d[d.length-1];o=Object(s.r)(e,l),r=u[o]||{},T=(r.oTop||0)+(r.resizeHeight||x.height||b.height||r.height||v),n&&p[o]&&(T+=r.expandHeight||f.height||0),T>5e6&&(R=!0)}else T=d.length*v,T>5e6&&(R=!0),y=Math.max(0,g*v)}else w&&(T=w.clientHeight);let S=0;C&&(S=C.clientHeight);let j=T,D=y;R&&(D=C&&w&&C.scrollTop+S>=5e6?5e6-w.clientHeight:y/(T-S)*(5e6-S),j=5e6),O&&(O.style.transform=`translate(0px, ${D}px)`),w&&(w.style.transform=`translate(${t.scrollXLeft||0}px, ${D}px)`),E&&(E.style.transform=`translate(0px, ${D}px)`),["main","left","right"].forEach(e=>{["header","body","footer"].forEach(t=>{const o=Object(s.o)(a[`${e}-${t}-ySpace`]);o&&(o.style.height=j?j+"px":"")})});const F=e.$refs.refScrollYSpaceElem;F&&(F.style.height=j?j+"px":"");const $=e.$refs.refRowExpandYSpaceElem;return $&&($.style.height=j?j+"px":""),t.scrollYTop=D,t.scrollYHeight=T,t.isScrollYBig=R,R&&m.area&&Object(h.a)("vxe.error.notProp",["mouse-config.area"]),pe(e),e.$nextTick().then(()=>{I(e)})},updateScrollYStatus(){return F(this)},scrollTo(e,t){const o=this,r=o,n=o,{elemStore:a}=n,c=Object(s.o)(a["main-header-scroll"]),d=Object(s.o)(a["main-body-scroll"]),u=Object(s.o)(a["main-footer-scroll"]),p=Object(s.o)(a["left-body-scroll"]),h=Object(s.o)(a["right-body-scroll"]),g=o.$refs.refScrollXHandleElem,m=o.$refs.refScrollYHandleElem;return n.intoRunScroll=!0,l.a.isNumber(e)&&(Object(i.p)(g,e),Object(i.p)(d,e),Object(i.p)(c,e),Object(i.p)(u,e),Ee(o)),l.a.isNumber(t)&&(Object(i.q)(m,t),Object(i.q)(d,t),Object(i.q)(p,t),Object(i.q)(h,t),Se(o)),r.scrollXLoad||r.scrollYLoad?new Promise(e=>{setTimeout(()=>{o.$nextTick(()=>{n.intoRunScroll=!1,e()})},30)}):o.$nextTick().then(()=>{n.intoRunScroll=!1})},scrollToRow(e,t){const o=this,r=o,l=o,{isAllOverflow:n,scrollYLoad:i,scrollXLoad:a}=l,c=[];return e&&(r.treeConfig?c.push(o.scrollToTreeRow(e)):c.push(Object(s.y)(o,e))),t&&c.push(ce(o,t,e)),Promise.all(c).then(()=>{if(e)return n||!i&&!a||(ee(o),ke(o)),o.$nextTick()})},scrollToColumn(e){return ce(this,e)},scrollToTreeRow(e){const t=this,o=t,r=t,n=t,{treeConfig:i}=o,{isRowGroupStatus:a}=r,{tableFullData:c}=n,d=[];if(i||a){const o=t.computeAggregateOpts,r=t.computeTreeOpts,n=r.children||r.childrenField,i=l.a.findTree(c,o=>t.eqRow(o,e),{children:a?o.mapChildrenField:n});if(i){const e=i.nodes;e.forEach((o,r)=>{r<e.length-1&&!t.isTreeExpandByRow(o)&&d.push(t.setTreeExpand(o,!0))})}}return Promise.all(d).then(()=>Object(s.y)(t,e))},clearScroll(){const e=this,{elemStore:t,scrollXStore:o,scrollYStore:r}=e,l=Object(s.o)(t["main-header-scroll"]),n=Object(s.o)(t["main-body-scroll"]),a=Object(s.o)(t["main-footer-scroll"]),c=Object(s.o)(t["left-body-scroll"]),d=Object(s.o)(t["right-body-scroll"]),u=this.$refs.refScrollXHandleElem,p=this.$refs.refScrollYHandleElem;return e.intoRunScroll=!0,Object(i.p)(u,0),Object(i.p)(n,0),Object(i.p)(l,0),Object(i.p)(a,0),Object(i.q)(p,0),Object(i.q)(n,0),Object(i.q)(c,0),Object(i.q)(d,0),o.startIndex=0,o.visibleStartIndex=0,o.endIndex=o.visibleSize,o.visibleEndIndex=o.visibleSize,r.startIndex=0,r.visibleStartIndex=0,r.endIndex=r.visibleSize,r.visibleEndIndex=r.visibleSize,this.$nextTick().then(()=>{e.intoRunScroll=!1})},updateFooter(){const e=this,t=e,o=e,r=e,l=e.$xeGrid,{showFooter:n,footerData:i,footerMethod:s}=t,{visibleColumn:a,afterFullData:c}=r;let d=[];return n&&i&&i.length?d=i.slice(0):n&&s&&(d=a.length?s({columns:a,data:c,$table:e,$grid:l}):[]),o.footerTableData=d,e.handleUpdateFooterMerge(),e.$nextTick()},updateStatus(e,t){const o=this,r=o;return this.$nextTick().then(()=>{const{editRules:l}=r;if(e&&l)return o.handleCellRuleUpdateStatus("change",e,t)})},setMergeCells(e){const t=this,o=t,r=t;return t.spanMethod&&Object(h.a)("vxe.error.errConflicts",["merge-cells","span-method"]),function(e,t){const o=e,{fullAllDataRowIdData:r,fullColumnIdData:n,visibleColumn:i,afterFullData:a,mergeBodyList:c,mergeBodyMaps:d}=o;if(t){const{handleGetRowId:o}=Object(s.g)(e);l.a.isArray(t)||(t=[t]),t.forEach(e=>{let{row:t,col:s,rowspan:u,colspan:p}=e,h=-1,g=-1;if(l.a.isNumber(t))h=t;else{const e=t?o(t):null,l=e?r[e]:null;l&&(h=l._index)}if(l.a.isNumber(s))g=s;else{const e=s?s.id:null,t=e?n[e]:null;t&&(g=t._index)}if(h>-1&&g>-1&&(u||p)&&(u=l.a.toNumber(u)||1,p=l.a.toNumber(p)||1,u>1||p>1)){const e=a[h],t=i[g];let o=d[`${h}:${g}`];o?(o.rowspan=u,o.colspan=p,o._rowspan=u,o._colspan=p):(o={row:h,col:g,rowspan:u,colspan:p,_row:e,_col:t,_rowspan:u,_colspan:p},d[`${h}:${g}`]=o,c.push(o))}})}}(t,e),t.handleUpdateBodyMerge(),t.$nextTick().then(()=>{const{expandColumn:e}=o,{mergeBodyList:l}=r;return e&&l.length&&Object(h.b)("vxe.error.errConflicts",["type=expand","merge-cells | span-method"]),t.updateCellAreas(),I(t)})},removeMergeCells(e){const t=this;t.spanMethod&&Object(h.a)("vxe.error.errConflicts",["merge-cells","span-method"]);const o=function(e,t){const o=e,{mergeBodyList:r,fullColumnIdData:n,fullAllDataRowIdData:i,mergeBodyMaps:a}=o,c=[];if(t){const{handleGetRowId:o}=Object(s.g)(e);l.a.isArray(t)||(t=[t]),t.forEach(e=>{const{row:t,col:s}=e;let d=-1,u=-1;if(l.a.isNumber(t))d=t;else{const e=t?o(t):null,r=e?i[e]:null;r&&(d=r._index)}if(l.a.isNumber(s))u=s;else{const e=s?s.id:null,t=e?n[e]:null;t&&(u=t._index)}const p=l.a.findIndexOf(r,e=>e.row===d&&e.col===u);if(p>-1){const e=r.splice(p,1);e[0]&&(c.push(e[0]),a[`${d}:${u}`]&&delete a[`${d}:${u}`])}})}return c}(t,e);return t.handleUpdateBodyMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),I(t),o))},getMergeCells(){return this.mergeBodyList.slice(0)},clearMergeCells(){const e=this,t=e,o=e;return o.mergeBodyList=[],o.mergeBodyMaps={},o.mergeBodyCellMaps={},t.mergeBodyFlag++,e.$nextTick().then(()=>I(e))},setMergeFooterItems(e){const t=this;return t.footerSpanMethod&&Object(h.a)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),function(e,t){const o=e,r=e,{footerTableData:n}=o,{mergeFooterList:i,mergeFooterMaps:s,fullColumnIdData:a}=r;if(t){const{visibleColumn:e}=r;l.a.isArray(t)||(t=[t]),t.forEach(t=>{let{row:o,col:r,rowspan:c,colspan:d}=t;const u=l.a.isNumber(o)?o:-1;let p=-1;if(l.a.isNumber(r))p=r;else{const e=r?r.id:null,t=e?a[e]:null;t&&(p=t._index)}if(u>-1&&p>-1&&(c||d)&&(c=l.a.toNumber(c)||1,d=l.a.toNumber(d)||1,c>1||d>1)){const t=n[u],o=e[p];let r=s[`${u}:${p}`];r?(r.rowspan=c,r.colspan=d,r._rowspan=c,r._colspan=d):(r={row:u,col:p,rowspan:c,colspan:d,_row:t,_col:o,_rowspan:c,_colspan:d},s[`${u}:${p}`]=r,i.push(r))}})}}(t,e),t.handleUpdateFooterMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),I(t)))},removeMergeFooterItems(e){const t=this;t.footerSpanMethod&&Object(h.a)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);const o=function(e,t){const o=e,{mergeFooterList:r,fullColumnIdData:n,mergeFooterMaps:i}=o,s=[];return t&&(l.a.isArray(t)||(t=[t]),t.forEach(e=>{const{row:t,col:o}=e,a=l.a.isNumber(t)?t:-1;let c=-1;if(l.a.isNumber(o))c=o;else{const e=o?o.id:null,t=e?n[e]:null;t&&(c=t._index)}const d=l.a.findIndexOf(r,e=>e.row===a&&e.col===c);if(d>-1){const e=r.splice(d,1)[0];e&&(s.push(e),i[`${a}:${c}`]&&delete i[`${a}:${c}`])}})),s}(t,e);return t.handleUpdateFooterMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),I(t),o))},getMergeFooterItems(){return this.mergeFooterList.slice(0)},clearMergeFooterItems(){const e=this,t=e,o=e;return o.mergeFooterList=[],o.mergeFooterMaps={},o.mergeFooterCellMaps={},t.mergeFootFlag++,e.$nextTick().then(()=>I(e))},handleUpdateAggData(){return xe(this,this.tableSynchData,!0)},updateZindex(){this.zIndex?this.tZindex=this.zIndex:this.tZindex<Object(n.e)()&&(this.tZindex=Object(n.i)())},updateCellAreas(){const e=this,t=e,{mouseConfig:o}=t,r=e.computeMouseOpts;return o&&r.area&&e.handleRecalculateCellAreaEvent?e.handleRecalculateCellAreaEvent():e.$nextTick()},dispatchEvent(e,t,o){const r=this.$xeGrid;this.$emit(e,v(o,{$table:this,$grid:r},t))},emitEvent(e,t,o){const r=this.$xeGrid;this.$emit(e,Object.assign({$table:this,$grid:r,$event:o},t))},focus(){return this.isActivated=!0,this.$nextTick()},blur(){return this.isActivated=!1,this.$nextTick()},connect(e){return e&&e.syncUpdate?(e.syncUpdate({collectColumn:this.collectColumn,$table:this}),this.$toolbar=e):Object(h.a)("vxe.error.barUnableLink"),this.$nextTick()},getCell(e,t){return this.getCellElement(e,t)},findRowIndexOf(e,t){return t?l.a.findIndexOf(e,e=>this.eqRow(e,t)):-1},eqRow(e,t){return!(!e||!t)&&(e===t||Object(s.r)(this,e)===Object(s.r)(this,t))},getSetupOptions:()=>g()};"setFilter,openFilter,clearFilter,saveFilterPanel,saveFilterPanelByEvent,resetFilterPanel,resetFilterPanelByEvent,getCheckedFilters,updateFilterOptionStatus,closeMenu,setActiveCellArea,getActiveCellArea,getCellAreas,clearCellAreas,copyCellArea,cutCellArea,pasteCellArea,getCopyCellArea,getCopyCellAreas,clearCopyCellArea,setCellAreas,openFNR,openFind,openReplace,closeFNR,getSelectedCell,clearSelected,insert,insertAt,insertNextAt,insertChild,insertChildAt,insertChildNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,clearEdit,clearActived,getEditRecord,getEditCell,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell,setSelectCell,clearValidate,fullValidate,validate,fullValidateField,validateField,openExport,closeExport,openPrint,closePrint,getPrintHtml,exportData,openImport,closeImport,importData,saveFile,readFile,importByFile,print,openCustom,closeCustom,toggleCustom,saveCustom,cancelCustom,resetCustom,toggleCustomAllCheckbox,setCustomAllCheckbox".split(",").forEach(e=>{He[e]=function(...t){return this["_"+e]||("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").includes(e)?Object(h.a)("vxe.error.reqModule",["Export"]):"fullValidate,validate".split(",").includes(e)?Object(h.a)("vxe.error.reqModule",["Validator"]):"setFilter,openFilter,clearFilter,getCheckedFilters".split(",").includes(e)?Object(h.a)("vxe.error.reqModule",["Filter"]):"insert,insertAt,insertNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,getEditRecord,getEditCell,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell".split(",").includes(e)?Object(h.a)("vxe.error.reqModule",["Edit"]):"openCustom".split(",").includes(e)&&Object(h.a)("vxe.error.reqModule",["Custom"])),this["_"+e]?this["_"+e](...t):null}});var Pe=He;const{getI18n:ze,renderer:Ne,renderEmptyElement:Ve}=a.b,We=e=>{const t=e,o=e,{delayHover:r}=t,{lastScrollTime:l,isDragResize:n}=o;return!!(n||l&&Date.now()<l+r)};function Ge(e,t,o,r,a,c,d,u,p,h,g,m,f,b,x){const v=t,C=t,w=t,O=t.$xeGrid,{columnKey:E,resizable:y,showOverflow:T,border:R,height:S,treeConfig:j,cellClassName:D,cellStyle:F,align:$,spanMethod:k,mouseConfig:M,editConfig:A,editRules:I,tooltipConfig:L,padding:_}=v,{tableData:B,dragRow:H,overflowX:P,currentColumn:z,scrollXLoad:N,scrollYLoad:V,mergeBodyFlag:W,calcCellHeightFlag:G,resizeHeightFlag:q,resizeWidthFlag:X,editStore:Y,isAllOverflow:K,validErrorMaps:U}=C,{fullAllDataRowIdData:Z,fullColumnIdData:Q,mergeBodyCellMaps:J,visibleColumn:ee,afterFullData:te,mergeBodyList:oe,scrollXStore:re,scrollYStore:le}=w,ne=t.computeCellOpts,ie=t.computeValidOpts,se=t.computeCheckboxOpts,ae=t.computeEditOpts,ce=t.computeTooltipOpts,de=t.computeVirtualXOpts,ue=t.computeVirtualYOpts,{isAllColumnDrag:pe,isAllRowDrag:he}=t.resizableOpts,ge=t.computeRowOpts,me=t.computeRowDragOpts,fe=t.computeDefaultRowHeight,be=G?ne.height||ge.height:0,{disabledMethod:xe,isCrossDrag:ve,isPeerDrag:Ce}=me,we=t.computeColumnOpts,Oe=t.computeMouseOpts,Ee=t.computeAreaOpts,ye=t.computeCellOffsetWidth,{selectCellToRow:Te}=Ee,{type:Re,cellRender:Se,editRender:je,align:De,showOverflow:Fe,className:$e,treeNode:ke,rowResize:Me,padding:Ae,verticalAlign:Ie,slots:Le}=m,{verticalAlign:_e}=ne,{actived:Be}=Y,He=Z[r]||{},Pe=m.id,ze=Q[Pe]||{},Ge=je||Se,qe=Ge?Ne.get(Ge.name):null,Xe=qe?qe.tableCellClassName||qe.cellClassName:null,Ye=qe?qe.tableCellStyle||qe.cellStyle:"",Ke=ce.showAll,Ue=ze.index,Ze=ze._index,Qe=Object(n.h)(je),Je=q?He.resizeHeight:0;let et=a?m.fixed!==a:m.fixed&&P;const tt=l.a.eqNull(Ae)?null===_?ne.padding:_:Ae,ot=l.a.eqNull(Fe)?T:Fe,rt="ellipsis"===ot,lt="title"===ot,nt=!0===ot||"tooltip"===ot,it=K||lt||nt||rt,st=l.a.isBoolean(m.resizable)?m.resizable:we.resizable||y,at=!!be,ct=Je>0;let dt;const ut={},pt=De||(qe?qe.tableCellAlign:"")||$,ht=l.a.eqNull(Ie)?_e:Ie,gt=U[`${r}:${Pe}`],mt=I&&ie.showMessage&&("default"===ie.message?S||B.length>1:"inline"===ie.message),ft={colid:Pe},bt={$table:t,$grid:O,isEdit:!1,seq:o,rowid:r,row:u,rowIndex:p,$rowIndex:h,_rowIndex:g,column:m,columnIndex:Ue,$columnIndex:f,_columnIndex:Ze,fixed:a,type:"body",isHidden:!!et,level:d,visibleData:te,data:B,items:x};let xt=!1,vt=!1;ge.drag&&(xt="row"===me.trigger||m.dragSort&&"cell"===me.trigger),xt&&(vt=!(!xe||!xe(bt))),(lt||nt||Ke||L)&&(ut.mouseenter=e=>{We(t)||(lt?Object(i.t)(e.currentTarget,m):(nt||Ke)&&t.triggerBodyTooltipEvent(e,bt),t.dispatchEvent("cell-mouseenter",Object.assign({cell:e.currentTarget},bt),e))}),(nt||Ke||L)&&(ut.mouseleave=e=>{We(t)||((nt||Ke)&&t.handleTargetLeaveEvent(e),t.dispatchEvent("cell-mouseleave",Object.assign({cell:e.currentTarget},bt),e))}),(xt||se.range||M)&&(ut.mousedown=e=>{t.triggerCellMousedownEvent(e,bt)}),xt&&(ut.mouseup=t.triggerCellMouseupEvent),ut.click=e=>{t.triggerCellClickEvent(e,bt)},ut.dblclick=e=>{t.triggerCellDblclickEvent(e,bt)};let Ct=!1,wt=1,Ot=1;if(W&&oe.length){const e=J[`${g}:${Ze}`];if(e){const{rowspan:o,colspan:r}=e;if(!o||!r)return Ve(t);o>1&&(Ct=!0,Ot=o,ft.rowspan=o),r>1&&(Ct=!0,wt=r,ft.colspan=r)}}else if(k){const{rowspan:e=1,colspan:o=1}=k(bt)||{};if(!e||!o)return Ve(t);e>1&&(Ct=!0,Ot=e,ft.rowspan=e),o>1&&(Ct=!0,wt=o,ft.colspan=o)}et&&Ct&&(ft.colspan>1||ft.rowspan>1)&&(et=!1),!et&&A&&(je||Se)&&(ae.showStatus||ae.showUpdateStatus)&&(dt=t.isUpdateByRow(u,m.field));const Et=V&&!it;let yt=Object(s.k)(He,ne,ge,fe);const Tt=f===b.length-1,Rt=!m.resizeWidth&&("auto"===m.minWidth||"auto"===m.width);let St=!1;if(Ct||H&&Object(s.r)(t,H)===r||(V&&!j&&!ue.immediate&&(g<le.visibleStartIndex-le.preloadSize||g>le.visibleEndIndex+le.preloadSize)||N&&!de.immediate&&!m.fixed&&(Ze<re.visibleStartIndex-re.preloadSize||Ze>re.visibleEndIndex+re.preloadSize))&&(St=!0),Ot>1){const e=te[g+Ot-1];if(e){const o=Z[Object(s.r)(t,e)];o&&(yt+=o.oTop+Object(s.k)(o,ne,ge,fe)-He.oTop-Object(s.k)(He,ne,ge,fe))}}const jt={};if(it&&X){let e=0;if(wt>1)for(let t=1;t<wt;t++){const o=ee[Ue+t];o&&(e+=o.renderWidth)}jt.width=m.renderWidth+e-ye+"px"}V||it||at||ct?jt.height=yt+"px":jt.minHeight=yt+"px";const Dt=[];if(et&&K)Dt.push(e("div",{key:"tc",class:["vxe-cell",{"c--title":lt,"c--tooltip":nt,"c--ellipsis":rt}],style:jt}));else if(j&&Dt.push(...function(e,t,o,r,l){const n=t,i=t,{column:a}=r,{afterFullData:c}=i,{treeConfig:d}=n,u=t.computeTreeOpts,{slots:p,treeNode:h}=a,{fullAllDataRowIdData:g}=i;if(p&&p.line)return t.callSlot(p.line,r,e);const m=g[o];let f=0,b=null;return m&&(f=m.level,b=m.items[m.treeIndex-1]),d&&h&&(u.showLine||u.line)?[e("div",{key:"tl",class:"vxe-tree--line-wrapper"},[e("div",{class:"vxe-tree--line",style:{height:(Object(s.r)(t,c[0])===o?1:Object(s.b)(r,b))+"px",bottom:`-${Math.floor(l/2)}px`,left:f*u.indent+(f?2-Object(s.n)(t):0)+16+"px"}})])]:[]}(e,t,r,bt,yt)),Dt.push(e("div",{key:"tc",class:["vxe-cell",{"c--title":lt,"c--tooltip":nt,"c--ellipsis":rt}],style:jt,attrs:{title:lt?t.getCellLabel(u,m):null}},St?[]:[e("div",{attrs:{colid:Pe,rowid:r},class:"vxe-cell--wrapper vxe-body-cell--wrapper"},m.renderCell(e,bt))])),mt&&gt){const o=gt.rule,r=Le?Le.valid:null,l=Object.assign(Object.assign(Object.assign({},bt),gt),{rule:gt});Dt.push(e("div",{key:"tcv",class:["vxe-cell--valid-error-tip",Object(n.c)(ie.className,gt)],style:o&&o.maxWidth?{width:o.maxWidth+"px"}:void 0},[e("div",{class:"vxe-cell--valid-error-wrapper vxe-cell--valid-error-theme-"+(ie.theme||"normal")},[r?t.callSlot(r,l,e):[e("span",{class:"vxe-cell--valid-error-msg"},gt.content)]])]))}let Ft=!1;return M&&Oe.area&&!Ze&&Te&&(Ft=!0),!et&&st&&pe&&Dt.push(e("div",{key:"tcc",class:["vxe-cell--col-resizable",{"is--line":!R||"none"===R}],on:{mousedown:e=>t.handleColResizeMousedownEvent(e,a,bt),dblclick:e=>t.handleColResizeDblclickEvent(e,bt)}})),(Me||he)&&ge.resizable&&Dt.push(e("div",{key:"tcr",class:"vxe-cell--row-resizable",on:{mousedown:e=>t.handleRowResizeMousedownEvent(e,bt),dblclick:e=>t.handleRowResizeDblclickEvent(e,bt)}})),e("td",{class:["vxe-table--column vxe-body--column",Pe,ht?"col--vertical-"+ht:"",pt?"col--"+pt:"",Re?"col--"+Re:"",{"col--last":Tt,"col--tree-node":ke,"col--edit":Qe,"col--ellipsis":it,"col--cs-height":at,"col--rs-height":ct,"col--to-row":Ft,"col--auto-height":Et,"fixed--width":!Rt,"fixed--hidden":et,"is--padding":tt,"is--progress":et&&K||St,"is--drag-cell":xt&&(ve||Ce||!d),"is--drag-disabled":vt,"col--dirty":dt,"col--active":A&&Qe&&Be.row===u&&(Be.column===m||"row"===ae.mode),"col--valid-error":!!gt,"col--current":z===m},Object(n.c)(Xe,bt),Object(n.c)($e,bt),Object(n.c)(D,bt)],key:E||N||V||we.useKey||ge.useKey||we.drag?m.id:f,attrs:ft,style:Object.assign({},l.a.isFunction(Ye)?Ye(bt):Ye,l.a.isFunction(F)?F(bt):F),on:ut},c&&et?[]:Dt)}function qe(e,t,o,r,n,i){const a=t.$parent,c=a,d=a,u=a,p=a.$xeGrid,{stripe:h,rowKey:g,highlightHoverRow:m,rowClassName:f,rowStyle:b,editConfig:x,treeConfig:v}=c,{hasFixedColumn:C,treeExpandedFlag:w,scrollXLoad:O,scrollYLoad:E,isAllOverflow:y,rowExpandedFlag:T,expandColumn:R,selectRadioRow:S,pendingRowFlag:j,rowExpandHeightFlag:D,isRowGroupStatus:F}=d,{fullAllDataRowIdData:$,fullColumnIdData:k,treeExpandedMaps:M,pendingRowMaps:A,rowExpandedMaps:I}=u,L=a.computeCheckboxOpts,_=a.computeRadioOpts,B=a.computeTreeOpts,H=a.computeEditOpts,P=a.computeRowOpts,z=a.computeColumnOpts,{transform:N,seqMode:V}=B,W=B.children||B.childrenField,G=[],{handleGetRowId:q}=Object(s.g)(a),X=v||F;return n.forEach((s,c)=>{const d={},u=q(s),Y=$[u]||{};let K=c,U=0,Z=-1,Q=-1;const J=F&&s.isAggregate;(P.isHover||m)&&(d.mouseenter=e=>{We(a)||a.triggerHoverEvent(e,{row:s,rowIndex:K})},d.mouseleave=()=>{We(a)||a.clearHoverRow()}),Y&&(U=Y.level,Z=J||v&&N&&"increasing"===V?Y._index+1:Y.seq,K=Y.index,Q=Y._index);const ee={$table:a,seq:Z,rowid:u,fixed:o,type:"body",level:U,row:s,rowIndex:K,$rowIndex:c,_rowIndex:Q},te=R&&!!T&&!!I[u];let oe=!1,re=[],le=!1;x&&(le=a.isInsertByRow(s)),!v||E||N||(re=s[W],oe=!!w&&re&&re.length>0&&!!M[u]),!P.drag||F||v&&!N||(d.dragstart=a.handleRowDragDragstartEvent,d.dragend=a.handleRowDragDragendEvent,d.dragover=a.handleRowDragDragoverEvent);const ne=["vxe-body--row",X?"row--level-"+U:"",{"row--stripe":h&&(Q+1)%2==0,"is--new":le,"is--expand-row":te,"is--expand-tree":oe,"row--new":le&&(H.showStatus||H.showInsertStatus),"row--radio":_.highlight&&S===s,"row--checked":L.highlight&&a.isCheckedByCheckboxRow(s),"row--pending":!!j&&!!A[u],"row--group":J},f?l.a.isFunction(f)?f(ee):f:""],ie=i.map((t,l)=>Ge(e,a,Z,u,o,r,U,s,K,c,Q,t,l,i,n));if(G.push(e("tr",{class:ne,attrs:{rowid:u},style:b?l.a.isFunction(b)?b(ee):b:void 0,key:g||O||E||P.useKey||P.drag||z.drag||F||v?u:c,on:d},ie)),te){const t=a.computeExpandOpts,{height:r,padding:n,mode:d}=t;if("fixed"===d)G.push(e("tr",{class:"vxe-body--row-expanded-place",key:"expand_"+u,attrs:{rowid:u}},[e("td",{class:"vxe-body--row-expanded-place-column",attrs:{colspan:i.length},style:{height:(D?Y.expandHeight||r:0)+"px"}})]));else{const t={};r&&(t.height=r+"px"),v&&(t.paddingLeft=U*B.indent+30+"px");const{showOverflow:d}=R||{},h=R.id,g=k[h]||{},m=l.a.eqNull(d)?y:d;let f=-1,b=-1,x=-1;g&&(f=g.index,b=g.$index,x=g._index);const w={$grid:p,$table:a,seq:Z,column:R,columnIndex:f,$columnIndex:b,_columnIndex:x,fixed:o,type:"body",level:U,row:s,rowid:u,rowIndex:K,$rowIndex:c,_rowIndex:Q,isHidden:!1,isEdit:!1,visibleData:[],data:[],items:[]};G.push(e("tr",{class:["vxe-body--expanded-row",{"is--padding":n}],key:"expand_"+u},[e("td",{class:["vxe-body--expanded-column",{"fixed--hidden":o&&!C,"col--ellipsis":m}],attrs:{colspan:i.length}},[e("div",{class:["vxe-body--expanded-cell",{"is--ellipsis":r}],style:t},[R.renderData(e,w)])])]))}}oe&&G.push(...qe(e,t,o,r,re,i))}),G}var Xe={name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:{type:String,default:""}},mounted(){const e=this,t=e,o=e.$parent,{fixedType:r}=t,{elemStore:l}=o,n=(r||"main")+"-body-";l[n+"wrapper"]=e.$refs.refElem,l[n+"scroll"]=e.$refs.refBodyScroll,l[n+"table"]=e.$refs.refBodyTable,l[n+"colgroup"]=e.$refs.refBodyColgroup,l[n+"list"]=e.$refs.refBodyTBody,l[n+"xSpace"]=e.$refs.refBodyXSpace,l[n+"ySpace"]=e.$refs.refBodyYSpace,l[n+"emptyBlock"]=e.$refs.refBodyEmptyBlock},destroyed(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-body-";o[r+"wrapper"]=null,o[r+"scroll"]=null,o[r+"table"]=null,o[r+"colgroup"]=null,o[r+"list"]=null,o[r+"xSpace"]=null,o[r+"ySpace"]=null,o[r+"emptyBlock"]=null},render(e){const t=this.$parent,o=t,r=t,l=t,n=t.$xeGrid,i=t.$scopedSlots,{xID:a}=t,{fixedColumn:c,fixedType:u,tableColumn:p}=this,{spanMethod:h,footerSpanMethod:g,mouseConfig:m}=o,{isGroup:f,tableData:b,isColLoading:x,overflowX:v,scrollXLoad:C,scrollYLoad:w,isAllOverflow:O,expandColumn:E,dragRow:y,dragCol:T}=r,{visibleColumn:R,fullAllDataRowIdData:S,fullColumnIdData:j}=l,D=t.computeEmptyOpts,F=t.computeMouseOpts,$=t.computeExpandOpts;let k,M=b,A=p,I=!1;if((C||w||O)&&(E&&"fixed"!==$.mode||h||g||(I=!0)),x||!u&&v||(A=R),u&&I&&(A=c||[]),w&&y&&M.length>2){const e=S[Object(s.r)(t,y)];if(e){const o=e._index,r=M[0],l=M[M.length-1],n=S[Object(s.r)(t,r)],i=S[Object(s.r)(t,l)];if(n&&i){const e=n._index,t=i._index;o<e?M=[y].concat(M):o>t&&(M=M.concat([y]))}}}if(!u&&!f&&C&&T&&A.length>2){const e=j[T.id];if(e){const t=e._index,o=A[0],r=A[A.length-1],l=j[o.id],n=j[r.id];if(l&&n){const e=l._index,o=n._index;t<e?A=[T].concat(A):t>o&&(A=A.concat([T]))}}}const L=i?i.empty:null,_={$table:t,$grid:n};if(L)k=L.call(t,_);else{const r=D.name?Ne.get(D.name):null,l=r?r.renderTableEmpty||r.renderTableEmptyView||r.renderEmpty:null;k=l?Object(d.d)(l.call(t,e,D,_)):o.emptyText||ze("vxe.table.emptyText")}return e("div",{ref:"refElem",class:["vxe-table--body-wrapper",u?`fixed-${u}--wrapper`:"body--wrapper"],attrs:{xid:a}},[e("div",{ref:"refBodyScroll",class:"vxe-table--body-inner-wrapper",on:{scroll(e){t.triggerBodyScrollEvent(e,u)}}},[u?Ve(t):e("div",{ref:"refBodyXSpace",class:"vxe-body--x-space"}),e("div",{ref:"refBodyYSpace",class:"vxe-body--y-space"}),e("table",{ref:"refBodyTable",class:"vxe-table--body",attrs:{xid:a,cellspacing:0,cellpadding:0,border:0,xvm:I?"1":null}},[e("colgroup",{ref:"refBodyColgroup"},A.map((t,o)=>e("col",{attrs:{name:t.id},key:o,style:{width:t.renderWidth+"px"}}))),e("tbody",{ref:"refBodyTBody"},qe(e,this,u,I,M,A))]),e("div",{class:"vxe-table--checkbox-range"}),m&&F.area?e("div",{class:"vxe-table--cell-area"},[e("span",{class:"vxe-table--cell-main-area"},F.extension?[e("span",{class:"vxe-table--cell-main-area-btn",on:{mousedown(e){t.triggerCellAreaExtendMousedownEvent&&t.triggerCellAreaExtendMousedownEvent(e,{$table:t,fixed:u,type:"body"})}}})]:null),e("span",{class:"vxe-table--cell-copy-area"}),e("span",{class:"vxe-table--cell-extend-area"}),e("span",{class:"vxe-table--cell-multi-area"}),e("span",{class:"vxe-table--cell-active-area"}),e("span",{class:"vxe-table--cell-row-status-area"})]):Ve(t),u?Ve(t):e("div",{class:"vxe-table--empty-block",ref:"emptyBlock"},[e("div",{class:"vxe-table--empty-content"},k)])])])}};const{renderer:Ye,renderEmptyElement:Ke}=a.b;function Ue(e,t,o,r,i){const a=t,c=t.$parent,d=c,{fixedType:u}=a,{headerRowClassName:p,headerRowStyle:h}=d;return i.map((i,a)=>{const d={$table:c,$rowIndex:a,fixed:u,type:"header"};return e("tr",{key:a,class:["vxe-header--row",p?l.a.isFunction(p)?p(d):p:""],style:h?l.a.isFunction(h)?h(d):h:void 0},((e,t,o,r,i,a)=>{const c=t,d=t.$parent,u=d.$xeGrid,p=d,h=d,g=d,{fixedType:m}=c,{resizable:f,columnKey:b,headerCellClassName:x,headerCellStyle:v,showHeaderOverflow:C,headerAlign:w,align:O,mouseConfig:E}=p,{currentColumn:y,dragCol:T,scrollXLoad:R,scrollYLoad:S,overflowX:j}=h,{fullColumnIdData:D,scrollXStore:F}=g,$=d.computeVirtualXOpts,k=d.computeColumnOpts,M=d.computeColumnDragOpts,A=d.computeCellOpts,I=d.computeDefaultRowHeight,L=d.computeHeaderCellOpts,_=Object(s.j)(L.height)||I,{disabledMethod:B,isCrossDrag:H,isPeerDrag:P}=M;return i.map((t,s)=>{const{type:c,showHeaderOverflow:p,headerAlign:h,align:g,filters:I,headerClassName:z,editRender:N,cellRender:V}=t,W=t.id,G=D[W]||{},q=N||V,X=q?Ye.get(q.name):null,Y=t.children&&t.children.length,K=m?t.fixed!==m&&!Y:t.fixed&&j,U=l.a.isBoolean(L.padding)?L.padding:A.padding,Z=l.a.isUndefined(p)||l.a.isNull(p)?C:p,Q=h||(X?X.tableHeaderCellAlign:"")||w||g||(X?X.tableCellAlign:"")||O,J="ellipsis"===Z,ee="title"===Z,te=!0===Z||"tooltip"===Z,oe=ee||te||J;let re=!1,le=null;I&&(le=I[0],re=I.some(e=>e.checked));const ne=G.index,ie=G._index,se={$table:d,$grid:u,$rowIndex:a,column:t,columnIndex:ne,$columnIndex:s,_columnIndex:ie,firstFilterOption:le,fixed:m,type:"header",isHidden:K,hasFilter:re},ae={colid:W,colspan:t.colSpan>1?t.colSpan:null,rowspan:t.rowSpan>1?t.rowSpan:null},ce={click:e=>d.triggerHeaderCellClickEvent(e,se),dblclick:e=>d.triggerHeaderCellDblclickEvent(e,se)},de=k.drag&&"cell"===M.trigger;let ue=!1;de&&(ue=!(!B||!B(se))),(E||de)&&(ce.mousedown=e=>d.triggerHeaderCellMousedownEvent(e,se)),k.drag&&(ce.dragstart=d.handleHeaderCellDragDragstartEvent,ce.dragend=d.handleHeaderCellDragDragendEvent,ce.dragover=d.handleHeaderCellDragDragoverEvent,de&&(ce.mouseup=d.handleHeaderCellDragMouseupEvent));const pe=s===i.length-1,he=l.a.isBoolean(t.resizable)?t.resizable:k.resizable||f,ge=!t.resizeWidth&&("auto"===t.minWidth||"auto"===t.width);let me=!1;r&&!o&&(T&&T.id===W||R&&!t.fixed&&!$.immediate&&(ie<F.visibleStartIndex-F.preloadSize||ie>F.visibleEndIndex+F.preloadSize)&&(me=!0));const fe={};return oe?fe.height=_+"px":fe.minHeight=_+"px",e("th",{class:["vxe-table--column vxe-header--column",W,{["col--"+Q]:Q,["col--"+c]:c,"col--last":pe,"col--fixed":t.fixed,"col--group":Y,"col--ellipsis":oe,"fixed--width":!ge,"fixed--hidden":K,"is--padding":U,"is--sortable":t.sortable,"col--filter":!!I,"is--filter-active":re,"is--drag-active":k.drag&&!t.fixed&&!ue&&(H||P||!t.parentId),"is--drag-disabled":k.drag&&ue,"col--current":y===t},Object(n.c)(z,se),Object(n.c)(x,se)],attrs:ae,style:v?l.a.isFunction(v)?v(se):v:void 0,on:ce,key:b||R||S||k.useKey||k.drag||Y?W:s},[e("div",{class:["vxe-cell",{"c--title":ee,"c--tooltip":te,"c--ellipsis":J}],style:fe},me||r&&K?[]:[e("div",{attrs:{colid:W},class:"vxe-cell--wrapper vxe-header-cell--wrapper"},t.renderHeader(e,se))]),!K&&he?e("div",{class:"vxe-cell--col-resizable",on:{mousedown:e=>d.handleColResizeMousedownEvent(e,m,se),dblclick:e=>d.handleColResizeDblclickEvent(e,se)}}):Ke(d)])})})(e,t,o,r,i,a))})}var Ze={name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},data:()=>({headerColumn:[]}),watch:{tableColumn(){this.uploadColumn()}},created(){this.uploadColumn()},mounted(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-header-";o[r+"wrapper"]=this.$refs.refElem,o[r+"scroll"]=this.$refs.refHeaderScroll,o[r+"table"]=this.$refs.refHeaderTable,o[r+"colgroup"]=this.$refs.refHeaderColgroup,o[r+"list"]=this.$refs.refHeaderTHead,o[r+"xSpace"]=this.$refs.refHeaderXSpace,o[r+"repair"]=this.$refs.refHeaderBorderRepair},destroyed(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-header-";o[r+"wrapper"]=null,o[r+"scroll"]=null,o[r+"table"]=null,o[r+"colgroup"]=null,o[r+"list"]=null,o[r+"xSpace"]=null,o[r+"repair"]=null},render(e){const t=this.$parent,o=t,r=t,l=t,{xID:n}=t,{fixedType:i,fixedColumn:s,tableColumn:a}=this,{headerColumn:c}=this,{mouseConfig:d,showHeaderOverflow:u,spanMethod:p,footerSpanMethod:h}=o,{isGroup:g,isColLoading:m,overflowX:f,scrollXLoad:b,dragCol:x}=r,{visibleColumn:v,fullColumnIdData:C}=l,w=t.computeMouseOpts;let O=c,E=a,y=!1;if(g?E=v:(b&&u&&(p||h||(y=!0)),y&&(m||!i&&f)||(E=v),i&&y&&(E=s||[]),O=[E]),!i&&!g&&b&&x&&E.length>2){const e=C[x.id];if(e){const t=e._index,o=E[0],r=E[E.length-1],l=C[o.id],n=C[r.id];if(l&&n){const e=l._index,o=n._index;t<e?(E=[x].concat(E),O=[[x].concat(O[0])].concat(O.slice(1))):t>o&&(E=E.concat([x]),O=[O[0].concat([x])].concat(O.slice(1)))}}}return e("div",{ref:"refElem",class:["vxe-table--header-wrapper",i?`fixed-${i}--wrapper`:"body--wrapper"],attrs:{xid:n}},[e("div",{ref:"refHeaderScroll",class:"vxe-table--header-inner-wrapper",on:{scroll(e){t.triggerHeaderScrollEvent(e,i)}}},[i?Ke(t):e("div",{ref:"refHeaderXSpace",class:"vxe-body--x-space"}),e("table",{ref:"refHeaderTable",class:"vxe-table--header",attrs:{xid:n,cellspacing:0,cellpadding:0,border:0,xvm:y?"1":null}},[e("colgroup",{ref:"refHeaderColgroup"},E.map((t,o)=>e("col",{attrs:{name:t.id},key:o,style:{width:t.renderWidth+"px"}}))),e("thead",{ref:"refHeaderTHead"},Ue(e,this,g,y,O)),d&&w.area?e("div",{class:"vxe-table--cell-area"},[e("span",{class:"vxe-table--cell-main-area"}),e("span",{class:"vxe-table--cell-copy-area"}),e("span",{class:"vxe-table--cell-extend-area"}),e("span",{class:"vxe-table--cell-multi-area"}),e("span",{class:"vxe-table--cell-active-area"}),e("span",{class:"vxe-table--cell-col-status-area"})]):Ke(t)])])])},methods:{uploadColumn(){const e=this.$parent,{isGroup:t}=e;this.headerColumn=t?Object(s.e)(this.tableGroupColumn):[]}}};const{renderer:Qe,renderEmptyElement:Je}=a.b;function et(e,t,o,r){const a=t,c=t.$parent,d=c,{fixedType:u,footerTableData:p}=a,{footerRowClassName:h,footerRowStyle:g}=d;return p.map((a,d)=>{const m=d,f={$table:c,row:a,_rowIndex:m,$rowIndex:d,fixed:u,type:"footer"};return e("tr",{key:d,class:["vxe-footer--row",h?l.a.isFunction(h)?h(f):h:""],style:g?l.a.isFunction(g)?g(f):g:void 0},function(e,t,o,r,a,c,d,u){const p=t,h=t.$parent,g=h,m=h,f=h,b=h.$xeGrid,{fixedType:x}=p,{resizable:v,border:C,footerCellClassName:w,footerCellStyle:O,footerAlign:E,footerSpanMethod:y,align:T,columnKey:R,showFooterOverflow:S}=g,{scrollXLoad:j,scrollYLoad:D,overflowX:F,currentColumn:$,mergeFootFlag:k}=m,{fullColumnIdData:M,mergeFooterList:A,mergeFooterCellMaps:I,scrollXStore:L}=f,_=h.computeVirtualXOpts,B=h.computeTooltipOpts,H=h.resizableOpts,{isAllColumnDrag:P}=H,z=h.computeColumnOpts,N=h.computeDefaultRowHeight,V=h.computeCellOpts,W=h.computeFooterCellOpts,G=Object(s.j)(W.height)||N;return r.map((t,s)=>{const{type:p,showFooterOverflow:g,footerAlign:m,align:f,footerClassName:H,editRender:N,cellRender:q}=t,X=t.id,Y=M[X]||{},K=N||q,U=K?Qe.get(K.name):null,Z=B.showAll,Q=t.children&&t.children.length,J=x?t.fixed!==x&&!Q:t.fixed&&F,ee=l.a.isBoolean(W.padding)?W.padding:V.padding,te=l.a.eqNull(g)?S:g,oe=m||(U?U.tableFooterCellAlign:"")||E||f||(U?U.tableCellAlign:"")||T,re="ellipsis"===te,le="title"===te,ne=!0===te||"tooltip"===te,ie=le||ne||re,se=l.a.isBoolean(t.resizable)?t.resizable:z.resizable||v,ae={colid:X},ce={},de=Y.index,ue=Y._index,pe={$table:h,$grid:b,row:c,rowIndex:u,_rowIndex:u,$rowIndex:d,column:t,columnIndex:de,$columnIndex:s,_columnIndex:ue,itemIndex:ue,items:c,fixed:x,type:"footer",data:a};(le||ne||Z)&&(ce.mouseenter=e=>{le?Object(i.t)(e.currentTarget,t):(ne||Z)&&h.triggerFooterTooltipEvent(e,pe)}),(ne||Z)&&(ce.mouseleave=e=>{(ne||Z)&&h.handleTargetLeaveEvent(e)}),ce.click=e=>{h.dispatchEvent("footer-cell-click",Object.assign({cell:e.currentTarget},pe),e)},ce.dblclick=e=>{h.dispatchEvent("footer-cell-dblclick",Object.assign({cell:e.currentTarget},pe),e)};let he=!1;if(k&&A.length){const e=I[`${u}:${ue}`];if(e){const{rowspan:t,colspan:o}=e;if(!t||!o)return null;t>1&&(he=!0,ae.rowspan=t),o>1&&(he=!0,ae.colspan=o)}}else if(y){const{rowspan:e=1,colspan:t=1}=y(pe)||{};if(!e||!t)return null;e>1&&(ae.rowspan=e),t>1&&(ae.colspan=t)}const ge=s===r.length-1,me=!t.resizeWidth&&("auto"===t.minWidth||"auto"===t.width);let fe=!1;o&&!he&&j&&!t.fixed&&!_.immediate&&(ue<L.visibleStartIndex-L.preloadSize||ue>L.visibleEndIndex+L.preloadSize)&&(fe=!0);const be={};return ie?be.height=G+"px":be.minHeight=G+"px",e("td",{class:["vxe-table--column vxe-footer--column",t.id,{["col--"+oe]:oe,["col--"+p]:p,"col--last":ge,"fixed--width":!me,"fixed--hidden":J,"is--padding":ee,"col--ellipsis":ie,"col--current":$===t},Object(n.c)(H,pe),Object(n.c)(w,pe)],attrs:ae,style:O?l.a.isFunction(O)?O(pe):O:void 0,on:ce,key:R||j||D||z.useKey||z.drag?t.id:s},[e("div",{class:["vxe-cell",{"c--title":le,"c--tooltip":ne,"c--ellipsis":re}],style:be},fe?[]:[e("div",{attrs:{colid:X},class:"vxe-cell--wrapper vxe-footer-cell--wrapper"},t.renderFooter(e,pe))]),!J&&se&&P?e("div",{class:["vxe-cell--col-resizable",{"is--line":!C||"none"===C}],on:{mousedown:e=>h.handleColResizeMousedownEvent(e,x,pe),dblclick:e=>h.handleColResizeDblclickEvent(e,pe)}}):Je(h)])})}(e,t,o,r,p,a,d,m))})}var tt={name:"VxeTableFooter",props:{footerTableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},fixedColumn:{type:Array,default:()=>[]},fixedType:{type:String,default:null}},mounted(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-footer-";o[r+"wrapper"]=this.$refs.refElem,o[r+"scroll"]=this.$refs.refFooterScroll,o[r+"table"]=this.$refs.refFooterTable,o[r+"colgroup"]=this.$refs.refFooterColgroup,o[r+"list"]=this.$refs.refFooterTFoot,o[r+"xSpace"]=this.$refs.refFooterXSpace},destroyed(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-footer-";o[r+"wrapper"]=null,o[r+"scroll"]=null,o[r+"table"]=null,o[r+"colgroup"]=null,o[r+"list"]=null,o[r+"xSpace"]=null},render(e){const t=this.$parent,o=t,r=t,l=t,{xID:n}=t,{fixedType:i,fixedColumn:s,tableColumn:a}=this,{spanMethod:c,footerSpanMethod:d,showFooterOverflow:u}=o,{visibleColumn:p,fullColumnIdData:h}=l,{isGroup:g,isColLoading:m,overflowX:f,scrollXLoad:b,dragCol:x}=r;let v=a,C=!1;if(b&&u&&(c||d||(C=!0)),C&&(m||!i&&f)||(v=p),i&&C&&(v=s||[]),!i&&!g&&b&&x&&v.length>2){const e=h[x.id];if(e){const t=e._index,o=v[0],r=v[v.length-1],l=h[o.id],n=h[r.id];if(l&&n){const e=l._index,o=n._index;t<e?v=[x].concat(v):t>o&&(v=v.concat([x]))}}}return e("div",{ref:"refElem",class:["vxe-table--footer-wrapper",i?`fixed-${i}--wrapper`:"body--wrapper"],attrs:{xid:n}},[e("div",{ref:"refFooterScroll",class:"vxe-table--footer-inner-wrapper",on:{scroll(e){t.triggerFooterScrollEvent(e,i)}}},[i?Je(t):e("div",{ref:"refFooterXSpace",class:"vxe-body--x-space"}),e("table",{ref:"refFooterTable",class:"vxe-table--footer",attrs:{xid:n,cellspacing:0,cellpadding:0,border:0,xvm:C?"1":null}},[e("colgroup",{ref:"refFooterColgroup"},v.map((t,o)=>e("col",{attrs:{name:t.id},key:o,style:{width:t.renderWidth+"px"}}))),e("tfoot",{ref:"refFooterTFoot"},et(e,this,C,v))])])])}},ot=o(461);const{getI18n:rt,getIcon:lt,renderEmptyElement:nt}=a.b;function it(e,t,o,r,l){const n=e.internalData,i=e.$refs.refBodyWrapperElem;if(!i)return;const s=e.$refs.refCustomBodyElem;if(!s)return;const{prevDragToChild:a}=n,c=i.getBoundingClientRect(),d=s.getBoundingClientRect(),u=e.$refs.refDragLineElem;if(o){if(u)if(r){const e=o.getBoundingClientRect();u.style.display="block",u.style.left=Math.max(0,d.x-c.x)+"px",u.style.top=Math.max(1,e.y+i.scrollTop-c.y)+"px",u.style.height=e.height+"px",u.style.width=e.width+"px",u.setAttribute("drag-pos",l),u.setAttribute("drag-to-child",a?"y":"n")}else u.style.display=""}else u&&(u.style.display="node");const p=e.$refs.refDragTipElem;p&&(p.style.display="block",p.style.top=Math.min(i.clientHeight+i.scrollTop-p.clientHeight,t.clientY+i.scrollTop-c.y)+"px",p.style.left=Math.min(i.clientWidth+i.scrollLeft-p.clientWidth,t.clientX+i.scrollLeft-c.x)+"px",p.setAttribute("drag-status",r?a?"sub":"normal":"disabled"))}function st(e){const t=e.$refs.refDragTipElem,o=e.$refs.refDragLineElem;t&&(t.style.display=""),o&&(o.style.display="")}const at=(e,t)=>{const o=t.$xeTable,r=t.reactData,{dragTipText:l}=r;return e("div",{},[e("div",{ref:"refDragLineElem",class:["vxe-table-custom-popup--drag-line",{"is--guides":o.computeColumnDragOpts.showGuidesStatus}]}),e("div",{ref:"refDragTipElem",class:"vxe-table-custom-popup--drag-tip"},[e("div",{class:"vxe-table-custom-popup--drag-tip-wrapper"},[e("div",{class:"vxe-table-custom-popup--drag-tip-status"},[e("span",{class:["vxe-table-custom-popup--drag-tip-normal-status",lt().TABLE_DRAG_STATUS_ROW]}),e("span",{class:["vxe-table-custom-popup--drag-tip-sub-status",lt().TABLE_DRAG_STATUS_SUB_ROW]}),e("span",{class:["vxe-table-custom-popup--drag-tip-group-status",lt().TABLE_DRAG_STATUS_AGG_GROUP]}),e("span",{class:["vxe-table-custom-popup--drag-tip-values-status",lt().TABLE_DRAG_STATUS_AGG_VALUES]}),e("span",{class:["vxe-table-custom-popup--drag-tip-disabled-status",lt().TABLE_DRAG_DISABLED]})]),e("div",{class:"vxe-table-custom-popup--drag-tip-content"},""+(l||""))])])])};var ct={name:"VxeTableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},provide(){return{$xeTableCustomPanel:this}},inject:{$xeTable:{default:null}},data:()=>({reactData:{dragCol:null,dragGroupField:null,dragAggFnCol:null,dragTipText:""},internalData:{}}),computed:{},created(){const e=this,t=a.b.getComponent("VxeModal"),o=a.b.getComponent("VxeDrawer"),r=a.b.getComponent("VxeButton"),l=a.b.getComponent("VxeNumberInput"),n=a.b.getComponent("VxeRadioGroup");e.$nextTick(()=>{const i=e.$xeTable,{customOpts:s}=i,{mode:a}=s;t||"modal"!==a||Object(h.a)("vxe.error.reqComp",["vxe-modal"]),o||"drawer"!==a||Object(h.a)("vxe.error.reqComp",["vxe-drawer"]),r||Object(h.a)("vxe.error.reqComp",["vxe-button"]),l||Object(h.a)("vxe.error.reqComp",["vxe-input"]),n||Object(h.a)("vxe.error.reqComp",["vxe-radio-group"])})},render(e){const t=this,o=t.$xeTable.computeCustomOpts;return["modal","drawer","popup"].includes(""+o.mode)?((e,t)=>{const o=a.b.getComponent("VxeModal"),r=a.b.getComponent("VxeDrawer"),i=a.b.getComponent("VxeButton"),s=a.b.getComponent("VxeInput"),c=t,d=t,u=t.$xeTable,p=u,h=u,g=u.$xeGrid,{customStore:m}=d,{treeConfig:f,rowGroupConfig:b,aggregateConfig:x,resizable:v}=p,{isCustomStatus:C,customColumnList:w}=h,O=u.computeCustomOpts,{immediate:E}=O,y=u.computeColumnDragOpts,{mode:T,modalOptions:R,drawerOptions:S,allowVisible:j,allowSort:D,allowFixed:F,allowResizable:$,checkMethod:k,visibleMethod:M}=O,A=u.computeColumnOpts,{maxFixedSize:I}=A,L=u.computeResizableOpts,{minWidth:_,maxWidth:B}=L,H=Object.assign({},R),P=Object.assign({},S),z=u.computeIsMaxFixedColumn,{isCrossDrag:N}=y,V=O.slots||{},W=V.header,G=V.top,q=V.bottom,X=V.default,Y=V.footer,K=[],U=m.isAll,Z=m.isIndeterminate,Q={$table:u,$grid:g,columns:w,isAllChecked:U,isAllIndeterminate:Z,isCustomStatus:C};l.a.eachTree(w,(o,r,i,a,d)=>{if(!M||M({$table:u,column:o})){let i=0,a=0;if($){const e={$table:u,column:o,columnIndex:r,$columnIndex:r,$rowIndex:-1};_&&(i=l.a.toNumber(l.a.isFunction(_)?_(e):_)),B&&(a=l.a.toNumber(l.a.isFunction(B)?B(e):B))}const p=o.renderVisible,h=o.halfVisible,g=Object(n.b)(o.getTitle(),1),m=o.children&&o.children.length,f=!!k&&!k({$table:u,column:o}),b=!p;K.push(e("tr",{key:o.id,attrs:{colid:o.id},class:["vxe-table-custom-popup--row level--"+o.level,{"is--group":m}],on:{dragstart:c.sortDragstartEvent,dragend:c.sortDragendEvent,dragover:c.sortDragoverEvent}},[j?e("td",{class:"vxe-table-custom-popup--column-item col--visible"},[e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":p,"is--indeterminate":h,"is--disabled":f}],attrs:{title:rt("vxe.custom.setting.colVisible")},on:{click:e=>{f||c.changeCheckboxOption(o,e)}}},[e("span",{class:["vxe-checkbox--icon",h?lt().TABLE_CHECKBOX_INDETERMINATE:p?lt().TABLE_CHECKBOX_CHECKED:lt().TABLE_CHECKBOX_UNCHECKED]})])]):nt(u),e("td",{class:"vxe-table-custom-popup--column-item col--name"},[e("div",{class:"vxe-table-custom-popup--name"},[D?N&&E||1===o.level?e("div",{class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":f||b||o.renderFixed}],attrs:{title:rt("vxe.custom.setting.sortHelpTip")},on:f||b||o.renderFixed?{}:{mousedown:c.sortMousedownEvent,mouseup:c.sortMouseupEvent}},[e("i",{class:lt().TABLE_CUSTOM_SORT})]):e("div",{class:"vxe-table-custom-popup--column-sort-placeholder"}):nt(u),"html"===o.type?e("div",{key:"1",class:"vxe-table-custom-popup--title",domProps:{innerHTML:g}}):e("div",{key:"0",class:"vxe-table-custom-popup--title",attrs:{title:g}},g)])]),$?e("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[o.children&&o.children.length||!(l.a.isBoolean(o.resizable)?o.resizable:A.resizable||v)?e("span","-"):s?e(s,{props:{type:"integer",immediate:!1,disabled:f||b,value:o.renderResizeWidth,min:i||void 0,max:a||void 0},on:{modelValue(e){o.renderResizeWidth=Math.max(0,Number(e))},change(){c.changeColumnWidth(o)}}}):nt(t)]):nt(u),F?e("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[d?e("span","-"):e("vxe-radio-group",{props:{value:o.renderFixed||"",type:"button",size:"mini",disabled:f||b,options:[{label:rt("vxe.custom.setting.fixedLeft"),value:"left",disabled:f||b||z},{label:rt("vxe.custom.setting.fixedUnset"),value:"",disabled:f||b},{label:rt("vxe.custom.setting.fixedRight"),value:"right",disabled:f||b||z}]},on:{change({label:e,$event:t}){c.changeFixedOption(o,e,t)}}})]):nt(u)]))}});const J={default:()=>e("div",{ref:"refBodyWrapperElem",class:"vxe-table-custom-popup--body-wrapper"},X?u.callSlot(X,Q,e):[e("div",{ref:"refCustomBodyElem",class:"vxe-table-custom-popup--handle-wrapper"},[G?e("div",{class:"vxe-table-custom-popup--table-top"},u.callSlot(G,Q,e)):nt(u),e("div",{class:"vxe-table-custom-popup--table-wrapper"},[e("table",{},[e("colgroup",{},[j?e("col",{class:"vxe-table-custom-popup--table-col-seq"}):nt(u),e("col",{class:"vxe-table-custom-popup--table-col-title"}),$?e("col",{class:"vxe-table-custom-popup--table-col-width"}):nt(u),F?e("col",{class:"vxe-table-custom-popup--table-col-fixed"}):nt(u)]),e("thead",{},[e("tr",{},[j?e("th",{},[e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":U,"is--indeterminate":Z}],attrs:{title:rt("vxe.table.allTitle")},on:{click:c.allOptionEvent}},[e("span",{class:["vxe-checkbox--icon",Z?lt().TABLE_CHECKBOX_INDETERMINATE:U?lt().TABLE_CHECKBOX_CHECKED:lt().TABLE_CHECKBOX_UNCHECKED]}),e("span",{class:"vxe-checkbox--label"},rt("vxe.toolbar.customAll"))])]):nt(u),e("th",{},rt("vxe.custom.setting.colTitle")),$?e("th",{},rt("vxe.custom.setting.colResizable")):nt(u),F?e("th",{},rt("vxe.custom.setting."+(I?"colFixedMax":"colFixed"),[I])):nt(u)])]),e("transition-group",{class:"vxe-table-custom--panel-list",props:{tag:"tbody",name:"vxe-table-custom--list"}},K)])]),q?e("div",{class:"vxe-table-custom-popup--table-bottom"},u.callSlot(q,Q,e)):nt(u),at(e,c)]),!f&&(x||b)&&u.getPivotTableAggregatePopupPanel?e(u.getPivotTableAggregatePopupPanel(),{props:{customStore:m}}):nt(u)]),footer:()=>Y?u.callSlot(Y,Q,e):e("div",{class:"vxe-table-custom-popup--footer"},[e(i,{props:{content:O.resetButtonText||rt("vxe.custom.cstmRestore"),disabled:!C},on:{click:c.resetCustomEvent}}),e(i,E?{props:{content:O.resetButtonText||rt("vxe.table.customClose")},on:{click:c.cancelCloseEvent}}:{props:{content:O.resetButtonText||rt("vxe.custom.cstmCancel")},on:{click:c.cancelCustomEvent}}),E?nt(u):e(i,{props:{status:"primary",content:O.confirmButtonText||rt("vxe.custom.cstmConfirm")},on:{click:c.confirmCustomEvent}})])};return W&&(J.header=()=>u.callSlot(W,Q,e)),"drawer"===T?r?e(r,{key:"drawer",props:{className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",P.className||""].join(" "),value:m.visible,title:P.title||rt("vxe.custom.cstmTitle"),width:P.width||Math.min(880,Math.floor(.6*document.documentElement.clientWidth)),position:P.position,resize:!!P.resize,escClosable:!!P.escClosable,maskClosable:!!P.maskClosable,destroyOnClose:!0,showFooter:!0},on:{input(e){m.visible=e}},scopedSlots:J}):nt(t):o?e(o,{key:"modal",props:{className:["vxe-table-custom-popup-wrapper","vxe-table--ignore-clear",H.className||""].join(" "),value:m.visible,title:H.title||rt("vxe.custom.cstmTitle"),width:H.width||Math.min(880,document.documentElement.clientWidth),minWidth:H.minWidth||700,height:H.height||Math.min(680,document.documentElement.clientHeight),minHeight:H.minHeight||400,showZoom:H.showZoom,showMaximize:H.showMaximize,showMinimize:H.showMinimize,mask:H.mask,lockView:H.lockView,resize:H.resize,escClosable:!!H.escClosable,maskClosable:!!H.maskClosable,destroyOnClose:!0,showFooter:!0},on:{input(e){m.visible=e}},scopedSlots:J}):nt(t)})(e,t):((e,t)=>{const o=a.b.getComponent("VxeButton"),r=t,i=t.$xeTable,s=i,c=i,d=i.$xeGrid,{customStore:u}=r,{treeConfig:p,rowGroupConfig:h,aggregateConfig:g}=s,{isCustomStatus:m,customColumnList:f}=c,b=i.computeCustomOpts,{immediate:x}=b,v=i.computeColumnDragOpts,{maxHeight:C}=u,{checkMethod:w,visibleMethod:O,allowVisible:E,allowSort:y,allowFixed:T,trigger:R,placement:S}=b,j=i.computeIsMaxFixedColumn,{isCrossDrag:D}=v,F=b.slots||{},$=F.header,k=F.top,M=F.bottom,A=F.default,I=F.footer,L=[],_={},B=u.isAll,H=u.isIndeterminate;"hover"===R&&(_.mouseenter=t.handleWrapperMouseenterEvent,_.mouseleave=t.handleWrapperMouseleaveEvent);const P={$table:i,$grid:d,columns:f,isAllChecked:B,isAllIndeterminate:H,isCustomStatus:m};return l.a.eachTree(f,(r,l,s,a,c)=>{if(!O||O({$table:i,column:r})){const l=r.renderVisible,s=r.halfVisible,a=r.children&&r.children.length,d=Object(n.b)(r.getTitle(),1),u=!!w&&!w({$table:i,column:r}),p=!l;L.push(e("li",{key:r.id,attrs:{colid:r.id},class:["vxe-table-custom--option","level--"+r.level,{"is--hidden":u||p,"is--group":a}],on:{dragstart:t.sortDragstartEvent,dragend:t.sortDragendEvent,dragover:t.sortDragoverEvent}},[E?e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":l,"is--indeterminate":s,"is--disabled":u}],attrs:{title:rt("vxe.custom.setting.colVisible")},on:{click:e=>{u||t.changeCheckboxOption(r,e)}}},[e("span",{class:["vxe-checkbox--icon",s?lt().TABLE_CHECKBOX_INDETERMINATE:l?lt().TABLE_CHECKBOX_CHECKED:lt().TABLE_CHECKBOX_UNCHECKED]})]):nt(i),e("div",{class:"vxe-table-custom--name-option"},[y&&(D&&x||1===r.level)?e("div",{class:"vxe-table-custom--sort-option"},[e("span",{class:["vxe-table-custom--sort-btn",{"is--disabled":u||p||r.renderFixed}],attrs:{title:rt("vxe.custom.setting.sortHelpTip")},on:u||p||r.renderFixed?{}:{mousedown:t.sortMousedownEvent,mouseup:t.sortMouseupEvent}},[e("i",{class:lt().TABLE_CUSTOM_SORT})])]):nt(i),"html"===r.type?e("div",{key:"1",class:"vxe-table-custom--checkbox-label",domProps:{innerHTML:d}}):e("div",{key:"0",class:"vxe-table-custom--checkbox-label",attrs:{title:d}},d)]),!c&&T?e("div",{class:"vxe-table-custom--fixed-option"},[e(o,{props:{mode:"text",icon:"left"===r.renderFixed?lt().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:lt().TOOLBAR_TOOLS_FIXED_LEFT,status:"left"===r.renderFixed?"primary":"",disabled:u||p||j&&!r.renderFixed,title:rt("left"===r.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft")},on:{click:({$event:e})=>{t.changeFixedOption(r,"left",e)}}}),e(o,{props:{mode:"text",icon:"right"===r.renderFixed?lt().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:lt().TOOLBAR_TOOLS_FIXED_RIGHT,status:"right"===r.renderFixed?"primary":"",disabled:u||p||j&&!r.renderFixed,title:rt("right"===r.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight")},on:{click:({$event:e})=>{t.changeFixedOption(r,"right",e)}}})]):nt(i)]))}}),e("div",{key:"simple",class:["vxe-table-custom-wrapper","placement--"+S,{"is--active":u.visible}],style:C&&!["left","right"].includes(S||"")?{maxHeight:C+"px"}:{}},u.visible?[e("div",{ref:"refBodyWrapperElem",class:"vxe-table-custom-simple--body-wrapper"},[!p&&(g||h)&&i.getPivotTableAggregateSimplePanel?e(i.getPivotTableAggregateSimplePanel(),{props:{customStore:u}}):nt(i),e("div",{ref:"refCustomBodyElem",class:"vxe-table-custom--handle-wrapper"},[e("div",{class:"vxe-table-custom--header"},$?i.callSlot($,P,e):[e("ul",{class:"vxe-table-custom--panel-list"},[e("li",{class:"vxe-table-custom--option"},[E?e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":B,"is--indeterminate":H}],attrs:{title:rt("vxe.table.allTitle")},on:{click:t.allOptionEvent}},[e("span",{class:["vxe-checkbox--icon",H?lt().TABLE_CHECKBOX_INDETERMINATE:B?lt().TABLE_CHECKBOX_CHECKED:lt().TABLE_CHECKBOX_UNCHECKED]}),e("span",{class:"vxe-checkbox--label"},rt("vxe.toolbar.customAll"))]):e("span",{class:"vxe-checkbox--label"},rt("vxe.table.customTitle"))])])]),e("div",{class:"vxe-table-custom--body"},[k?e("div",{class:"vxe-table-custom--panel-top"},i.callSlot(k,P,e)):nt(i),A?e("div",{class:"vxe-table-custom--panel-body"},i.callSlot(A,P,e)):e("transition-group",{class:"vxe-table-custom--panel-list",props:{name:"vxe-table-custom--list",tag:"ul"},on:_},L),M?e("div",{class:"vxe-table-custom--panel-bottom"},i.callSlot(M,P,e)):nt(i)]),b.showFooter?e("div",{class:"vxe-table-custom--footer"},I?i.callSlot(I,P,e):[e("div",{class:"vxe-table-custom--footer-buttons"},[e(o,{props:{mode:"text",content:b.resetButtonText||rt("vxe.table.customRestore"),disabled:!m},on:{click:t.resetCustomEvent}}),e(o,x?{props:{mode:"text",content:b.closeButtonText||rt("vxe.table.customClose")},on:{click:t.cancelCloseEvent}}:{props:{mode:"text",content:b.resetButtonText||rt("vxe.table.customCancel")},on:{click:t.cancelCustomEvent}}),x?nt(i):e(o,{props:{mode:"text",status:"primary",content:b.confirmButtonText||rt("vxe.table.customConfirm")},on:{click:t.confirmCustomEvent}})])]):null]),at(e,t)])]:[])})(e,t)},methods:{handleWrapperMouseenterEvent(e){const t=this.$xeTable,{customStore:o}=this;o.activeWrapper=!0,t.customOpenEvent(e)},handleWrapperMouseleaveEvent(e){const t=this.$xeTable,{customStore:o}=this;o.activeWrapper=!1,setTimeout(()=>{o.activeBtn||o.activeWrapper||t.customCloseEvent(e)},300)},getStoreData:()=>({}),confirmCustomEvent({$event:e}){const t=this.$xeTable;t.isCustomStatus=!0,t.saveCustom(),t.closeCustom(),t.emitCustomEvent("confirm",e)},cancelCloseEvent({$event:e}){const t=this.$xeTable;t.closeCustom(),t.emitCustomEvent("close",e)},cancelCustomEvent({$event:e}){const t=this.$xeTable;t.cancelCustom(),t.closeCustom(),t.emitCustomEvent("cancel",e)},handleResetCustomEvent(e){const t=this.$xeTable;t.resetCustom(!0),t.closeCustom(),t.emitCustomEvent("reset",e)},resetCustomEvent(e){a.b.modal?a.b.modal.confirm({content:rt("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(t=>{"confirm"===t&&this.handleResetCustomEvent(e)}):this.handleResetCustomEvent(e)},handleOptionCheck(e){const t=this.$xeTable,{customColumnList:o}=t,r=l.a.findTree(o,t=>t===e);if(r&&r.parent){const{parent:e}=r;e.children&&e.children.length&&(e.visible=e.children.every(e=>e.visible),e.halfVisible=!e.visible&&e.children.some(e=>e.visible||e.halfVisible),this.handleOptionCheck(e))}},changeCheckboxOption(e,t){const o=this.$xeTable,r=o,n=o.computeCustomOpts,i=!e.renderVisible;n.immediate?(l.a.eachTree([e],e=>{e.visible=i,e.renderVisible=i,e.halfVisible=!1}),r.isCustomStatus=!0,o.handleCustom(),o.saveCustomStore("update:visible")):l.a.eachTree([e],e=>{e.renderVisible=i,e.halfVisible=!1}),this.handleOptionCheck(e),o.checkCustomStatus(),o.dispatchEvent("custom-visible-change",{column:e,checked:i},t)},changeColumnWidth(e){const t=this.$xeTable,o=t;t.computeCustomOpts.immediate&&e.renderResizeWidth!==e.renderWidth&&(e.resizeWidth=e.renderResizeWidth,e.renderWidth=e.renderResizeWidth,o.isCustomStatus=!0,t.handleCustom(),t.saveCustomStore("update:width"))},changeFixedOption(e,t,o){const r=this.$xeTable,n=r,i=r.computeIsMaxFixedColumn;let s=null;r.computeCustomOpts.immediate?(e.renderFixed===t?(s="",l.a.eachTree([e],e=>{e.fixed="",e.renderFixed=""})):i&&!e.renderFixed||(s=t,l.a.eachTree([e],e=>{e.fixed=t,e.renderFixed=t})),n.isCustomStatus=!0,r.handleCustom(),r.saveCustomStore("update:fixed")):e.renderFixed===t?(s="",l.a.eachTree([e],e=>{e.renderFixed=""})):i&&!e.renderFixed||(s=t,l.a.eachTree([e],e=>{e.renderFixed=t})),null!==!s&&r.dispatchEvent("custom-fixed-change",{column:e,fixed:s},o)},allOptionEvent(e){const t=this.$xeTable,o=t,{customStore:r}=o,l=!r.isAll;t.toggleCustomAllCheckbox(),t.dispatchEvent("custom-visible-all",{checked:l},e)},updateColDropTipContent(){const e=this.$xeTable,t=this.reactData,{dragCol:o}=t,r=e.computeColumnDragOpts,{tooltipMethod:l}=r;let n="";if(l){n=""+(l({$table:e,column:o})||"")}else n=rt("vxe.custom.cstmDragTarget",[o&&"html"!==o.type?o.getTitle():""]);t.dragTipText=n},sortMousedownEvent(e){const t=this.$xeTable,o=this.reactData,r=e.currentTarget.parentElement.parentElement.parentElement,l=r.getAttribute("colid"),n=t.getColumnById(l);r.draggable=!0,o.dragCol=n,o.dragGroupField=null,o.dragAggFnCol=null,this.updateColDropTipContent(),Object(i.a)(r,"active--drag-origin")},sortMouseupEvent(e){const t=this.reactData,o=e.currentTarget.parentElement.parentElement.parentElement;st(this),o.draggable=!1,t.dragCol=null,t.dragGroupField=null,t.dragAggFnCol=null,Object(i.n)(o,"active--drag-origin")},sortDragstartEvent(e){const t=this.internalData;e.dataTransfer&&e.dataTransfer.setDragImage(Object(i.g)(),0,0),t.prevDragGroupField=null,t.prevDragAggFnColid=null},sortDragendEvent(e){const t=this.$xeTable,o=t,r=t,n=t,s=this.reactData,c=this.internalData,{mouseConfig:d}=o,{customColumnList:u}=r,{collectColumn:p}=n,h=t.computeCustomOpts,{immediate:g}=h,m=e.currentTarget,f=t.computeColumnDragOpts,{isCrossDrag:b,isSelfToChildDrag:x,isToChildDrag:v,dragEndMethod:C}=f,{dragCol:w}=s,{prevDragCol:O,prevDragGroupField:E,prevDragAggFnColid:y,prevDragPos:T,prevDragToChild:R}=c,S="bottom"===T?1:0;if(E||y)t.handlePivotTableAggregatePanelDragendEvent&&t.handlePivotTableAggregatePanelDragendEvent(e);else if(O&&w&&O!==w){const o=w,n=O;Promise.resolve(!C||C({oldColumn:o,newColumn:n,dragColumn:o,dragPos:T,dragToChild:!!R,offsetIndex:S})).then(i=>{if(!i)return;let s=-1,c=-1;const h={};l.a.eachTree([o],e=>{h[e.id]=e});let m=!1;if(g){if(o.parentId&&n.parentId){if(!b)return;if(h[n.id]&&(m=!0,!b||!x))return void(a.b.modal&&a.b.modal.message({status:"error",content:rt("vxe.error.treeDragChild")}))}else if(o.parentId){if(!b)return}else if(n.parentId){if(!b)return;if(h[n.id]&&(m=!0,!b||!x))return void(a.b.modal&&a.b.modal.message({status:"error",content:rt("vxe.error.treeDragChild")}))}const e=l.a.findTree(p,e=>e.id===o.id);if(m&&b&&x){if(e){const{items:t,index:r}=e,l=o.children||[];l.forEach(e=>{e.parentId=o.parentId}),t.splice(r,1,...l),o.children=[]}}else if(e){const{items:t,index:o,parent:r}=e;t.splice(o,1),r||(s=o)}const t=l.a.findTree(p,e=>e.id===n.id);if(t){const{items:e,index:r,parent:l}=t;b&&v&&R?(o.parentId=n.id,n.children=(n.children||[]).concat([o])):(o.parentId=n.parentId,e.splice(r+S,0,o)),l||(c=r)}l.a.eachTree(p,(e,t,o,r,l)=>{if(!l){const o=t+1;e.renderSortNumber=o}})}else s=l.a.findIndexOf(u,e=>e.id===o.id),u.splice(s,1),c=l.a.findIndexOf(u,e=>e.id===n.id),u.splice(c+S,0,o);d&&(t.clearSelected&&t.clearSelected(),t.clearCellAreas&&(t.clearCellAreas(),t.clearCopyCellArea())),t.dispatchEvent("column-dragend",{oldColumn:o,newColumn:n,dragColumn:o,dragPos:T,offsetIndex:S,_index:{newIndex:c,oldIndex:s}},e),g&&(r.customColumnList=p.slice(0),t.handleColDragSwapColumn())}).catch(()=>{})}st(this),s.dragCol=null,s.dragGroupField=null,s.dragAggFnCol=null,c.prevDragGroupField=null,c.prevDragAggFnColid=null,m.draggable=!1,m.removeAttribute("drag-pos"),Object(i.n)(m,"active--drag-target"),Object(i.n)(m,"active--drag-origin")},sortDragoverEvent(e){const t=this,o=t.$xeTable,r=t.reactData,l=t.internalData,{dragCol:n}=r,s=o.computeCustomOpts,{immediate:a}=s,c=o.computeColumnDragOpts,{isCrossDrag:d,isToChildDrag:u}=c,p=e.currentTarget,h=Object(i.i)(e),g=p.getAttribute("colid"),m=o.getColumnById(g);if(l.prevDragGroupField=null,l.prevDragAggFnColid=null,m&&(d||1===m.level)){e.preventDefault();const o=e.clientY-p.getBoundingClientRect().y<p.clientHeight/2?"top":"bottom";if(!n||n&&n.id===m.id||!d&&m.level>1||!a&&m.level>1||m.renderFixed)return void it(t,e,p,!1,o);l.prevDragToChild=!!(d&&u&&h&&a),l.prevDragCol=m,l.prevDragPos=o,it(t,e,p,!0,o)}}}};const{getI18n:dt,getIcon:ut,renderer:pt,globalMixins:ht}=a.b;var gt={name:"VxeTableFilterPanel",mixins:[ht.sizeMixin],props:{filterStore:Object},inject:{$xeTable:{default:null}},computed:{computeHasCheckOption(){const{filterStore:e}=this;return e&&e.options.some(e=>e.checked)}},mounted(){const e=this.$xeTable.computeFilterOpts,{transfer:t}=e,o=this.$refs.refElem;t&&o&&document.body.appendChild(o)},beforeDestroy(){const e=this.$refs.refElem;e&&e.parentNode&&e.parentNode.removeChild(e)},render(e){const t=this.$xeTable,o=t,{filterStore:r}=this,{visible:l,multiple:i,column:s}=r,a=s?s.filterRender:null,c=Object(n.h)(a)?pt.get(a.name):null,u=c?c.tableFilterClassName||c.filterClassName:"",p=Object.assign({},o._currFilterParams,{$panel:this,$table:t}),h=t,g=this.computeSize,m=t.computeFilterOpts,{destroyOnClose:f}=m;return e("div",{ref:"refElem",class:["vxe-table--filter-wrapper","filter--prevent-default",c&&c.className?c.className:"",Object(n.c)(u,p),{["size--"+g]:g,"is--animat":h.animat,"is--multiple":i,"is--active":l}],style:r.style},r.visible&&(!f||l)&&s?function(e,t,o,r){const l=e,i=e.$xeTable,s=i,{filterStore:a}=l,{column:c,multiple:u,maxHeight:p}=a,h=c?c.slots:null,g=h?h.filter:null,m=Object.assign({},s._currFilterParams,{$panel:e,$table:i}),f=r?r.renderTableFilter||r.renderFilter:null;if(g)return[t("div",{class:"vxe-table--filter-template",style:p?{maxHeight:p+"px"}:{}},i.callSlot(g,m,t))];if(f)return[t("div",{class:"vxe-table--filter-template",style:p?{maxHeight:p+"px"}:{}},Object(d.d)(f.call(i,t,o,m)))];const b=u?a.isAllSelected:!a.options.some(e=>e._checked),x=u&&a.isIndeterminate;return[t("ul",{class:"vxe-table--filter-header"},[t("li",{class:["vxe-table--filter-option",{"is--checked":b,"is--indeterminate":x}],attrs:{title:dt(u?"vxe.table.allTitle":"vxe.table.allFilter")},on:{click:t=>{e.changeAllOption(t,!a.isAllSelected)}}},(u?[t("span",{class:["vxe-checkbox--icon",x?ut().TABLE_CHECKBOX_INDETERMINATE:b?ut().TABLE_CHECKBOX_CHECKED:ut().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([t("span",{class:"vxe-checkbox--label"},dt("vxe.table.allFilter"))]))]),t("ul",{class:"vxe-table--filter-body",style:p?{maxHeight:p+"px"}:{}},a.options.map(o=>{const r=o._checked;return t("li",{class:["vxe-table--filter-option",{"is--checked":r}],attrs:{title:o.label},on:{click:t=>{e.changeOption(t,!o._checked,o)}}},(u?[t("span",{class:["vxe-checkbox--icon",r?ut().TABLE_CHECKBOX_CHECKED:ut().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([t("span",{class:"vxe-checkbox--label"},Object(n.b)(o.label,1))]))}))]}(this,e,a,c).concat(function(e,t){const o=e,r=e.$xeTable,{filterStore:l}=o,{column:i,multiple:s}=l,a=r.computeFilterOpts,c=e.computeHasCheckOption,d=i.filterRender,u=Object(n.h)(d)?pt.get(d.name):null,p=!c&&!l.isAllSelected&&!l.isIndeterminate;return s&&(!u||!1!==u.showTableFilterFooter&&!1!==u.showFilterFooter&&!1!==u.isFooter)?[t("div",{class:"vxe-table--filter-footer"},[t("button",{class:{"is--disabled":p},attrs:{disabled:p},on:{click:e.confirmFilter}},a.confirmButtonText||dt("vxe.table.confirmFilter")),t("button",{on:{click:e.resetFilter}},a.resetButtonText||dt("vxe.table.resetFilter"))])]:[]}(this,e)):[])},methods:{filterCheckAllEvent(e,t){const o=this.filterStore;o.options.forEach(e=>{e._checked=t,e.checked=t}),o.isAllSelected=t,o.isIndeterminate=!1},changeRadioOption(e,t,o){const r=this.$parent,{filterStore:l}=this;l.options.forEach(e=>{e._checked=!1}),o._checked=t,r.checkFilterOptions(),this.confirmFilter(e)},changeMultipleOption(e,t,o){const r=this.$parent;o._checked=t,r.checkFilterOptions()},changeAllOption(e,t){this.filterStore.multiple?this.filterCheckAllEvent(e,t):this.resetFilter(e)},changeOption(e,t,o){this.filterStore.multiple?this.changeMultipleOption(e,t,o):this.changeRadioOption(e,t,o)},confirmFilter(e){const t=this.$parent;e||Object(h.b)("vxe.error.delFunc",["confirmFilter","saveFilterPanelByEvent"]),t.handleFilterConfirmFilter(e||new Event("click"))},resetFilter(e){this.$parent.handleFilterResetFilter(e)}}};const{getI18n:mt,getIcon:ft,globalMixins:bt,renderEmptyElement:xt}=a.b;var vt={name:"VxeTableImportPanel",mixins:[bt.sizeMixin],props:{defaultOptions:Object,storeData:Object},components:{},inject:{$xeTable:{default:null}},data:()=>({loading:!1}),computed:{selectName(){return`${this.storeData.filename}.${this.storeData.type}`},hasFile(){return this.storeData.file&&this.storeData.type},parseTypeLabel(){const{storeData:e}=this,{type:t,typeList:o}=e;if(t){const e=l.a.find(o,e=>t===e.value);return e?e.label:"*.*"}return"*."+o.map(e=>e.value).join(", *.")}},created(){const e=a.b.getComponent("VxeModal"),t=a.b.getComponent("VxeButton"),o=a.b.getComponent("VxeSelect");this.$nextTick(()=>{e||Object(h.a)("vxe.error.reqComp",["vxe-modal"]),t||Object(h.a)("vxe.error.reqComp",["vxe-button"]),o||Object(h.a)("vxe.error.reqComp",["vxe-select"])})},render(e){const t=this.$parent,o=t.$xeGrid,{hasFile:r,loading:l,parseTypeLabel:n,defaultOptions:i,storeData:s,selectName:a}=this,c=i.slots||{},d=c.top,u=c.bottom,p=c.default,h=c.footer;return e("vxe-modal",{ref:"modal",props:{id:"VXE_IMPORT_MODAL",value:s.visible,title:mt("vxe.import.impTitle"),width:540,minWidth:360,minHeight:240,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:l},on:{input(e){s.visible=e},show:this.showEvent},scopedSlots:{default:()=>{const l={$table:t,$grid:o,options:i,params:i.params};return e("div",{class:"vxe-table-export--panel"},[d?e("div",{class:"vxe-table-export--panel-top"},t.callSlot(d,l,e)):xt(this),e("div",{class:"vxe-table-export--panel-body"},p?t.callSlot(p,l,e):[e("table",{class:"vxe-table-export--panel-table",attrs:{cellspacing:0,cellpadding:0,border:0}},[e("tbody",[e("tr",[e("td",mt("vxe.import.impFile")),e("td",[r?e("div",{class:"vxe-table-export--selected--file",attrs:{title:a}},[e("span",a),e("i",{class:ft().INPUT_CLEAR,on:{click:this.clearFileEvent}})]):e("button",{ref:"fileBtn",class:"vxe-table-export--select--file",attrs:{type:"button"},on:{click:this.selectFileEvent}},mt("vxe.import.impSelect"))])]),e("tr",[e("td",mt("vxe.import.impType")),e("td",n)]),e("tr",[e("td",mt("vxe.import.impMode")),e("td",[e("vxe-select",{props:{value:i.mode,options:s.modeList},on:{modelValue(e){i.mode=e}}})])])])])]),u?e("div",{class:"vxe-table-export--panel-bottom"},t.callSlot(u,l,e)):xt(this)])},footer:()=>{const n={$table:t,$grid:o,options:i,params:i.params};return e("div",{class:"vxe-table-export--panel-footer"},h?t.callSlot(h,n,e):[e("div",{class:"vxe-table-export--panel-btns"},[e("vxe-button",{on:{click:this.cancelEvent}},mt("vxe.import.impCancel")),e("vxe-button",{props:{status:"primary",disabled:!r||l},on:{click:this.importEvent}},mt("vxe.import.impConfirm"))])])}}})},methods:{clearFileEvent(){Object.assign(this.storeData,{filename:"",sheetName:"",type:""})},selectFileEvent(){this.$parent.readFile(this.defaultOptions).then(e=>{const{file:t}=e;Object.assign(this.storeData,Object(n.j)(t),{file:t})}).catch(e=>e)},showEvent(){this.$nextTick(()=>{const{$refs:e}=this,t=e.fileBtn;t&&t.focus()})},cancelEvent(){this.storeData.visible=!1},importEvent(){const e=this.$parent;this.loading=!0,e.importByFile(this.storeData.file,Object.assign({},e.importOpts,this.defaultOptions)).then(()=>{this.loading=!1,this.storeData.visible=!1}).catch(()=>{this.loading=!1})}}};const{getI18n:Ct,getIcon:wt,globalMixins:Ot,renderEmptyElement:Et}=a.b;var yt={name:"VxeTableExportPanel",mixins:[Ot.sizeMixin],props:{defaultOptions:Object,storeData:Object},components:{},inject:{$xeTable:{default:null}},data:()=>({isAll:!1,isIndeterminate:!1,loading:!1}),computed:{checkedAll(){return this.storeData.columns.every(e=>e.checked)},showSheet(){return["html","xml","xlsx","pdf"].indexOf(this.defaultOptions.type)>-1},supportMerge(){const{storeData:e,defaultOptions:t}=this;return!t.original&&"current"===t.mode&&(e.isPrint||["html","xlsx"].indexOf(t.type)>-1)},supportStyle(){const{defaultOptions:e}=this;return!e.original&&["xlsx"].indexOf(e.type)>-1}},created(){const e=a.b.getComponent("VxeModal"),t=a.b.getComponent("VxeButton"),o=a.b.getComponent("VxeSelect"),r=a.b.getComponent("VxeInput"),l=a.b.getComponent("VxeCheckbox");this.$nextTick(()=>{e||Object(h.a)("vxe.error.reqComp",["vxe-modal"]),t||Object(h.a)("vxe.error.reqComp",["vxe-button"]),o||Object(h.a)("vxe.error.reqComp",["vxe-select"]),r||Object(h.a)("vxe.error.reqComp",["vxe-input"]),l||Object(h.a)("vxe.error.reqComp",["vxe-checkbox"])})},render(e){const t=this.$xeTable,o=t.$xeGrid,{_e:r,checkedAll:i,isAll:s,isIndeterminate:a,showSheet:c,supportMerge:d,supportStyle:u,defaultOptions:p,storeData:h}=this,{hasTree:g,hasMerge:m,isPrint:f,hasColgroup:b,columns:x}=h,{isHeader:v}=p,C=p.slots||{},w=C.top,O=C.bottom,E=C.default,y=C.footer,T=C.parameter,R=[];return l.a.eachTree(x,t=>{const o=Object(n.b)(t.getTitle(),1),r=t.children&&t.children.length,l=t.checked,i=t.halfChecked,s="html"===t.type;R.push(e("li",{class:["vxe-table-export--panel-column-option","level--"+t.level,{"is--group":r,"is--checked":l,"is--indeterminate":i,"is--disabled":t.disabled}],attrs:{title:o},on:{click:()=>{t.disabled||this.changeOption(t)}}},[e("span",{class:["vxe-checkbox--icon",i?wt().TABLE_CHECKBOX_INDETERMINATE:l?wt().TABLE_CHECKBOX_CHECKED:wt().TABLE_CHECKBOX_UNCHECKED]}),s?e("span",{key:"1",class:"vxe-checkbox--label",domProps:{innerHTML:o}}):e("span",{key:"0",class:"vxe-checkbox--label"},o)]))}),e("vxe-modal",{ref:"modal",props:{id:"VXE_EXPORT_MODAL",value:h.visible,title:Ct(f?"vxe.export.printTitle":"vxe.export.expTitle"),width:660,minWidth:500,minHeight:400,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:this.loading},on:{input(e){h.visible=e},show:this.showEvent},scopedSlots:{default:()=>{const l={$table:t,$grid:o,options:p,columns:x,params:p.params},n="empty"===p.mode;return e("div",{class:"vxe-table-export--panel"},[w?e("div",{class:"vxe-table-export--panel-top"},t.callSlot(w,l,e)):Et(this),e("div",{class:"vxe-table-export--panel-body"},E?t.callSlot(E,l,e):[e("table",{attrs:{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0}},[e("tbody",[[f?r():e("tr",[e("td",Ct("vxe.export.expName")),e("td",[e("vxe-input",{ref:"filename",props:{value:p.filename,type:"text",clearable:!0,placeholder:Ct("vxe.export.expNamePlaceholder")},on:{modelValue(e){p.filename=e}}})])]),f?r():e("tr",[e("td",Ct("vxe.export.expType")),e("td",[e("vxe-select",{props:{value:p.type,options:h.typeList},on:{modelValue(e){p.type=e}}})])]),f||c?e("tr",[e("td",Ct("vxe.export.expSheetName")),e("td",[e("vxe-input",{ref:"sheetname",props:{value:p.sheetName,type:"text",clearable:!0,placeholder:Ct("vxe.export.expSheetNamePlaceholder")},on:{modelValue(e){p.sheetName=e}}})])]):r(),e("tr",[e("td",Ct("vxe.export.expMode")),e("td",[e("vxe-select",{props:{value:p.mode,options:h.modeList},on:{modelValue(e){p.mode=e}}})])]),e("tr",[e("td",[Ct("vxe.export.expColumn")]),e("td",[e("div",{class:"vxe-table-export--panel-column"},[e("ul",{class:"vxe-table-export--panel-column-header"},[e("li",{class:["vxe-table-export--panel-column-option",{"is--checked":s,"is--indeterminate":a}],attrs:{title:Ct("vxe.table.allTitle")},on:{click:this.allColumnEvent}},[e("span",{class:["vxe-checkbox--icon",a?wt().TABLE_CHECKBOX_INDETERMINATE:s?wt().TABLE_CHECKBOX_CHECKED:wt().TABLE_CHECKBOX_UNCHECKED]}),e("span",{class:"vxe-checkbox--label"},Ct("vxe.export.expCurrentColumn"))])]),e("ul",{class:"vxe-table-export--panel-column-body"},R)])])]),e("tr",[e("td",Ct("vxe.export.expOpts")),e("td",T?[e("div",{class:"vxe-table-export--panel-option-row"},t.callSlot(T,l,e))]:[e("div",{class:"vxe-table-export--panel-option-row"},[e("vxe-checkbox",{props:{value:n||v,disabled:n,title:Ct("vxe.export.expHeaderTitle"),content:Ct("vxe.export.expOptHeader")},on:{input(e){p.isHeader=e}}}),e("vxe-checkbox",{props:{value:!!v&&p.isTitle,disabled:!v,title:Ct("vxe.export.expTitleTitle"),content:Ct("vxe.export.expOptTitle")},on:{input(e){p.isTitle=e}}}),e("vxe-checkbox",{props:{value:!!(v&&b&&d)&&p.isColgroup,disabled:!v||!b||!d,title:Ct("vxe.export.expColgroupTitle"),content:Ct("vxe.export.expOptColgroup")},on:{input(e){p.isColgroup=e}}})]),e("div",{class:"vxe-table-export--panel-option-row"},[e("vxe-checkbox",{props:{value:!n&&p.original,disabled:n,title:Ct("vxe.export.expOriginalTitle"),content:Ct("vxe.export.expOptOriginal")},on:{input(e){p.original=e}}}),e("vxe-checkbox",{props:{value:!!(m&&d&&i)&&p.isMerge,disabled:n||!m||!d||!i,title:Ct("vxe.export.expMergeTitle"),content:Ct("vxe.export.expOptMerge")},on:{input(e){p.isMerge=e}}}),f?r():e("vxe-checkbox",{props:{value:!!u&&p.useStyle,disabled:!u,title:Ct("vxe.export.expUseStyleTitle"),content:Ct("vxe.export.expOptUseStyle")},on:{input(e){p.useStyle=e}}}),e("vxe-checkbox",{props:{value:!!g&&p.isAllExpand,disabled:n||!g,title:Ct("vxe.export.expAllExpandTitle"),content:Ct("vxe.export.expOptAllExpand")},on:{input(e){p.isAllExpand=e}}})]),e("div",{class:"vxe-table-export--panel-option-row"},[e("vxe-checkbox",{props:{value:p.isFooter,disabled:!h.hasFooter,title:Ct("vxe.export.expFooterTitle"),content:Ct("vxe.export.expOptFooter")},on:{input(e){p.isFooter=e}}})])])])]])])]),O?e("div",{class:"vxe-table-export--panel-bottom"},t.callSlot(O,l,e)):Et(this)])},footer:()=>{const r={$table:t,$grid:o,options:p,columns:x,params:p.params};return e("div",{class:"vxe-table-export--panel-footer"},y?t.callSlot(y,r,e):[e("div",{class:"vxe-table-export--panel-btns"},[e("vxe-button",{props:{content:Ct("vxe.export.expCancel")},on:{click:this.cancelEvent}}),e("vxe-button",{ref:"confirmBtn",props:{status:"primary",content:Ct(f?"vxe.export.expPrint":"vxe.export.expConfirm")},on:{click:this.confirmEvent}})])])}}})},methods:{changeOption(e){const t=!e.checked;l.a.eachTree([e],e=>{e.checked=t,e.halfChecked=!1}),this.handleOptionCheck(e),this.checkStatus()},handleOptionCheck(e){const t=l.a.findTree(this.storeData.columns,t=>t===e);if(t&&t.parent){const{parent:e}=t;e.children&&e.children.length&&(e.checked=e.children.every(e=>e.checked),e.halfChecked=!e.checked&&e.children.some(e=>e.checked||e.halfChecked),this.handleOptionCheck(e))}},checkStatus(){const e=this.storeData.columns;this.isAll=e.every(e=>e.disabled||e.checked),this.isIndeterminate=!this.isAll&&e.some(e=>!e.disabled&&(e.checked||e.halfChecked))},allColumnEvent(){const e=!this.isAll;l.a.eachTree(this.storeData.columns,t=>{t.disabled||(t.checked=e,t.halfChecked=!1)}),this.isAll=e,this.checkStatus()},showEvent(){this.$nextTick(()=>{const{$refs:e}=this,t=e.filename||e.sheetname||e.confirmBtn;t&&t.focus()}),this.checkStatus()},getExportOption(){const{checkedAll:e,storeData:t,defaultOptions:o,supportMerge:r}=this,{hasMerge:n,columns:i}=t,s=l.a.searchTree(i,e=>e.checked,{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},o,{columns:s,isMerge:!!(n&&r&&e)&&o.isMerge})},cancelEvent(){this.storeData.visible=!1},confirmEvent(e){this.storeData.isPrint?this.printEvent(e):this.exportEvent(e)},printEvent(){const e=this.$parent;this.storeData.visible=!1,e.print(Object.assign({},e.printOpts,this.getExportOption()))},exportEvent(){const e=this.$xeTable,t=e.exportOpts;this.loading=!0,e.exportData(Object.assign({},t,this.getExportOption())).then(()=>{this.loading=!1,this.storeData.visible=!1}).catch(()=>{this.loading=!1})}}};const{getIcon:Tt}=a.b;var Rt={name:"VxeTableMenuPanel",props:{ctxMenuStore:Object,ctxMenuOpts:Object},mounted(){document.body.appendChild(this.$el)},beforeDestroy(){const{$el:e}=this;e.parentNode&&e.parentNode.removeChild(e)},render(e){const t=this.$parent,{_e:o,ctxMenuOpts:r,ctxMenuStore:l}=this;return e("div",{class:["vxe-table--context-menu-wrapper",r.className,{"is--visible":l.visible}],style:l.style},l.list.map((r,i)=>r.every(e=>!1===e.visible)?o():e("ul",{class:"vxe-context-menu--option-wrapper",key:i},r.map((r,s)=>{const a=r.children&&r.children.some(e=>!1!==e.visible),c=Object.assign({},r.prefixConfig),d=Object.assign({},r.suffixConfig),u=Object(n.d)(r.name);return!1===r.visible?null:e("li",{class:[r.className,{"link--disabled":r.disabled,"link--active":r===l.selected}],key:`${i}_${s}`},[e("a",{class:"vxe-context-menu--link",on:{click(e){t.ctxMenuLinkEvent(e,r)},mouseover(e){t.ctxMenuMouseoverEvent(e,r)},mouseout(e){t.ctxMenuMouseoutEvent(e,r)}}},[e("div",{class:["vxe-context-menu--link-prefix",c.className||""]},[e("i",{class:c.icon||r.prefixIcon}),c.content?e("span",{},""+c.content):o()]),e("span",{class:"vxe-context-menu--link-content",attrs:{title:u}},u),e("div",{class:["vxe-context-menu--link-suffix",d.className||""]},[e("i",{class:d.icon||r.suffixIcon||(a?Tt().TABLE_MENU_OPTIONS:"")}),d.content?e("span",""+d.content):o()])]),a?e("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":r===l.selected&&l.showChild}]},r.children.map((a,c)=>{const d=Object.assign({},a.prefixConfig),u=Object.assign({},a.suffixConfig),p=Object(n.d)(a.name);return!1===a.visible?null:e("li",{class:[a.className,{"link--disabled":a.disabled,"link--active":a===l.selectChild}],key:`${i}_${s}_${c}`},[e("a",{class:"vxe-context-menu--link",on:{click(e){t.ctxMenuLinkEvent(e,a)},mouseover(e){t.ctxMenuMouseoverEvent(e,r,a)},mouseout(e){t.ctxMenuMouseoutEvent(e,r)}}},[e("div",{class:["vxe-context-menu--link-prefix",d.className||""]},[e("i",{class:d.icon||a.prefixIcon}),d.content?e("span",""+d.content):o()]),e("span",{class:"vxe-context-menu--link-content",attrs:{title:p}},p),e("div",{class:["vxe-context-menu--link-suffix",u.className||""]},[e("i",{class:u.icon}),u.content?e("span",""+u.content):o()])])])})):null])}))))}};const{renderer:St}=a.b;var jt={methods:{_openFilter(e){const t=Object(s.t)(this,e);if(t&&t.filters){const{elemStore:e}=this,{fixed:o}=t;return this.scrollToColumn(t).then(()=>{const r=e[(o||"main")+"-header-wrapper"]||e["main-header-wrapper"];if(r){const e=r.querySelector(`.vxe-header--column.${t.id} .vxe-cell--filter`);Object(i.s)(e,"click")}})}return this.$nextTick()},_setFilter(e,t,o){const r=this,l=Object(s.t)(this,e);return l&&l.filters&&(l.filters=Object(s.A)(t||[]),o)?r.handleColumnConfirmFilter(l,new Event("click")):r.$nextTick()},checkFilterOptions(){const{filterStore:e}=this;e.isAllSelected=e.options.every(e=>e._checked),e.isIndeterminate=!e.isAllSelected&&e.options.some(e=>e._checked)},triggerFilterEvent(e,t,o){const r=this,l=r,a=r,{filterStore:c}=this;if(c.column===t&&c.visible)c.visible=!1;else{const{initStore:c,filterStore:d}=l,{elemStore:u}=a;if(d.column===t&&d.visible)d.visible=!1;else{const l=r.$refs.refElem,{scrollTop:p,scrollLeft:h,visibleHeight:g,visibleWidth:m}=Object(i.c)(),f=r.computeFilterOpts,{transfer:b}=f,x=l.getBoundingClientRect(),v=e.currentTarget,{filters:C,filterMultiple:w,filterRender:O}=t,E=Object(n.h)(O)?St.get(O.name):null,y=t.filterRecoverMethod||(E?E.tableFilterRecoverMethod||E.filterRecoverMethod:null);a._currFilterParams=o,Object.assign(d,{multiple:w,options:C,column:t,style:null}),d.options.forEach(e=>{const{_checked:o,checked:l}=e;e._checked=l,l||o===l||y&&y({option:e,column:t,$table:r})}),this.checkFilterOptions(),d.visible=!0,c.filter=!0,r.$nextTick(()=>{if(!Object(s.o)(u["main-header-scroll"]))return;const e=r.$refs.refTableFilter,t=e?e.$el:null;if(!t)return;const o=v.getBoundingClientRect(),n=t.querySelector(".vxe-table--filter-header"),a=t.querySelector(".vxe-table--filter-footer"),c=t.offsetWidth,f=c/2;let C=0,w=0,O=0;b?(C=o.left-f+h,w=o.top+v.clientHeight+p,O=Math.min(Math.max(x.height,Math.floor(g/2)),Math.max(80,g-w-(n?n.clientHeight:0)-(a?a.clientHeight:0)-28)),C<16?C=16:C>m-c-16&&(C=m-c-16)):(C=o.left-x.left-f,w=o.top-x.top+v.clientHeight,O=Math.max(40,l.clientHeight-w-(n?n.clientHeight:0)-(a?a.clientHeight:0)-14),C<1?C=1:C>l.clientWidth-c-1&&(C=l.clientWidth-c-1)),d.style={top:Object(i.r)(w),left:Object(i.r)(C)},d.maxHeight=O})}r.dispatchEvent("filter-visible",{column:t,field:t.field,property:t.field,filterList:r.getCheckedFilters(),visible:d.visible},e)}},handleFilterConfirmFilter(e){const{filterStore:t}=this;t.options.forEach(e=>{e.checked=e._checked}),this.confirmFilterEvent(e)},_saveFilterPanel(){return this.handleFilterConfirmFilter(null),this.$nextTick()},_saveFilterPanelByEvent(e){return this.handleFilterConfirmFilter(e),this.$nextTick()},_resetFilterPanel(){return this.handleFilterResetFilter(null),this.$nextTick()},_resetFilterPanelByEvent(e){return this.handleFilterResetFilter(e),this.$nextTick()},_getCheckedFilters(){const{tableFullColumn:e}=this,t=[];return e.forEach(e=>{const{field:o,filters:r}=e,l=[],n=[];r&&r.length&&(r.forEach(e=>{e.checked&&(l.push(e.value),n.push(e.data))}),l.length&&t.push({column:e,field:o,property:o,values:l,datas:n}))}),t},handleColumnConfirmFilter(e,t){const o=this,r=o,l=o,{mouseConfig:n}=r,{scrollXLoad:i,scrollYLoad:s}=l,a=o.computeFilterOpts,c=o.computeMouseOpts,{field:d}=e,u=[],p=[];e.filters.forEach(e=>{e.checked&&(u.push(e.value),p.push(e.data))});const h=this.getCheckedFilters(),g={$table:this,$event:t,column:e,field:d,property:d,values:u,datas:p,filters:h,filterList:h};return a.remote||(this.handleTableData(!0),this.checkSelectionStatus()),n&&c.area&&this.handleFilterEvent&&o.handleFilterEvent(t,g),t&&o.emitEvent("filter-change",g,t),o.closeFilter(),o.updateFooter().then(()=>{const{scrollXLoad:e,scrollYLoad:t}=this;if(i||e||s||t)return(i||e)&&o.updateScrollXSpace(),(s||t)&&o.updateScrollYSpace(),o.refreshScroll()}).then(()=>(o.updateCellAreas(),o.recalculate(!0))).then(()=>{setTimeout(()=>o.recalculate(),50)})},confirmFilterEvent(e){const{filterStore:t}=this,{column:o}=t;this.handleColumnConfirmFilter(o,e)},handleClearFilter(e){if(e){const{filters:t,filterRender:o}=e;if(t){const r=Object(n.h)(o)?St.get(o.name):null,i=e.filterResetMethod||(r?r.tableFilterResetMethod||r.filterResetMethod:null);t.forEach(e=>{e._checked=!1,e.checked=!1,i||(e.data=l.a.clone(e.resetValue,!0))}),i&&i({options:t,column:e,$table:this})}}},handleFilterResetFilter(e){const t=this,o=t,{filterStore:r}=o;t.handleClearFilter(r.column),t.confirmFilterEvent(e),e&&t.dispatchEvent("clear-filter",{filterList:[]},e)},_clearFilter(e){const t=this,o=t,r=t,{filterStore:l}=o,{tableFullColumn:n}=r;let i;return e?(i=Object(s.t)(t,e),i&&t.handleClearFilter(i)):n.forEach(t.handleClearFilter),e&&i===l.column||Object.assign(l,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),t.updateData()},_updateFilterOptionStatus(e,t){return e._checked=t,e.checked=t,this.$nextTick()}}};const{menus:Dt,globalEvents:Ft,GLOBAL_EVENT_KEYS:$t}=a.b;var kt={methods:{_closeMenu(){return Object.assign(this.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),this.$nextTick()},moveCtxMenu(e,t,o,r,i,s){const a=this;let c;const d=l.a.findIndexOf(s,e=>t[o]===e);if(r)i&&Object(n.f)(t.selected)?t.showChild=!0:(t.showChild=!1,t.selectChild=null);else if(Ft.hasKey(e,$t.ARROW_UP)){for(let e=d-1;e>=0;e--)if(!1!==s[e].visible){c=s[e];break}t[o]=c||s[s.length-1]}else if(Ft.hasKey(e,$t.ARROW_DOWN)){for(let e=d+1;e<s.length;e++)if(!1!==s[e].visible){c=s[e];break}t[o]=c||s[0]}else t[o]&&(Ft.hasKey(e,$t.ENTER)||Ft.hasKey(e,$t.SPACEBAR))&&a.ctxMenuLinkEvent(e,t[o])},handleGlobalContextmenuEvent(e){const t=this.$xeGrid,o=this,{$refs:r,tId:l,editStore:s,menuConfig:a,contextMenu:c,ctxMenuStore:d,ctxMenuOpts:u,mouseConfig:p,mouseOpts:g}=this,{selected:m}=s,f=this.$refs.refTableFilter,b=["header","body","footer"];if(Object(n.h)(a)||c){if(d.visible&&r.refTableMenu&&Object(i.d)(e,r.refTableMenu.$el).flag)return void e.preventDefault();if(o._keyCtx){const o="body",r={type:o,$grid:t,$table:this,keyboard:!0,columns:this.visibleColumn.slice(0),$event:e};if(p&&g.area){const t=this.getActiveCellArea();if(t&&t.row&&t.column)return r.row=t.row,r.column=t.column,void this.handleOpenMenuEvent(e,o,r)}else if(p&&g.selected&&m.row&&m.column)return r.row=m.row,r.column=m.column,void this.handleOpenMenuEvent(e,o,r)}for(let o=0;o<b.length;o++){const r=b[o],n=Object(i.d)(e,this.$el,`vxe-${r}--column`,e=>e.parentNode.parentNode.parentNode.getAttribute("xid")===l),s={type:r,$grid:t,$table:this,columns:this.visibleColumn.slice(0),$event:e};if(n.flag){const t=n.targetElem,o=this.getColumnNode(t).item;let l=r+"-";if(Object.assign(s,{column:o,columnIndex:this.getColumnIndex(o),cell:t}),"body"===r){const e=this.getRowNode(t.parentNode).item;l="",s.row=e,s.rowIndex=this.getRowIndex(e)}return this.handleOpenMenuEvent(e,r,s),void(this.$listeners[l+"cell-context-menu"]?(Object(h.b)("vxe.error.delEvent",[l+"cell-context-menu",l+"cell-menu"]),this.emitEvent(l+"cell-context-menu",s,e)):this.emitEvent(l+"cell-menu",s,e))}if(Object(i.d)(e,this.$el,`vxe-table--${r}-wrapper`,e=>e.getAttribute("xid")===l).flag)return void("cell"===u.trigger?e.preventDefault():this.handleOpenMenuEvent(e,r,s))}}f&&!Object(i.d)(e,f.$el).flag&&this.closeFilter(),this.closeMenu()},handleOpenMenuEvent(e,t,o){const{isCtxMenu:r,ctxMenuStore:l,ctxMenuOpts:n}=this,s=n[t],a=n.visibleMethod;if(s){const{options:t,disabled:n}=s;n?e.preventDefault():r&&t&&t.length&&(o.options=t,this.preventEvent(e,"event.showMenu",o,()=>{if(!a||a(o)){e.preventDefault(),this.updateZindex();const{scrollTop:r,scrollLeft:n,visibleHeight:s,visibleWidth:a}=Object(i.c)();let c=e.clientY+r,d=e.clientX+n;const u=()=>{Object.assign(l,{args:o,visible:!0,list:t,selected:null,selectChild:null,showChild:!1,style:{zIndex:this.tZindex,top:c+"px",left:d+"px"}}),this.$nextTick(()=>{const e=this.$refs.refTableMenu.$el,t=e.clientHeight,o=e.clientWidth,{boundingTop:u,boundingLeft:p}=Object(i.b)(e),h=p+o-a;u+t-s>-10&&(l.style.top=Math.max(r+2,c-t-2)+"px"),h>-10&&(l.style.left=Math.max(n+2,d-o-2)+"px")})},{keyboard:p,row:h,column:g}=o;p&&h&&g?this.scrollToRow(h,g).then(()=>{const e=this.getCellElement(h,g),{boundingTop:t,boundingLeft:o}=Object(i.b)(e);c=t+r+Math.floor(e.offsetHeight/2),d=o+n+Math.floor(e.offsetWidth/2),u()}):u()}else this.closeMenu()}))}this.closeFilter()},ctxMenuMouseoverEvent(e,t,o){const r=e.currentTarget,l=this.ctxMenuStore;e.preventDefault(),e.stopPropagation(),l.selected=t,l.selectChild=o,o||(l.showChild=Object(n.f)(t),l.showChild&&this.$nextTick(()=>{const e=r.nextElementSibling;if(e){const{boundingTop:t,boundingLeft:o,visibleHeight:l,visibleWidth:n}=Object(i.b)(r),s=t+r.offsetHeight;let a="",c="";o+r.offsetWidth+e.offsetWidth>n-10&&(a="auto",c=r.offsetWidth+"px");let d="",u="";s+e.offsetHeight>l-10&&(d="auto",u="0"),e.style.left=a,e.style.right=c,e.style.top=d,e.style.bottom=u}}))},ctxMenuMouseoutEvent(e,t){const o=this.ctxMenuStore;t.children||(o.selected=null),o.selectChild=null},ctxMenuLinkEvent(e,t){const o=this.$xeGrid;if(!t.disabled&&(t.code||!t.children||!t.children.length)){const r=Dt.get(t.code),l=Object.assign({menu:t,$grid:o,$table:this,$event:e},this.ctxMenuStore.args);r&&r.menuMethod&&r.menuMethod(l,e),this.$listeners["context-menu-click"]?(Object(h.b)("vxe.error.delEvent",["context-menu-click","menu-click"]),this.emitEvent("context-menu-click",l,e)):this.emitEvent("menu-click",l,e),this.closeMenu()}}}};const{getConfig:Mt,renderer:At,getI18n:It}=a.b,Lt=l.a.browse();function _t(e,t){const{model:o,editRender:r}=t;r&&(o.value=Object(s.l)(e,t),o.update=!1)}function Bt(e,t){const{model:o,editRender:r}=t;r&&o.update&&(Object(s.z)(e,t,o.value),o.update=!1,o.value=null)}function Ht(e){const t=e.$refs.refElem;if(t){const e=t.querySelector(".col--selected");e&&Object(i.n)(e,"col--selected")}}function Pt(e){const t=e,{editStore:o,tableColumn:r}=t,l=e.computeEditOpts,{actived:n}=o,{row:i,column:s}=n;(i||s)&&("row"===l.mode?r.forEach(e=>Bt(i,e)):Bt(i,s))}function zt(e,t,o){const r=e,{tableFullTreeData:n,afterFullData:i,fullDataRowIdData:a,fullAllDataRowIdData:c}=r,d=e.computeTreeOpts,{rowField:u,parentField:p,mapChildrenField:g}=d,m=d.children||d.childrenField,f=o?"push":"unshift";t.forEach(t=>{const o=t[p],r=Object(s.r)(e,t),d=o?l.a.findTree(n,e=>o===e[u],{children:g}):null;if(d){const{item:o}=d,n=c[Object(s.r)(e,o)],i=n?n.level:0;let u=o[m],p=o[g];l.a.isArray(u)||(u=o[m]=[]),l.a.isArray(p)||(p=o[m]=[]),u[f](t),p[f](t);const h={row:t,rowid:r,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:u,parent:o,level:i+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};a[r]=h,c[r]=h}else{o&&Object(h.b)("vxe.error.unableInsert"),i[f](t),n[f](t);const e={row:t,rowid:r,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:n,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};a[r]=e,c[r]=e}})}function Nt(e,t,o,r){const n=e,i=e,a=e,{treeConfig:c}=n,{isRowGroupStatus:d}=i,{tableFullTreeData:u,afterFullData:p,mergeBodyList:g,tableFullData:m,fullDataRowIdData:f,fullAllDataRowIdData:b,insertRowMaps:x}=a,v=e.computeTreeOpts,{transform:C,rowField:w,mapChildrenField:O}=v,E=v.children||v.childrenField;l.a.isArray(t)||(t=[t]);const y=e.defineField(t.map(e=>Object.assign(c&&C?{[O]:[],[E]:[]}:{},e)));if(l.a.eqNull(o))if(c&&C)zt(e,y,!1);else if(d){if(c)throw new Error(It("vxe.error.noTree",["insert"]));Object(h.b)(It("vxe.error.noGroup",["remove"]))}else y.forEach(t=>{const o=Object(s.r)(e,t),r={row:t,rowid:o,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:p,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};f[o]=r,b[o]=r,p.unshift(t),m.unshift(t)}),g.forEach(e=>{const{row:t}=e;t>=0&&(e.row=t+y.length)});else if(-1===o)if(c&&C)zt(e,y,!0);else if(d){if(c)throw new Error(It("vxe.error.noTree",["insert"]));Object(h.b)(It("vxe.error.noGroup",["remove"]))}else y.forEach(t=>{const o=Object(s.r)(e,t),r={row:t,rowid:o,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:p,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};f[o]=r,b[o]=r,p.push(t),m.push(t)});else if(c&&C){const t=l.a.findTree(u,e=>o[w]===e[w],{children:O});if(t){const{parent:n}=t,i=n?n[O]:u,a=b[Object(s.r)(e,n)],c=a?a.level:0;if(y.forEach((o,l)=>{const a=Object(s.r)(e,o);o[v.parentField]&&n&&o[v.parentField]!==n[w]&&Object(h.a)("vxe.error.errProp",[`${v.parentField}=${o[v.parentField]}`,`${v.parentField}=${n[w]}`]),n&&(o[v.parentField]=n[w]);let d=t.index+l;r&&(d+=1),i.splice(d,0,o);const u={row:o,rowid:a,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:i,parent:n,level:c+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};f[a]=u,b[a]=u}),n){const e=l.a.findTree(u,e=>o[w]===e[w],{children:E});if(e){const t=e.items;let o=e.index;r&&(o+=1),t.splice(o,0,...y)}}}else Object(h.b)("vxe.error.unableInsert"),zt(e,y,!0)}else if(d){if(c)throw new Error(It("vxe.error.noTree",["insert"]));Object(h.b)(It("vxe.error.noGroup",["remove"]))}else{if(c)throw new Error(It("vxe.error.noTree",["insert"]));let t=-1;if(l.a.isNumber(o)?o<p.length&&(t=o):t=e.findRowIndexOf(p,o),r&&(t=Math.min(p.length,t+1)),-1===t)throw new Error(Object(h.a)("vxe.error.unableInsert"));p.splice(t,0,...y);const n=e.findRowIndexOf(m,o);n>-1?m.splice(n+(r?1:0),0,...y):m.push(...y),g.forEach(e=>{const{row:o,rowspan:l}=e;o>=t?e.row=o+y.length:(r?o+l>=t:o+l>t)&&(e.rowspan=l+y.length)})}return y.forEach(t=>{const o=Object(s.r)(e,t);x[o]=t}),i.insertRowFlag++,e.cacheRowMap(!1),e.updateScrollYStatus(),e.handleTableData(c&&C),c&&C||e.updateAfterDataIndex(),e.updateFooter(),e.handleUpdateBodyMerge(),e.checkSelectionStatus(),i.scrollYLoad&&e.updateScrollYSpace(),e.$nextTick().then(()=>(e.updateCellAreas(),e.recalculate(!0))).then(()=>({row:y.length?y[y.length-1]:null,rows:y}))}function Vt(e,t,o,r,n){const i=e,{treeConfig:s}=i,a=e.computeTreeOpts,{transform:c,rowField:d,parentField:u}=a;return s&&c?(l.a.isArray(t)||(t=[t]),Nt(e,t.map(e=>Object.assign({},e,{[u]:o[d]})),r,n)):(Object(h.a)("vxe.error.errProp",["tree-config.transform=false","tree-config.transform=true"]),Promise.resolve({row:null,rows:[]}))}function Wt(e,t,o){const r=e,{editStore:l}=r,{actived:n,focused:i}=l,{row:a,column:c}=n,d=e.computeValidOpts;if(a||c){if(o&&Object(s.r)(e,o)!==Object(s.r)(e,a))return e.$nextTick();Pt(e),n.args=null,n.row=null,n.column=null,e.updateFooter(),e.dispatchEvent("edit-closed",{row:a,rowIndex:e.getRowIndex(a),$rowIndex:e.getVMRowIndex(a),column:c,columnIndex:e.getColumnIndex(c),$columnIndex:e.getVMColumnIndex(c)},t||null)}return i.row=null,i.column=null,d.autoClear&&("full"!==d.msgMode||"obsolete"===Mt().cellVaildMode)&&e.clearValidate?e.clearValidate():e.$nextTick().then(()=>e.updateCellAreas())}function Gt(e,t,o,r,l){const i=e,a=e,c=e.$xeGrid,{editConfig:d,mouseConfig:u}=i,{editStore:p,tableColumn:h}=a,g=e.computeEditOpts,{mode:m}=g,{actived:f,focused:b}=p,{row:x,column:v}=t,{editRender:C}=v,w=t.cell||e.getCellElement(x,v),O=g.beforeEditMethod||g.activeMethod;if(t.cell=w,w&&Object(n.h)(d)&&Object(n.h)(C)&&!e.isPendingByRow(x)&&!e.isAggregateRecord(x)){if(f.row!==x||"cell"===m&&f.column!==v){let l="edit-disabled";if(!O||O(Object.assign(Object.assign({},t),{$table:e,$grid:c}))){u&&(e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.closeTooltip(),f.column&&Wt(e,o),l="edit-activated",v.renderHeight=w.offsetHeight,f.args=t,f.row=x,f.column=v,"row"===m?h.forEach(e=>_t(x,e)):_t(x,v);const n=g.afterEditMethod;e.$nextTick(()=>{r&&e.handleFocus(t,o),n&&n(Object.assign(Object.assign({},t),{$table:e,$grid:c}))})}e.dispatchEvent(l,{row:x,rowIndex:e.getRowIndex(x),$rowIndex:e.getVMRowIndex(x),column:v,columnIndex:e.getColumnIndex(v),$columnIndex:e.getVMColumnIndex(v)},o),"edit-activated"===l&&e.dispatchEvent("edit-actived",{row:x,rowIndex:e.getRowIndex(x),$rowIndex:e.getVMRowIndex(x),column:v,columnIndex:e.getColumnIndex(v),$columnIndex:e.getVMColumnIndex(v)},o)}else{const{column:r}=f;if(u&&(e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),r!==v){const{model:t}=r;t.update&&Object(s.z)(x,r,t.value),e.clearValidate&&e.clearValidate(x,v)}v.renderHeight=w.offsetHeight,f.args=t,f.column=v,l&&setTimeout(()=>{e.handleFocus(t,o)})}b.column=null,b.row=null,e.focus()}return e.$nextTick()}function qt(e,t,o,r){const i=e,s=e,{editConfig:a}=i,c=l.a.isString(o)?e.getColumnByField(o):o;return t&&c&&Object(n.h)(a)&&Object(n.h)(c.editRender)&&!e.isAggregateRecord(t)?Promise.resolve(r?e.scrollToRow(t,c):null).then(()=>{const o=e.getCellElement(t,c);return o&&(Gt(e,{row:t,rowIndex:e.getRowIndex(t),column:c,columnIndex:e.getColumnIndex(c),cell:o,$table:e},null,r,r),s._lastCallTime=Date.now()),e.$nextTick()}):e.$nextTick()}var Xt={methods:{_insert(e){return Nt(this,e,null)},_insertAt(e,t){return Nt(this,e,t)},_insertNextAt(e,t){return Nt(this,e,t,!0)},_insertChild(e,t){return Vt(this,e,t,null)},_insertChildAt(e,t,o){return Vt(this,e,t,o)},_insertChildNextAt(e,t,o){return Vt(this,e,t,o,!0)},_remove(e){const t=this,o=t,r=t,n=t,{treeConfig:i}=o,{editStore:a,isRowGroupStatus:c}=r,{tableFullTreeData:d,selectCheckboxMaps:u,afterFullData:p,mergeBodyList:g,tableFullData:m,pendingRowMaps:f,insertRowMaps:b,removeRowMaps:x}=n,v=t.computeCheckboxOpts,C=t.computeTreeOpts,{transform:w,mapChildrenField:O}=C,E=C.children||C.childrenField,{actived:y}=a,{checkField:T}=v;let R=[];return e?l.a.isArray(e)||(e=[e]):e=m,e.forEach(e=>{if(!t.isInsertByRow(e)){const o=Object(s.r)(t,e);x[o]=e}}),T||(e.forEach(e=>{const t=Object(s.r)(this,e);u[t]&&delete u[t]}),r.updateCheckboxFlag++),m===e?(e=R=m.slice(0),this.tableFullData=[],this.afterFullData=[],this.clearMergeCells()):i&&w?e.forEach(e=>{const t=Object(s.r)(this,e),o=l.a.findTree(d,e=>t===Object(s.r)(this,e),{children:O});if(o){const e=o.items.splice(o.index,1);R.push(e[0])}const r=l.a.findTree(d,e=>t===Object(s.r)(this,e),{children:E});r&&r.items.splice(r.index,1);const n=this.findRowIndexOf(p,e);n>-1&&p.splice(n,1)}):c?Object(h.b)(It("vxe.error.noGroup",["remove"])):e.forEach(e=>{const t=this.findRowIndexOf(m,e);if(t>-1){const e=m.splice(t,1);R.push(e[0])}const o=this.findRowIndexOf(p,e);o>-1&&(g.forEach(e=>{const{row:t,rowspan:r}=e;t>o?e.row=t-1:t+r>o&&(e.rowspan=r-1)}),p.splice(o,1))}),y.row&&t.findRowIndexOf(e,y.row)>-1&&t.clearEdit(),e.forEach(e=>{const o=Object(s.r)(t,e);b[o]&&delete b[o],f[o]&&delete f[o]}),r.removeRowFlag++,r.insertRowFlag++,r.pendingRowFlag++,t.cacheRowMap(!1),t.handleTableData(i&&w),t.updateFooter(),t.handleUpdateBodyMerge(),i&&w||t.updateAfterDataIndex(),t.checkSelectionStatus(),r.scrollYLoad&&t.updateScrollYSpace(),this.$nextTick().then(()=>(this.updateCellAreas(),this.recalculate(!0))).then(()=>({row:R.length?R[R.length-1]:null,rows:R}))},_removeCheckboxRow(){return this.remove(this.getCheckboxRecords()).then(e=>(this.clearCheckboxRow(),e))},_removeRadioRow(){const e=this.getRadioRecord();return this.remove(e||[]).then(e=>(this.clearRadioRow(),e))},_removeCurrentRow(){const e=this.getCurrentRecord();return this.remove(e||[]).then(e=>(this.clearCurrentRow(),e))},_getRecordset(){const e=this.getRemoveRecords(),t=this.getPendingRecords(),o=e.concat(t),r=this.getUpdateRecords().filter(e=>!o.some(t=>this.eqRow(t,e)));return{insertRecords:this.getInsertRecords(),removeRecords:e,updateRecords:r,pendingRecords:t}},_getInsertRecords(){const{fullAllDataRowIdData:e,insertRowMaps:t}=this,o=[];return l.a.each(t,(t,r)=>{e[r]&&o.push(t)}),o},_getRemoveRecords(){const{removeRowMaps:e}=this,t=[];return l.a.each(e,e=>{t.push(e)}),t},_getUpdateRecords(){const e=this,t=e,o=e,{keepSource:r,treeConfig:n}=t,{tableFullData:i}=o,s=e.computeTreeOpts;return r?(Pt(e),n?l.a.filterTree(i,t=>e.isUpdateByRow(t),s):i.filter(t=>e.isUpdateByRow(t))):[]},handleEdit(e,t){return Gt(this,e,t,!0,!0)},handleActived(e,t){return this.handleEdit(e,t)},_getColumnModel(e,t){_t(e,t)},_setColumnModel(e,t){Bt(e,t)},_syncActivedCell(){Pt(this)},_clearActived(e){return Object(h.b)("vxe.error.delFunc",["clearActived","clearEdit"]),this.clearEdit(e)},_clearEdit(e){return Wt(this,null,e)},handleClearEdit(e,t){return Wt(this,e,t)},_getActiveRecord(){Object(h.b)("vxe.error.delFunc",["getActiveRecord","getEditCell"]);const{editStore:e}=this,{fullAllDataRowIdData:t}=this,{args:o,row:r}=e.actived;return o&&r&&t[Object(s.r)(this,r)]?Object.assign({},o,{row:r}):null},_getEditRecord(){Object(h.b)("vxe.error.delFunc",["getEditRecord","getEditCell"]);const{editStore:e}=this,{fullAllDataRowIdData:t}=this,{args:o,row:r}=e.actived;return o&&r&&t[Object(s.r)(this,r)]?Object.assign({},o,{row:r}):null},_getEditCell(){const{editStore:e}=this,{row:t,column:o}=e.actived;return o&&t?{row:t,column:o}:null},_isActiveByRow(e){return Object(h.b)("vxe.error.delFunc",["isActiveByRow","isEditByRow"]),this.isEditByRow(e)},_isEditByRow(e){const{editStore:t}=this;return t.actived.row===e},handleFocus(e){const t=this,{row:o,column:r,cell:i}=e,{editRender:s}=r,a=t.computeEditOpts;if(Object(n.h)(s)){const n=At.get(s.name);let c,d=s.autofocus||s.autoFocus,u=s.autoSelect||s.autoselect;if(a.autoFocus&&(!d&&n&&(d=n.tableAutoFocus||n.tableAutofocus||n.autoFocus||n.autofocus),!u&&n&&(u=n.tableAutoSelect||n.autoSelect||n.autoselect),l.a.isFunction(d)?c=d.call(t,e):d&&(c=!0===d?i.querySelector("input,textarea"):i.querySelector(d),c&&c.focus())),c){if(u)c.select();else if(Lt.msie){const e=c.createTextRange();e.collapse(!1),e.select()}}else a.autoPos&&(r.fixed||t.scrollToRow(o,r))}},_setActiveRow(e){return Object(h.b)("vxe.error.delFunc",["setActiveRow","setEditRow"]),this.setEditRow(e)},_setEditRow(e,t){const o=this;let r=l.a.find(this.visibleColumn,e=>Object(n.h)(e.editRender)),i=!1;return t&&(i=!0,!0!==t&&(r=l.a.isString(t)?o.getColumnByField(t):t)),qt(o,e,r,i)},_setActiveCell(e,t){return Object(h.b)("vxe.error.delFunc",["setActiveCell","setEditCell"]),this.setEditCell(e,t)},_setEditCell(e,t){return qt(this,e,t,!0)},_setSelectCell(e,t){const o=this,r=o,{tableData:n}=r,i=o.computeEditOpts,s=l.a.isString(t)?o.getColumnByField(t):t;if(e&&s&&"manual"!==i.trigger){const t=o.findRowIndexOf(n,e);if(t>-1){const r=o.getCellElement(e,s),l={row:e,rowIndex:t,column:s,columnIndex:o.getColumnIndex(s),cell:r};o.handleSelected(l,{})}}return o.$nextTick()},handleSelected(e,t){const o=this,r=o,l=o,{mouseConfig:n}=r,{editStore:i}=l,s=o.computeMouseOpts,a=o.computeEditOpts,{actived:c,selected:d}=i,{row:u,column:p}=e,h=n&&s.selected;return(()=>(!h||d.row===u&&d.column===p||(c.row!==u||"cell"===a.mode&&c.column!==p)&&(Wt(o,t),o.clearSelected(),o.clearCellAreas&&(o.clearCellAreas(),o.clearCopyCellArea()),d.args=e,d.row=u,d.column=p,h&&this.addCellSelectedClass(),o.focus(),t&&o.dispatchEvent("cell-selected",e,t)),o.$nextTick()))()},_getSelectedCell(){const{editStore:e}=this,{row:t,column:o}=e.selected;return t&&o?{row:t,column:o}:null},_clearSelected(){const{editStore:e}=this,{selected:t}=e;return t.row=null,t.column=null,Ht(this),this.$nextTick()},reColTitleSdCls(){const e=this.elemStore["main-header-list"];e&&l.a.arrayEach(e.querySelectorAll(".col--title-selected"),e=>Object(i.n)(e,"col--title-selected"))},addCellSelectedClass(){const e=this,t=e,{editStore:o}=t,{selected:r}=o,{row:l,column:n}=r;if(Ht(e),l&&n){const t=e.getCellElement(l,n);t&&Object(i.a)(t,"col--selected")}}}};const{getI18n:Yt,renderer:Kt}=a.b;let Ut;function Zt(e,t,o,r,l,n){const i=e.computeSeqOpts.seqMethod||l.seqMethod;return i?i({$table:e,row:o,rowIndex:e.getRowIndex(o),$rowIndex:r,column:l,columnIndex:e.getColumnIndex(l),$columnIndex:n}):t}function Qt(e){return!!e.field||-1===["seq","checkbox","radio"].indexOf(e.type||"")}function Jt(e){return!0===e?"full":e||"default"}function eo(e){return l.a.isBoolean(e)?e?"TRUE":"FALSE":e}const to=e=>Object(n.a)(e)?"":""+e;function oo(e,t){const{columns:o,dataFilterMethod:r}=t;let n=t.data;return r&&(n=n.filter((t,o)=>r({$table:e,row:t,$rowIndex:o}))),function(e,t,o,r){const n=e,{isAllExpand:a,mode:c}=t,{treeConfig:d}=n,u=e.computeRadioOpts,p=e.computeCheckboxOpts,h=e.computeTreeOpts,g=e.computeColumnOpts;if(Ut||(Ut=document.createElement("div")),d){const n=h.children||h.childrenField,d=[],m={},f={},{handleGetRowId:b}=Object(s.g)(e);return l.a.eachTree(r,(r,n,h,x,v,C)=>{const w=r._row||r,O=b(w);if(f[O])return;const E=v&&v._row?v._row:v,y=E?b(E):"";if(a||!E||m[y]&&e.isTreeExpandByRow(E)){const r=function(e,t){const o=e.computeTreeOpts,r=o.children||o.childrenField;return t[r]&&t[r].length}(e,w),a={_row:w,_level:C.length-1,_hasChild:r,_expand:r&&e.isTreeExpandByRow(w)};o.forEach((o,r)=>{let d="";const h=o.editRender||o.cellRender;let m=o.exportMethod||g.exportMethod;if(!m&&h&&h.name){const e=Kt.get(h.name);e&&(m=e.tableExportMethod||e.exportMethod)}if(m||(m=g.exportMethod),m)d=m({$table:e,row:w,column:o,options:t});else switch(o.type){case"seq":{const t=x.map((e,t)=>t%2==0?Number(e)+1:".").join("");d="all"===c?t:Zt(e,t,w,n,o,r);break}case"checkbox":d=eo(e.isCheckedByCheckboxRow(w)),a._checkboxLabel=p.labelField?l.a.get(w,p.labelField):"",a._checkboxDisabled=p.checkMethod&&!p.checkMethod({$table:e,row:w});break;case"radio":d=eo(e.isCheckedByRadioRow(w)),a._radioLabel=u.labelField?l.a.get(w,u.labelField):"",a._radioDisabled=u.checkMethod&&!u.checkMethod({$table:e,row:w});break;default:if(t.original)d=Object(s.l)(w,o);else if(d=e.getCellLabel(w,o),"html"===o.type)Ut.innerHTML=d,d=Ut.innerText.trim();else{const t=e.getCellElement(w,o);t&&!Object(i.h)(t,"is--progress")&&(d=t.innerText.trim())}}a[o.id]=to(d)}),f[O]=!0,y&&(m[y]=!0),d.push(Object.assign(a,w))}},{children:n}),d}return r.map((r,n)=>{const a={_row:r};return o.forEach((o,d)=>{let h="";const m=o.editRender||o.cellRender;let f=o.exportMethod||g.exportMethod;if(!f&&m&&m.name){const e=Kt.get(m.name);e&&(f=e.tableExportMethod||e.exportMethod)}if(f)h=f({$table:e,row:r,column:o,options:t});else switch(o.type){case"seq":{const t=n+1;h="all"===c?t:Zt(e,t,r,n,o,d);break}case"checkbox":h=eo(e.isCheckedByCheckboxRow(r)),a._checkboxLabel=p.labelField?l.a.get(r,p.labelField):"",a._checkboxDisabled=p.checkMethod&&!p.checkMethod({$table:e,row:r});break;case"radio":h=eo(e.isCheckedByRadioRow(r)),a._radioLabel=u.labelField?l.a.get(r,u.labelField):"",a._radioDisabled=u.checkMethod&&!u.checkMethod({$table:e,row:r});break;default:if(t.original)h=Object(s.l)(r,o);else if(h=e.getCellLabel(r,o),"html"===o.type)Ut.innerHTML=h,h=Ut.innerText.trim();else{const t=e.getCellElement(r,o);t&&!Object(i.h)(t,"is--progress")&&(h=t.innerText.trim())}}a[o.id]=to(h)}),a})}(e,t,o,n)}function ro(e){return"TRUE"===e||"true"===e||!0===e}function lo(e,t,o){const r=e.computeColumnOpts,l=o.headerExportMethod||r.headerExportMethod;return l?l({column:o,options:t,$table:e}):(t.isTitle?o.getTitle():o.field)||""}function no(e,t,o,r){const n=e.computeColumnOpts,i=r.editRender||r.cellRender;let s=r.footerExportMethod;if(!s&&i&&i.name){const e=Kt.get(i.name);e&&(s=e.tableFooterExportMethod||e.footerExportMethod||e.footerCellExportMethod)}s||(s=n.footerExportMethod);const a=e.getVTColumnIndex(r);return s?s({$table:e,items:o,itemIndex:a,row:o,_columnIndex:a,column:r,options:t}):l.a.isArray(o)?l.a.toValueString(o[a]):l.a.get(o,r.field)}function io(e,t,o){const{footerFilterMethod:r}=t;return r?o.filter((t,o)=>r({$table:e,items:t,$rowIndex:o})):o}function so(e){return/[",\s\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function ao(e,t,o,r){const l=e;let n="\ufeff";if(t.isHeader&&(n+=o.map(o=>so(lo(e,t,o))).join(",")+"\r\n"),r.forEach(e=>{n+=o.map(t=>so(function(e,t){if(t){if("seq"===e.type)return"\t"+t;switch(e.cellType){case"string":if(!isNaN(t))return"\t"+t;break;case"number":break;default:if(t.length>=12&&!isNaN(t))return"\t"+t}}return t}(t,e[t.id]))).join(",")+"\r\n"}),t.isFooter){const{footerTableData:r}=l;io(e,t,r).forEach(r=>{n+=o.map(o=>so(no(e,t,r,o))).join(",")+"\r\n"})}return n}function co(e,t,o,r){const n=e,i=t[o],s=l.a.isUndefined(i)||l.a.isNull(i)?r:i;let a="title"===s||(!0===s||"tooltip"===s)||"ellipsis"===s;const{scrollXLoad:c,scrollYLoad:d}=n;return!c&&!d||a||(a=!0),a}function uo(e,t,o,r){if(o.length)switch(t.type){case"csv":return ao(e,t,o,r);case"txt":return function(e,t,o,r){const l=e;let n="";if(t.isHeader&&(n+=o.map(o=>so(lo(e,t,o))).join("\t")+"\r\n"),r.forEach(e=>{n+=o.map(t=>so(e[t.id])).join("\t")+"\r\n"}),t.isFooter){const{footerTableData:r}=l;io(e,t,r).forEach(r=>{n+=o.map(o=>so(no(e,t,r,o))).join("\t")+"\r\n"})}return n}(e,t,o,r);case"html":return function(e,t,o,r){const i=e,s=e,a=e,{id:c,border:d,treeConfig:u,headerAlign:p,align:h,footerAlign:g,showOverflow:m,showHeaderOverflow:f}=i,{isAllSelected:b,isIndeterminate:x}=s,{mergeBodyCellMaps:v}=a,C=e.computeTreeOpts,{print:w,isHeader:O,isFooter:E,isColgroup:y,isMerge:T,colgroups:R,original:S}=t,j=[`<table class="${["vxe-table","border--"+Jt(d),w?"is--print":"",O?"is--header":""].filter(e=>e).join(" ")}" border="0" cellspacing="0" cellpadding="0">`,`<colgroup>${o.map(e=>`<col style="width:${e.renderWidth}px">`).join("")}</colgroup>`];if(O&&(j.push("<thead>"),y&&!S?R.forEach(o=>{j.push(`<tr>${o.map(o=>{const r=o.headerAlign||o.align||p||h,i=co(e,o,"showHeaderOverflow",f)?["col--ellipsis"]:[],s=lo(e,t,o);let a=0,c=0;l.a.eachTree([o],e=>{e.childNodes&&o.childNodes.length||c++,a+=e.renderWidth},{children:"childNodes"});const d=a-c;return r&&i.push("col--"+r),"checkbox"===o.type?`<th class="${i.join(" ")}" colspan="${o._colSpan}" rowspan="${o._rowSpan}"><div ${w?"":`style="width: ${d}px"`}><input type="checkbox" class="check-all" ${b?"checked":""}><span>${s}</span></div></th>`:`<th class="${i.join(" ")}" colspan="${o._colSpan}" rowspan="${o._rowSpan}" title="${s}"><div ${w?"":`style="width: ${d}px"`}><span>${Object(n.b)(s,!0)}</span></div></th>`}).join("")}</tr>`)}):j.push(`<tr>${o.map(o=>{const r=o.headerAlign||o.align||p||h,l=co(e,o,"showHeaderOverflow",f)?["col--ellipsis"]:[],i=lo(e,t,o);return r&&l.push("col--"+r),"checkbox"===o.type?`<th class="${l.join(" ")}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="checkbox" class="check-all" ${b?"checked":""}><span>${i}</span></div></th>`:`<th class="${l.join(" ")}" title="${i}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><span>${Object(n.b)(i,!0)}</span></div></th>`}).join("")}</tr>`),j.push("</thead>")),r.length&&(j.push("<tbody>"),u?r.forEach(t=>{j.push("<tr>"+o.map(o=>{const r=o.align||h,l=co(e,o,"showOverflow",m)?["col--ellipsis"]:[],i=t[o.id];if(r&&l.push("col--"+r),o.treeNode){let e="";return t._hasChild&&(e=`<i class="${t._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon"}"></i>`),l.push("vxe-table--tree-node"),"radio"===o.type?`<td class="${l.join(" ")}" title="${i}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${t._level*C.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_${c}" ${t._radioDisabled?"disabled ":""}${ro(i)?"checked":""}><span>${t._radioLabel}</span></div></div></div></td>`:"checkbox"===o.type?`<td class="${l.join(" ")}" title="${i}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${t._level*C.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell"><input type="checkbox" ${t._checkboxDisabled?"disabled ":""}${ro(i)?"checked":""}><span>${t._checkboxLabel}</span></div></div></div></td>`:`<td class="${l.join(" ")}" title="${i}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${t._level*C.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell">${i}</div></div></div></td>`}return"radio"===o.type?`<td class="${l.join(" ")}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="radio" name="radio_${c}" ${t._radioDisabled?"disabled ":""}${ro(i)?"checked":""}><span>${t._radioLabel}</span></div></td>`:"checkbox"===o.type?`<td class="${l.join(" ")}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="checkbox" ${t._checkboxDisabled?"disabled ":""}${ro(i)?"checked":""}><span>${t._checkboxLabel}</span></div></td>`:`<td class="${l.join(" ")}" title="${i}"><div ${w?"":`style="width: ${o.renderWidth}px"`}>${Object(n.b)(i,!0)}</div></td>`}).join("")+"</tr>")}):r.forEach(t=>{j.push("<tr>"+o.map(o=>{const r=o.id,l=o.align||h,i=co(e,o,"showOverflow",m)?["col--ellipsis"]:[],s=t[r];let a=1,d=1;if(T){const r=e.getVTRowIndex(t._row),l=e.getVTColumnIndex(o),n=v[`${r}:${l}`];if(n){const{rowspan:e,colspan:t}=n;if(!e||!t)return"";e>1&&(a=e),t>1&&(d=t)}}return l&&i.push("col--"+l),"radio"===o.type?`<td class="${i.join(" ")}" rowspan="${a}" colspan="${d}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="radio" name="radio_${c}" ${t._radioDisabled?"disabled ":""}${ro(s)?"checked":""}><span>${t._radioLabel}</span></div></td>`:"checkbox"===o.type?`<td class="${i.join(" ")}" rowspan="${a}" colspan="${d}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="checkbox" ${t._checkboxDisabled?"disabled ":""}${ro(s)?"checked":""}><span>${t._checkboxLabel}</span></div></td>`:`<td class="${i.join(" ")}" rowspan="${a}" colspan="${d}" title="${s}"><div ${w?"":`style="width: ${o.renderWidth}px"`}>${Object(n.b)(s,!0)}</div></td>`}).join("")+"</tr>")}),j.push("</tbody>")),E){const{footerTableData:r}=s,l=io(e,t,r);l.length&&(j.push("<tfoot>"),l.forEach(r=>{j.push(`<tr>${o.map(o=>{const l=o.footerAlign||o.align||g||h,i=co(e,o,"showOverflow",m)?["col--ellipsis"]:[],s=no(e,t,r,o);return l&&i.push("col--"+l),`<td class="${i.join(" ")}" title="${s}"><div ${w?"":`style="width: ${o.renderWidth}px"`}>${Object(n.b)(s,!0)}</div></td>`}).join("")}</tr>`)}),j.push("</tfoot>"))}const D=!b&&x?'<script>(function(){var a=document.querySelector(".check-all");if(a){a.indeterminate=true}})()<\/script>':"";return j.push("</table>",D),w?j.join(""):function(e,t){const{style:o}=e;return["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',`<title>${e.sheetName}</title>`,'<style media="print">.vxe-page-break-before{page-break-before:always;}.vxe-page-break-after{page-break-after:always;}</style>','<style>body{margin:0;padding: 0 1px;color:#333333;font-size:14px;font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}</style>',o?`<style>${o}</style>`:"","</head>",`<body>${t}</body>`,"</html>"].join("")}(t,j.join(""))}(e,t,o,r);case"xml":return function(e,t,o,r){const l=e;let n=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",`<Worksheet ss:Name="${t.sheetName}">`,"<Table>",o.map(e=>`<Column ss:Width="${e.renderWidth}"/>`).join("")].join("");if(t.isHeader&&(n+=`<Row>${o.map(o=>`<Cell><Data ss:Type="String">${lo(e,t,o)}</Data></Cell>`).join("")}</Row>`),r.forEach(e=>{n+="<Row>"+o.map(t=>`<Cell><Data ss:Type="String">${e[t.id]}</Data></Cell>`).join("")+"</Row>"}),t.isFooter){const{footerTableData:r}=l;io(e,t,r).forEach(r=>{n+=`<Row>${o.map(o=>`<Cell><Data ss:Type="String">${no(e,t,r,o)}</Data></Cell>`).join("")}</Row>`})}return n+"</Table></Worksheet></Workbook>"}(e,t,o,r)}return""}function po(e,t,o){const{filename:r,type:l,download:n}=t;if(!n){const e=function(e,t){return new Blob([e],{type:`text/${t.type};charset=utf-8;`})}(o,t);return Promise.resolve({type:l,content:o,blob:e})}a.b.saveFile&&a.b.saveFile({filename:r,type:l,content:o}).then(()=>{!1!==t.message&&a.b.modal&&a.b.modal.message({content:Yt("vxe.table.expSuccess"),status:"success"})})}function ho(e){l.a.eachTree(e,e=>{delete e._level,delete e._colSpan,delete e._rowSpan,delete e._children,delete e.childNodes},{children:"children"})}function go(e,t){const o=e.$xeGrid,{remote:r,columns:l,colgroups:n,exportMethod:i,afterExportMethod:s}=t;return new Promise(s=>{if(r){const r={options:t,$table:e,$grid:o};s(i?i(r):r)}else{const o=oo(e,t);s(e.preventEvent(null,"event.export",{options:t,columns:l,colgroups:n,datas:o},()=>po(0,t,uo(e,t,l,o))))}}).then(r=>(ho(l),t.print||s&&s({status:!0,options:t,$table:e,$grid:o}),Object.assign({status:!0},r))).catch(()=>{ho(l),t.print||s&&s({status:!1,options:t,$table:e,$grid:o});return Promise.reject({status:!1})})}function mo(e,t){return e.getElementsByTagName(t)}function fo(e){return`#${e}@${l.a.uniqueId()}`}function bo(e,t){return e.replace(/#\d+@\d+/g,e=>l.a.hasOwnProp(t,e)?t[e]:e)}function xo(e,t){return bo(e,t).replace(/^"+$/g,e=>'"'.repeat(Math.ceil(e.length/2)))}function vo(e,t){const{fieldMaps:o,titleMaps:r}=e;if(!o[t]){const e=r[t];e&&e.field&&(t=e.field)}return t}function Co(e,t,o){const r=t.split("\r\n"),l=[];let n=[];if(r.length){const t={},i=Date.now();r.forEach(r=>{if(r){const s={},a=(r=r.replace(/("")|(\n)/g,(e,o)=>{const r=fo(i);return t[r]=o?'"':"\n",r}).replace(/"(.*?)"/g,(e,o)=>{const r=fo(i);return t[r]=bo(o,t),r})).split(o);n.length?(a.forEach((e,o)=>{o<n.length&&(s[n[o]]=xo(e.trim(),t))}),l.push(s)):n=a.map(o=>vo(e,xo(o.trim(),t)))}})}return{fields:n,rows:l}}function wo(e,t,o){const r=e,{tableFullColumn:n,_importResolve:i,_importReject:s}=r;let c={fields:[],rows:[]};const d={},u={};n.forEach(e=>{const t=e.field,o=e.getTitle();t&&(d[t]=e),o&&(u[e.getTitle()]=e)});const p={fieldMaps:d,titleMaps:u};switch(o.type){case"csv":c=function(e,t){return Co(e,t,",")}(p,t);break;case"txt":c=function(e,t){return Co(e,t,"\t")}(p,t);break;case"html":c=function(e,t){const o=mo((new DOMParser).parseFromString(t,"text/html"),"body"),r=[],n=[];if(o.length){const t=mo(o[0],"table");if(t.length){const o=mo(t[0],"thead");if(o.length){l.a.arrayEach(mo(o[0],"tr"),t=>{l.a.arrayEach(mo(t,"th"),t=>{n.push(vo(e,t.textContent||""))})});const i=mo(t[0],"tbody");i.length&&l.a.arrayEach(mo(i[0],"tr"),e=>{const t={};l.a.arrayEach(mo(e,"td"),(e,o)=>{n[o]&&(t[n[o]]=e.textContent||"")}),r.push(t)})}}}return{fields:n,rows:r}}(p,t);break;case"xml":c=function(e,t){const o=mo((new DOMParser).parseFromString(t,"application/xml"),"Worksheet"),r=[],n=[];if(o.length){const t=mo(o[0],"Table");if(t.length){const o=mo(t[0],"Row");o.length&&(l.a.arrayEach(mo(o[0],"Cell"),t=>{n.push(vo(e,t.textContent||""))}),l.a.arrayEach(o,(e,t)=>{if(t){const t={},o=mo(e,"Cell");l.a.arrayEach(o,(e,o)=>{n[o]&&(t[n[o]]=e.textContent)}),r.push(t)}}))}}return{fields:n,rows:r}}(p,t)}const{fields:g,rows:m}=c;g.some(e=>d[e]||u[e])?e.createData(m).then(t=>{let r;return"insert"!==o.mode&&"insertBottom"!==o.mode||(r=e.insertAt(t,-1)),r="insertTop"===o.mode?e.insert(t):e.reloadData(t),!1!==o.message&&(a.b.modal||Object(h.a)("vxe.error.reqModule",["Modal"]),a.b.modal.message({content:Yt("vxe.table.impSuccess",[m.length]),status:"success"})),r.then(()=>{i&&i({status:!0})})}):!1!==o.message&&(a.b.modal||Object(h.a)("vxe.error.reqModule",["Modal"]),a.b.modal.message({content:Yt("vxe.error.impFields"),status:"error"}),s&&s({status:!1}))}function Oo(e,t,o){const r=e,i=e.computeImportOpts,{importMethod:s,afterImportMethod:c}=o,{type:d,filename:u}=Object(n.j)(t);if(!s&&!l.a.includes(l.a.keys(i._typeMaps),d)){!1!==o.message&&(a.b.modal||Object(h.a)("vxe.error.reqModule",["Modal"]),a.b.modal.message({content:Yt("vxe.error.notType",[d]),status:"error"}));const e={status:!1};return Promise.reject(e)}return new Promise((l,n)=>{const i=t=>{l(t),e._importResolve=null,e._importReject=null},a=t=>{n(t),e._importResolve=null,e._importReject=null};if(e._importResolve=i,e._importReject=a,window.FileReader){const l=Object.assign({mode:"insertTop"},o,{type:d,filename:u});if(l.remote)s?Promise.resolve(s({file:t,options:l,$table:e})).then(()=>{i({status:!0})}).catch(()=>{i({status:!0})}):i({status:!0});else{const{tableFullColumn:o}=r;e.preventEvent(null,"event.import",{file:t,options:l,columns:o},()=>{const o=new FileReader;o.onerror=()=>{Object(h.a)("vxe.error.notType",[d]),a({status:!1})},o.onload=t=>{wo(e,t.target.result,l)},o.readAsText(t,l.encoding||"UTF-8")})}}else Object(h.a)("vxe.error.notExp"),i({status:!0})}).then(()=>{c&&c({status:!0,options:o,$table:e})}).catch(t=>(c&&c({status:!1,options:o,$table:e}),Promise.reject(t)))}function Eo(){return a.b.modal?a.b.modal.close("VXE_EXPORT_MODAL"):Promise.resolve()}function yo(e,t,o){return o.some(e=>{if(Object(s.w)(e))return t.id===e.id;if(l.a.isString(e))return t.field===e;{const o=e.id||e.colId,r=e.type,l=e.field;if(o)return t.id===o;if(l&&r)return t.field===l&&t.type===r;if(l)return t.field===l;if(r)return t.type===r}return!1})}function To(e,t,o,r){return(!r||!l.a.includes(r,t.field))&&(o?!!l.a.includes(o,t.field):e.original?!!t.field:Qt(t))}function Ro(e,t,o){const r=e,n=e,i=e,s=e.$xeGrid,{treeConfig:a,showHeader:c,showFooter:d}=r,{initStore:u,isGroup:p,footerTableData:h,exportStore:g,exportParams:m}=n,{collectColumn:f,mergeBodyList:b,mergeFooterList:x}=i,v=e.computeExportOpts,C=a,w=e.computeCustomOpts,O=e.getCheckboxRecords(),E=s?s.computeProxyOpts:{},y=!!h.length,T=!(!b.length&&!x.length),R=Object.assign({message:!0,isHeader:c,isTitle:c,isFooter:d,isColgroup:p,isMerge:T,useStyle:!0,current:"current",modes:(E.ajax&&E.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"])},t),S=R.types||l.a.keys(v._typeMaps),j=R.modes||[],D=w.checkMethod,F=f.slice(0),{columns:$,excludeFields:k,includeFields:M}=R,A=S.map(e=>({value:e,label:Yt("vxe.export.types."+e)})),I=j.map(e=>e&&e.value?{value:e.value,label:e.label||e.value}:{value:e,label:Yt("vxe.export.modes."+e)});l.a.eachTree(F,(t,o,r,l,n)=>{const i=t.children&&t.children.length>0;let s=!1;s=$&&$.length?yo(0,t,$):k||M?To(R,t,M,k):t.visible&&(i||Qt(t)),t.checked=s,t.halfChecked=!1,t.disabled=n&&n.disabled||!!D&&!D({$table:e,column:t})}),Object.assign(g,{columns:F,typeList:A,modeList:I,hasFooter:y,hasMerge:T,hasTree:C,isPrint:o,hasColgroup:p,visible:!0}),Object.assign(m,{mode:O.length?"selected":"current"},R);const{filename:L,sheetName:_,mode:B,type:H}=m;return L&&(l.a.isFunction(L)?m.filename=L({options:R,$table:e,$grid:s}):m.filename=""+L),_&&(l.a.isFunction(_)?m.sheetName=_({options:R,$table:e,$grid:s}):m.sheetName=""+_),I.some(e=>e.value===B)||(m.mode=I[0].value),A.some(e=>e.value===H)||(m.type=A[0].value),u.export=!0,e.$nextTick()}const So=e=>{const t=[];return e.forEach(e=>{e.childNodes&&e.childNodes.length?(t.push(e),t.push(...So(e.childNodes))):t.push(e)}),t};var jo={methods:{_exportData(e){const t=this,o=t,r=t,n=t,i=t.$xeGrid,{treeConfig:a,showHeader:c,showFooter:d}=o,{isGroup:u}=r,{tableFullColumn:p,afterFullData:g,afterTreeFullData:m,collectColumn:f,mergeBodyList:b,mergeFooterList:x}=n,v=t.computeExportOpts,C=t.computeTreeOpts,w=i?i.computeProxyOpts:{},O=!(!b.length&&!x.length),E=Object.assign({message:!0,isHeader:c,isTitle:c,isFooter:d,isColgroup:u,isMerge:O,useStyle:!0,current:"current",modes:(w.ajax&&w.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"]),download:!0,type:"csv"},v,e);let{filename:y,sheetName:T,type:R,mode:S,columns:j,original:D,columnFilterMethod:F,beforeExportMethod:$,includeFields:k,excludeFields:M}=E,A=[];const I=t.getCheckboxRecords();S||(S=I.length?"selected":"current");let L=!1,_=[];j&&j.length?(L=!0,_=j):_=l.a.searchTree(f,e=>{const t=e.children&&e.children.length>0;let o=!1;return o=j&&j.length?yo(0,e,j):M||k?To(E,e,k,M):e.visible&&(t||Qt(e)),o},{children:"children",mapChildren:"childNodes",original:!0});const B=Object.assign({},E,{filename:"",sheetName:""});L||F||(F=({column:e})=>(!M||!l.a.includes(M,e.field))&&(k?!!l.a.includes(k,e.field):D?!!e.field:Qt(e)),B.columnFilterMethod=F),_?(B._isCustomColumn=!0,A=l.a.searchTree(l.a.mapTree(_,e=>{let o;if(e){if(Object(s.w)(e))o=e;else if(l.a.isString(e))o=t.getColumnByField(e);else{const r=e.id||e.colId,l=e.type,n=e.field;r?o=t.getColumnById(r):n&&l?o=p.find(e=>e.field===n&&e.type===l):n?o=t.getColumnByField(n):l&&(o=p.find(e=>e.type===l))}return o||{}}},{children:"childNodes",mapChildren:"_children"}),(e,o)=>Object(s.w)(e)&&(!F||F({$table:t,column:e,$columnIndex:o})),{children:"_children",mapChildren:"childNodes",original:!0})):A=l.a.searchTree(u?f:p,(e,o)=>e.visible&&(!F||F({$table:t,column:e,$columnIndex:o})),{children:"children",mapChildren:"childNodes",original:!0});const H=[];if(l.a.eachTree(A,e=>{e.children&&e.children.length||H.push(e)},{children:"childNodes"}),B.columns=H,B.colgroups=(e=>{let t=1;const o=(e,r)=>{if(r&&(e._level=r._level+1,t<e._level&&(t=e._level)),e.childNodes&&e.childNodes.length){let t=0;e.childNodes.forEach(r=>{o(r,e),t+=r._colSpan}),e._colSpan=t}else e._colSpan=1};e.forEach(e=>{e._level=1,o(e)});const r=[];for(let e=0;e<t;e++)r.push([]);return So(e).forEach(e=>{e.childNodes&&e.childNodes.length?e._rowSpan=1:e._rowSpan=t-e._level+1,r[e._level-1].push(e)}),r})(A),y&&(l.a.isFunction(y)?B.filename=y({options:E,$table:t,$grid:i}):B.filename=""+y),B.filename||(B.filename=Yt(B.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[l.a.toDateString(Date.now(),"yyyyMMddHHmmss")])),T&&(l.a.isFunction(T)?B.sheetName=T({options:E,$table:t,$grid:i}):B.sheetName=""+T),B.sheetName||(B.sheetName=document.title||""),!B.exportMethod&&!l.a.includes(l.a.keys(v._typeMaps),R)){Object(h.a)("vxe.error.notType",[R]),["xlsx","pdf"].includes(R)&&Object(h.b)("vxe.error.reqPlugin",[4,"plugin-export-xlsx"]);const e={status:!1};return Promise.reject(e)}if(B.print||$&&$({options:B,$table:t,$grid:i}),B.data)B._isCustomData=!0;else if(B.data=[],"selected"===S)["html","pdf"].indexOf(R)>-1&&a?B.data=l.a.searchTree(t.getTableData().fullData,e=>t.findRowIndexOf(I,e)>-1,Object.assign({},C,{data:"_row"})):B.data=I;else if("all"===S){if(i||Object(h.a)("vxe.error.errProp",["all","mode=current,selected"]),i&&!B.remote){const e=i,o=i.computeProxyOpts,{sortData:r}=e,{beforeQueryAll:n,afterQueryAll:s,ajax:a={}}=o,c=o.response||o.props||{},d=a.queryAll,u=a.queryAllSuccess,p=a.queryAllError;if(d||Object(h.a)("vxe.error.notFunc",["proxy-config.ajax.queryAll"]),d){const o={$table:t,$grid:i,sort:r.length?r[0]:{},sorts:r,filters:e.filterData,form:e.formData,options:B};return Promise.resolve((n||d)(o)).then(e=>{const r=c.list;return B.data=(r?l.a.isFunction(r)?r({data:e,$grid:i}):l.a.get(e,r):e)||[],s&&s(o),u&&u(Object.assign(Object.assign({},o),{response:e})),go(t,B)}).catch(e=>{p&&p(Object.assign(Object.assign({},o),{response:e}))})}}}else"current"===S&&(B.data=a?m:g);return go(t,B)},_importByFile(e,t){const o=this,r=Object.assign({},t),{beforeImportMethod:l}=r;return l&&l({options:r,$table:o}),Oo(o,e,r)},_importData(e){const t=this,{importOpts:o}=this,r=Object.assign({types:l.a.keys(o._typeMaps)},o,e),{beforeImportMethod:n,afterImportMethod:i}=r;return n&&n({options:r,$table:this}),a.b.readFile(r).catch(e=>(i&&i({status:!1,options:r,$table:t}),Promise.reject(e))).then(e=>{const{file:o}=e;return Oo(t,o,r)})},_saveFile:e=>a.b.saveFile(e),_readFile:e=>a.b.readFile(e),_print(e){const t=this,o=t.$xeGrid,r=Object.assign({original:!1},this.printOpts,e,{type:"html",download:!1,remote:!1,print:!0}),{sheetName:n}=r;let i="";n&&(i=l.a.isFunction(n)?n({options:r,$table:t,$grid:o}):""+n),i||(i=document.title||"");const s=r.beforePrintMethod,c=r.html||r.content;return new Promise((e,o)=>{if(a.b.print)e(c?a.b.print({title:i,html:c,customStyle:r.style,beforeMethod:s?({html:e})=>s({html:e,content:e,options:r,$table:t}):void 0}):t.exportData(r).then(({content:e})=>a.b.print({title:i,html:e,customStyle:r.style,beforeMethod:s?({html:e})=>s({html:e,content:e,options:r,$table:t}):void 0})));else{o({status:!1})}})},_getPrintHtml(e){const t=this.computePrintOpts,o=Object.assign({original:!1},t,e,{type:"html",download:!1,remote:!1,print:!0});return this.exportData(o).then(({content:e})=>({html:e}))},_closeImport:()=>a.b.modal?a.b.modal.close("VXE_IMPORT_MODAL"):Promise.resolve(),_openImport(e){const{treeConfig:t,importConfig:o}=this,{initStore:r,importStore:n,importParams:i}=this,s=this.computeImportOpts,c=Object.assign({mode:"insertTop",message:!0,types:l.a.keys(s._typeMaps),modes:["insertTop","covering"]},s,e),d=c.types||[],u=c.modes||[];if(!!t)return void(c.message&&a.b.modal.message({content:Yt("vxe.error.treeNotImp"),status:"error"}));o||Object(h.a)("vxe.error.reqProp",["import-config"]);const p=d.map(e=>({value:e,label:Yt("vxe.export.types."+e)})),g=u.map(e=>e&&e.value?{value:e.value,label:e.label||e.value}:{value:e,label:Yt("vxe.import.modes."+e)});Object.assign(n,{file:null,type:"",filename:"",modeList:g,typeList:p,visible:!0}),Object.assign(i,c),g.some(e=>e.value===i.mode)||(i.mode=g[0].value),r.import=!0},_closeExport:Eo,_openExport(e){const t=this.computeExportOpts,o=Object.assign({message:!0,types:l.a.keys(t._typeMaps)},t,e);return this.exportConfig||Object(h.a)("vxe.error.reqProp",["export-config"]),Ro(this,o)},_closePrint:Eo,_openPrint(e){const t=this.computePrintOpts,o=Object.assign({message:!0},t,e);return this.printConfig||Object(h.a)("vxe.error.reqProp",["print-config"]),Ro(this,o,!0)}}};const Do=l.a.browse();function Fo(e,t,o,r,l,n,i){const s=e,{afterFullData:a,visibleColumn:c}=s,d=Object.assign({},o),u=e.getVTRowIndex(d.row),p=e.getVTColumnIndex(d.column);return t.preventDefault(),l&&u>0?(d.rowIndex=u-1,d.row=a[d.rowIndex]):i&&u<a.length-1?(d.rowIndex=u+1,d.row=a[d.rowIndex]):r&&p?(d.columnIndex=p-1,d.column=c[d.columnIndex]):n&&p<c.length-1&&(d.columnIndex=p+1,d.column=c[d.columnIndex]),e.scrollToRow(d.row,d.column).then(()=>{d.cell=e.getCellElement(d.row,d.column),e.handleSelected(d,t)}),d}var $o={methods:{moveTabSelected(e,t,o){const r=this,l=r,n=r,{editConfig:i}=l,{afterFullData:s,visibleColumn:a}=n,c=r.computeEditOpts,d=r.computeRowOpts,u=r.computeCurrentRowOpts,p=r.computeColumnOpts,h=r.computeCurrentColumnOpts;let g,m,f;const b=Object.assign({},e),x=r.getVTRowIndex(b.row),v=r.getVTColumnIndex(b.column);o.preventDefault(),t?v<=0?x>0&&(m=x-1,g=s[m],f=a.length-1):f=v-1:v>=a.length-1?x<s.length-1&&(m=x+1,g=s[m],f=0):f=v+1;const C=a[f];C&&(g?(b.rowIndex=m,b.row=g):b.rowIndex=x,b.columnIndex=f,b.column=C,b.cell=r.getCellElement(b.row,b.column),d.isCurrent&&u.isFollowSelected&&r.triggerCurrentRowEvent(o,b),p.isCurrent&&h.isFollowSelected&&r.triggerCurrentColumnEvent(o,b),i?"click"!==c.trigger&&"dblclick"!==c.trigger||("row"===c.mode?r.handleEdit(b,o):r.scrollToRow(b.row,b.column).then(()=>{r.handleSelected(b,o)})):r.scrollToRow(b.row,b.column).then(()=>{r.handleSelected(b,o)}))},moveCurrentRow(e,t,o){const r=this,n=r,i=r,s=r,{treeConfig:a}=n,{currentRow:c}=i,{afterFullData:d}=s,u=r.computeTreeOpts,p=u.children||u.childrenField;let h;if(c)if(a){const{index:o,items:r}=l.a.findTree(d,e=>e===c,{children:p});e&&o>0?h=r[o-1]:t&&o<r.length-1&&(h=r[o+1])}else{const o=r.getVTRowIndex(c);e&&o>0?h=d[o-1]:t&&o<d.length-1&&(h=d[o+1])}else h=d[0];if(h){o.preventDefault();const e={$table:r,row:h,rowIndex:r.getRowIndex(h),$rowIndex:r.getVMRowIndex(h)};r.scrollToRow(h).then(()=>r.triggerCurrentRowEvent(o,e))}},moveCurrentColumn(e,t,o){const r=this,l=r,n=r,{currentColumn:i}=l,{visibleColumn:s}=n;let a=null;if(i){const o=r.getVTColumnIndex(i);e&&o>0?a=s[o-1]:t&&o<s.length-1&&(a=s[o+1])}else a=s[0];if(a){o.preventDefault();const e={$table:r,column:a,columnIndex:r.getColumnIndex(a),$columnIndex:r.getVMColumnIndex(a)};r.scrollToColumn(a).then(()=>r.triggerCurrentColumnEvent(o,e))}},moveArrowSelected(e,t,o,r,l,n){const i=this,s=i,{highlightCurrentRow:a,highlightCurrentColumn:c}=s,d=i.computeRowOpts,u=i.computeCurrentRowOpts,p=i.computeColumnOpts,h=i.computeCurrentColumnOpts,g=Fo(i,n,e,t,o,r,l);(d.isCurrent||a)&&(u.isFollowSelected?i.triggerCurrentRowEvent(n,g):(o||l)&&(d.isCurrent||a)&&i.moveCurrentRow(o,l,n)),(p.isCurrent||c)&&(h.isFollowSelected?i.triggerCurrentColumnEvent(n,g):(t||r)&&(p.isCurrent||c)&&i.moveCurrentColumn(t,r,n))},moveEnterSelected(e,t,o,r,l,n){const i=this,s=i,{highlightCurrentRow:a,highlightCurrentColumn:c}=s,d=i.computeRowOpts,u=i.computeCurrentRowOpts,p=i.computeColumnOpts,h=i.computeCurrentColumnOpts,g=Fo(i,n,e,t,o,r,l);(d.isCurrent||a)&&u.isFollowSelected&&i.triggerCurrentRowEvent(n,g),(p.isCurrent||c)&&h.isFollowSelected&&i.triggerCurrentColumnEvent(n,g)},moveSelected(e,t,o,r,l,n){Fo(this,n,e,t,o,r,l)},handleCellMousedownEvent(e,t){const o=this,{editConfig:r,editOpts:l,handleSelected:n,checkboxConfig:i,checkboxOpts:s,mouseConfig:a,mouseOpts:c}=this;if(a&&c.area&&o.triggerCellAreaMousednEvent)return o.triggerCellAreaMousednEvent(e,t);i&&s.range&&this.handleCheckboxRangeEvent(e,t),a&&c.selected&&(r&&"cell"!==l.mode||n(t,e))},handleCheckboxRangeEvent(e,t){const o=this,r=o,{elemStore:n}=r,a=Object(s.o)(n["main-body-scroll"]),c=Object(s.o)(n["left-body-scroll"]),d=Object(s.o)(n["right-body-scroll"]),{column:u,cell:p}=t;if("checkbox"===u.type){let r=a;if(c&&"left"===u.fixed?r=c:d&&"right"===u.fixed&&(r=d),!r)return;const n=o.$refs.refElem,s=e.clientX,h=e.clientY,g=r.querySelector(".vxe-table--checkbox-range"),m=p.parentNode,f=this.getCheckboxRecords();let b=[];const x=1,v=function(e,t){let o=0,r=0;const n=!Do.firefox&&Object(i.h)(e,"vxe-checkbox--label");if(n){const t=getComputedStyle(e);o-=l.a.toNumber(t.paddingTop),r-=l.a.toNumber(t.paddingLeft)}for(;e&&e!==t;)if(o+=e.offsetTop,r+=e.offsetLeft,e=e.offsetParent,n){const t=getComputedStyle(e);o-=l.a.toNumber(t.paddingTop),r-=l.a.toNumber(t.paddingLeft)}return{offsetTop:o,offsetLeft:r}}(e.target,r),C=v.offsetTop+e.offsetY,w=v.offsetLeft+e.offsetX,O=r.scrollTop,E=m.offsetHeight,y=m.getBoundingClientRect(),T=h-y.y;let R=null,S=!1,j=1;const D=(e,t)=>{this.emitEvent("checkbox-range-"+e,{records:()=>this.getCheckboxRecords(),reserves:()=>this.getCheckboxReserveRecords()},t)},F=e=>{const{clientX:l,clientY:n}=e,a=l-s,c=n-h+(r.scrollTop-O);let d=Math.abs(c),u=Math.abs(a),p=C,v=w;c<x?(p+=c,p<x&&(p=x,d=C)):d=Math.min(d,r.scrollHeight-C-x),a<x?(v+=a,u>w&&(v=x,u=w)):u=Math.min(u,r.clientWidth-w-x),g.style.height=d+"px",g.style.width=u+"px",g.style.left=v+"px",g.style.top=p+"px",g.style.display="block";const E=function(e,t,o,r,l,n,i){const s=e,a=e,c=e,{showOverflow:d}=s,{fullAllDataRowIdData:u,isResizeCellHeight:p}=c,h=e.computeRowOpts,g=e.computeCellOpts,m=e.computeDefaultRowHeight,{row:f}=o;let b=0,x=[],v=0;const C=i>0,{scrollYLoad:w}=a,{afterFullData:O}=c;if(v=C?n+i:l.height-n+Math.abs(i),w){const t=e.getVTRowIndex(f);if(!(p||g.height||h.height)&&d)x=C?O.slice(t,t+Math.ceil(v/m)):O.slice(t-Math.floor(v/m),t+1);else if(C)for(let o=t;o<O.length;o++){const t=O[o],r=u[e.getRowid(t)]||{};if(b+=r.resizeHeight||g.height||h.height||r.height||m,x.push(t),b>v)return x}else for(let o=t;o>=0;o--){const t=O[o],r=u[e.getRowid(t)]||{};if(b+=r.resizeHeight||g.height||h.height||r.height||m,x.push(t),b>v)return x}}else{const t=C?"next":"previous";for(;r&&b<v;){const o=e.getRowNode(r);o&&(x.push(o.item),b+=r.offsetHeight,r=r[t+"ElementSibling"])}}return x}(this,0,t,m,y,T,c<x?-d:d);if(d>10&&E.length!==b.length){const t=Object(i.i)(e);b=E,t?E.forEach(e=>{o.handleBatchSelectRows([e],-1===f.indexOf(e))}):(this.setAllCheckboxRow(!1),this.handleCheckedCheckboxRow(E,!0,!1)),D("change",e)}},$=()=>{clearTimeout(R),R=null},k=e=>{$(),R=setTimeout(()=>{if(R){const{scrollLeft:t,scrollTop:o,clientHeight:l,scrollHeight:n}=r,i=Math.ceil(50*j/E);S?o+l<n?(this.scrollTo(t,o+i),k(e),F(e)):$():o?(this.scrollTo(t,o-i),k(e),F(e)):$()}},50)};Object(i.a)(n,"drag--range"),document.onmousemove=e=>{e.preventDefault(),e.stopPropagation();const{clientY:t}=e,{boundingTop:o}=Object(i.b)(r);t<o?(S=!1,j=o-t,R||k(e)):t>o+r.clientHeight?(S=!0,j=t-o-r.clientHeight,R||k(e)):R&&$(),F(e)},document.onmouseup=e=>{$(),Object(i.n)(n,"drag--range"),g.removeAttribute("style"),document.onmousemove=null,document.onmouseup=null,D("end",e)},D("start",e)}}}};const{getConfig:ko,validators:Mo}=a.b;class Ao{constructor(e){Object.defineProperty(this,"$options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.assign(this,{$options:e,required:e.required,min:e.min,max:e.max,type:e.type,pattern:e.pattern,validator:e.validator,trigger:e.trigger,maxWidth:e.maxWidth})}get content(){return Object(n.d)(this.$options.content||this.$options.message)}get message(){return this.content}}function Io(e,t){return!(!l.a.eqNull(e)&&t>l.a.toNumber(e))}function Lo(e,t){return!(!l.a.eqNull(e)&&t<l.a.toNumber(e))}function _o(e,t,o){const{type:r,min:n,max:i,pattern:s}=e,a="array"===r,c="number"===r,d="string"===r,u=""+t;if(!function(e,t){return!(e&&!(l.a.isRegExp(e)?e:new RegExp(e)).test(t))}(s,u))return!1;if(a){if(!l.a.isArray(t))return!1;if(o&&!t.length)return!1;if(!Lo(n,t.length))return!1;if(!Io(i,t.length))return!1}else if(c){const e=Number(t);if(isNaN(e))return!1;if(!Lo(n,e))return!1;if(!Io(i,e))return!1}else{if(d&&!l.a.isString(t))return!1;if(o&&!u)return!1;if(!Lo(n,u.length))return!1;if(!Io(i,u.length))return!1}return!0}var Bo={methods:{_fullValidate(e,t){return l.a.isFunction(t)&&Object(h.b)("vxe.error.notValidators",["fullValidate(rows, callback)","fullValidate(rows)"]),this.beginValidate(e,null,t,!0)},_validate(e,t){return l.a.isFunction(t)&&Object(h.b)("vxe.error.notValidators",["validate(rows, callback)","validate(rows)"]),this.beginValidate(e,null,t)},_fullValidateField(e,t){const o=(l.a.isArray(t)?t:t?[t]:[]).map(e=>Object(s.t)(this,e));return o.length?this.beginValidate(e,o,null,!0):this.$nextTick()},_validateField(e,t){const o=(l.a.isArray(t)?t:t?[t]:[]).map(e=>Object(s.t)(this,e));return o.length?this.beginValidate(e,o,null):this.$nextTick()},handleValidError(e){const{validOpts:t}=this;return new Promise(o=>{!1===t.autoPos?(this.emitEvent("valid-error",e),o()):this.handleEdit(e,{type:"valid-error",trigger:"call"}).then(()=>{setTimeout(()=>{o(this.showValidTooltip(e))},10)})})},handleErrMsgMode(e){const{validOpts:t}=this;if("single"===t.msgMode){const t=Object.keys(e),o={};if(t.length){const r=t[0];o[r]=e[r]}return o}return e},beginValidate(e,t,o,r){const n=this,a=n,c=n,d=n,u={},{editRules:p,treeConfig:h}=a,{isRowGroupStatus:g}=c,{afterFullData:m,pendingRowMaps:f,removeRowMaps:b}=d,x=n.computeTreeOpts,v=n.computeAggregateOpts;let C;!0===e?C=m:e&&(l.a.isFunction(e)?o=e:C=l.a.isArray(e)?e:[e]),C||(C=this.getInsertRecords().concat(this.getUpdateRecords()));const w=[];this.lastCallTime=Date.now(),this.validRuleErr=!1,this.clearValidate();const O={};if(p){const e=t&&t.length?t:this.getColumns(),a=t=>{const o=Object(s.r)(n,t);if(!b[o]&&!f[o]&&!n.isAggregateRecord(t)&&(r||!this.validRuleErr)){const o=[];e.forEach(e=>{const n=l.a.isString(e)?e:e.field;!r&&this.validRuleErr||!l.a.has(p,n)||o.push(this.validCellRules("all",t,e).catch(({rule:o,rules:l})=>{const i={rule:o,rules:l,rowIndex:this.getRowIndex(t),row:t,columnIndex:this.getColumnIndex(e),column:e,field:n,$table:this};if(u[n]||(u[n]=[]),O[`${Object(s.r)(this,t)}:${e.id}`]={column:e,row:t,rule:o,content:o.content},u[n].push(i),!r)return this.validRuleErr=!0,Promise.reject(i)}))}),w.push(Promise.all(o))}};if(g)l.a.eachTree(C,a,{children:v.mapChildrenField});else if(h){const e=x.children||x.childrenField;l.a.eachTree(C,a,{children:e})}else C.forEach(a);return Promise.all(w).then(()=>{const e=Object.keys(u);return this.validErrorMaps=this.handleErrMsgMode(O),this.$nextTick().then(()=>{if(e.length)return Promise.reject(u[e[0]][0]);o&&o()})}).catch(e=>new Promise((t,r)=>{const l=()=>{this.$nextTick(()=>{o?(o(u),t()):"obsolete"===ko().validToReject?r(u):t(u)})},n=()=>{e.cell=this.getCellElement(e.row,e.column),Object(i.o)(e.cell),this.handleValidError(e).then(l)};if(!1===this.validOpts.autoPos)l();else{const t=e.row,o=e.column;this.scrollToRow(t,o).then(n)}}))}return this.validErrorMaps={},this.$nextTick().then(()=>{o&&o()})},hasCellRules(e,t,o){const{editRules:r}=this,{property:n}=o;if(n&&r){const t=l.a.get(r,n);return t&&l.a.find(t,t=>"all"===e||!t.trigger||e===t.trigger)}return!1},validCellRules(e,t,o,r){const{editRules:i}=this,{property:s}=o,a=[],c=[];if(s&&i){const d=l.a.get(i,s);if(d){const i=l.a.isUndefined(r)?l.a.get(t,s):r;d.forEach(r=>{const{trigger:s,validator:u}=r;if("all"===e||!s||e===s)if(u){const e={cellValue:i,rule:r,rules:d,row:t,rowIndex:this.getRowIndex(t),column:o,columnIndex:this.getColumnIndex(o),field:o.property,$table:this};let n;if(l.a.isString(u)){const t=Mo.get(u);if(t){const o=t.tableCellValidatorMethod||t.cellValidatorMethod;o?n=o(e):Object(h.a)("vxe.error.notValidators",[u])}else Object(h.a)("vxe.error.notValidators",[u])}else n=u(e);n&&(l.a.isError(n)?(this.validRuleErr=!0,a.push(new Ao({type:"custom",trigger:s,content:n.message,rule:new Ao(r)}))):n.catch&&c.push(n.catch(e=>{this.validRuleErr=!0,a.push(new Ao({type:"custom",trigger:s,content:e&&e.message?e.message:r.content||r.message,rule:new Ao(r)}))})))}else(function(e,t){const{required:o}=e,r=l.a.isArray(t)?!t.length:Object(n.a)(t);if(o){if(r)return!1;if(!_o(e,t,o))return!1}else if(!r&&!_o(e,t,o))return!1;return!0})(r,i)||(this.validRuleErr=!0,a.push(new Ao(r)))})}}return Promise.all(c).then(()=>{if(a.length){const e={rules:a,rule:a[0]};return Promise.reject(e)}})},_clearValidate(e,t){const{validOpts:o,validErrorMaps:r}=this,n=this.$refs.refValidTooltip,i=l.a.isArray(e)?e:e?[e]:[],a=(l.a.isArray(t)?t:t?[t]:[]).map(e=>Object(s.t)(this,e));let c={};if(n&&n.visible&&n.close(),"single"===o.msgMode)return this.validErrorMaps={},this.$nextTick();if(i.length&&a.length)c=Object.assign({},r),i.forEach(e=>{a.forEach(t=>{const o=`${Object(s.r)(this,e)}:${t.id}`;c[o]&&delete c[o]})});else if(i.length){const e=i.map(e=>""+Object(s.r)(this,e));l.a.each(r,(t,o)=>{e.indexOf(o.split(":")[0])>-1&&(c[o]=t)})}else if(a.length){const e=a.map(e=>""+e.id);l.a.each(r,(t,o)=>{e.indexOf(o.split(":")[1])>-1&&(c[o]=t)})}return this.validErrorMaps=c,this.$nextTick()},triggerValidate(e){const{editConfig:t,editStore:o,editRules:r,editOpts:l,validOpts:n}=this,{actived:i}=o;if(r&&"single"===n.msgMode&&(this.validErrorMaps={}),t&&r&&i.row){const{row:t,column:o,cell:r}=i.args;if(this.hasCellRules(e,t,o))return this.validCellRules(e,t,o).then(()=>{"row"===l.mode&&this.clearValidate(t,o)}).catch(({rule:l})=>{if(!l.trigger||e===l.trigger){const e={rule:l,row:t,column:o,cell:r};return this.showValidTooltip(e),Promise.reject(e)}return Promise.resolve()})}return Promise.resolve()},showValidTooltip(e){const{$refs:t,height:o,validStore:r,validErrorMaps:l,tableData:n,validOpts:i}=this,{rule:a,row:c,column:d,cell:u}=e,p=t.refValidTooltip,h=a.content;return r.visible=!0,"single"===i.msgMode?this.validErrorMaps={[`${Object(s.r)(this,c)}:${d.id}`]:{column:d,row:c,rule:a,content:h}}:this.validErrorMaps=Object.assign({},l,{[`${Object(s.r)(this,c)}:${d.id}`]:{column:d,row:c,rule:a,content:h}}),this.emitEvent("valid-error",e,null),p&&p&&("tooltip"===i.message||"default"===i.message&&!o&&n.length<2)?p.open(u,h):this.$nextTick()}}};function Ho(e){const t=e,{customStore:o}=t,r=e.$refs.refElem;let l=0;r&&(l=r.clientHeight-28),o.maxHeight=Math.max(88,l)}function Po(e,t,o){(e.$xeGrid||e).dispatchEvent("custom",{type:t},o)}var zo={methods:{_openCustom(){const e=this,t=e,{initStore:o,customStore:r}=t;return r.visible=!0,o.custom=!0,e.handleUpdateCustomColumn(),e.checkCustomStatus(),Ho(e),e.$nextTick().then(()=>Ho(e))},_closeCustom(){const e=this,t=e,{customStore:o}=t,r=e.computeCustomOpts;return o.visible&&(o.visible=!1,r.immediate||e.handleCustom()),e.$nextTick()},_toggleCustom(){const e=this,t=e,{customStore:o}=t;return o.visible?e.closeCustom():e.openCustom()},_saveCustom(){const e=this,t=e,{customColumnList:o,aggHandleFields:r,rowGroupList:n}=t,i=e.computeCustomOpts,{allowVisible:s,allowSort:a,allowFixed:c,allowResizable:d,allowGroup:u,allowValues:p}=i;return l.a.eachTree(o,(e,t,o,r,l)=>{if(l)e.fixed=l.fixed;else{if(a){const o=t+1;e.renderSortNumber=o}c&&(e.fixed=e.renderFixed)}d&&(!e.renderVisible||e.children&&!e.children.length||e.renderResizeWidth!==e.renderWidth&&(e.resizeWidth=e.renderResizeWidth,e.renderWidth=e.renderResizeWidth)),s&&(e.visible=e.renderVisible),u&&p&&(e.aggFunc=e.renderAggFn)}),t.isCustomStatus=!0,e.saveCustomStore("confirm").then(()=>{u&&p&&e.handlePivotTableAggregateData&&(n.length!==r.length||n.some((e,t)=>e.field!==r[t])?r.length?e.setRowGroups(r):e.clearRowGroups():e.handleUpdateAggData())})},_cancelCustom(){const{customColumnList:e,customStore:t}=this,{oldSortMaps:o,oldFixedMaps:r,oldVisibleMaps:n}=t,i=this.computeCustomOpts,{allowVisible:s,allowSort:a,allowFixed:c,allowResizable:d}=i;return l.a.eachTree(e,e=>{const t=e.getKey(),l=!!n[t],i=r[t]||"";s&&(e.renderVisible=l,e.visible=l),c&&(e.renderFixed=i,e.fixed=i),a&&(e.renderSortNumber=o[t]||0),d&&(e.renderResizeWidth=e.renderWidth)},{children:"children"}),this.$nextTick()},_resetCustom(e){const t=this,o=t,r=t,{rowGroupList:n}=o,{collectColumn:i}=r,s=t.computeCustomOpts,{checkMethod:a}=s,c=Object.assign({visible:!0,resizable:!0===e,fixed:!0===e,sort:!0===e,aggFunc:!0===e},e);return l.a.eachTree(i,e=>{c.resizable&&(e.resizeWidth=0),c.fixed&&(e.fixed=e.defaultFixed),c.sort&&(e.renderSortNumber=e.sortNumber),a&&!a({$table:t,column:e})||(e.visible=e.defaultVisible),c.aggFunc&&(e.aggFunc=e.defaultAggFunc,e.renderAggFn=e.defaultAggFunc),e.renderResizeWidth=e.renderWidth}),o.isCustomStatus=!1,t.saveCustomStore("reset"),t.handleCustom().then(()=>{if(c.aggFunc&&t.handlePivotTableAggregateData){const e=t.computeRowGroupFields;(e?e.length:n.length)?e&&e.length?t.setRowGroups(e):t.clearRowGroups():t.handleUpdateAggData()}})},_toggleCustomAllCheckbox(){const{customStore:e}=this,t=!e.isAll;return this.setCustomAllCheckbox(t)},_setCustomAllCheckbox(e){const t=this,o=t,{customStore:r}=o,{customColumnList:n}=o,i=t.computeCustomOpts,{checkMethod:s,visibleMethod:a}=i,c=!!e;i.immediate?(l.a.eachTree(n,e=>{a&&!a({$table:t,column:e})||s&&!s({$table:t,column:e})||(e.visible=c,e.renderVisible=c,e.halfVisible=!1)}),r.isAll=c,o.isCustomStatus=!0,t.handleCustom(),t.saveCustomStore("update:visible")):(l.a.eachTree(n,e=>{a&&!a({$table:t,column:e})||s&&!s({$table:t,column:e})||(e.renderVisible=c,e.halfVisible=!1)}),r.isAll=c),t.checkCustomStatus()},checkCustomStatus(){const e=this,t=e,o=e,{customStore:r}=t,{collectColumn:l}=o,n=e.computeCustomOpts,{checkMethod:i}=n;r.isAll=l.every(t=>!!i&&!i({$table:e,column:t})||t.renderVisible),r.isIndeterminate=!r.isAll&&l.some(t=>(!i||i({$table:e,column:t}))&&(t.renderVisible||t.halfVisible))},emitCustomEvent(e,t){(this.$xeGrid||this).dispatchEvent("custom",{type:e},t)},triggerCustomEvent(e){const t=this,o=t,{customStore:r}=o;r.visible?(this.closeCustom(),Po(t,"close",e)):(r.btnEl=e.target,this.openCustom(),Po(t,"open",e))},customOpenEvent(e){const t=this,o=t,{customStore:r}=o;r.visible&&(r.activeBtn=!0,r.btnEl=e.target,t.openCustom(),Po(t,"open",e))},customCloseEvent(e){const t=this,o=t,{customStore:r}=o;r.visible&&(r.activeBtn=!1,t.closeCustom(),Po(t,"close",e))},handleUpdateCustomColumn(){const e=this,{customStore:t}=e,{collectColumn:o}=this;if(t.visible){const r={},n={},i={};l.a.eachTree(o,e=>{const t=e.getKey();e.renderFixed=e.fixed,e.renderVisible=e.visible,e.renderResizeWidth=e.renderWidth,r[t]=e.renderSortNumber,n[t]=e.fixed,i[t]=e.visible}),t.oldSortMaps=r,t.oldFixedMaps=n,t.oldVisibleMaps=i,e.customColumnList=o.slice(0)}}}};const{getConfig:No,getIcon:Vo,getI18n:Wo,renderer:Go,globalResize:qo,globalEvents:Xo,globalMixins:Yo,renderEmptyElement:Ko}=a.b;function Uo(e){const t=e,o=e.computeRowField;t.currKeyField=o,t.isCurrDeepKey=Object(s.v)(o)}function Zo(e,t,o){const r=t,l=t,{showHeader:n,showFooter:i}=r,{tableData:s,tableColumn:a,tableGroupColumn:c,columnStore:d,footerTableData:u}=l,p="left"===o,h=p?d.leftList:d.rightList;return e("div",{ref:p?"refLeftContainer":"refRightContainer",class:`vxe-table--fixed-${o}-wrapper`},[n?e(Ze,{props:{fixedType:o,tableData:s,tableColumn:a,tableGroupColumn:c,fixedColumn:h},ref:o+"Header"}):Ko(t),e(Xe,{props:{fixedType:o,tableData:s,tableColumn:a,fixedColumn:h},ref:o+"Body"}),i?e(tt,{props:{footerTableData:u,tableColumn:a,fixedColumn:h,fixedType:o},ref:o+"Footer"}):Ko(t)])}function Qo(e,t){const o=t.$scopedSlots,r=t.$xeGrid,l=t.computeEmptyOpts,i=o.empty;let s="";const a={$table:t,$grid:r};if(i)s=i.call(t,a);else{const o=l.name?Go.get(l.name):null,r=o?o.renderTableEmpty||o.renderTableEmptyView||o.renderEmpty:null;s=r?Object(d.d)(r.call(t,e,l,a)):Object(n.d)(t.emptyText)||Wo("vxe.table.emptyText")}return s}const Jo=(e,t)=>{const o=t,r=t,{dragConfig:l}=o,{dragRow:n,dragCol:i,dragTipText:s}=r,a=t.computeColumnDragOpts,c=(t.computeRowDragOpts.slots||{}).tip||(l&&l.slots?l.slots.rowTip:null),d=(a.slots||{}).tip;return n&&c?t.callSlot(c,{row:n},e):i&&d?t.callSlot(d,{column:i},e):[e("span",s)]},er=(e,t)=>{const o=t,{dragRow:r,dragCol:l}=o,n=t.computeRowOpts,i=t.computeColumnOpts,s=t.computeRowDragOpts,a=t.computeColumnDragOpts;return n.drag||i.drag?e("div",{class:"vxe-table--drag-wrapper"},[e("div",{ref:"refDragRowLineElem",class:["vxe-table--drag-row-line",{"is--guides":s.showGuidesStatus}]}),e("div",{ref:"refDragColLineElem",class:["vxe-table--drag-col-line",{"is--guides":a.showGuidesStatus}]}),r&&s.showDragTip||l&&a.showDragTip?e("div",{ref:"refDragTipElem",class:"vxe-table--drag-sort-tip"},[e("div",{class:"vxe-table--drag-sort-tip-wrapper"},[e("div",{class:"vxe-table--drag-sort-tip-status"},[e("span",{class:["vxe-table--drag-sort-tip-normal-status",r?Vo().TABLE_DRAG_STATUS_ROW:Vo().TABLE_DRAG_STATUS_COLUMN]}),e("span",{class:["vxe-table--drag-sort-tip-sub-status",Vo().TABLE_DRAG_STATUS_SUB_ROW]}),e("span",{class:["vxe-table--drag-sort-tip-disabled-status",Vo().TABLE_DRAG_DISABLED]})]),e("div",{class:"vxe-table--drag-sort-tip-content"},Jo(e,t))])]):Ko(t)]):Ko(t)};function tr(e){const t=e.$refs.refElem;t&&t.clientWidth&&t.clientHeight&&e.recalculate()}function or(e,t){const o=t,r=t,n=t,i=t.$xeGrid,{treeConfig:a}=o,{expandColumn:c,isRowGroupStatus:d}=r,u=t.computeTableRowExpandedList,p=t.computeExpandOpts,{mode:h}=p;if("fixed"!==h)return Ko(t);const g=[e("div",{key:"repY",ref:"refRowExpandYSpaceElem"})];if(c){const{handleGetRowId:o}=Object(s.g)(t);u.forEach(r=>{const s=t.computeExpandOpts,{height:u,padding:p,indent:h}=s,{fullAllDataRowIdData:m,fullColumnIdData:f}=n,b=t.computeTreeOpts,{transform:x,seqMode:v}=b,C={},w=o(r),O=m[w],E=f[c.id]||{};let y=0,T=-1,R=-1,S=-1,j=-1;O&&(y=O.level,T=d||a&&x&&"increasing"===v?O._index+1:O.seq,S=O.index,j=O.$index,R=O._index),u&&(C.height=u+"px"),(d||a)&&(C.paddingLeft=y*(l.a.isNumber(h)?h:b.indent)+30+"px");let D=-1,F=-1,$=-1;E&&(D=E.index,F=E.$index,$=E._index);const k={$grid:i,$table:t,seq:T,column:c,columnIndex:D,$columnIndex:F,_columnIndex:$,fixed:"",type:"body",level:y,rowid:w,row:r,rowIndex:S,$rowIndex:j,_rowIndex:R,isHidden:!1,isEdit:!1,visibleData:[],data:[],items:[]};g.push(e("div",{key:w,class:["vxe-body--row-expanded-cell",{"is--padding":p,"is--ellipsis":u}],attrs:{rowid:w},style:C},c.renderData(e,k)))})}return e("div",{ref:"refRowExpandElem",class:"vxe-table--row-expanded-wrapper"},g)}function rr(e,t){return e("div",{key:"vsx",ref:"refScrollXVirtualElem",class:"vxe-table--scroll-x-virtual"},[e("div",{ref:"refScrollXLeftCornerElem",class:"vxe-table--scroll-x-left-corner"}),e("div",{ref:"refScrollXWrapperElem",class:"vxe-table--scroll-x-wrapper"},[e("div",{ref:"refScrollXHandleElem",class:"vxe-table--scroll-x-handle",on:{scroll:t.triggerVirtualScrollXEvent}},[e("div",{ref:"refScrollXSpaceElem",class:"vxe-table--scroll-x-space"})])]),e("div",{ref:"refScrollXRightCornerElem",class:"vxe-table--scroll-x-right-corner"})])}function lr(e,t){return e("div",{ref:"refScrollYVirtualElem",class:"vxe-table--scroll-y-virtual"},[e("div",{ref:"refScrollYTopCornerElem",class:"vxe-table--scroll-y-top-corner"}),e("div",{ref:"refScrollYWrapperElem",class:"vxe-table--scroll-y-wrapper"},[e("div",{ref:"refScrollYHandleElem",class:"vxe-table--scroll-y-handle",on:{scroll:t.triggerVirtualScrollYEvent}},[e("div",{ref:"refScrollYSpaceElem",class:"vxe-table--scroll-y-space"})])]),e("div",{ref:"refScrollYBottomCornerElem",class:"vxe-table--scroll-y-bottom-corner"})])}function nr(e,t){const o=t,r=t,{showHeader:l,showFooter:n}=o,{overflowX:i,tableData:s,tableColumn:a,tableGroupColumn:c,footerTableData:d,columnStore:u}=r,{leftList:p,rightList:h}=u;return e("div",{ref:"refTableViewportElem",class:"vxe-table--viewport-wrapper"},[e("div",{class:"vxe-table--main-wrapper"},[l?e(Ze,{ref:"refTableHeader",props:{tableData:s,tableColumn:a,tableGroupColumn:c}}):Ko(t),e(Xe,{ref:"refTableBody",props:{tableData:s,tableColumn:a}}),n?e(tt,{ref:"refTableFooter",props:{footerTableData:d,tableColumn:a}}):Ko(t)]),e("div",{class:"vxe-table--fixed-wrapper"},[p&&p.length&&i?Zo(e,t,"left"):Ko(t),h&&h.length&&i?Zo(e,t,"right"):Ko(t)]),or(e,t)])}function ir(e,t){return e("div",{class:"vxe-table--layout-wrapper"},t.computeScrollbarYToLeft?[lr(e,t),nr(e,t)]:[nr(e,t),lr(e,t)])}t.a={name:"VxeTable",mixins:[Yo.sizeMixin,jt,kt,Xt,jo,$o,Bo,zo],props:ot.a,provide(){return{$xeTable:this,xecolgroup:null}},inject:{$xeTabs:{default:null},$xeGrid:{default:null}},data(){const e=l.a.uniqueId();return{xID:e,tId:e,staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],rowGroupColumn:null,expandColumn:null,hasFixedColumn:!1,treeNodeColumn:null,initStore:{filter:!1,import:!1,export:!1,custom:!1},customColumnList:[],upDataFlag:0,reColumnFlag:0,customStore:{btnEl:null,isAll:!1,isIndeterminate:!1,activeBtn:!1,activeWrapper:!1,visible:!1,maxHeight:0,oldSortMaps:{},oldFixedMaps:{},oldVisibleMaps:{}},filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],autoMinList:[],scaleList:[],scaleMinList:[],autoList:[],remainList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},focused:{row:null,column:null}},tooltipStore:{row:null,column:null,visible:!1,currOpts:{}},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasTree:!1,hasMerge:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isTitle:!1,isFooter:!1},visiblwRowsFlag:1,isRowGroupStatus:!1,rowGroupList:[],aggHandleFields:[],aggHandleAggColumns:[],rowGroupExpandedFlag:1,rowExpandedFlag:1,treeExpandedFlag:1,updateCheckboxFlag:1,pendingRowFlag:1,insertRowFlag:1,removeRowFlag:1,mergeBodyFlag:1,mergeFootFlag:1,rowHeightStore:{large:52,default:48,medium:44,small:40,mini:36},scrollVMLoading:!1,scrollYHeight:0,scrollYTop:0,isScrollYBig:!1,scrollXLeft:0,scrollXWidth:0,isScrollXBig:!1,rowExpandHeightFlag:1,calcCellHeightFlag:1,resizeHeightFlag:1,resizeWidthFlag:1,isCustomStatus:!1,isDragRowMove:!1,dragRow:null,isDragColMove:!1,dragCol:null,dragTipText:"",isDragResize:!1,isRowLoading:!1,isColLoading:!1,reScrollFlag:0,reLayoutFlag:0,footFlag:0}},computed:Object.assign(Object.assign({},{}),{tableId(){return this.computeTableId},computeTableId(){const e=this,t=e,o=e.$xeGrid,{id:r}=t;return r?l.a.isFunction(r)?""+(r({$table:e,$grid:o})||""):""+r:""},computeRowField(){const e=this.computeRowOpts;return""+(this.rowId||e.keyField||"_X_ROW_KEY")},validOpts(){return this.computeValidOpts},computeValidOpts(){return Object.assign({},No().table.validConfig,this.validConfig)},sXOpts(){return this.computeVirtualXOpts},computeSXOpts(){return this.computeVirtualXOpts},computeScrollXThreshold(){const e=this.computeVirtualXOpts,{threshold:t}=e;return t?l.a.toNumber(t):0},sYOpts(){return this.computeVirtualYOpts},computeSYOpts(){return this.computeVirtualYOpts},computeVirtualXOpts(){return Object.assign({},No().table.virtualXConfig||No().table.scrollX,this.virtualXConfig||this.scrollX)},computeVirtualYOpts(){return Object.assign({},No().table.virtualYConfig||No().table.scrollY,this.virtualYConfig||this.scrollY)},computeScrollbarOpts(){return Object.assign({},No().table.scrollbarConfig,this.scrollbarConfig)},computeScrollbarXToTop(){const e=this.computeScrollbarOpts;return!(!e.x||"top"!==e.x.position)},computeScrollbarYToLeft(){const e=this.computeScrollbarOpts;return!(!e.y||"left"!==e.y.position)},computeScrollYThreshold(){const e=this.computeVirtualYOpts,{threshold:t}=e;return t?l.a.toNumber(t):0},rowHeightMaps(){return this.computeRowHeightMaps},computeRowHeightMaps(){return this.rowHeightStore},computeDefaultRowHeight(){const e=this.computeSize;return this.computeRowHeightMaps[e||"default"]||18},columnOpts(){return this.computeColumnOpts},computeColumnOpts(){return Object.assign({},No().table.columnConfig,this.columnConfig)},computeCurrentColumnOpts(){return Object.assign({},No().table.currentColumnConfig,this.currentColumnConfig)},computeCellOpts(){const e=Object.assign({},No().table.cellConfig,this.cellConfig);return e.height&&(e.height=l.a.toNumber(e.height)),e},computeHeaderCellOpts(){const e=Object.assign({},No().table.headerCellConfig,this.headerCellConfig),t=this.computeCellOpts;return e.height=l.a.toNumber(Object(s.j)(e.height||t.height)),e},computeFooterCellOpts(){const e=Object.assign({},No().table.footerCellConfig,this.footerCellConfig),t=this.computeCellOpts;return e.height=l.a.toNumber(Object(s.j)(e.height||t.height)),e},rowOpts(){return this.computeRowOpts},computeRowOpts(){return Object.assign({},No().table.rowConfig,this.rowConfig)},computeAggregateOpts(){return Object.assign({},No().table.aggregateConfig||No().table.rowGroupConfig,this.aggregateConfig||this.rowGroupConfig)},computeRowGroupOpts(){return this.computeAggregateOpts},computeCurrentRowOpts(){return Object.assign({},No().table.currentRowConfig,this.currentRowConfig)},computeRowDragOpts(){return Object.assign({},No().table.rowDragConfig,this.rowDragConfig)},computeColumnDragOpts(){return Object.assign({},No().table.columnDragConfig,this.columnDragConfig)},resizeOpts(){return this.computeResizeOpts},computeResizeOpts(){return Object.assign({},No().table.resizeConfig,this.resizeConfig)},resizableOpts(){return this.computeResizableOpts},computeResizableOpts(){return Object.assign({},No().table.resizableConfig,this.resizableConfig)},seqOpts(){return this.computeSeqOpts},computeSeqOpts(){return Object.assign({startIndex:0},No().table.seqConfig,this.seqConfig)},radioOpts(){return this.computeRadioOpts},computeRadioOpts(){return Object.assign({},No().table.radioConfig,this.radioConfig)},checkboxOpts(){return this.computeCheckboxOpts},computeCheckboxOpts(){return Object.assign({},No().table.checkboxConfig,this.checkboxConfig)},tooltipOpts(){return this.computeTooltipOpts},computeTooltipOpts(){return Object.assign({},No().tooltip,No().table.tooltipConfig,this.tooltipConfig)},tipConfig(){return Object.assign({},this.tooltipOpts)},computeTableTipConfig(){const{tooltipStore:e}=this,t=this.computeTooltipOpts;return Object.assign({},t,e.currOpts)},computeValidTipConfig(){const e=this.computeTooltipOpts;return Object.assign({},e)},validTipOpts(){return Object.assign({isArrow:!1},this.tooltipOpts)},editOpts(){return this.computeEditOpts},computeEditOpts(){return Object.assign({},No().table.editConfig,this.editConfig)},sortOpts(){return this.computeSortOpts},computeSortOpts(){return Object.assign({orders:["asc","desc",null]},No().table.sortConfig,this.sortConfig)},filterOpts(){return this.computeFilterOpts},computeFilterOpts(){return Object.assign({},No().table.filterConfig,this.filterConfig)},mouseOpts(){return this.computeMouseOpts},computeMouseOpts(){return Object.assign({},No().table.mouseConfig,this.mouseConfig)},areaOpts(){return this.computeAreaOpts},computeAreaOpts(){return Object.assign({},No().table.areaConfig,this.areaConfig)},keyboardOpts(){return this.computeKeyboardOpts},computeKeyboardOpts(){return Object.assign({},No().table.keyboardConfig,this.keyboardConfig)},clipOpts(){return this.computeClipOpts},computeClipOpts(){return Object.assign({},No().table.clipConfig,this.clipConfig)},fnrOpts(){return this.computeFNROpts},computeFNROpts(){return Object.assign({},No().table.fnrConfig,this.fnrConfig)},headerCtxMenu(){return this.computeHeaderMenu},computeHeaderMenu(){const e=this.computeMenuOpts.header;return e&&e.options?e.options:[]},bodyCtxMenu(){return this.computeBodyMenu},computeBodyMenu(){const e=this.computeMenuOpts.body;return e&&e.options?e.options:[]},footerCtxMenu(){return this.computeFooterMenu},computeFooterMenu(){const e=this.computeMenuOpts.footer;return e&&e.options?e.options:[]},isCtxMenu(){return this.computeIsMenu},computeIsMenu(){const e=this.computeMenuOpts,t=this.computeHeaderMenu,o=this.computeBodyMenu,r=this.computeFooterMenu;return!(!this.contextMenu&&!this.menuConfig||!Object(n.h)(e)||!(t.length||o.length||r.length))},ctxMenuList(){return this.computeMenuList},computeMenuList(){const{ctxMenuStore:e}=this,t=[];return e.list.forEach(e=>{e.forEach(e=>{t.push(e)})}),t},ctxMenuOpts(){return this.computeMenuOpts},computeMenuOpts(){return Object.assign({},No().table.menuConfig,this.contextMenu,this.menuConfig)},computeLeftFixedWidth(){const{columnStore:e}=this,{leftList:t}=e;let o=0;for(let e=0;e<t.length;e++){o+=t[e].renderWidth}return o},computeRightFixedWidth(){const{columnStore:e}=this,{rightList:t}=e;let o=0;for(let e=0;e<t.length;e++){o+=t[e].renderWidth}return o},exportOpts(){return this.computeExportOpts},computeExportOpts(){return Object.assign({},No().table.exportConfig,this.exportConfig)},importOpts(){return this.computeImportOpts},computeImportOpts(){return Object.assign({},No().table.importConfig,this.importConfig)},printOpts(){return this.computePrintOpts},computePrintOpts(){return Object.assign({},No().table.printConfig,this.printConfig)},expandOpts(){return this.computeExpandOpts},computeExpandOpts(){return Object.assign({},No().table.expandConfig,this.expandConfig)},treeOpts(){return this.computeTreeOpts},computeTreeOpts(){return Object.assign({},No().table.treeConfig,this.treeConfig)},emptyOpts(){return this.computeEmptyOpts},computeEmptyOpts(){return Object.assign({},No().table.emptyRender,this.emptyRender)},loadingOpts(){return this.computeLoadingOpts},computeLoadingOpts(){return Object.assign({},No().table.loadingConfig,this.loadingConfig)},computeCellOffsetWidth(){return this.border?Math.max(2,Math.ceil(this.scrollbarWidth/this.tableColumn.length)):1},customOpts(){return this.computeCustomOpts},computeCustomOpts(){return Object.assign({},No().table.customConfig,this.customConfig)},computeTableRowExpandedList(){const{tableData:e,rowExpandedFlag:t,expandColumn:o,rowGroupExpandedFlag:r,treeExpandedFlag:n}=this,{visibleDataRowIdData:i,rowExpandedMaps:s}=this,a=[];return e.length&&o&&t&&r&&n&&l.a.each(s,(e,t)=>{i[t]&&a.push(e)}),a},computeAutoWidthColumnList(){const{tableColumn:e,visibleColumn:t}=this;return e.length||t.length?t.filter(e=>"auto"===e.width||"auto"===e.minWidth):[]},computeFixedColumnSize(){const{tableColumn:e}=this,{collectColumn:t}=this;let o=0;return e.length&&t.length&&t.forEach(e=>{e.renderFixed&&o++}),o},fixedColumnSize(){return this.computeFixedColumnSize},computeIsMaxFixedColumn(){const e=this.computeFixedColumnSize,t=this.columnOpts,{maxFixedSize:o}=t;return!!o&&e>=o},computeTableBorder(){const{border:e}=this;return!0===e?"full":e||"default"},isAllCheckboxDisabled(){const{tableFullData:e,tableData:t,treeConfig:o,checkboxOpts:r}=this,{strict:l,checkMethod:n}=r;return!!l&&(!t.length&&!e.length||!!n&&e.every(e=>!n({row:e})))},computeVirtualScrollBars(){const{overflowX:e,scrollXLoad:t,overflowY:o,scrollYLoad:r}=this;return{x:e&&t,y:o&&r}},computeRowGroupFields(){return this.computeAggregateOpts.groupFields},computeRowGroupColumns(){const{rowGroupList:e}=this,{fullColumnFieldData:t}=this,o=[];return e.forEach(e=>{const r=t[e.field];r&&o.push(r.column)}),o},tabsResizeFlag(){const e=this.$xeTabs;return e?e.reactData.resizeFlag:null},computeVxeLanguage:()=>a.b.getLanguage()}),watch:{data(e){const t=this,o=t,{initStatus:r}=this;e&&e.length>=5e4&&Object(h.b)("vxe.error.errLargeData",["loadData(data), reloadData(data)"]),this.loadTableData(e||[],!1).then(()=>{const{scrollXLoad:e,scrollYLoad:l,expandColumn:n}=o,i=t.computeExpandOpts;this.inited=!0,this.initStatus=!0,r||this.handleLoadDefaults(),(e||l)&&n&&"fixed"!==i.mode&&Object(h.b)("vxe.error.scrollErrProp",["column.type=expand"]),this.recalculate()})},staticColumns(e){this.handleColumn(l.a.clone(e))},tableColumn(){this.analyColumnWidth()},upDataFlag(){this.$nextTick().then(()=>this.updateData())},reColumnFlag(){this.$nextTick().then(()=>this.refreshColumn())},computeSize(){this.reScrollFlag++},showHeader(){this.reScrollFlag++},showFooter(){this.reScrollFlag++},overflowX(){this.reScrollFlag++},overflowY(){this.reScrollFlag++},reScrollFlag(){const e=this;e.$nextTick(()=>{e.recalculate(!0).then(()=>e.refreshScroll())})},height(){this.reLayoutFlag++},maxHeight(){this.reLayoutFlag++},computeScrollbarXToTop(){this.reLayoutFlag++},computeScrollbarYToLeft(){this.reLayoutFlag++},computeVxeLanguage(){this.reLayoutFlag++},reLayoutFlag(){const e=this;e.$nextTick(()=>e.recalculate(!0))},footerData(){this.footFlag++},footFlag(){this.updateFooter()},syncResize(e){const t=this;e&&(tr(t),t.$nextTick(()=>{tr(t),setTimeout(()=>tr(t))}))},tabsResizeFlag(){this.handleGlobalResizeEvent()},mergeCells(e){!function(e,t){const o=e;o.mergeBodyList=[],o.mergeBodyMaps={},o.mergeBodyCellMaps={},e.setMergeCells(t)}(this,e)},mergeFooterItems(e){!function(e,t){const o=e;o.mergeFooterList=[],o.mergeFooterMaps={},o.mergeFooterCellMaps={},e.setMergeFooterItems(t)}(this,e)},computeRowGroupFields(e){this.handleUpdateRowGroup(e)},computeRowField(){const e=this,t=e,o=e,{inited:r,tableFullData:l}=o;r&&(Uo(e),t.tableData=[],e.$nextTick(()=>{e.reloadData(l)}))}},created(){const e=this;Object.assign(this,{tZindex:0,currKeyField:"",isCurrDeepKey:!1,elemStore:{},scrollXStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},scrollYStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterGroupFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableFullGroupData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},fullDataRowIdData:{},visibleDataRowIdData:{},sourceDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},mergeBodyList:[],mergeBodyMaps:{},mergeFooterList:[],mergeFooterMaps:{},mergeBodyCellMaps:{},mergeFooterCellMaps:{},rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},rowGroupExpandedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},selectCheckboxMaps:{},pendingRowMaps:{},insertRowMaps:{},removeRowMaps:{},cvCacheMaps:{},swYSize:0,swYInterval:0,swYTotal:0}),Uo(this);const{data:t,exportConfig:o,importConfig:r,treeConfig:i,showOverflow:s,highlightCurrentRow:a,highlightCurrentColumn:c}=e,{scrollXStore:d,scrollYStore:u}=this,p=this.computeColumnOpts,g=this.computeEditOpts,m=this.computeTreeOpts,f=this.computeRadioOpts,b=this.computeCheckboxOpts,x=this.computeExpandOpts,v=this.computeRowOpts,C=this.computeCustomOpts,w=this.computeMouseOpts,O=this.computeExportOpts,E=this.computeImportOpts,y=this.computeCurrentRowOpts,T=this.computeCurrentColumnOpts,R=this.computeKeyboardOpts,S=this.computeAggregateOpts,{groupFields:j}=S;if(e.rowId&&Object(h.b)("vxe.error.delProp",["row-id","row-config.keyField"]),e.rowKey&&Object(h.b)("vxe.error.delProp",["row-key","row-config.useKey"]),e.columnKey&&Object(h.b)("vxe.error.delProp",["column-id","column-config.useKey"]),e.rowId||v.keyField||!(b.reserve||b.checkRowKeys||f.reserve||f.checkRowKey||x.expandRowKeys||m.expandRowKeys)||Object(h.b)("vxe.error.reqProp",["row-config.keyField"]),e.editConfig&&g.showStatus&&!e.keepSource&&Object(h.b)("vxe.error.reqProp",["keep-source"]),i&&(m.showLine||m.line)&&!s&&Object(h.b)("vxe.error.reqProp",["show-overflow"]),i&&!m.transform&&e.stripe&&Object(h.b)("vxe.error.noTree",["stripe"]),!e.showFooter||e.footerMethod||e.footerData||Object(h.b)("vxe.error.reqProp",["footer-data | footer-method"]),v.height&&Object(h.b)("vxe.error.delProp",["row-config.height","cell-config.height"]),this.tooltipOpts.enabled&&Object(h.b)("vxe.error.delProp",["tooltip-config.enabled","tooltip-config.showAll"]),this.highlightCurrentRow&&Object(h.b)("vxe.error.delProp",["highlight-current-row","row-config.isCurrent"]),this.highlightHoverRow&&Object(h.b)("vxe.error.delProp",["highlight-hover-row","row-config.isHover"]),this.highlightCurrentColumn&&Object(h.b)("vxe.error.delProp",["highlight-current-column","column-config.isCurrent"]),this.highlightHoverColumn&&Object(h.b)("vxe.error.delProp",["highlight-hover-column","column-config.isHover"]),e.resizable&&Object(h.b)("vxe.error.delProp",["resizable","column-config.resizable"]),r&&E.types&&!E.importMethod&&!l.a.includeArrays(l.a.keys(E._typeMaps),E.types)&&Object(h.b)("vxe.error.errProp",["export-config.types="+E.types.join(","),E.types.filter(e=>l.a.includes(l.a.keys(E._typeMaps),e)).join(",")||l.a.keys(E._typeMaps).join(",")]),o&&O.types&&!O.exportMethod&&!l.a.includeArrays(l.a.keys(O._typeMaps),O.types)&&Object(h.b)("vxe.error.errProp",["export-config.types="+O.types.join(","),O.types.filter(e=>l.a.includes(l.a.keys(O._typeMaps),e)).join(",")||l.a.keys(O._typeMaps).join(",")]),e.id||(e.customConfig?Object(n.h)(C):C.enabled)&&C.storage&&Object(h.a)("vxe.error.reqProp",["id"]),i&&b.range&&Object(h.a)("vxe.error.noTree",["checkbox-config.range"]),v.height&&!this.showOverflow&&Object(h.b)("vxe.error.notProp",["table.show-overflow"]),this.triggerCellAreaMousednEvent||(e.areaConfig&&Object(h.b)("vxe.error.notProp",["area-config"]),e.clipConfig&&Object(h.b)("vxe.error.notProp",["clip-config"]),e.fnrConfig&&Object(h.b)("vxe.error.notProp",["fnr-config"]),!w.area)){if(!this.handlePivotTableAggregateData){if(C.allowGroup)return void Object(h.a)("vxe.error.notProp",["custom-config.allowGroup"]);if(C.allowValues)return void Object(h.a)("vxe.error.notProp",["custom-config.allowValues"])}i&&v.drag&&!m.transform&&Object(h.b)("vxe.error.notSupportProp",["column-config.drag","tree-config.transform=false","tree-config.transform=true"]),e.dragConfig&&Object(h.b)("vxe.error.delProp",["drag-config","row-drag-config"]),e.rowGroupConfig&&Object(h.b)("vxe.error.delProp",["row-group-config","aggregate-config"]),S.countFields&&Object(h.b)("vxe.error.delProp",["row-group-config.countFields","column.agg-func"]),S.aggregateMethod&&Object(h.b)("vxe.error.delProp",["row-group-config.aggregateMethod","aggregate-config.countMethod"]),e.treeConfig&&m.children&&Object(h.b)("vxe.error.delProp",["tree-config.children","tree-config.childrenField"]),e.treeConfig&&m.line&&Object(h.b)("vxe.error.delProp",["tree-config.line","tree-config.showLine"]),w.area&&w.selected&&Object(h.b)("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),w.area&&e.treeConfig&&!m.transform&&Object(h.a)("vxe.error.noTree",["mouse-config.area"]),e.editConfig&&g.activeMethod&&Object(h.b)("vxe.error.delProp",["table.edit-config.activeMethod","table.edit-config.beforeEditMethod"]),e.treeConfig&&b.isShiftKey&&Object(h.a)("vxe.error.errConflicts",["tree-config","checkbox-config.isShiftKey"]),b.halfField&&Object(h.b)("vxe.error.delProp",["checkbox-config.halfField","checkbox-config.indeterminateField"]),this.contextMenu&&(Object(h.b)("vxe.error.delProp",["context-menu","menu-config"]),l.a.isObject(this.contextMenu)||Object(h.b)("vxe.error.errProp",["table.context-menu="+this.contextMenu,"table.context-menu={}"])),e.menuConfig&&!l.a.isObject(e.menuConfig)&&Object(h.b)("vxe.error.errProp",["table.menu-config="+e.menuConfig,"table.menu-config={}"]),e.exportConfig&&!l.a.isObject(e.exportConfig)&&Object(h.b)("vxe.error.errProp",["table.export-config="+e.exportConfig,"table.export-config={}"]),e.importConfig&&!l.a.isObject(e.importConfig)&&Object(h.b)("vxe.error.errProp",["table.import-config="+e.importConfig,"table.import-config={}"]),e.printConfig&&!l.a.isObject(e.printConfig)&&Object(h.b)("vxe.error.errProp",["table.print-config="+e.printConfig,"table.print-config={}"]),e.treeConfig&&!l.a.isObject(e.treeConfig)&&Object(h.b)("vxe.error.errProp",["table.tree-config="+e.treeConfig,"table.tree-config={}"]),e.customConfig&&!l.a.isObject(e.customConfig)&&Object(h.b)("vxe.error.errProp",["table.custom-config="+e.customConfig,"table.custom-config={}"]),e.editConfig&&!l.a.isObject(e.editConfig)&&Object(h.b)("vxe.error.errProp",["table.edit-config="+e.editConfig,"table.edit-config={}"]),e.emptyRender&&!l.a.isObject(e.emptyRender)&&Object(h.b)("vxe.error.errProp",["table.empty-render="+e.emptyRender,"table.empty-render={}"]),v.currentMethod&&Object(h.b)("vxe.error.delProp",["row-config.currentMethod","current-row-config.beforeSelectMethod"]),p.currentMethod&&Object(h.b)("vxe.error.delProp",["row-config.currentMethod","current-column-config.beforeSelectMethod"]),(v.isCurrent||a)&&e.keyboardConfig&&R.isArrow&&!l.a.isBoolean(y.isFollowSelected)&&Object(h.b)("vxe.error.notConflictProp",["row-config.isCurrent","current-row-config.isFollowSelected"]),(p.isCurrent||c)&&e.keyboardConfig&&R.isArrow&&!l.a.isBoolean(T.isFollowSelected)&&Object(h.b)("vxe.error.notConflictProp",["column-config.isCurrent","current-column-config.isFollowSelected"]),e.editConfig&&!this.insert&&Object(h.a)("vxe.error.reqModule",["Edit"]),e.editRules&&!this.validate&&Object(h.a)("vxe.error.reqModule",["Validator"]),(b.range||e.keyboardConfig||e.mouseConfig)&&!this.handleCellMousedownEvent&&Object(h.a)("vxe.error.reqModule",["Keyboard"]),(e.printConfig||e.importConfig||e.exportConfig)&&!this.exportData&&Object(h.a)("vxe.error.reqModule",["Export"]),Object.assign(u,{startIndex:0,endIndex:1,visibleSize:0}),Object.assign(d,{startIndex:0,endIndex:1,visibleSize:0}),this.handleUpdateRowGroup(j),this.loadTableData(t,!0).then(()=>{t&&t.length&&(this.inited=!0,this.initStatus=!0,this.handleLoadDefaults()),this.handleInitDefaults(),this.updateStyle()}),Xo.on(this,"paste",this.handleGlobalPasteEvent),Xo.on(this,"copy",this.handleGlobalCopyEvent),Xo.on(this,"cut",this.handleGlobalCutEvent),Xo.on(this,"mousedown",this.handleGlobalMousedownEvent),Xo.on(this,"blur",this.handleGlobalBlurEvent),Xo.on(this,"mousewheel",this.handleGlobalMousewheelEvent),Xo.on(this,"keydown",this.handleGlobalKeydownEvent),Xo.on(this,"resize",this.handleGlobalResizeEvent),Xo.on(this,"contextmenu",this.handleGlobalContextmenuEvent),this.preventEvent(null,"created")}else Object(h.a)("vxe.error.notProp",["mouse-config.area"])},mounted(){const e=this,t=e,o=e.computeColumnOpts,r=e.computeRowOpts,l=e.computeCustomOpts,n=e.computeVirtualYOpts;(o.drag||r.drag||l.allowSort)&&Object(i.j)();const{$listeners:s}=this;!this.menuConfig&&(s["menu-click"]||s["cell-menu"]||s["header-cell-menu"]||s["footer-cell-menu"])&&Object(h.b)("vxe.error.reqProp",["menu-config"]),this.tooltipConfig||!s["cell-mouseenter"]&&!s["cell-mouseleave"]||Object(h.b)("vxe.error.reqProp",["tooltip-config"]);const c=a.b.getComponent("VxeLoading"),d=a.b.getComponent("VxeTooltip");if(e.$nextTick(()=>{if(t.loading&&(c||this.$scopedSlots.loading||(Object(h.a)("vxe.error.errProp",["loading=true","loading=false | <template #loading>...</template>"]),Object(h.a)("vxe.error.reqComp",["vxe-loading"]))),(!0===t.showOverflow||"tooltip"===t.showOverflow||!0===t.showHeaderOverflow||"tooltip"===t.showHeaderOverflow||!0===t.showFooterOverflow||"tooltip"===t.showFooterOverflow||t.tooltipConfig||t.editRules)&&(d||(!0===t.showOverflow&&Object(h.a)("vxe.error.errProp",["show-overflow=true","show-overflow=title"]),"tooltip"===t.showOverflow&&Object(h.a)("vxe.error.errProp",["show-overflow=tooltip","show-overflow=title"]),!0===t.showHeaderOverflow&&Object(h.a)("vxe.error.errProp",["show-header-overflow=true","show-header-overflow=title"]),"tooltip"===t.showHeaderOverflow&&Object(h.a)("vxe.error.errProp",["show-header-overflow=tooltip","show-header-overflow=title"]),!0===t.showFooterOverflow&&Object(h.a)("vxe.error.errProp",["show-footer-overflow=true","show-footer-overflow=title"]),"tooltip"===t.showFooterOverflow&&Object(h.a)("vxe.error.errProp",["show-footer-overflow=tooltip","show-footer-overflow=title"]),Object(h.a)("vxe.error.reqComp",["vxe-tooltip"]))),this.autoResize){const e=qo.create(()=>{this.autoResize&&this.recalculate(!0)});e.observe(this.$el),e.observe(this.getParentElem()),this.$resize=e}}),"scroll"!==n.mode){const t=e.$refs.refTableViewportElem;t&&t.addEventListener("wheel",e.triggerBodyWheelEvent,{passive:!1})}e.preventEvent(null,"mounted")},activated(){this.recalculate().then(()=>this.refreshScroll()),this.preventEvent(null,"activated")},deactivated(){this.preventEvent(null,"deactivated")},beforeDestroy(){const e=this,t=e,o=e.$refs.refTableViewportElem;o&&o.removeEventListener("wheel",e.triggerBodyWheelEvent),t.cvCacheMaps={},t.prevDragRow=null,t.prevDragCol=null,this.$resize&&this.$resize.disconnect(),this.closeFilter(),this.closeMenu(),this.preventEvent(null,"beforeDestroy")},destroyed(){Xo.off(this,"paste"),Xo.off(this,"copy"),Xo.off(this,"cut"),Xo.off(this,"mousedown"),Xo.off(this,"blur"),Xo.off(this,"mousewheel"),Xo.off(this,"keydown"),Xo.off(this,"resize"),Xo.off(this,"contextmenu"),this.preventEvent(null,"destroyed")},render(e){const t=a.b.getComponent("VxeLoading"),o=a.b.getComponent("VxeTooltip"),r=this,l=r.$xeGrid,n=r,i=r.$scopedSlots,s=r,{xID:c}=r,{loading:d,stripe:u,showHeader:p,height:h,treeConfig:g,mouseConfig:m,showFooter:f,highlightCell:b,highlightHoverRow:x,highlightHoverColumn:v,editConfig:C,editRules:w}=n,{isGroup:O,overflowX:E,overflowY:y,scrollXLoad:T,scrollYLoad:R,tableData:S,initStore:j,isRowGroupStatus:D,columnStore:F,filterStore:$,customStore:k}=s,{leftList:M,rightList:A}=F,I=i.loading,L=r.computeTableTipConfig,_=r.computeValidTipConfig,B=r.computeValidOpts,H=r.computeCheckboxOpts,P=r.computeTreeOpts,z=r.computeRowOpts,N=r.computeColumnOpts,V=r.computeSize,W=r.computeTableBorder,G=r.computeMouseOpts,q=r.computeAreaOpts,X=r.computeLoadingOpts,Y=r.computeIsMenu,K=s.isColLoading||s.isRowLoading||d,U=r.computeResizableOpts,Z=m&&G.area,Q=r.computeColumnDragOpts,J=r.computeScrollbarXToTop,ee=r.computeScrollbarYToLeft;return e("div",{ref:"refElem",class:["vxe-table","vxe-table--render-default","tid_"+c,"border--"+W,"sx-pos--"+(J?"top":"bottom"),"sy-pos--"+(ee?"left":"right"),{["size--"+V]:V,["valid-msg--"+B.msgMode]:!!w,"vxe-editable":!!C,"old-cell-valid":w&&"obsolete"===No().cellVaildMode,"cell--highlight":b,"cell--selected":m&&G.selected,"cell--area":Z,"header-cell--area":Z&&q.selectCellByHeader,"body-cell--area":Z&&q.selectCellByBody,"row--highlight":z.isHover||x,"column--highlight":N.isHover||v,"checkbox--range":H.range,"col--drag-cell":N.drag&&"cell"===Q.trigger,"is--header":p,"is--footer":f,"is--group":O,"is-row-group":D,"is--tree-line":g&&(P.showLine||P.line),"is--fixed-left":M.length,"is--fixed-right":A.length,"is--animat":!!n.animat,"is--round":n.round,"is--stripe":!g&&u,"is--loading":K,"is--empty":!K&&!S.length,"is--scroll-y":y,"is--scroll-x":E,"is--virtual-x":T,"is--virtual-y":R}],attrs:{spellcheck:!1},on:{keydown:this.keydownEvent}},[e("div",{class:"vxe-table-slots",ref:"hideColumn"},this.$slots.default),e("div",{ref:"refVarElem",class:"vxe-table-vars"},[e("div",{class:"vxe-table-var-default"}),e("div",{class:"vxe-table-var-medium"}),e("div",{class:"vxe-table-var-small"}),e("div",{class:"vxe-table-var-mini"})]),e("div",{key:"tw",class:"vxe-table--render-wrapper"},J?[rr(e,r),ir(e,r)]:[ir(e,r),rr(e,r)]),e("div",{key:"tn",ref:"refEmptyPlaceholder",class:"vxe-table--empty-placeholder"},[e("div",{class:"vxe-table--empty-content"},Qo(e,r))]),e("div",{key:"tl",class:"vxe-table--border-line"}),e("div",{key:"tcl",ref:"refColResizeBar",class:"vxe-table--resizable-col-bar"},U.showDragTip?[e("div",{ref:"refColResizeTip",class:"vxe-table--resizable-number-tip"})]:[]),e("div",{key:"trl",ref:"refRowResizeBar",class:"vxe-table--resizable-row-bar"},U.showDragTip?[e("div",{class:"vxe-table--resizable-number-tip"})]:[]),t?e(t,{key:"lg",class:"vxe-table--loading",props:{value:K,icon:X.icon,text:X.text},scopedSlots:I?{default:()=>r.callSlot(I,{$table:r,$grid:l,loading:K},e)}:{}}):I?e("div",{class:["vxe-loading--custom-wrapper",{"is--visible":K}]},r.callSlot(I,{$table:r,$grid:l,loading:K},e)):Ko(r),j.custom?e(ct,{key:"cs",ref:"refTableCustom",props:{customStore:k}}):Ko(r),j.filter?e(gt,{key:"tf",ref:"refTableFilter",props:{filterStore:$}}):Ko(r),j.import&&this.importConfig?e(vt,{key:"it",props:{defaultOptions:this.importParams,storeData:this.importStore}}):Ko(r),j.export&&(this.exportConfig||this.printConfig)?e(yt,{key:"et",props:{defaultOptions:this.exportParams,storeData:this.exportStore}}):Ko(r),Y?e(Rt,{key:"tm",ref:"refTableMenu",props:{ctxMenuStore:this.ctxMenuStore,ctxMenuOpts:this.ctxMenuOpts}}):Ko(r),er(e,this),e("div",{},[o?e(o,{key:"ctp",ref:"refCommTooltip",props:{isArrow:!1,enterable:!1}}):Ko(r),o?e(o,{key:"btp",ref:"refTooltip",props:{theme:L.theme,enterable:L.enterable,enterDelay:L.enterDelay,leaveDelay:L.leaveDelay,useHTML:L.useHTML}}):Ko(r),o&&this.editRules&&B.showMessage&&("default"===B.message?!h:"tooltip"===B.message)?e(o,{key:"vtp",ref:"refValidTooltip",class:[{"old-cell-valid":w&&"obsolete"===No().cellVaildMode},"vxe-table--valid-error"],props:{theme:_.theme,enterable:_.enterable,enterDelay:_.enterDelay,leaveDelay:_.leaveDelay}}):Ko(r)])])},methods:Pe}}}]);