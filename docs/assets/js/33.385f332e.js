(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{573:function(e,t,o){"use strict";o.r(t),o.d(t,"install",(function(){return na})),o.d(t,"version",(function(){return x})),o.d(t,"setTheme",(function(){return v})),o.d(t,"getTheme",(function(){return C})),o.d(t,"setConfig",(function(){return w})),o.d(t,"getConfig",(function(){return E})),o.d(t,"setIcon",(function(){return y})),o.d(t,"getIcon",(function(){return T})),o.d(t,"setLanguage",(function(){return R})),o.d(t,"setI18n",(function(){return S})),o.d(t,"getI18n",(function(){return O})),o.d(t,"globalEvents",(function(){return $})),o.d(t,"globalResize",(function(){return F})),o.d(t,"renderer",(function(){return D})),o.d(t,"validators",(function(){return k})),o.d(t,"menus",(function(){return M})),o.d(t,"formats",(function(){return I})),o.d(t,"commands",(function(){return A})),o.d(t,"interceptor",(function(){return L})),o.d(t,"clipboard",(function(){return _})),o.d(t,"log",(function(){return H})),o.d(t,"use",(function(){return P})),o.d(t,"setup",(function(){return B})),o.d(t,"config",(function(){return z})),o.d(t,"t",(function(){return j})),o.d(t,"_t",(function(){return G})),o.d(t,"VXETable",(function(){return V})),o.d(t,"saveFile",(function(){return N})),o.d(t,"readFile",(function(){return W})),o.d(t,"print",(function(){return q})),o.d(t,"modal",(function(){return X})),o.d(t,"VxeUI",(function(){return r.c})),o.d(t,"VxeTable",(function(){return ea})),o.d(t,"Table",(function(){return ta})),o.d(t,"VxeColumn",(function(){return Rt})),o.d(t,"Column",(function(){return St})),o.d(t,"VxeColgroup",(function(){return $t})),o.d(t,"Colgroup",(function(){return Ft})),o.d(t,"VxeGrid",(function(){return ai})),o.d(t,"Grid",(function(){return si})),o.d(t,"VxeToolbar",(function(){return oa})),o.d(t,"Toolbar",(function(){return ra}));var r=o(279),l=o(278),n=o.n(l),i=o(376);function a(e){return e&&!1!==e.enabled}function s(e){return null==e||""===e}function c(e){const t=e.name,o=n.a.lastIndexOf(t,"."),r=t.substring(o+1,t.length).toLowerCase();return{filename:t.substring(0,o),type:r}}function d(){return i.a.getNext()}function u(){return i.a.getCurrent()}function p(e){return e&&e.children&&e.children.length>0}function h(e,t){if(e){const o=r.c.getConfig().translate;return n.a.toValueString(o?o(""+e,t):e)}return""}function g(e,t){return""+(s(e)?t?r.c.getConfig().emptyCell:"":e)}function m(e){return""===e||n.a.eqNull(e)}function f(e,t){return e?n.a.isFunction(e)?e(t):e:""}const x="3.18.15";r.c.version=x,r.c.tableVersion=x,r.c.setConfig({emptyCell:"　",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,padding:!0,minHeight:144,resizeConfig:{},resizableConfig:{dragMode:"auto",showDragTip:!0,isSyncAutoHeight:!0,isSyncAutoWidth:!0,minHeight:18},radioConfig:{strict:!0},rowDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},columnDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},headerTooltipConfig:{enterable:!0},footerTooltipConfig:{enterable:!0},validConfig:{showMessage:!0,autoClear:!0,autoPos:!0,message:"inline",msgMode:"single",theme:"beautify"},columnConfig:{autoOptions:{isCalcHeader:!0,isCalcBody:!0,isCalcFooter:!0},maxFixedSize:4},cellConfig:{padding:!0},headerCellConfig:{height:"unset"},footerCellConfig:{height:"unset"},customConfig:{allowVisible:!0,allowResizable:!0,allowFixed:!0,allowSort:!0,showFooter:!0,placement:"top-right",storeOptions:{visible:!0,resizable:!0,sort:!0,fixed:!0},modalOptions:{showMaximize:!0,mask:!0,lockView:!0,resize:!0,escClosable:!0},drawerOptions:{mask:!0,lockView:!0,escClosable:!0,resize:!0}},sortConfig:{showIcon:!0,allowClear:!0,allowBtn:!0,iconLayout:"vertical"},filterConfig:{multiple:!0,showIcon:!0},aggregateConfig:{padding:!0,rowField:"id",parentField:"_X_ROW_PARENT_KEY",childrenField:"_X_ROW_CHILDREN",mapChildrenField:"_X_ROW_CHILD_LIST",indent:20,showIcon:!0,maxGroupSize:4,showAggFuncTitle:!0},treeConfig:{padding:!0,rowField:"id",parentField:"parentId",childrenField:"children",hasChildField:"hasChild",mapChildrenField:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0,mode:"fixed"},editConfig:{showIcon:!0,showAsterisk:!0,autoFocus:!0},importConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},exportConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},printConfig:{},mouseConfig:{extension:!0},keyboardConfig:{isAll:!0,isEsc:!0},areaConfig:{autoClear:!0,selectCellByHeader:!0,selectCellByBody:!0,extendDirection:{top:!0,left:!0,bottom:!0,right:!0}},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},virtualXConfig:{gt:24,preSize:0,oSize:0},virtualYConfig:{gt:100,preSize:1,oSize:0},scrollbarConfig:{x:{visible:!0},y:{visible:!0}}},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,showLoading:!0,showResponseMsg:!0,showActionMsg:!0,response:{list:null,result:"result",total:"page.total",message:"message"}}},toolbar:{},gantt:{}});const b="vxe-table-icon-";r.c.setIcon({TABLE_SORT_ASC:b+"caret-up",TABLE_SORT_DESC:b+"caret-down",TABLE_FILTER_NONE:b+"funnel",TABLE_FILTER_MATCH:b+"funnel",TABLE_EDIT:b+"edit",TABLE_TITLE_PREFIX:b+"question-circle-fill",TABLE_TITLE_SUFFIX:b+"question-circle-fill",TABLE_TREE_LOADED:b+"spinner roll",TABLE_TREE_OPEN:b+"caret-right rotate90",TABLE_TREE_CLOSE:b+"caret-right",TABLE_EXPAND_LOADED:b+"spinner roll",TABLE_EXPAND_OPEN:b+"arrow-right rotate90",TABLE_EXPAND_CLOSE:b+"arrow-right",TABLE_CHECKBOX_CHECKED:b+"checkbox-checked-fill",TABLE_CHECKBOX_UNCHECKED:b+"checkbox-unchecked",TABLE_CHECKBOX_INDETERMINATE:b+"checkbox-indeterminate-fill",TABLE_CHECKBOX_DISABLED_UNCHECKED:b+"checkbox-unchecked-fill",TABLE_RADIO_CHECKED:b+"radio-checked-fill",TABLE_RADIO_UNCHECKED:b+"radio-unchecked",TABLE_RADIO_DISABLED_UNCHECKED:b+"radio-unchecked-fill",TABLE_CUSTOM_SORT:b+"drag-handle",TABLE_MENU_OPTIONS:b+"arrow-right",TABLE_DRAG_ROW:b+"drag-handle",TABLE_DRAG_COLUMN:b+"drag-handle",TABLE_DRAG_STATUS_ROW:b+"sort",TABLE_DRAG_STATUS_SUB_ROW:b+"add-sub",TABLE_DRAG_STATUS_AGG_GROUP:b+"grouping",TABLE_DRAG_STATUS_AGG_VALUES:b+"values",TABLE_DRAG_STATUS_COLUMN:b+"swap",TABLE_DRAG_DISABLED:b+"no-drop",TABLE_ROW_GROUP_OPEN:b+"arrow-right rotate90",TABLE_ROW_GROUP_CLOSE:b+"arrow-right",TABLE_AGGREGATE_GROUPING:b+"grouping",TABLE_AGGREGATE_VALUES:b+"values",TABLE_AGGREGATE_SORT:b+"drag-handle",TABLE_AGGREGATE_DELETE:b+"close",TOOLBAR_TOOLS_REFRESH:b+"repeat",TOOLBAR_TOOLS_REFRESH_LOADING:b+"repeat roll",TOOLBAR_TOOLS_IMPORT:b+"upload",TOOLBAR_TOOLS_EXPORT:b+"download",TOOLBAR_TOOLS_PRINT:b+"print",TOOLBAR_TOOLS_FULLSCREEN:b+"fullscreen",TOOLBAR_TOOLS_MINIMIZE:b+"minimize",TOOLBAR_TOOLS_CUSTOM:b+"custom-column",TOOLBAR_TOOLS_FIXED_LEFT:b+"fixed-left",TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:b+"fixed-left-fill",TOOLBAR_TOOLS_FIXED_RIGHT:b+"fixed-right",TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:b+"fixed-right-fill"});const v=r.c.setTheme,C=r.c.getTheme,w=r.c.setConfig,E=r.c.getConfig,y=r.c.setIcon,T=r.c.getIcon,R=r.c.setLanguage,S=r.c.setI18n,O=r.c.getI18n,$=r.c.globalEvents,F=r.c.globalResize,D=r.c.renderer,k=r.c.validators,M=r.c.menus,I=r.c.formats,A=r.c.commands,L=r.c.interceptor,_=r.c.clipboard,H=r.c.log,P=r.c.use,B=e=>r.c.setConfig(e);r.c.setup=B;const z=e=>r.c.setConfig(e);r.c.config=z;const j=(e,t)=>r.c.getI18n(e,t);r.c.t=j;const G=(e,t)=>h(e,t);r.c._t=G;const V=r.c,N=e=>r.c.saveFile(e),W=e=>r.c.readFile(e),q=e=>r.c.print(e),X={get:e=>r.c.modal.get(e),close:e=>r.c.modal.close(e),open:e=>r.c.modal.open(e),alert:(e,t,o)=>r.c.modal.alert(e,t,o),confirm:(e,t,o)=>r.c.modal.confirm(e,t,o),message:(e,t)=>r.c.modal.message(e,t),notification:(e,t,o)=>r.c.modal.notification(e,t,o)};r.c;const Y={};let K;function U(){return K||(K=new Image,K.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),K}function Z(){return K||U()}function Q(e){return Y[e]||(Y[e]=new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g")),Y[e]}function J(e){return e&&/^\d+(px)?$/.test(e)}function ee(e){return e&&/^\d+%$/.test(e)}function te(e,t){return!!(e&&e.className&&e.className.match&&e.className.match(Q(t)))}function oe(e,t){e&&te(e,t)&&(e.className=e.className.replace(Q(t),""))}function re(e,t){e&&!te(e,t)&&(oe(e,t),e.className=`${e.className} ${t}`)}function le(e){return e.ctrlKey||e.metaKey}function ne(e,t="px"){return n.a.isNumber(e)||/^\d+$/.test(""+e)?`${e}${t}`:""+(e||"")}function ie(e,t){return e?e.querySelector(t):null}function ae(){const e=document.documentElement,t=document.body;return{scrollTop:e.scrollTop||t.scrollTop,scrollLeft:e.scrollLeft||t.scrollLeft,visibleHeight:e.clientHeight||t.clientHeight,visibleWidth:e.clientWidth||t.clientWidth}}function se(e){return e?e.offsetHeight:0}function ce(e){if(e){const t=getComputedStyle(e);return n.a.toNumber(t.paddingTop)+n.a.toNumber(t.paddingBottom)}return 0}function de(e,t){e&&(e.scrollTop=t)}function ue(e,t){e&&(e.scrollLeft=t)}function pe(e,t){const o="html"===t.type?e.innerText:e.textContent;e.getAttribute("title")!==o&&e.setAttribute("title",o)}function he(e,t,o,r){let l,n=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;for(;n&&n.nodeType&&n!==document;){if(o&&te(n,o)&&(!r||r(n)))l=n;else if(n===t)return{flag:!o||!!l,container:t,targetElem:l};n=n.parentNode}return{flag:!1}}function ge(e){const t=e.getBoundingClientRect(),o=t.top,r=t.left,{scrollTop:l,scrollLeft:n,visibleHeight:i,visibleWidth:a}=ae();return{boundingTop:o,top:l+o,boundingLeft:r,left:n+r,visibleHeight:i,visibleWidth:a}}const{log:me}=r.c,fe=me.create("warn","table v3.18.15"),xe=me.create("error","table v3.18.15"),{getI18n:be,formats:ve}=r.c;class Ce{constructor(e,t,{renderHeader:o,renderCell:r,renderFooter:l,renderData:i}={}){const a=e,s=e.$xeGrid,c=e.$xeGantt,d=s||c,{field:u,editRender:p}=t,h=s?s.computeProxyOpts:null,g=t.formatter,m=!n.a.isBoolean(t.visible)||t.visible,f=["seq","checkbox","radio","expand","html"];if(t.type&&-1===f.indexOf(t.type)&&fe("vxe.error.errProp",["type="+t.type,f.join(", ")]),(n.a.isBoolean(t.cellRender)||t.cellRender&&!n.a.isObject(t.cellRender))&&fe("vxe.error.errProp",["column.cell-render="+t.cellRender,"column.cell-render={}"]),(n.a.isBoolean(t.editRender)||t.editRender&&!n.a.isObject(t.editRender))&&fe("vxe.error.errProp",["column.edit-render="+t.editRender,"column.edit-render={}"]),"expand"===t.type){const{treeConfig:t}=a;t&&(e.treeOpts.showLine||e.treeOpts.line)&&xe("vxe.error.errConflicts",["tree-config.line","column.type=expand"])}if(t.remoteSort&&fe("vxe.error.delProp",["column.remote-sort","sort-config.remote"]),t.sortMethod&&fe("vxe.error.delProp",["column.sort-method","sort-config.sortMethod"]),g)if(n.a.isString(g)){const e=ve.get(g)||n.a[g];e&&n.a.isFunction(e.tableCellFormatMethod||e.cellFormatMethod)||xe("vxe.error.notFormats",[g])}else if(n.a.isArray(g)){const e=ve.get(g[0])||n.a[g[0]];e&&n.a.isFunction(e.tableCellFormatMethod||e.cellFormatMethod)||xe("vxe.error.notFormats",[g[0]])}t.aggFunc&&(e.handlePivotTableAggregateData||!0===t.aggFunc||xe("vxe.error.errProp",["column.agg-func="+t.aggFunc,"column.agg-func=true"])),u&&p&&(p.startField&&(""+p.startField).indexOf(u)>=0&&xe("vxe.error.modelConflicts",["field="+u,"edit-render.startField="+p.startField]),p.endField&&(""+p.endField).indexOf(u)>=0&&xe("vxe.error.modelConflicts",["field="+u,"edit-render.endField="+p.endField])),Object.assign(this,{type:t.type,property:t.field,field:u,title:t.title,width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,resizable:t.resizable,fixed:t.fixed,align:t.align,headerAlign:t.headerAlign,footerAlign:t.footerAlign,showOverflow:t.showOverflow,showHeaderOverflow:t.showHeaderOverflow,showFooterOverflow:t.showFooterOverflow,className:t.className,headerClassName:t.headerClassName,footerClassName:t.footerClassName,formatter:g,headerFormatter:t.headerFormatter,footerFormatter:t.footerFormatter,padding:t.padding,verticalAlign:t.verticalAlign,sortable:t.sortable,sortBy:t.sortBy,sortType:t.sortType,sortMethod:t.sortMethod,remoteSort:t.remoteSort,filters:Ve(t.filters),filterMultiple:!n.a.isBoolean(t.filterMultiple)||t.filterMultiple,filterMethod:t.filterMethod,filterResetMethod:t.filterResetMethod,filterRecoverMethod:t.filterRecoverMethod,filterRender:t.filterRender,rowGroupNode:t.rowGroupNode,treeNode:t.treeNode,dragSort:t.dragSort,rowResize:t.rowResize,cellType:t.cellType,cellRender:t.cellRender,editRender:p,contentRender:t.contentRender,headerExportMethod:t.headerExportMethod,exportMethod:t.exportMethod,footerExportMethod:t.footerExportMethod,titleHelp:t.titleHelp,titlePrefix:t.titlePrefix,titleSuffix:t.titleSuffix,aggFunc:t.aggFunc,params:t.params,id:t.colId||n.a.uniqueId("col_"),parentId:null,visible:m,defaultParentId:null,halfVisible:!1,defaultVisible:m,defaultFixed:t.fixed,defaultAggGroup:t.aggGroup,defaultAggFunc:t.aggFunc,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderAggFn:"",renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:o||t.renderHeader,renderCell:r||t.renderCell,renderFooter:l||t.renderFooter,renderData:i,slots:t.slots}),d&&h&&h.beforeColumn&&h.beforeColumn({$table:e,$grid:s,$gantt:c,column:this})}getTitle(){return h(this.title||("seq"===this.type?be("vxe.table.seqTitle"):""))}getKey(){const{type:e}=this;return this.field||(e?"type="+e:null)}update(e,t){"filters"!==e&&("field"===e&&(this.property=t),this[e]=t)}}const we=(e,t)=>{const o=[];return e.forEach(e=>{e.parentId=t?t.id:null,e.visible&&(e.children&&e.children.length&&e.children.some(e=>e.visible)?(o.push(e),o.push(...we(e.children,e))):o.push(e))}),o};function Ee(e,t,o){const r=e;return t||o?(r.intoRunScroll=!1,r.inVirtualScroll=!1,r.inWheelScroll=!1,r.inHeaderScroll=!1,r.inBodyScroll=!1,r.inFooterScroll=!1,r.scrollRenderType="",e.scrollTo(t,o)):e.clearScroll()}function ye(e){return e.map((e,t)=>t%2==0?Number(e)+1:".").join("")}function Te(){return n.a.uniqueId("row_")}function Re(e){const t=e,{currKeyField:o}=t;return o}function Se(e,t){const o=e,{isCurrDeepKey:r,currKeyField:l}=o;return t?Fe((r?De:Me)(t,l)):""}function Oe(e){const t=e,{isCurrDeepKey:o,currKeyField:r}=t,l=o?ke:Ie;return{rowKey:r,handleUpdateRowId:e=>e?l(e,r):""}}function $e(e){const t=e,{isCurrDeepKey:o,currKeyField:r}=t,l=o?De:Me;return{rowKey:r,handleGetRowId:e=>e?Fe(l(e,r)):""}}function Fe(e){return n.a.eqNull(e)?"":encodeURIComponent(e)}function De(e,t){return n.a.get(e,t)}function ke(e,t){let o=Fe(De(e,t));return m(o)&&(o=Te(),n.a.set(e,t,o)),o}function Me(e,t){return e[t]}function Ie(e,t){let o=Fe(Me(e,t));return m(o)&&(o=Te(),e[t]=o),o}function Ae(e){if(e){const t=getComputedStyle(e);return n.a.toNumber(t.paddingLeft)+n.a.toNumber(t.paddingRight)}return 0}function Le(e){if(e){const t=getComputedStyle(e),o=n.a.toNumber(t.marginLeft),r=n.a.toNumber(t.marginRight);return e.offsetWidth+o+r}return 0}function _e(e){return"unset"===e?0:e||0}function He(e,t){return t?n.a.isString(t)||n.a.isNumber(t)?e.getColumnByField(""+t):t:null}function Pe(e,t){if(t){const o=n.a.isString(t)||n.a.isNumber(t)?t:Se(e,t);return e.getRowById(o)}return null}function Be(e,t,o,r){return e.resizeHeight||t.height||o.height||e.height||r}function ze(e){const t=e.$xeTable,o=t,{staticColumns:r}=o,{$el:l,$xeColumn:i,columnConfig:a}=e,s=i?i.columnConfig:null;s?("vxe-table-column"===i.$options._componentTag?xe("vxe.error.groupTag",[`<vxe-table-colgroup title=${i.title} ...>`,`<vxe-table-column title=${i.title} ...>`]):"vxe-column"===i.$options._componentTag&&fe("vxe.error.groupTag",[`<vxe-colgroup title=${i.title} ...>`,`<vxe-column title=${i.title} ...>`]),s.children||(s.children=[]),a.defaultParentId=s.id,s.children.splice(n.a.arrayIndexOf(i.$el.children,l),0,a)):r.splice(n.a.arrayIndexOf(t.$refs.hideColumn.children,l),0,a)}function je(e){const t=e.$xeTable,{staticColumns:o}=t,{columnConfig:r}=e,l=n.a.findTree(o,e=>e===r);l&&l.items.splice(l.index,1)}function Ge(e,t){const o=e,{fullColumnIdData:r}=o;if(!t)return null;let l=t.parentId;for(;r[l];){const e=r[l].column;if(l=e.parentId,!l)return e}return t}function Ve(e){return e&&n.a.isArray(e)?e.map(({label:e,value:t,data:o,resetValue:r,checked:l})=>({label:e,value:t,data:o,resetValue:r,checked:!!l,_checked:!!l})):e}function Ne(e){const{$table:t,column:o,cell:r}=e,l=t,{showHeaderOverflow:i,resizableOpts:a}=t,{minWidth:s}=a;if(s){const t=n.a.isFunction(s)?s(e):s;if("auto"!==t)return Math.max(1,n.a.toNumber(t))}const{elemStore:c}=l,{showHeaderOverflow:d,minWidth:u}=o,p=n.a.isUndefined(d)||n.a.isNull(d)?i:d,h="title"===p||(!0===p||"tooltip"===p)||"ellipsis"===p;let g=n.a.floor(1.8*(n.a.toNumber(getComputedStyle(r).fontSize)||14))+(Ae(r)+Ae(ie(r,".vxe-cell")));if(h){const e=Le(ie(r,".vxe-cell--drag-handle")),t=Le(ie(r,".vxe-cell--checkbox")),o=Le(ie(r,".vxe-cell--required-icon")),l=Le(ie(r,".vxe-cell--edit-icon")),n=Le(ie(r,".vxe-cell-title-prefix-icon")),i=Le(ie(r,".vxe-cell-title-suffix-icon")),a=Le(ie(r,".vxe-cell--sort"));g+=e+t+o+l+n+i+Le(ie(r,".vxe-cell--filter"))+a}if(u){const e=Ue(c["main-body-scroll"]);if(e){if(ee(u)){const t=(e.clientWidth-1)/100;return Math.max(g,Math.floor(n.a.toInteger(u)*t))}if(J(u))return Math.max(g,n.a.toInteger(u))}}return g}const We={mini:3,small:2,medium:1,large:0};function qe(e){const t=e.computeSize;return t&&We[t]||0}function Xe(e,t){const{$table:o,row:r}=e,l=o,n=o,i=o,{showOverflow:a}=l,{scrollYLoad:s}=n,{fullAllDataRowIdData:c}=i,d=o.computeRowOpts,u=o.computeCellOpts,p=o.computeDefaultRowHeight,h=c[Se(o,r)],g=h.resizeHeight||u.height||d.height||h.height||p;let m=1;t&&(m=function e(t,o){let r=1;if(!t)return r;const{$table:l}=o,n=l,{treeExpandedFlag:i}=n,a=l,{treeExpandedMaps:s}=a,c=l.computeTreeOpts,{transform:d,mapChildrenField:u}=c,p=c.children||c.childrenField,h=t[d?u:p];if(h&&i&&s[Se(l,t)])for(let t=0;t<h.length;t++)r+=e(h[t],o);return r}(t,e));let f=g;const x=h.height;return s&&(a||(f=x||g)),f*m-(t?1:12-qe(o))}function Ye(e,t){return n.a.get(e,t.field)}function Ke(e,t,o){return n.a.set(e,t.field,o)}function Ue(e){return e?e.$el||e:null}function Ze(e){return e instanceof Ce}function Qe(e){const t=[];return e.forEach(e=>{t.push(...e.children&&e.children.length?Qe(e.children):[e])}),t}function Je(e,t){const o=e,r=e,l=e,{showOverflow:n}=o,{scrollYLoad:i,scrollYTop:a}=r,{elemStore:s,afterFullData:c,fullAllDataRowIdData:d,isResizeCellHeight:u}=l,p=e.computeRowOpts,h=e.computeCellOpts,g=e.computeDefaultRowHeight,m=e.computeLeftFixedWidth,f=e.computeRightFixedWidth,x=Ue(s["main-body-scroll"]),b=Se(e,t);if(x){const o=x.clientHeight,r=x.scrollTop,l=x.querySelector(`[rowid="${b}"]`);if(l){const t=l.offsetTop+(i?a:0),n=l.clientHeight;if(t<r||t>r+o)return e.scrollTo(null,t);if(t+n>=o+r)return e.scrollTo(null,r+n)}else if(i){if(!(u||h.height||p.height)&&n)return e.scrollTo(null,(e.findRowIndexOf(c,t)-1)*g);let l=0;const i=d[b],a=i.resizeHeight||h.height||p.height||i.height||g;for(let o=0;o<c.length;o++){const r=c[o],n=Se(e,r);if(r===t||n===b)break;const i=d[n];l+=i.resizeHeight||h.height||p.height||i.height||g}return l<r?e.scrollTo(null,l-m-1):e.scrollTo(null,l+a-(o-f-1))}}return Promise.resolve()}function et(e){return n.a.kebabCase(e)}function tt(e){switch(e.name){case"VxeInput":case"VxeTextarea":case"VxeNumberInput":case"VxePasswordInput":case"VxeSelect":case"VxeTreeSelect":case"VxeTableSelect":case"VxeDatePicker":case"VxeDateRangePicker":case"VxeIconPicker":case"VxeColorPicker":case"VxeSlider":case"VxeUpload":return"modelValue";case"select":return"change"}return"input"}function ot(e){switch(e.name){case"input":case"textarea":case"VxeInput":case"VxeTextarea":case"$input":case"$textarea":return"input"}return"change"}function rt(e){return null==e?[]:n.a.isArray(e)?e:[e]}const{getI18n:lt,getIcon:nt,renderer:it,formats:at,renderEmptyElement:st}=r.c;function ct(e,t){const{$table:o,column:r}=t,l=r.titlePrefix||r.titleHelp;return l?e("i",{class:["vxe-cell-title-prefix-icon",l.iconStatus?"theme--"+l.iconStatus:""],on:{mouseenter(e){o.triggerHeaderTitleEvent(e,l,t)},mouseleave(e){o.handleTargetLeaveEvent(e)}}},[e("i",{class:l.icon||nt().TABLE_TITLE_PREFIX})]):st(o)}function dt(e,t){const{$table:o,column:r}=t,l=r.titleSuffix;return l?e("i",{class:["vxe-cell-title-suffix-icon",l.iconStatus?"theme--"+l.iconStatus:""],on:{mouseenter(e){o.triggerHeaderTitleEvent(e,l,t)},mouseleave(e){o.handleTargetLeaveEvent(e)}}},[e("i",{class:l.icon||nt().TABLE_TITLE_SUFFIX})]):st(o)}function ut(e,t){const{$table:o}=t,r=o.$scopedSlots,l=o,{dragConfig:n}=l,i=o.computeRowDragOpts,{icon:a,trigger:s,disabledMethod:c}=i,d=c||(n?n.rowDisabledMethod:null),u=d&&d(t),p=r.rowDragIcon||r["row-drag-icon"],h={};return"cell"!==s&&(h.mousedown=e=>{u||o.handleCellDragMousedownEvent(e,t)},h.mouseup=o.handleCellDragMouseupEvent),e("span",{key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":u}],on:h},p?o.callSlot(p,t,e):[e("i",{class:a||(n?n.rowIcon:"")||nt().TABLE_DRAG_ROW})])}function pt(e,t,o){const{$table:r,column:l,level:i}=t,{dragSort:a}=l,s=r,{treeConfig:c,dragConfig:d}=s,u=r.computeRowOpts,p=r.computeRowDragOpts,h=r.computeTreeOpts,{showIcon:g,isPeerDrag:m,isCrossDrag:f,visibleMethod:x}=p,b=x||(d?d.rowVisibleMethod:null),v=[];return a&&u.drag&&(g||d&&d.showRowIcon)&&(!b||b(t))&&(c?h.transform&&(m||f||!i)&&v.unshift(ut(e,t)):v.unshift(ut(e,t))),v.concat(n.a.isArray(o)?o:[o])}function ht(e,t){const{$table:o,column:r}=t,l=o.$scopedSlots,{slots:n}=r,i=o.computeColumnOpts,a=o.computeColumnDragOpts,{showIcon:s,icon:c,trigger:d,isPeerDrag:u,isCrossDrag:p,visibleMethod:h,disabledMethod:g}=a;if(i.drag&&s&&(!h||h(t))&&!r.fixed&&(u||p||!r.parentId)){const r=g&&g(t),i=(n?n.columnDragIcon||n["column-drag-icon"]:null)||l.columnDragIcon||l["column-drag-icon"],a={};return"cell"!==d&&(a.mousedown=e=>{r||o.handleHeaderCellDragMousedownEvent(e,t)},a.mouseup=o.handleHeaderCellDragMouseupEvent),e("span",{key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":r}],on:a},i?o.callSlot(i,t,e):[e("i",{class:c||nt().TABLE_DRAG_COLUMN})])}return st(o)}function gt(e,t,o){return[ct(e,t),ht(e,t),...n.a.isArray(o)?o:[o],dt(e,t)]}function mt(e,t,o){const{$table:r,column:l}=t,i=r,a=r,{showHeaderOverflow:s}=i,{isRowGroupStatus:c}=a,{showHeaderOverflow:d}=l,u=r.computeHeaderTooltipOpts.showAll,p=n.a.eqNull(d)?s:d,h="title"===p,g=!0===p||"tooltip"===p,m={};(h||g||u)&&(m.mouseenter=e=>{a.isDragResize||(h?pe(e.currentTarget,l):(g||u)&&r.triggerHeaderTooltipEvent(e,t))}),(g||u)&&(m.mouseleave=e=>{a.isDragResize||(g||u)&&r.handleTargetLeaveEvent(e)});const f=function(e,t,o){return"html"===t.type&&n.a.isString(o)?e("span",{key:"ch",domProps:{innerHTML:o}}):e("span",{key:"ct"},rt(o))}(e,l,o);return[e("span",{class:"vxe-cell--title",on:m},c&&l.aggFunc&&r.getPivotTableAggregateRenderColTitles?r.getPivotTableAggregateRenderColTitles(e,l,f):[f])]}function ft(e){const{$table:t,row:o,column:r}=e;return g(t.getCellLabel(o,r),1)}function xt(e,t){const{column:o,row:r,$table:l}=t,n=l,i=l,{editConfig:s}=n,{isRowGroupStatus:c}=i,{type:d,treeNode:u,rowGroupNode:p,editRender:h}=o,g=l.computeAggregateOpts,{mode:m}=g,f=l.computeCheckboxOpts,x=l.computeEditOpts,b=u||c&&("column"===m?o.field===r.groupField:p);switch(d){case"seq":return b?Ct.renderDeepIndexCell(e,t):Ct.renderSeqCell(e,t);case"radio":return b?Ct.renderDeepRadioCell(e,t):Ct.renderRadioCell(e,t);case"checkbox":return f.checkField?b?Ct.renderDeepSelectionCellByProp(e,t):Ct.renderCheckboxCellByProp(e,t):b?Ct.renderDeepSelectionCell(e,t):Ct.renderCheckboxCell(e,t);case"expand":return Ct.renderExpandCell(e,t);case"html":return b?Ct.renderDeepHTMLCell(e,t):Ct.renderHTMLCell(e,t)}return a(s)&&h?"cell"===x.mode?b?Ct.renderDeepCellEdit(e,t):Ct.renderCellEdit(e,t):b?Ct.renderDeepRowEdit(e,t):Ct.renderRowEdit(e,t):b?Ct.renderDeepCell(e,t):Ct.renderDefaultCell(e,t)}function bt(e,t){const{column:o,$table:r}=t,l=r,{editConfig:n}=l,{type:i,filters:a,sortable:s,editRender:c}=o;switch(i){case"seq":return Ct.renderSeqHeader(e,t);case"radio":return Ct.renderRadioHeader(e,t);case"checkbox":return Ct.renderCheckboxHeader(e,t);case"html":if(a&&s)return Ct.renderSortAndFilterHeader(e,t);if(s)return Ct.renderSortHeader(e,t);if(a)return Ct.renderFilterHeader(e,t)}return n&&c?Ct.renderEditHeader(e,t):a&&s?Ct.renderSortAndFilterHeader(e,t):s?Ct.renderSortHeader(e,t):a?Ct.renderFilterHeader(e,t):Ct.renderDefaultHeader(e,t)}function vt(e,t){return Ct.renderDefaultFooter(e,t)}const Ct={createColumn(e,t){const{type:o}=t,r={renderHeader:bt,renderCell:xt,renderFooter:vt};return"expand"===o&&(r.renderData=Ct.renderExpandData),function(e,t,o){return Ze(t)?t:new Ce(e,t,o)}(e,t,r)},renderHeaderTitle(e,t){const{$table:o,column:r}=t,{slots:l,editRender:n,cellRender:i}=r,a=n||i;if(l&&l.header)return mt(e,t,o.callSlot(l.header,t,e));if(a){const r=it.get(a.name),l=r?r.renderTableHeader||r.renderHeader:null;if(l)return rt(mt(e,t,l.call(o,e,a,t)))}return mt(e,t,g(r.getTitle(),1))},renderDefaultHeader:(e,t)=>gt(e,t,Ct.renderHeaderTitle(e,t)),renderDefaultCell(e,t){const{$table:o,row:r,column:l}=t,n=o,i=o,{isRowGroupStatus:a}=n,{field:s,slots:c,editRender:d,cellRender:u,rowGroupNode:p,aggFunc:f}=l,x=d||u,b=c?c.default:null,v=c?c.groupContent||c["group-content"]:null;let C="";if(a&&s&&r.isAggregate){const n=r,{fullColumnFieldData:a}=i,c=o.computeAggregateOpts,{mode:d,showTotal:u,totalMethod:h,countFields:g,contentMethod:m,mapChildrenField:x}=c,b=c.calcValuesMethod||c.countMethod||c.aggregateMethod,w=n.groupField,E=n.groupContent,y=x&&n[x]||[],T=n.childCount,R=a[w]||{},S={$table:o,groupField:w,groupColumn:R?R.column:null,column:l,groupValue:E,childList:y,childCount:T,aggValue:null,children:y,totalValue:T};if(v)return pt(e,t,o.callSlot(v,Object.assign({groupField:w,groupContent:E,childList:y,childCount:T},t),e));("column"===d?s===n.groupField:p)?(C=E,m&&(C=""+m(S)),u&&(C=lt("vxe.table.rowGroupContentTotal",[C,h?h(S):T,T]))):o.getPivotTableAggregateCellAggValue?C=o.getPivotTableAggregateCellAggValue(t):(!0===f||g&&g.includes(s))&&b&&(S.aggValue=T,C=""+b(S))}else{if(b)return pt(e,t,o.callSlot(b,t,e));if(x){const r=it.get(x.name),l=r?r.renderTableDefault||r.renderDefault:null,n=r?r.renderTableCell||r.renderCell:null,i=d?n:l;if(i)return pt(e,t,rt(i.call(o,e,x,Object.assign({$type:d?"edit":"cell"},t))))}C=o.getCellLabel(r,l)}const w=d?d.placeholder:"";return pt(e,t,[e("span",{class:"vxe-cell--label"},[d&&m(C)?e("span",{class:"vxe-cell--placeholder"},g(h(w),1)):e("span",g(C,1))])])},renderDeepCell(e,t){return Ct.renderDeepNodeBtn(e,t,Ct.renderDefaultCell.call(this,e,t))},renderDefaultFooter:(e,t)=>function(e,t){const{$table:o,column:r,_columnIndex:l,row:i,items:a}=t,{slots:s,editRender:c,cellRender:d,footerFormatter:u}=r,p=c||d;if(s&&s.footer)return o.callSlot(s.footer,t,e);let h="";h=n.a.isArray(a)?a[l]:n.a.get(i,r.field);const m=Object.assign(t,{itemValue:h});if(u){if(n.a.isFunction(u))return""+u(m);const e=n.a.isArray(u),t=e?at.get(u[0]):at.get(u),o=t?t.tableFooterCellFormatMethod:null;return o?""+(e?o(m,...u.slice(1)):o(m)):""}if(p){const t=it.get(p.name),r=t?t.renderTableFooter||t.renderFooter:null;if(r)return rt(r.call(o,e,p,m))}return[g(h,1)]}(e,t),renderRowGroupBtn(e,t,o){const{$table:r}=t,l=r,n=r,{row:i,level:a}=t,{rowGroupExpandedFlag:s}=l,{rowGroupExpandedMaps:c}=n,d=r.computeAggregateOpts,{mode:u,padding:p,indent:h}=d,g=Se(r,i),m=!!s&&!!c[g];return e("div",{class:["vxe-row-group--tree-node",{"is--expanded":m}],style:"column"!==u&&p&&h?{paddingLeft:a*h+"px"}:void 0},[i.isAggregate?e("span",{class:"vxe-row-group--node-btn",on:{click(e){r.triggerRowGroupExpandEvent(e,t)}}},[e("i",{class:m?nt().TABLE_ROW_GROUP_OPEN:nt().TABLE_ROW_GROUP_CLOSE})]):st(r),e("div",{class:"vxe-row-group-cell"},o)])},renderTreeNodeBtn(e,t,o){const{$table:r,isHidden:l}=t,n=r,i=r,{treeExpandedFlag:a}=n,{fullAllDataRowIdData:s,treeExpandedMaps:c,treeExpandLazyLoadedMaps:d}=i,u=r.computeTreeOpts,{row:p,column:h,level:g}=t,{slots:m}=h,{padding:f,indent:x,lazy:b,trigger:v,iconLoaded:C,showIcon:w,iconOpen:E,iconClose:y}=u,T=u.children||u.childrenField,R=u.hasChild||u.hasChildField,S=p[T],O=S&&S.length,$=m?m.icon:null;let F=!1,D=!1,k=!1,M=!1;const I={};if($)return r.callSlot($,t,e);if(!l){const e=Se(r,p);if(D=!!a&&!!c[e],b){const t=s[e];k=!!d[e],F=p[R],M=!!t.treeLoaded}}return v&&"default"!==v||(I.click=e=>{r.triggerTreeExpandEvent(e,t)}),[e("div",{class:["vxe-cell--tree-node",{"is--active":D}],style:f&&x?{paddingLeft:g*x+"px"}:void 0},[w&&(b?M?O:O||F:O)?[e("div",{class:"vxe-cell--tree-btn",on:I},[e("i",{class:k?C||nt().TABLE_TREE_LOADED:D?E||nt().TABLE_TREE_OPEN:y||nt().TABLE_TREE_CLOSE})])]:null,e("div",{class:"vxe-tree-cell"},o)])]},renderDeepNodeBtn(e,t,o){const{$table:r,row:l,column:n}=t,{rowGroupNode:i}=n,a=r,{rowGroupList:s}=a;if(s.length){const a=r.computeAggregateOpts,{mode:s}=a;if("column"===s?n.field===l.groupField:i)return[Ct.renderRowGroupBtn(e,t,o)]}return[Ct.renderTreeNodeBtn(e,t,o)]},renderSeqHeader(e,t){const{$table:o,column:r}=t,{slots:l}=r;return gt(e,t,mt(e,t,l&&l.header?o.callSlot(l.header,t,e):g(r.getTitle(),1)))},renderSeqCell(e,t){const{$table:o,column:r}=t,l=o,{treeConfig:n}=l,i=o.computeSeqOpts,{slots:a}=r;if(a&&a.default)return pt(e,t,o.callSlot(a.default,t,e));const{seq:s}=t,c=i.seqMethod;return pt(e,t,[e("span",""+g(c?c(t):n?s:(i.startIndex||0)+s,1))])},renderDeepIndexCell:(e,t)=>Ct.renderDeepNodeBtn(e,t,Ct.renderSeqCell(e,t)),renderRadioHeader(e,t){const{$table:o,column:r}=t,{slots:l}=r,n=l?l.header:null,i=l?l.title:null;return gt(e,t,mt(e,t,n?o.callSlot(n,t,e):[e("span",{class:"vxe-radio--label"},i?o.callSlot(i,t,e):g(r.getTitle(),1))]))},renderRadioCell(e,t){const{$table:o,column:r,isHidden:l}=t,i=o,{selectRadioRow:a}=i,s=o.computeRadioOpts,{slots:c}=r,{labelField:d,checkMethod:u,visibleMethod:p}=s,{row:h}=t,g=c?c.default:null,m=c?c.radio:null,f=h===a,x=!p||p({$table:o,row:h});let b,v=!!u;l||(b={click(e){!v&&x&&o.triggerRadioRowEvent(e,t)}},u&&(v=!u({$table:o,row:h})));const C=Object.assign(Object.assign({},t),{checked:f,disabled:v,visible:x});if(m)return pt(e,t,o.callSlot(m,C,e));const w=[];return x&&w.push(e("span",{class:["vxe-radio--icon",f?nt().TABLE_RADIO_CHECKED:v?nt().TABLE_RADIO_DISABLED_UNCHECKED:nt().TABLE_RADIO_UNCHECKED]})),(g||d)&&w.push(e("span",{class:"vxe-radio--label"},g?o.callSlot(g,C,e):n.a.get(h,d))),pt(e,t,[e("span",{class:["vxe-cell--radio",{"is--checked":f,"is--disabled":v}],on:b},w)])},renderDeepRadioCell:(e,t)=>Ct.renderDeepNodeBtn(e,t,Ct.renderRadioCell(e,t)),renderCheckboxHeader(e,t){const{$table:o,column:r,isHidden:l}=t,i=o,{isAllSelected:a,isIndeterminate:s}=i,c=o.computeIsAllCheckboxDisabled,{slots:d}=r,u=d?d.header:null,p=d?d.title:null,h=o.computeCheckboxOpts,{checkStrictly:g,showHeader:m,headerTitle:f}=h,x=r.getTitle(),b={};l||(b.click=e=>{c||o.triggerCheckAllEvent(e,!a)});const v=Object.assign(Object.assign({},t),{checked:a,disabled:c,indeterminate:s});return gt(e,t,mt(e,v,u?o.callSlot(u,v,e):(g?m:!1!==m)?[e("span",{class:["vxe-cell--checkbox",{"is--checked":a,"is--disabled":c,"is--indeterminate":s}],attrs:{title:n.a.eqNull(f)?lt("vxe.table.allTitle"):""+(f||"")},on:b},[e("span",{class:["vxe-checkbox--icon",s?nt().TABLE_CHECKBOX_INDETERMINATE:a?nt().TABLE_CHECKBOX_CHECKED:c?nt().TABLE_CHECKBOX_DISABLED_UNCHECKED:nt().TABLE_CHECKBOX_UNCHECKED]})].concat(p||x?[e("span",{class:"vxe-checkbox--label"},p?o.callSlot(p,v,e):x)]:[]))]:[e("span",{class:"vxe-checkbox--label"},p?o.callSlot(p,v,e):x)]))},renderCheckboxCell(e,t){const{$table:o,row:r,column:l,isHidden:i}=t,a=o,s=o,c=o,{treeConfig:d}=a,{updateCheckboxFlag:u,isRowGroupStatus:p}=s,{selectCheckboxMaps:h,treeIndeterminateRowMaps:g}=c,m=o.computeAggregateOpts,{mapChildrenField:f}=m,x=o.computeCheckboxOpts,{labelField:b,checkMethod:v,visibleMethod:C}=x,{slots:w}=l,E=w?w.default:null,y=w?w.checkbox:null;let T=!1,R=!1,S=!0,O=!1;const $={};if(!i){const e=Se(o,r);if(R=!!u&&!!h[e],v&&p&&o.isAggregateRecord(r)){const e=r[f||""];e&&e.length&&!e.every(e=>!v({$table:o,row:e}))||(O=!0)}else S=!C||C({$table:o,row:r}),O=v?!v({$table:o,row:r}):!!v;(d||p)&&(T=!!g[e]),$.click=e=>{!O&&S&&o.triggerCheckRowEvent(e,t,!R)}}const F=Object.assign(Object.assign({},t),{checked:R,disabled:O,visible:S,indeterminate:T});if(y)return pt(e,t,o.callSlot(y,F,e));const D=[];return S&&D.push(e("span",{class:["vxe-checkbox--icon",T?nt().TABLE_CHECKBOX_INDETERMINATE:R?nt().TABLE_CHECKBOX_CHECKED:O?nt().TABLE_CHECKBOX_DISABLED_UNCHECKED:nt().TABLE_CHECKBOX_UNCHECKED]})),(E||b)&&D.push(e("span",{class:"vxe-checkbox--label"},E?o.callSlot(E,F,e):n.a.get(r,b))),pt(e,t,[e("span",{class:["vxe-cell--checkbox",{"is--checked":R,"is--disabled":O,"is--indeterminate":T,"is--hidden":!S}],on:$},D)])},renderDeepSelectionCell:(e,t)=>Ct.renderDeepNodeBtn(e,t,Ct.renderCheckboxCell(e,t)),renderCheckboxCellByProp(e,t){const{$table:o,row:r,column:l,isHidden:i}=t,a=o,s=o,c=o,{treeConfig:d}=a,{updateCheckboxFlag:u,isRowGroupStatus:p}=s,{treeIndeterminateRowMaps:h}=c,g=o.computeAggregateOpts,{mapChildrenField:m}=g,f=o.computeCheckboxOpts,{labelField:x,checkField:b,checkMethod:v,visibleMethod:C}=f,w=f.indeterminateField||f.halfField,{slots:E}=l,y=E?E.default:null,T=E?E.checkbox:null;let R=!1,S=!1,O=!0,$=!1;const F={};if(!i){const e=Se(o,r);if(S=!!u&&n.a.get(r,b),v&&p&&o.isAggregateRecord(r)){const e=r[m||""];e&&e.length&&!e.every(e=>!v({$table:o,row:e}))||($=!0)}else O=!C||C({$table:o,row:r}),$=v?!v({$table:o,row:r}):!!v;(d||p)&&(R=!!h[e]),F.click=e=>{!$&&O&&o.triggerCheckRowEvent(e,t,!S)}}const D=Object.assign(Object.assign({},t),{checked:S,disabled:$,visible:O,indeterminate:R});if(T)return pt(e,t,o.callSlot(T,D,e));const k=[];return O&&k.push(e("span",{class:["vxe-checkbox--icon",R?nt().TABLE_CHECKBOX_INDETERMINATE:S?nt().TABLE_CHECKBOX_CHECKED:$?nt().TABLE_CHECKBOX_DISABLED_UNCHECKED:nt().TABLE_CHECKBOX_UNCHECKED]})),(y||x)&&k.push(e("span",{class:"vxe-checkbox--label"},y?o.callSlot(y,D,e):n.a.get(r,x))),pt(e,t,[e("span",{class:["vxe-cell--checkbox",{"is--checked":S,"is--disabled":$,"is--indeterminate":w&&!S?r[w]:R,"is--hidden":!O}],on:F},k)])},renderDeepSelectionCellByProp:(e,t)=>Ct.renderDeepNodeBtn(e,t,Ct.renderCheckboxCellByProp(e,t)),renderExpandCell(e,t){const{$table:o,isHidden:r,row:l,column:i}=t,a=o,s=o,{isRowGroupStatus:c}=a,{rowExpandedMaps:d,rowExpandLazyLoadedMaps:u}=s,p=o.computeExpandOpts,{lazy:h,labelField:g,iconLoaded:m,showIcon:f,iconOpen:x,iconClose:b,visibleMethod:v}=p,{slots:C}=i,w=C?C.default:null,E=C?C.icon:null;let y=!1,T=!1;if(c&&l.isAggregate)return pt(e,t,[]);if(E)return pt(e,t,o.callSlot(E,t,e));if(!r){const e=Se(o,l);y=!!d[e],h&&(T=!!u[e])}return pt(e,t,[!f||v&&!v(t)?st(o):e("span",{class:["vxe-table--expanded",{"is--active":y}],on:{mousedown(e){e.stopPropagation()},click(e){o.triggerRowExpandEvent(e,t)}}},[e("i",{class:["vxe-table--expand-btn",T?m||nt().TABLE_EXPAND_LOADED:y?x||nt().TABLE_EXPAND_OPEN:b||nt().TABLE_EXPAND_CLOSE]})]),w||g?e("span",{class:"vxe-table--expand-label"},w?o.callSlot(w,t,e):n.a.get(l,g)):st(o)])},renderExpandData(e,t){const{$table:o,column:r}=t,{slots:l,contentRender:n}=r;if(l&&l.content)return o.callSlot(l.content,t,e);if(n){const r=it.get(n.name),l=r?r.renderTableExpand||r.renderExpand:null;if(l)return rt(l.call(o,e,n,t))}return[]},renderHTMLCell(e,t){const{$table:o,column:r}=t,{slots:l}=r;return l&&l.default?pt(e,t,o.callSlot(l.default,t,e)):pt(e,t,[e("span",{class:"vxe-cell--html",domProps:{innerHTML:ft(t)}})])},renderDeepHTMLCell:(e,t)=>Ct.renderDeepNodeBtn(e,t,Ct.renderHTMLCell(e,t)),renderSortAndFilterHeader:(e,t)=>gt(e,t,Ct.renderHeaderTitle(e,t).concat(Ct.renderSortIcon(e,t).concat(Ct.renderFilterIcon(e,t)))),renderSortHeader:(e,t)=>gt(e,t,Ct.renderHeaderTitle(e,t).concat(Ct.renderSortIcon(e,t))),renderSortIcon(e,t){const{$table:o,column:r}=t,l=o.computeSortOpts,{showIcon:i,allowBtn:a,ascTitle:s,descTitle:c,iconLayout:d,iconAsc:u,iconDesc:p,iconVisibleMethod:h}=l;return!i||h&&!h(t)?[]:[e("span",{class:["vxe-cell--sort",`vxe-cell--sort-${d}-layout`]},[e("i",{class:["vxe-sort--asc-btn",u||nt().TABLE_SORT_ASC,{"sort--active":"asc"===r.order}],attrs:{title:n.a.eqNull(s)?lt("vxe.table.sortAsc"):""+(s||"")},on:a?{click(e){e.stopPropagation(),o.triggerSortEvent(e,r,"asc")}}:void 0}),e("i",{class:["vxe-sort--desc-btn",p||nt().TABLE_SORT_DESC,{"sort--active":"desc"===r.order}],attrs:{title:n.a.eqNull(c)?lt("vxe.table.sortDesc"):""+(c||"")},on:a?{click(e){e.stopPropagation(),o.triggerSortEvent(e,r,"desc")}}:void 0})])]},renderFilterHeader:(e,t)=>gt(e,t,Ct.renderHeaderTitle(e,t).concat(Ct.renderFilterIcon(e,t))),renderFilterIcon(e,t){const{$table:o,column:r,hasFilter:l}=t,n=o,{filterStore:i}=n,a=o.computeFilterOpts,{showIcon:s,iconNone:c,iconMatch:d,iconVisibleMethod:u}=a;return!s||u&&!u(t)?[]:[e("span",{class:["vxe-cell--filter",{"is--active":i.visible&&i.column===r}],on:{click(e){o.triggerFilterEvent&&o.triggerFilterEvent(e,t.column,t)}}},[e("i",{class:["vxe-filter--btn",l?d||nt().TABLE_FILTER_MATCH:c||nt().TABLE_FILTER_NONE],attrs:{title:lt("vxe.table.filter")}})])]},renderEditHeader(e,t){const{$table:o,column:r}=t,l=o,{editConfig:i,editRules:s}=l,c=o.computeEditOpts,{sortable:d,filters:u,editRender:p}=r;let h=!1;if(s){const e=n.a.get(s,r.field);e&&(h=e.some(e=>e.required))}let g=[];return a(i)&&(g=[h&&c.showAsterisk?e("i",{class:"vxe-cell--required-icon"},[e("i",{class:"vxe-cell--required-icon"})]):st(o),a(p)&&c.showIcon?e("i",{class:"vxe-cell--edit-icon"},[e("i",{class:c.icon||nt().TABLE_EDIT})]):st(o)]),gt(e,t,g.concat(Ct.renderHeaderTitle(e,t)).concat(d?Ct.renderSortIcon(e,t):[]).concat(u?Ct.renderFilterIcon(e,t):[]))},renderRowEdit(e,t){const{$table:o,column:r}=t,l=o,{editStore:n}=l,{actived:i}=n,{editRender:s}=r;return Ct.runRenderer(e,t,this,a(s)&&i&&i.row===t.row)},renderDeepRowEdit:(e,t)=>Ct.renderDeepNodeBtn(e,t,Ct.renderRowEdit(e,t)),renderCellEdit(e,t){const{$table:o,column:r}=t,l=o,{editStore:n}=l,{actived:i}=n,{editRender:s}=r;return Ct.runRenderer(e,t,this,a(s)&&i&&i.row===t.row&&i.column===t.column)},renderDeepCellEdit:(e,t)=>Ct.renderDeepNodeBtn(e,t,Ct.renderCellEdit(e,t)),runRenderer(e,t,o,r){const{$table:l,row:n,column:i}=t,a=l,{isRowGroupStatus:s}=a,{slots:c,field:d,editRender:u,formatter:p}=i,h=it.get(u.name),g=h?h.renderTableEdit||h.renderEdit:null,m=c?c.default:null,f=c?c.groupContent||c["group-content"]:null,x=Object.assign({$type:"",isEdit:r},t);if(r)return c&&c.edit?l.callSlot(c.edit,x,e):g?rt(g.call(l,e,u,x)):[];if(s&&d&&n.isAggregate){const o=n,r=l.computeAggregateOpts,{mapChildrenField:i}=r,a=o.groupField,s=o.groupContent,c=i&&o[i]||[],d=o.childCount;if(f)return pt(e,t,l.callSlot(f,Object.assign({groupField:a,groupContent:s,childList:c,childCount:d},t),e))}else if(m)return pt(e,t,l.callSlot(m,x,e));return p?pt(e,t,[e("span",{class:"vxe-cell--label"},[ft(x)])]):Ct.renderDefaultCell.call(o,e,x)}};var wt=Ct;const Et={colId:[String,Number],type:String,field:String,title:String,width:[Number,String],minWidth:[Number,String],maxWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,footerAlign:String,showOverflow:{type:[Boolean,String],default:null},showHeaderOverflow:{type:[Boolean,String],default:null},showFooterOverflow:{type:[Boolean,String],default:null},className:[String,Function],headerClassName:[String,Function],footerClassName:[String,Function],formatter:[Function,Array,String],headerFormatter:[Function,Array,String],footerFormatter:[Function,Array,String],padding:{type:Boolean,default:null},verticalAlign:{type:String,default:null},sortable:Boolean,remoteSort:{type:Boolean,default:null},sortBy:[String,Function],sortType:String,sortMethod:Function,filters:{type:Array,default:null},filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filterResetMethod:Function,filterRecoverMethod:Function,filterRender:Object,rowGroupNode:Boolean,treeNode:Boolean,dragSort:Boolean,rowResize:Boolean,visible:{type:Boolean,default:null},headerExportMethod:Function,exportMethod:Function,footerExportMethod:Function,titleHelp:Object,titlePrefix:Object,titleSuffix:Object,cellType:String,cellRender:Object,editRender:Object,contentRender:Object,aggFunc:[String,Boolean],params:Object},yt={};Object.keys(Et).forEach(e=>{yt[e]=function(t){const o=this.$xeTable;this.columnConfig.update(e,t),o&&("filters"===e?(o.setFilter(this.columnConfig,t),o.handleUpdateDataQueue()):["visible","fixed","width","minWidth","maxWidth"].includes(e)&&o.handleRefreshColumnQueue())}});var Tt={name:"VxeColumn",props:Et,provide(){return{$xeColumn:this,$xeGrid:null,$xeGantt:null}},inject:{$xeTable:{default:null},$xeColumn:{default:null}},watch:yt,created(){const e=this.$xeTable;this.columnConfig=this.createColumn(e,this)},mounted(){this.columnConfig.slots=this.$scopedSlots,ze(this)},destroyed(){je(this)},render(e){return e("div",this.$slots.default)},methods:wt};const Rt=Object.assign({},Tt,{install(e){e.component(Tt.name,Tt),e.component("VxeTableColumn",Tt)}});r.c.dynamicApp&&(r.c.dynamicApp.component(Tt.name,Tt),r.c.dynamicApp.component("VxeTableColumn",Tt)),r.c.component(Tt);const St=Rt;var Ot={name:"VxeColgroup",props:Et,provide(){return{$xeColumn:this,$xeGrid:null,$xeGantt:null}},inject:{$xeTable:{default:null},$xeColumn:{default:null}},watch:yt,created(){const e=this.$xeTable;this.columnConfig=this.createColumn(e,this)},mounted(){const{$scopedSlots:e}=this,t={};e.header&&(t.header=e.header),this.columnConfig.slots=t,ze(this)},destroyed(){je(this)},render(e){return e("div",this.$slots.default)},methods:wt};const $t=Object.assign({},Ot,{install(e){e.component(Ot.name,Ot),e.component("VxeTableColgroup",Ot)}});r.c.dynamicApp&&(r.c.dynamicApp.component(Ot.name,Ot),r.c.dynamicApp.component("VxeTableColgroup",Ot)),r.c.component(Ot);const Ft=$t;const{getConfig:Dt}=r.c,kt={id:[String,Function],data:Array,height:[Number,String],minHeight:{type:[Number,String],default:()=>null},maxHeight:[Number,String],resizable:{type:Boolean,default:()=>Dt().table.resizable},stripe:{type:Boolean,default:()=>Dt().table.stripe},border:{type:[Boolean,String],default:()=>Dt().table.border},padding:{type:Boolean,default:null},round:{type:Boolean,default:()=>Dt().table.round},size:{type:String,default:()=>Dt().table.size||Dt().size},fit:{type:Boolean,default:()=>Dt().table.fit},loading:Boolean,align:{type:String,default:()=>Dt().table.align},headerAlign:{type:String,default:()=>Dt().table.headerAlign},footerAlign:{type:String,default:()=>Dt().table.footerAlign},showHeader:{type:Boolean,default:()=>Dt().table.showHeader},highlightCurrentRow:{type:Boolean,default:()=>Dt().table.highlightCurrentRow},highlightHoverRow:{type:Boolean,default:()=>Dt().table.highlightHoverRow},highlightCurrentColumn:{type:Boolean,default:()=>Dt().table.highlightCurrentColumn},highlightHoverColumn:{type:Boolean,default:()=>Dt().table.highlightHoverColumn},highlightCell:Boolean,showFooter:Boolean,footerData:Array,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],showCustomHeader:{type:Boolean,default:()=>Dt().table.showCustomHeader},mergeHeaderCells:Array,mergeCells:Array,mergeFooterCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:()=>Dt().table.showOverflow},showHeaderOverflow:{type:[Boolean,String],default:()=>Dt().table.showHeaderOverflow},showFooterOverflow:{type:[Boolean,String],default:()=>Dt().table.showFooterOverflow},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:()=>Dt().table.rowId},zIndex:Number,emptyText:{type:String,default:()=>Dt().table.emptyText},keepSource:{type:Boolean,default:()=>Dt().table.keepSource},autoResize:{type:Boolean,default:()=>Dt().table.autoResize},syncResize:[Boolean,String,Number],resizeConfig:Object,columnConfig:Object,currentColumnConfig:Object,cellConfig:Object,headerCellConfig:Object,footerCellConfig:Object,rowConfig:Object,aggregateConfig:Object,rowGroupConfig:Object,currentRowConfig:Object,dragConfig:Object,rowDragConfig:Object,columnDragConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,headerTooltipConfig:Object,footerTooltipConfig:Object,exportConfig:[Boolean,Object],importConfig:[Boolean,Object],printConfig:Object,expandConfig:Object,treeConfig:[Boolean,Object],menuConfig:[Boolean,Object],contextMenu:[Boolean,Object],mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:[Boolean,Object],validConfig:Object,editRules:Object,loadingConfig:Object,emptyRender:[Boolean,Object],customConfig:Object,scrollX:Object,scrollY:Object,virtualXConfig:Object,virtualYConfig:Object,scrollbarConfig:Object,animat:{type:Boolean,default:()=>Dt().table.animat},delayHover:{type:Number,default:()=>Dt().table.delayHover},params:Object};function Mt(e,t){n.a.arrayEach(e,e=>{e.style.transform=`translateY(${t}px)`}),requestAnimationFrame(()=>{n.a.arrayEach(e,e=>{re(e,"row--drag-move"),e.style.transform=""})})}function It(e,t){n.a.arrayEach(e,e=>{e.style.transform=`translateX(${t}px)`}),requestAnimationFrame(()=>{n.a.arrayEach(e,e=>{re(e,"col--drag-move"),e.style.transform=""})})}const At={row:null};function Lt(e){return e.crossTableDragRowInfo}const{getConfig:_t,getI18n:Ht,renderer:Pt,formats:Bt,interceptor:zt,createEvent:jt}=r.c,Gt=n.a.browse();let Vt=null;function Nt(e,t,o){const r=n.a.get(e,o),l=n.a.get(t,o);return!(!m(r)||!m(l))||(n.a.isString(r)||n.a.isNumber(r)?""+r==""+l:n.a.isEqual(r,l))}function Wt(e,t){return n.a.isBoolean(e)?e:t}function qt(e,t){const o=e.computeSortOpts,{orders:r=[]}=o,l=t.order||null,n=r.indexOf(l)+1;return r[n<r.length?n:0]}const Xt=e=>{const t=_t().version,o=n.a.toStringJSON(localStorage.getItem("VXE_CUSTOM_STORE")||""),r=o&&o._v===t?o:{_v:t};return(e?r[e]:r)||{}},Yt=(e,t)=>{const o=e,{fullAllDataRowIdData:r}=o,l={};return n.a.each(t,(e,t)=>{r[t]&&(l[t]=e)}),l};function Kt(e,t){const o=e,{fullDataRowIdData:r}=o,l=[];return n.a.each(t,(e,t)=>{r[t]&&-1===l.indexOf(r[t].row)&&l.push(r[t].row)}),l}function Ut(e){const t=e,o=e,{isScrollXBig:r,scrollXWidth:l}=t,{elemStore:n,visibleColumn:i,fullColumnIdData:a}=o,s=e.computeLeftFixedWidth,c=e.computeRightFixedWidth,d=Ue(n["main-body-scroll"]);if(d){const e=d.clientWidth;let t=d.scrollLeft;r&&(t=Math.ceil((l-e)*Math.min(1,t/(5e6-e))));const o=t+s,n=t+e-c;let u=0,p=i.length;for(;u<p;){const e=Math.floor((u+p)/2);(a[i[e].id]||{}).oLeft<=o?u=e+1:p=e}let h=0;const g=u===i.length?u:Math.max(0,u<i.length?u-2:0);for(let e=g,t=i.length;e<t;e++){const t=a[i[e].id]||{};if(h++,t.oLeft>n||h>=60)break}return{toVisibleIndex:Math.max(0,g),visibleSize:Math.max(6,h)}}return{toVisibleIndex:0,visibleSize:6}}function Zt(e,t){const o=e,r=e,l=e,{aggregateConfig:i,rowGroupConfig:a}=o,{collectColumn:s}=l,c=e.computeCustomOpts,{storage:d,storeOptions:u}=c,p=!0===d,h=p?{}:Object.assign({},d||{},u),g=Wt(h.resizable,p),m=Wt(h.visible,p),f=Wt(h.fixed,p),x=Wt(h.sort,p),b=Wt(h.aggGroup,p),v=Wt(h.aggFunc,p);let{resizableData:C,sortData:w,visibleData:E,fixedData:y,aggGroupData:T,aggFuncData:R}=t;if(g&&C||x&&w||m&&E||f&&y||b&&T||v&&R){const t={};if(x&&w){if(!n.a.isArray(w)){const e=[];n.a.each(w,(t,o)=>{e.push({key:o,index:t})}),w=n.a.orderBy(e,{field:"index",order:"asc"}).map(e=>({k:e.key}))}let e=1;n.a.eachTree(w,(o,r,l,n,i)=>{t[o.k]={key:o.k,sNum:e++,pKey:i?i.k:null}},{children:"c"})}const o={},c=[],d=[];if(n.a.eachTree(s,(e,t,r,l,s)=>{const u=e.getKey();s||f&&y&&void 0!==y[u]&&(e.fixed=y[u]),g&&C&&n.a.isNumber(C[u])&&(e.resizeWidth=C[u]),m&&E&&n.a.isBoolean(E[u])&&(e.visible=E[u]),v&&R&&(i||a)&&R[u]&&(e.aggFunc=R[u]),b&&T&&T[u]&&d.push({field:e.field}),o[u]=e,c.push(e)}),(i||a)&&d.length){const t=Wo(e,l.tableFullData,d);l.tableFullTreeData=[],l.tableFullGroupData=t.treeData,r.isRowGroupStatus=!0,r.rowGroupList=d,e.cacheRowMap(!1)}if(x&&w){c.forEach(e=>{const r=e.getKey(),l=t[r];if(l){const t=l.pKey?o[l.pKey]:null;e.parentId=t?t.id:null,e.renderSortNumber=l.sNum}});const e=n.a.toArrayTree(n.a.orderBy(c,"renderSortNumber"),{key:"id",parentKey:"parentId",children:"children"});l.collectColumn=e,l.tableFullColumn=Qe(e)}r.isCustomStatus=!0}else r.isCustomStatus=!1}function Qt(e){const t=e,o=e,r=e,{treeConfig:l,showOverflow:i}=t,{tableFullColumn:a,collectColumn:s}=r,c=r.fullColumnIdData={},d=r.fullColumnFieldData={},u=e.computeMouseOpts,h=e.computeExpandOpts,g=e.computeColumnOpts,m=e.computeColumnDragOpts,f=e.computeVirtualYOpts,{isCrossDrag:x,isSelfToChildDrag:b}=m,v=e.computeCustomOpts,C=e.computeTreeOpts,{storage:w}=v,E=e.computeRowOpts,y=s.some(p);let T,R,S,O,$,F,D,k=!!i;const M=(e,t,o,r,l)=>{const{id:n,field:i,fixed:a,type:s,treeNode:u,rowGroupNode:p}=e,h={$index:-1,_index:-1,column:e,colid:n,index:t,items:o,parent:l||null,width:0,oLeft:0};i?(d[i]&&xe("vxe.error.colRepet",["field",i]),d[i]=h):(w&&!s&&xe("vxe.error.reqSupportProp",["storage",(e.getTitle()||s||"")+" -> field=?"]),g.drag&&(x||b)&&xe("vxe.error.reqSupportProp",["column-drag-config.isCrossDrag | column-drag-config.isSelfToChildDrag",(e.getTitle()||s||"")+" -> field=?"])),!D&&a&&(D=a),F||"html"!==s||(F=e),u&&(S&&fe("vxe.error.colRepet",["tree-node",u]),S||(S=e)),p&&(S&&fe("vxe.error.colRepet",["row-group-node",p]),T||(T=e)),"expand"===s&&(R&&fe("vxe.error.colRepet",["type",s]),R||(R=e)),"checkbox"===s?(O&&fe("vxe.error.colRepet",["type",s]),O||(O=e)):"radio"===s&&($&&fe("vxe.error.colRepet",["type",s]),$||($=e)),k&&!1===e.showOverflow&&(k=!1),c[n]&&xe("vxe.error.colRepet",["colId",n]),c[n]=h};y?n.a.eachTree(s,(e,t,o,r,l,n)=>{e.level=n.length,M(e,t,o,0,l)}):a.forEach(M),R&&"fixed"!==h.mode&&f.enabled&&fe("vxe.error.notConflictProp",['column.type="expand',"virtual-y-config.enabled=false"]),R&&"fixed"!==h.mode&&u.area&&xe("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),R&&"inside"!==h.mode&&l&&!C.transform&&xe("vxe.error.notConflictProp",["tree-config.transform=false","expand-config.mode=fixed"]),F&&(g.useKey||xe("vxe.error.notSupportProp",["column.type=html","column-config.useKey=false","column-config.useKey=true"]),E.useKey||xe("vxe.error.notSupportProp",["column.type=html","row-config.useKey=false","row-config.useKey=true"])),o.isGroup=y,o.rowGroupColumn=T,o.treeNodeColumn=S,o.expandColumn=R,o.checkboxColumn=O,o.radioColumn=$,o.isAllOverflow=k}function Jt(e,t){const o=e,r=e,l=e,{treeConfig:n}=o,i=l.xeGanttView,a=e.computeVirtualYOpts,s=e.computeTreeOpts,{transform:c}=s,d=t||l.tableFullData,u=(c||!n)&&!!a.enabled&&a.gt>-1&&(0===a.gt||a.gt<d.length);return r.scrollYLoad=u,i&&i.handleUpdateSYStatus&&i.handleUpdateSYStatus(u),u}function eo(e,t,o){const r=e,l=e,{treeNodeColumn:i}=r,{fullAllDataRowIdData:a,tableFullTreeData:s,treeExpandedMaps:c,treeExpandLazyLoadedMaps:d}=l,u=e.computeTreeOpts,{reserve:p,lazy:h,accordion:g,toggleMethod:m}=u,f=u.children||u.childrenField,x=u.hasChild||u.hasChildField,b=[],v=e.getColumnIndex(i),C=e.getVMColumnIndex(i),{handleGetRowId:w}=$e(e);let E=m?t.filter(t=>m({$table:e,expanded:o,column:i,columnIndex:v,$columnIndex:C,row:t})):t;if(g){E=E.length?[E[E.length-1]]:[];const e=n.a.findTree(s,e=>e===E[0],{children:f});e&&e.items.forEach(e=>{const t=w(e);c[t]&&delete c[t]})}return o?E.forEach(t=>{const o=w(t);if(!c[o]){const r=a[o];if(r){h&&t[x]&&!r.treeLoaded&&!d[o]?b.push(po(e,t)):t[f]&&t[f].length&&(c[o]=t)}}}):E.forEach(e=>{const t=w(e);c[t]&&delete c[t]}),p&&E.forEach(t=>ho(e,t,o)),r.treeExpandedFlag++,Promise.all(b).then(()=>e.recalculate())}function to(e,t,o){const r=e;return function(e,t,o){const r=e,l=e,{fullAllDataRowIdData:i,tableFullGroupData:a,rowGroupExpandedMaps:s}=l,c=e.computeAggregateOpts,{mapChildrenField:d,accordion:u}=c,{handleGetRowId:p}=$e(e);let h=t;if(d){if(u){h=h.length?[h[h.length-1]]:[];const t=n.a.findTree(a,t=>Se(e,t)===Se(e,h[0]),{children:d});t&&t.items.forEach(e=>{const t=p(e);s[t]&&delete s[t]})}o?h.forEach(e=>{const t=p(e);if(!s[t]){i[t]&&e[d]&&e[d].length&&(s[t]=e)}}):h.forEach(e=>{const t=p(e);s[t]&&delete s[t]})}return r.rowGroupExpandedFlag++,e.recalculate()}(e,t,o).then(()=>(ro(e),e.handleTableData(),r.rowGroupExpandedFlag++,oo(e),e.$nextTick())).then(()=>zo(e,!0,!0,!0)).then(()=>{setTimeout(()=>{e.updateCellAreas()},30)})}function oo(e){const t=e,o=e,{treeConfig:r}=t,{fullDataRowIdData:l,fullAllDataRowIdData:i,afterFullData:a,afterTreeFullData:s}=o,c=e.computeTreeOpts,{transform:d}=c,u=c.children||c.childrenField,p={};if(r){let t=0;const{handleGetRowId:h}=$e(e);n.a.eachTree(s,(e,o,r,n)=>{const a=h(e),s=i[a],c=n.map((e,t)=>t%2==0?Number(e)+1:".").join("");if(s)s.seq=c,s.treeIndex=o,s._tIndex=t;else{const o={row:e,rowid:a,seq:c,index:-1,$index:-1,_index:-1,treeIndex:-1,_tIndex:t,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};i[a]=o,l[a]=o}t++,p[a]=e},{children:d?c.mapChildrenField:u}),d&&a.forEach((e,t)=>{const o=h(e),l=i[o],n=t+1;l&&(r||(l.seq=n),l._index=t)}),o.afterFullRowMaps=p}else!function(e){const t=e,o=e,{treeConfig:r}=t,{afterFullData:l,fullDataRowIdData:n,fullAllDataRowIdData:i}=o,{handleGetRowId:a}=$e(e),s={};l.forEach((e,t)=>{const o=a(e),l=i[o],c=t+1;if(l)r||(l.seq=c),l._index=t;else{const r={row:e,rowid:o,seq:c,index:-1,$index:-1,_index:t,treeIndex:-1,_tIndex:-1,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};i[o]=r,n[o]=r}s[o]=e}),o.afterFullRowMaps=s}(e)}function ro(e){const t=e,o=e,r=e,{treeConfig:l}=t,{isRowGroupStatus:i}=o,{fullAllDataRowIdData:a,treeExpandedMaps:s,rowGroupExpandedMaps:c}=r,d=e.computeAggregateOpts,u=e.computeTreeOpts,{handleGetRowId:p}=$e(e),h=[],g={};if(l&&u.transform){const t=u.children||u.childrenField;return n.a.eachTree(r.afterTreeFullData,(e,t,o,r,l)=>{const n=p(e),i=p(l);if(!l||g[i]&&s[i]){const t=a[n];t&&(t._index=h.length),g[n]=1,h.push(e)}},{children:t}),r.afterFullData=h,Jt(e,h),h}if(i){const{childrenField:t}=d;return n.a.eachTree(r.afterGroupFullData,(e,t,o,r,l)=>{const n=p(e),i=p(l);if(!l||g[i]&&c[i]){const t=a[n];t&&(t._index=h.length),g[n]=1,h.push(e)}},{children:t}),r.afterFullData=h,Jt(e,h),h}return r.afterFullData}function lo(e){const t=e,o=e,r=e,{showHeaderOverflow:l,showFooterOverflow:n,mouseConfig:i,spanMethod:a,footerSpanMethod:s}=t,{isGroup:c,currentRow:d,tableColumn:u,scrollXLoad:p,scrollYLoad:h,overflowX:g,scrollbarWidth:m,overflowY:f,scrollbarHeight:x,scrollXWidth:b,columnStore:v,editStore:C,isAllOverflow:w,expandColumn:E,isColLoading:y}=o,{visibleColumn:T,tableHeight:R,elemStore:S,customHeight:O,customMinHeight:$,customMaxHeight:F,tHeaderHeight:D,tFooterHeight:k}=r,M=r.xeGanttView,I=e.$refs.refElem;if(!I||!I.clientHeight)return;let A=f?m:0,L=g?x:0;const _=e.$refs.refEmptyPlaceholder,H=e.computeScrollbarOpts,P=e.computeMouseOpts,B=e.computeExpandOpts,z=Ue(S["main-body-wrapper"]),j=Ue(S["main-body-table"]);_&&(_.style.top=D+"px",_.style.height=z?z.offsetHeight-L+"px":"");const G=H.x||{},V=e.computeScrollbarXToTop,N=H.y||{},W=e.computeScrollbarYToLeft;let q=g?"visible":"hidden";"visible"===G.visible||M?(L=x,q="visible"):"hidden"!==G.visible&&!1!==G.visible||(L=0,q="hidden");let X=f?"visible":"hidden";"hidden"===N.visible||!1===N.visible||M&&!W?(A=0,X="hidden"):"visible"===N.visible&&(A=m,X="visible");let Y=0,K=0;const U=$-D-k-L;F&&(K=Math.max(U,F-D-k-L)),O&&(Y=O-D-k-L),Y||j&&(Y=j.clientHeight),Y&&(K&&(Y=Math.min(K,Y)),Y=Math.max(U,Y));const Z=e.$refs.refScrollXLeftCornerElem,Q=e.$refs.refScrollXRightCornerElem,J=e.$refs.refScrollXVirtualElem;J&&(J.style.height=L+"px",J.style.visibility=q);const ee=e.$refs.refScrollXWrapperElem;ee&&(ee.style.left=V?A+"px":"",ee.style.width=I.clientWidth-A+"px"),Z&&(Z.style.width=V?A+"px":"",Z.style.display=V&&g&&L?"block":""),Q&&(Q.style.width=V?"":A+"px",Q.style.display=V?"":"visible"===q?"block":"");const te=e.$refs.refScrollYVirtualElem;te&&(te.style.width=A+"px",te.style.height=Y+D+k+"px",te.style.visibility=X);const oe=e.$refs.refScrollYTopCornerElem;oe&&(oe.style.height=D+"px",oe.style.display=D&&"visible"===X?"block":"");const re=e.$refs.refScrollYWrapperElem;re&&(re.style.height=Y+"px",re.style.top=D+"px");const le=e.$refs.refScrollYBottomCornerElem;le&&(le.style.height=k+"px",le.style.top=D+Y+"px",le.style.display=k&&"visible"===X?"block":"");const ne=e.$refs.refRowExpandElem;return ne&&(ne.style.height=Y+"px",ne.style.top=D+"px"),r.tBodyHeight=Y,["main","left","right"].forEach((t,o)=>{const r=o>0?t:"",i="left"===r;let d,m=[];r&&(m=i?v.leftList:v.rightList,d=i?e.$refs.refLeftContainer:e.$refs.refRightContainer),["header","body","footer"].forEach(e=>{const o=Ue(S[`${t}-${e}-wrapper`]),i=Ue(S[`${t}-${e}-scroll`]),f=Ue(S[`${t}-${e}-table`]);if("header"===e){let e=u,t=!1;c?e=T:(p&&l&&(a||s||(t=!0)),t&&(y||!r&&g)||(e=T),r&&t&&(e=m||[]));const n=e.reduce((e,t)=>e+t.renderWidth,0);r&&(c?o&&(o.style.width=b?b+"px":""):t?o&&(o.style.width=n?n+"px":""):o&&(o.style.width=b?b+"px":"")),i&&(i.style.height=D+"px"),f&&(f.style.width=n?n+"px":"")}else if("body"===e){i&&(i.style.maxHeight=F?K+"px":"",i.style.height=O?Y+"px":"",i.style.minHeight=U+"px"),d&&(o&&(o.style.top=D+"px"),d.style.height=(O>0?O:R+D+k+L)+"px",d.style.width=m.reduce((e,t)=>e+t.renderWidth,0)+"px");let l=u,n=!1;(p||h||w)&&(E&&"fixed"!==B.mode||a||s||(n=!0)),r&&(l=T,n&&(l=m||[]));const c=l.reduce((e,t)=>e+t.renderWidth,0);r&&(n?o&&(o.style.width=c?c+"px":""):o&&(o.style.width=b?b+"px":"")),f&&(f.style.width=c?c+"px":"",f.style.paddingRight=A&&r&&(Gt.firefox||Gt.safari)?A+"px":"");const g=Ue(S[`${t}-${e}-emptyBlock`]);g&&(g.style.width=c?c+"px":"")}else if("footer"===e){let e=u,t=!1;p&&n&&(a||s||(t=!0)),t&&(y||!r&&g)||(e=T),r&&t&&(e=m||[]);const l=e.reduce((e,t)=>e+t.renderWidth,0);r&&(t?o&&(o.style.width=l?l+"px":""):o&&(o.style.width=b?b+"px":"")),i&&(i.style.height=k+"px",d&&o&&(o.style.top=(O>0?O-k-L:R+D)+"px")),f&&(f.style.width=l?l+"px":"")}})}),d&&e.setCurrentRow(d),i&&P.selected&&C.selected.row&&C.selected.column&&e.addCellSelectedClass(),M&&M.handleUpdateStyle&&M.handleUpdateStyle(),e.$nextTick()}function no(e,t){return e.triggerValidate?e.triggerValidate(t):e.$nextTick()}function io(e,t,o){no(e,"blur").catch(e=>e).then(()=>{e.handleEdit(o,t).then(()=>no(e,"change")).catch(e=>e)})}function ao(e,t,o){const r=e,{checkboxReserveRowMap:l}=r;if(e.computeCheckboxOpts.reserve){const r=Se(e,t);o?l[r]=t:l[r]&&delete l[r]}}function so(e,t,o){const r=e,l=e.computeRadioOpts,{checkMethod:n}=l;return t&&(o||!n||n({$table:e,row:t}))&&(r.selectRadioRow=t,function(e,t){const o=e;e.computeRadioOpts.reserve&&(o.radioReserveRow=t)}(e,t)),e.$nextTick()}function co(e,t,o,r){return t&&!n.a.isArray(t)&&(t=[t]),e.handleBatchSelectRows(t,!!o,r),e.checkSelectionStatus(),e.$nextTick()}function uo(e,t,o){const r=e,l=e,i=e,{treeConfig:a}=r,{isRowGroupStatus:s}=l,{afterFullData:c,afterTreeFullData:d,afterGroupFullData:u,checkboxReserveRowMap:p,selectCheckboxMaps:h}=i,g=e.computeTreeOpts,m=e.computeAggregateOpts,f=g.children||g.childrenField,x=e.computeCheckboxOpts,{checkField:b,reserve:v,checkMethod:C}=x,{handleGetRowId:w}=$e(e),E=x.indeterminateField||x.halfField,y={};if(b){const r=r=>{(o||!C||C({$table:e,row:r}))&&(t&&(y[w(r)]=r),n.a.set(r,b,t)),(a||s)&&E&&n.a.set(r,E,!1)};a||s?n.a.eachTree(c,r,{children:f}):c.forEach(r)}else s?t?n.a.eachTree(u,t=>{if(o||!C||C({$table:e,row:t})){const e=w(t);y[e]=t}},{children:m.mapChildrenField}):!o&&C&&n.a.eachTree(u,t=>{const o=w(t);!C({$table:e,row:t})&&h[o]&&(y[o]=t)},{children:m.mapChildrenField}):a?t?n.a.eachTree(d,t=>{if(o||!C||C({$table:e,row:t})){const e=w(t);y[e]=t}},{children:f}):!o&&C&&n.a.eachTree(d,t=>{const o=w(t);!C({$table:e,row:t})&&h[o]&&(y[o]=t)},{children:f}):t?!o&&C?c.forEach(t=>{const o=w(t);(h[o]||C({$table:e,row:t}))&&(y[o]=t)}):c.forEach(e=>{const t=w(e);y[t]=e}):!o&&C&&c.forEach(t=>{const o=w(t);!C({$table:e,row:t})&&h[o]&&(y[o]=t)});return v&&(t?n.a.each(y,(e,t)=>{p[t]=e}):c.forEach(t=>ao(e,t,!1))),l.updateCheckboxFlag++,i.selectCheckboxMaps=b?{}:y,l.isAllSelected=t,l.isIndeterminate=!1,i.treeIndeterminateRowMaps={},e.checkSelectionStatus(),e.$nextTick()}const po=(e,t)=>{const o=e,r=e,l=e.computeTreeOpts,i=e.computeCheckboxOpts,{transform:a,loadMethod:s}=l,{checkStrictly:c}=i;return new Promise(l=>{if(s){const{fullAllDataRowIdData:i,treeExpandLazyLoadedMaps:d}=r,u=Se(e,t),p=i[u];d[u]=t,Promise.resolve(s({$table:e,row:t})).then(l=>{if(p&&(p.treeLoaded=!0),d[u]&&delete d[u],n.a.isArray(l)||(l=[]),l)return e.loadTreeChildren(t,l).then(l=>{const{treeExpandedMaps:n}=r;return l.length&&!n[u]&&(n[u]=t),o.treeExpandedFlag++,!c&&e.isCheckedByCheckboxRow(t)&&co(e,l,!0),e.$nextTick().then(()=>{if(a)return e.handleTableData(),oo(e),e.$nextTick()})})}).catch(()=>{const{treeExpandLazyLoadedMaps:e}=r;p&&(p.treeLoaded=!1),e[u]&&delete e[u]}).finally(()=>{o.treeExpandedFlag++,e.$nextTick().then(()=>e.recalculate()).then(()=>l())})}else l()})},ho=(e,t,o)=>{const r=e,{treeExpandedReserveRowMap:l}=r;if(e.computeTreeOpts.reserve){const r=Se(e,t);o?l[r]=t:l[r]&&delete l[r]}},go=(e,t)=>{const o=e,r=e;return new Promise(l=>{const n=e.computeExpandOpts,{loadMethod:i}=n;if(i){const{fullAllDataRowIdData:n,rowExpandLazyLoadedMaps:a}=r,s=Se(e,t),c=n[s];a[s]=t,i({$table:e,row:t,rowIndex:e.getRowIndex(t),$rowIndex:e.getVMRowIndex(t)}).then(()=>{const{rowExpandedMaps:e}=r;c&&(c.expandLoaded=!0),e[s]=t,o.rowExpandedFlag++}).catch(()=>{c&&(c.expandLoaded=!1)}).finally(()=>{const{rowExpandLazyLoadedMaps:t}=r;t[s]&&delete t[s],o.rowExpandedFlag++,e.$nextTick().then(()=>e.recalculate()).then(()=>e.updateCellAreas()).then(()=>l())})}else l()})};function mo(e,t,o){const r=e,{rowHeightStore:l}=r;o&&o.clientHeight&&(l[t]=o.clientHeight)}function fo(e){const t=e,o=e,{isAllOverflow:r,expandColumn:l,isScrollYBig:n,scrollYHeight:i}=t,{elemStore:a,isResizeCellHeight:s,afterFullData:c,fullAllDataRowIdData:d}=o,u=e.computeRowOpts,p=e.computeCellOpts,h=e.computeDefaultRowHeight,g=Ue(a["main-body-scroll"]);if(g){const t=g.clientHeight;let o=g.scrollTop;n&&(o=Math.ceil((i-t)*Math.min(1,o/(5e6-t))));const a=o,m=o+t;let f=-1,x=0;if(s||p.height||u.height||l||!r){const{handleGetRowId:t}=$e(e);let o=0,r=c.length;for(;o<r;){const e=Math.floor((o+r)/2);(d[t(c[e])]||{}).oTop<=a?o=e+1:r=e}f=o===c.length?o:Math.max(0,o<c.length?o-2:0);for(let e=f,o=c.length;e<o;e++){const o=d[t(c[e])]||{};if(x++,o.oTop>m||x>=100)break}}else f=Math.floor(a/h)-1,x=Math.ceil(t/h)+1;return{toVisibleIndex:Math.max(0,f),visibleSize:Math.max(6,x)}}return{toVisibleIndex:0,visibleSize:6}}function xo(e,t,o){for(let r=0,l=e.length;r<l;r++){const l=e[r],{startIndex:n,endIndex:i}=t,a=l[o],s=a+l[o+"span"];a<n&&n<s&&(t.startIndex=a),a<i&&i<s&&(t.endIndex=s),t.startIndex===n&&t.endIndex===i||(r=-1)}}function bo(e){const t={};if(e&&e.length)for(let o=0;o<e.length;o++){const{row:r,col:l,rowspan:n,colspan:i}=e[o];for(let e=0;e<n;e++)for(let o=0;o<i;o++)t[`${r+e}:${l+o}`]=e||o?{rowspan:0,colspan:0}:{rowspan:n,colspan:i}}return t}function vo(e,t,o,r){const l=e,{tableFullColumn:i}=l,a=e.computeSortOpts,{multiple:s,remote:c,orders:d}=a;if(n.a.isArray(o)||(o=[o]),o&&o.length){const l={};s||(o=[o[0]],i.forEach(e=>{e.order&&(l[e.id]=e)}));const a={};let u=null;return o.forEach((t,o)=>{let{field:r,order:l}=t,i=r;n.a.isString(r)&&(i=e.getColumnByField(r)),u||(u=i),i&&i.sortable&&(d&&-1===d.indexOf(l)&&(l=qt(e,i)),i.order!==l&&(i.order=l),i.sortTime=Date.now()+o,a[i.id]=i)}),s||n.a.each(l,(e,t)=>{a[t]||(e.order=null)}),r&&(c||e.handleTableData(!0)),t&&e.handleColumnSortEvent(t,u),e.$nextTick().then(()=>(dr(e),e.updateCellAreas(),lo(e)))}return e.$nextTick()}function Co(e){const t=e,{tableFullColumn:o}=t;o.forEach(e=>{e.order=null})}function wo(e,t){const o=e,r=e,{editConfig:l}=o,{parentHeight:i}=r;let s=o[t];if("minHeight"===t){const e=_t().table.minHeight;n.a.eqNull(s)&&(m(e)?a(l)&&(s=144):s=e)}let c=0;if(s)if("100%"===s||"auto"===s)c=i;else{const t=e.getExcludeHeight();c=ee(s)?Math.floor((n.a.toInteger(s)||1)/100*i):n.a.toNumber(s),c=Math.max(40,c-t)}return c}function Eo(e){const t=e,o=e,r=e,{elemStore:l}=r,i=Ue(l["main-body-wrapper"]);if(!i)return;if(!e.$refs.refScrollYHandleElem)return;if(!e.$refs.refScrollXHandleElem)return;let a=0;const s=i.clientWidth;let c=s,d=c/100;const{fit:u}=t,{columnStore:p}=o,{resizeList:h,pxMinList:g,autoMinList:m,pxList:f,scaleList:x,scaleMinList:b,autoList:v,remainList:C}=p;if(g.forEach(e=>{const t=n.a.toInteger(e.minWidth);a+=t,e.renderWidth=t}),m.forEach(e=>{const t=Math.max(60,n.a.toInteger(e.renderAutoWidth));a+=t,e.renderWidth=t}),b.forEach(e=>{const t=Math.floor(n.a.toInteger(e.minWidth)*d);a+=t,e.renderWidth=t}),x.forEach(e=>{const t=Math.floor(n.a.toInteger(e.width)*d);a+=t,e.renderWidth=t}),f.forEach(e=>{const t=n.a.toInteger(e.width);a+=t,e.renderWidth=t}),v.forEach(e=>{const t=Math.max(60,n.a.toInteger(e.renderAutoWidth));a+=t,e.renderWidth=t}),h.forEach(e=>{const t=n.a.toInteger(e.resizeWidth);a+=t,e.renderWidth=t}),c-=a,d=c>0?Math.floor(c/(b.length+g.length+m.length+C.length)):0,u?c>0&&b.concat(g).concat(m).forEach(e=>{a+=d,e.renderWidth+=d}):d=40,C.forEach(e=>{const t=Math.max(d,40);e.renderWidth=t,a+=t}),u){const e=x.concat(b).concat(g).concat(m).concat(C);let t=e.length-1;if(t>0){let o=s-a;if(o>0){for(;o>0&&t>=0;)o--,e[t--].renderWidth++;a=s}}}o.scrollXWidth=a,o.resizeWidthFlag++,cr(e),lr(e)}const yo=(e,t)=>{const o=t.querySelectorAll(`.vxe-cell--wrapper[rowid="${e.rowid}"]`);let r=e.height,l=null,i=0;for(let e=0;e<o.length;e++){const t=o[e],a=t.parentElement;l||(l=getComputedStyle(a),i=l?Math.ceil(n.a.toNumber(l.paddingTop)+n.a.toNumber(l.paddingBottom)):0);const s=t?t.clientHeight:0;r=Math.max(r,Math.ceil(s+i))}return r},To=e=>{const t=e,o=e,{tableData:r,isAllOverflow:l,scrollYLoad:n,scrollXLoad:i}=t,{fullAllDataRowIdData:a}=o,s=e.computeDefaultRowHeight,c=e.$refs.refElem;if(!l&&(n||i)&&c){const{handleGetRowId:o}=$e(e);r.forEach(e=>{const t=o(e),r=a[t];if(r){const e=yo(r,c);r.height=Math.max(s,i?Math.max(r.height,e):e)}}),t.calcCellHeightFlag++}};function Ro(e,t){const{sortBy:o,sortType:r}=t;return l=>{let i;return i=o?n.a.isFunction(o)?o({row:l,column:t}):n.a.get(l,o):e.getCellLabel(l,t),r&&"auto"!==r?"number"===r?n.a.toNumber(i):"string"===r?n.a.toValueString(i):i:isNaN(i)?i:n.a.toNumber(i)}}function So(e,t){const o=e,r=e.$refs.refTooltip;clearTimeout(o.tooltipTimeout),t?e.closeTooltip():r&&r.setActived&&r.setActived(!0)}function Oo(e){const t=Lt(e);Vt=null,t.row=null}function $o(e){const t=e,{dragRow:o,dragCol:r}=t;(o||r)&&(Do(e),Fo(e),Mo(e),Oo(e),t.dragRow=null,t.dragCol=null)}function Fo(e){const t=e.$el;if(t){const e="row--drag-origin";n.a.arrayEach(t.querySelectorAll("."+e),t=>{t.draggable=!1,oe(t,e)})}}function Do(e){const t=e.$el;if(t){const e="col--drag-origin";n.a.arrayEach(t.querySelectorAll("."+e),t=>{t.draggable=!1,oe(t,e)})}}function ko(e,t,o,r,l,n){const i=e.$xeGantt,a=e,s=e;let c=e.$refs.refElem;if(i&&o){const e=i.$refs.refGanttContainerElem;e&&(c=e)}if(!c)return;const{overflowX:d,scrollbarWidth:u,overflowY:p,scrollbarHeight:h}=a,{prevDragToChild:g}=s,m=c.getBoundingClientRect(),f=p?u:0,x=d?h:0,b=c.clientWidth,v=c.clientHeight;if(o){const t=e.$refs.refDragRowLineElem;if(t)if(l){const r=e.computeScrollbarYToLeft,l=o.getBoundingClientRect();let i=o.clientHeight;const a=Math.max(1,l.y-m.y);a+i>v-x&&(i=v-a-x),t.style.display="block",t.style.left=(r?f:0)+"px",t.style.top=a+"px",t.style.height=i+"px",t.style.width=b-f+"px",t.setAttribute("drag-pos",n),t.setAttribute("drag-to-child",g?"y":"n")}else t.style.display=""}else if(r){const t=e.$refs.refDragColLineElem;if(t)if(l){const o=e.computeScrollbarXToTop,l=e.$refs.refLeftContainer,i=l?l.clientWidth:0,a=e.$refs.refRightContainer,s=a?a.clientWidth:0,c=r.getBoundingClientRect();let d=r.clientWidth;const u=Math.max(0,c.y-m.y),p=i;let h=c.x-m.x;h<p&&(d-=p-h,h=p);const C=b-s-(s?0:f);h+d>C&&(d=C-h),t.style.display="block",t.style.top=u+"px",t.style.left=h+"px",t.style.width=d+"px",t.style.height=g?c.height+"px":v-u-(o?0:x)+"px",t.setAttribute("drag-pos",n),t.setAttribute("drag-to-child",g?"y":"n")}else t.style.display=""}const C=e.$refs.refDragTipElem;C&&(C.style.display="block",C.style.top=Math.min(c.clientHeight-c.scrollTop-C.clientHeight,t.clientY-m.y)+"px",C.style.left=Math.min(c.clientWidth-c.scrollLeft-C.clientWidth-16,t.clientX-m.x)+"px",C.setAttribute("drag-status",l?g?"sub":"normal":"disabled"))}function Mo(e){const t=e.$refs.refDragTipElem,o=e.$refs.refDragRowLineElem,r=e.$refs.refDragColLineElem;t&&(t.style.display=""),o&&(o.style.display=""),r&&(r.style.display="")}function Io(e){const t=e.$xeGantt,o=e,r=e;let l=e.$refs.refElem;const i=[".vxe-body--row"];if(t){const e=t.$refs.refGanttContainerElem;e&&(l=e),i.push(".vxe-gantt-view--body-row",".vxe-gantt-view--chart-row")}var a,s;Mo(e),Fo(e),a=l,s=i,setTimeout(()=>{a&&n.a.arrayEach(a.querySelectorAll(s.map(e=>e+".row--drag-move").join(",")),e=>oe(e,"row--drag-move"))},500),r.prevDragToChild=!1,o.dragRow=null,o.dragCol=null}function Ao(e,t,o,r,l,i,a,s){const c=e,d=i||l;if(!d)return e.$nextTick();s.cell=l;const{tooltipStore:u}=c,{column:p,row:h}=s,{showAll:m,contentMethod:f}=o,x=f?f(s):null,b=f&&!n.a.eqNull(x),v=b?x:n.a.toString("html"===p.type?d.innerText:d.textContent).trim(),C=d.scrollWidth>d.clientWidth;if(v&&(m||b||C)){const t=g(v);Object.assign(u,{row:h,column:p,visible:!0,content:t,type:r,currOpts:o}),e.$nextTick(()=>{const o=e.$refs.refTooltip;o&&o.open&&o.open(C?d:a,t)})}return e.$nextTick()}function Lo(e,t,o){const r=e,{fullColumnIdData:l}=r,n=He(e,t);return n&&l[n.id]?function(e,t,o){const r=e,l=e,{scrollXLoad:n,scrollXLeft:i}=r,{elemStore:a,visibleColumn:s}=l,c=e.computeLeftFixedWidth,d=e.computeRightFixedWidth,u=Ue(a["main-body-scroll"]);if(t.fixed)return Promise.resolve();if(u){const r=u.clientWidth,l=u.scrollLeft;let a=null;if(o){const r=Se(e,o);a=u.querySelector(`[rowid="${r}"] .${t.id}`)}if(a||(a=u.querySelector("."+t.id)),a){const t=a.offsetLeft+(n?i:0),o=a.clientWidth;if(t<l+c)return e.scrollTo(t-c-1);if(t+o-l>r-d)return e.scrollTo(t+o-(r-d-1))}else if(n){let o=0;const n=t.renderWidth;for(let e=0;e<s.length;e++){const r=s[e];if(r===t||r.id===t.id)break;o+=r.renderWidth}return o<l?e.scrollTo(o-c-1):e.scrollTo(o+n-(r-d-1))}}return Promise.resolve()}(e,n,o):e.$nextTick()}function _o(e,t,o){const r=e,{rowExpandedReserveRowMap:l}=r;if(e.computeExpandOpts.reserve){const r=Se(e,t);o?l[r]=t:l[r]&&delete l[r]}}function Ho(e){const t=e,o=e;return e.$nextTick().then(()=>{const{scrollXLoad:r,scrollYLoad:l}=t,{scrollXStore:i,scrollYStore:a}=o,s=e.computeVirtualYOpts,c=e.computeVirtualXOpts;if(r){const{toVisibleIndex:t,visibleSize:o}=Ut(e),r=Math.max(0,c.oSize?n.a.toNumber(c.oSize):0);i.preloadSize=n.a.toNumber(c.preSize),i.offsetSize=r,i.visibleSize=o,i.endIndex=Math.max(i.startIndex+i.visibleSize+r,i.endIndex),i.visibleStartIndex=Math.max(i.startIndex,t),i.visibleEndIndex=Math.min(i.endIndex,t+o),e.updateScrollXData().then(()=>{Zo(e)})}else e.updateScrollXSpace();const d=function(e){const t=e,{isAllOverflow:o}=t,r=e.$refs.refTableHeader,l=e.$refs.refTableBody,n=l?l.$el:null,i=e.computeDefaultRowHeight;let a=0;if(o){if(n){const e=r?r.$el:null;let t;t=n.querySelector("tr"),!t&&e&&(t=e.querySelector("tr")),t&&(a=t.clientHeight)}a||(a=i)}else a=i;return Math.max(18,a)}(e);a.rowHeight=d,t.rowHeight=d;const{toVisibleIndex:u,visibleSize:p}=fo(e);if(l){const t=Math.max(0,s.oSize?n.a.toNumber(s.oSize):0);a.preloadSize=n.a.toNumber(s.preSize),a.offsetSize=t,a.visibleSize=p,a.endIndex=Math.max(a.startIndex+p+t,a.endIndex),a.visibleStartIndex=Math.max(a.startIndex,u),a.visibleEndIndex=Math.min(a.endIndex,u+p),e.updateScrollYData().then(()=>{er(e)})}else e.updateScrollYSpace()})}function Po(e){const t=e,o=e,{scrollXWidth:r,scrollYHeight:l}=t,{elemStore:n}=o,i=e.computeScrollbarOpts,a=Ue(n["main-body-wrapper"]),s=Ue(n["main-header-table"]),c=Ue(n["main-footer-table"]),d=e.$refs.refScrollXHandleElem,u=e.$refs.refScrollYHandleElem;let p=!1,h=!1;if(a){p=l>a.clientHeight,u&&(t.scrollbarWidth=i.width||u.offsetWidth-u.clientWidth||14),t.overflowY=p,h=r>a.clientWidth,d&&(t.scrollbarHeight=i.height||d.offsetHeight-d.clientHeight||14),t.overflowX=h;const n=s?s.clientHeight:0,g=c?c.clientHeight:0;o.tableHeight=a.offsetHeight,o.tHeaderHeight=n,o.tFooterHeight=g,t.overflowX=h,t.parentHeight=Math.max(n+g+20,e.getParentHeight())}h&&e.checkScrolling()}function Bo(e,t,o,r){const l=e,n=e.$refs.refElem;if(l.rceRunTime=Date.now(),!n||!n.clientWidth)return e.$nextTick();const i=e.$refs.refVarElem;if(i){const[t,o,r,l]=i.children;mo(e,"default",t),mo(e,"medium",o),mo(e,"small",r),mo(e,"mini",l)}return o&&ir(e),t&&Eo(e),Po(e),lo(e),ur(e),Ho(e).then(()=>{if(o&&ir(e),t&&Eo(e),r&&To(e),lo(e),Po(e),t&&dr(e),ur(e),t)return Ho(e)})}function zo(e,t,o,r){const l=e;return new Promise(n=>{const{rceTimeout:i,rceRunTime:a}=l,s=l.xeGanttView,c=e.computeResizeOpts.refreshDelay||20,d=e.$refs.refElem;d&&d.clientWidth&&(Eo(e),ur(e)),i?(clearTimeout(i),a&&a+(c-5)<Date.now()?n(Bo(e,t,o,r)):e.$nextTick(()=>{n()})):n(Bo(e,t,o,r)),s&&s.handleLazyRecalculate&&s.handleLazyRecalculate(),l.rceTimeout=setTimeout(()=>{l.rceTimeout=void 0,Bo(e,t,o,r)},c)})}function jo(e){zo(e,!0,!0,!0)}function Go(e){const t=e,o=e,{visibleColumn:r}=o,l=[];r.forEach(e=>{e.aggFunc&&l.push(e)}),t.aggHandleAggColumns=l}function Vo(e,t){const o=e,r=[],l=[];t&&(n.a.isArray(t)?t:[t]).forEach(e=>{r.push(e),l.push({field:e})}),o.rowGroupList=l,o.aggHandleFields=r,Go(e)}function No(e,t){const o=e.computeAggregateOpts,{mapChildrenField:r}=o;r&&(n.a.lastEach(t,e=>{let t=0;n.a.each(e[r],e=>{e.isAggregate?t+=e.childCount||0:t++}),e.childCount=t}),e.handlePivotTableAggregateData&&e.handlePivotTableAggregateData(t))}function Wo(e,t,o){let r=t,l=t;if(o){const i=e.computeAggregateOpts,{rowField:a,parentField:s,childrenField:c,mapChildrenField:d}=i,u=e.computeCheckboxOpts,{checkField:p}=u,h=u.indeterminateField||u.halfField,g=o[0];if(g&&a&&s&&c&&d){r=[],l=[];const i=g.field,u=e.getColumnByField(i),m={},f=[],x=Re(e);t.forEach(t=>{const o=u?e.getCellLabel(t,u):n.a.get(t,i),r=n.a.eqNull(o)?"":o;let l=m[r];l||(l=[],m[r]=l),t.isAggregate&&(t.isAggregate=void 0),l.push(t)}),n.a.objectEach(m,(t,n)=>{const{fullData:u,treeData:g}=Wo(e,t,o.slice(1)),m={isAggregate:!0,aggData:{},groupContent:n,groupField:i,childCount:0,[a]:Te(),[s]:null,[x]:Te(),[c]:g,[d]:g};p&&(m[p]=!1),h&&(m[h]=!1),f.push(m),l.push(m),r.push(m),u.length&&r.push(...u)}),No(e,f)}}return{treeData:l,fullData:r}}function qo(e,t,o){const r=e,l=e,i=e,{keepSource:a,treeConfig:s,aggregateConfig:c,rowGroupConfig:d}=r,{rowGroupList:u,scrollYLoad:p}=l,{scrollYStore:h,scrollXStore:g,lastScrollLeft:m,lastScrollTop:f}=i,x=e.computeRowOpts,b=e.computeTreeOpts,v=e.computeExpandOpts,{transform:C}=b,w=b.children||b.childrenField;let E=[],y=t?t.slice(0):[];if(y.length>5e6&&xe("vxe.error.errMaxRow",[5e6]),s&&u.length)return xe("vxe.error.noTree",["aggregate-config"]),e.$nextTick();if(x.drag&&u.length)return xe("vxe.error.errConflicts",["row-config.drag","aggregate-config"]),e.$nextTick();let T=!1;if(s)C?(b.rowField||xe("vxe.error.reqProp",["tree-config.rowField"]),b.parentField||xe("vxe.error.reqProp",["tree-config.parentField"]),w||xe("vxe.error.reqProp",["tree-config.childrenField"]),b.mapChildrenField||xe("vxe.error.reqProp",["tree-config.mapChildrenField"]),w===b.mapChildrenField&&xe("vxe.error.errConflicts",["tree-config.childrenField","tree-config.mapChildrenField"]),E=n.a.toArrayTree(y,{key:b.rowField,parentKey:b.parentField,children:w,mapChildren:b.mapChildrenField}),y=E.slice(0)):E=y.slice(0);else if((c||d)&&u.length){const t=Wo(e,y,u);E=t.treeData,y=t.fullData,T=!0}l.isRowGroupStatus=T,h.startIndex=0,h.endIndex=1,g.startIndex=0,g.endIndex=1,i.cvCacheMaps={},l.isRowLoading=!0,l.scrollVMLoading=!1,l.treeExpandedFlag++,l.rowExpandedFlag++,i.insertRowMaps={},l.insertRowFlag++,i.removeRowMaps={},l.removeRowFlag++;const R=Jt(e,y);return i.tableFullData=y,i.tableFullTreeData=T?[]:E,i.tableFullGroupData=T?E:[],e.cacheRowMap(o),i.tableSynchData=t,o&&(i.isResizeCellHeight=!1),a&&e.cacheSourceMap(y),e.clearCellAreas&&r.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearMergeCells(),e.clearMergeFooterItems(),e.handleTableData(!0),e.updateFooter(),e.handleUpdateBodyMerge(),e.$nextTick().then(()=>{lr(e),lo(e)}).then(()=>{Ho(e)}).then(()=>{const t=e.computeVirtualYOpts;return R&&(h.endIndex=h.visibleSize),R&&(l.expandColumn&&"fixed"!==v.mode&&xe("vxe.error.notConflictProp",['column.type="expand','expand-config.mode="fixed"']),"scroll"===t.mode&&"fixed"===v.mode&&fe("vxe.error.notConflictProp",["virtual-y-config.mode=scroll","expand-config.mode=inside"]),r.height||r.maxHeight||xe("vxe.error.reqProp",["height | max-height | virtual-y-config={enabled: false}"]),r.spanMethod&&xe("vxe.error.scrollErrProp",["table.span-method"])),function(e){const t=e,o=e,r=e,{treeConfig:l}=t,{expandColumn:n,currentRow:i,selectRadioRow:a}=o,{fullDataRowIdData:s,fullAllDataRowIdData:c,radioReserveRow:d,selectCheckboxMaps:u,treeExpandedMaps:p,rowExpandedMaps:h}=r,g=e.computeExpandOpts,m=e.computeTreeOpts,f=e.computeRadioOpts,x=e.computeCheckboxOpts;if(a&&!c[Se(e,a)]&&(o.selectRadioRow=null),f.reserve&&d){const t=Se(e,d);s[t]&&so(e,s[t].row,!0)}r.selectCheckboxMaps=Yt(e,u),o.updateCheckboxFlag++,x.reserve&&co(e,Kt(e,r.checkboxReserveRowMap),!0,!0),i&&!c[Se(e,i)]&&(o.currentRow=null),r.rowExpandedMaps=n?Yt(e,h):{},o.rowExpandedFlag++,n&&g.reserve&&e.setRowExpand(Kt(e,r.rowExpandedReserveRowMap),!0),r.treeExpandedMaps=l?Yt(e,p):{},o.treeExpandedFlag++,l&&m.reserve&&e.setTreeExpand(Kt(e,r.treeExpandedReserveRowMap),!0)}(e),e.checkSelectionStatus(),e.dispatchEvent("data-change",{visibleColumn:i.visibleColumn,visibleData:i.afterFullData},null),new Promise(t=>{e.$nextTick().then(()=>Bo(e,!1,!1,!1)).then(()=>{Bo(e,!1,!0,!0),dr(e)}).then(()=>{let o=m,n=f;const i=e.computeVirtualXOpts,a=e.computeVirtualYOpts;i.scrollToLeftOnChange&&(o=0),a.scrollToTopOnChange&&(n=0),l.isRowLoading=!1,Bo(e,!1,!1,!1),r.showOverflow||setTimeout(()=>{zo(e,!1,!0,!0),setTimeout(()=>zo(e,!1,!0,!0),3e3)},2e3),p===R?Ee(e,o,n).then(()=>{Bo(e,!1,!0,!0),dr(e),t()}):setTimeout(()=>{Ee(e,o,n).then(()=>{Bo(e,!1,!0,!0),dr(e),t()})})})})})}function Xo(e){!function(e){const t=e,o=e,{checkboxConfig:r}=t;if(r){const{fullDataRowIdData:t}=o,r=e.computeCheckboxOpts,{checkAll:l,checkRowKeys:n}=r;if(l)uo(e,!0,!0);else if(n){const o=[];n.forEach(e=>{t[e]&&o.push(t[e].row)}),co(e,o,!0,!0)}}}(e),function(e){const t=e,o=e,{radioConfig:r}=t;if(r){const{fullDataRowIdData:t}=o,r=e.computeRadioOpts,{checkRowKey:l,reserve:n}=r;if(l&&(t[l]&&so(t[l].row,!0),n)){const t=Re(e);o.radioReserveRow={[t]:l}}}}(e),function(e){const t=e,o=e,{expandConfig:r}=t;if(r){const{fullDataRowIdData:t}=o,r=e.computeExpandOpts,{expandAll:l,expandRowKeys:n}=r;if(l)e.setAllRowExpand(!0);else if(n){const o=[];n.forEach(e=>{t[e]&&o.push(t[e].row)}),e.setRowExpand(o,!0)}}}(e),(e=>{const t=e,o=e,{treeConfig:r}=t;if(r){const{fullAllDataRowIdData:t}=o,r=e.computeTreeOpts,{expandAll:l,expandRowKeys:n}=r;if(l)e.setAllTreeExpand(!0);else if(n){const o=[];n.forEach(e=>{const r=t[e];r&&o.push(r.row)}),e.setTreeExpand(o,!0)}}})(e),function(e){const t=e,{isRowGroupStatus:o}=t;if(o){const t=e.computeAggregateOpts,{expandAll:o,expandGroupFields:r}=t;o?e.setAllRowGroupExpand(!0):r&&r.length&&e.setRowGroupExpandByField(r,!0)}}(e),function(e){const t=e,{mergeCells:o}=t;o&&e.setMergeCells(o)}(e),function(e){const t=e,{mergeHeaderCells:o}=t;o&&e.setMergeHeaderCells(o)}(e),function(e){const t=e,{mergeFooterCells:o,mergeFooterItems:r}=t,l=o||r;l&&e.setMergeFooterCells(l)}(e),e.$nextTick(()=>setTimeout(()=>e.recalculate()))}function Yo(e){!function(e){const t=e,{sortConfig:o}=t;if(o){const t=e.computeSortOpts;let{defaultSort:r}=t;r&&(n.a.isArray(r)||(r=[r]),r.length&&((o.multiple?r:r.slice(0,1)).forEach((t,o)=>{const{field:r,order:l}=t;if(r&&l){const t=e.getColumnByField(r);t&&t.sortable&&(t.order=l,t.sortTime=Date.now()+o)}}),t.remote||e.handleTableData(!0).then(lo)))}}(e)}function Ko(e){const t=e,o=e,{scrollXLoad:r}=t,{visibleColumn:l,scrollXStore:n,fullColumnIdData:i}=o,a=r?l.slice(n.startIndex,n.endIndex):l.slice(0);a.forEach((e,t)=>{const o=e.id,r=i[o];r&&(r.$index=t)}),t.tableColumn=a}function Uo(e){const t=e,o=n.a.orderBy(t.collectColumn,"renderSortNumber");t.collectColumn=o;const r=Qe(o);t.tableFullColumn=r,Qt(e)}function Zo(e){const t=e,o=e,{isScrollXBig:r}=t,{mergeBodyList:l,mergeFooterList:n,scrollXStore:i}=o,{preloadSize:a,startIndex:s,endIndex:c,offsetSize:d}=i,{toVisibleIndex:u,visibleSize:p}=Ut(e),h={startIndex:Math.max(0,r?u-1:u-1-d-a),endIndex:r?u+p:u+p+d+a};i.visibleStartIndex=u-1,i.visibleEndIndex=u+p+1,xo(l.concat(n),h,"col");const{startIndex:g,endIndex:m}=h;(u<=s||u>=c-p-1)&&(s===g&&c===m||(i.startIndex=g,i.endIndex=m,e.updateScrollXData())),e.closeTooltip()}function Qo(e,t){const o=e,r=e,l=e,i=[],a=[],s=[],{isGroup:c,columnStore:d}=r,{collectColumn:u,tableFullColumn:h,scrollXStore:g,fullColumnIdData:m}=l;if(c){const e=[],t=[],o=[];n.a.eachTree(u,(e,t,o,r,l)=>{const c=p(e);l&&l.fixed&&(e.fixed=l.fixed),l&&(e.fixed||"")!==(l.fixed||"")&&xe("vxe.error.groupFixed"),c?e.visible=!!n.a.findTree(e.children,e=>!p(e)&&e.visible):e.visible&&("left"===e.fixed?i.push(e):"right"===e.fixed?s.push(e):a.push(e))}),u.forEach(r=>{r.visible&&("left"===r.fixed?e.push(r):"right"===r.fixed?o.push(r):t.push(r))}),r.tableGroupColumn=e.concat(t).concat(o)}else h.forEach(e=>{e.visible&&("left"===e.fixed?i.push(e):"right"===e.fixed?s.push(e):a.push(e))});const f=i.concat(a).concat(s);l.visibleColumn=f,cr(e);const x=function(e,t){const o=e,r=e,l=e.computeVirtualXOpts,n=t||r.tableFullColumn,i=!!l.enabled&&l.gt>-1&&(0===l.gt||l.gt<n.length);return o.scrollXLoad=i,i}(e);if(r.hasFixedColumn=i.length>0||s.length>0,Object.assign(d,{leftList:i,centerList:a,rightList:s}),x&&(o.spanMethod&&fe("vxe.error.scrollErrProp",["span-method"]),o.footerSpanMethod&&fe("vxe.error.scrollErrProp",["footer-span-method"]),t)){const{visibleSize:t}=Ut(e);g.startIndex=0,g.endIndex=t,g.visibleSize=t,g.visibleStartIndex=0,g.visibleEndIndex=t}return f.length===l.visibleColumn.length&&l.visibleColumn.every((e,t)=>e===f[t])||(e.clearMergeCells(),e.clearMergeFooterItems()),f.forEach((e,t)=>{const o=e.id,r=m[o];r&&(r._index=t)}),Ko(e),Go(e),t?e.updateFooter().then(()=>e.recalculate()).then(()=>(e.updateCellAreas(),e.recalculate())):e.updateFooter()}function Jo(e,t){const o=e.$refs.$xeToolbar,r=e,l=e,i=e.computeExpandOpts;l.collectColumn=t;const s=Qe(t);return l.tableFullColumn=s,r.isColLoading=!0,function(e){const t=e,{collectColumn:o}=t,r={},l={};let i=1;n.a.eachTree(o,(e,t,o,n,a)=>{const{id:s,field:c}=e,d=a?a.id:null,u={$index:-1,_index:-1,column:e,colid:s,index:t,items:o,parent:a||null,width:0,oLeft:0};e.parentId=d,e.defaultParentId=d,e.sortNumber=i,e.renderSortNumber=i,i++,c&&(l[c]&&xe("vxe.error.colRepet",["field",c]),l[c]=u),r[s]=u}),t.fullColumnIdData=r,t.fullColumnFieldData=l}(e),Promise.resolve(function(e){const t=e,{customConfig:o}=t,r=e.computeTableId,l=e.computeCustomOpts,{storage:n,restoreStore:i,storeOptions:s}=l,c=!0===n,d=c?{}:Object.assign({},n||{},s),u=Wt(d.resizable,c),p=Wt(d.visible,c),h=Wt(d.fixed,c),g=Wt(d.sort,c),m=Wt(d.aggFunc,c);if(n&&(o?a(l):l.enabled)&&(u||p||h||g||m)){if(!r)return void xe("vxe.error.reqProp",["id"]);const t=Xt(r);return i?Promise.resolve(i({$table:e,id:r,type:"restore",storeData:t})).then(t=>{if(t)return Zt(e,t)}).catch(e=>e):Zt(e,t)}}(e)).then(()=>{const{scrollXLoad:t,scrollYLoad:n,expandColumn:a}=r;return Qt(e),Qo(e,!0).then(()=>{r.scrollXLoad&&Zo(e)}),e.clearMergeCells(),e.clearMergeFooterItems(),e.handleTableData(!0),e.handleAggregateSummaryData(),(t||n)&&a&&"fixed"!==i.mode&&fe("vxe.error.scrollErrProp",["column.type=expand"]),e.$nextTick().then(()=>(o&&o.syncUpdate({collectColumn:l.collectColumn,$table:e}),e.handleUpdateCustomColumn&&e.handleUpdateCustomColumn(),r.isColLoading=!1,zo(e,!1,!0,!0)))})}function er(e){const t=e,o=e,{isAllOverflow:r,isScrollYBig:l}=t,{mergeBodyList:n,scrollYStore:i}=o,{preloadSize:a,startIndex:s,endIndex:c,offsetSize:d}=i,u=r?d:d+1,{toVisibleIndex:p,visibleSize:h}=fo(e),g={startIndex:Math.max(0,l?p-1:p-1-d-a),endIndex:l?p+h:p+h+u+a};i.visibleStartIndex=p-1,i.visibleEndIndex=p+h+1,xo(n,g,"row");const{startIndex:m,endIndex:f}=g;(p<=s||p>=c-h-1)&&(s===m&&c===f||(i.startIndex=m,i.endIndex=f,e.updateScrollYData()))}const tr=e=>function(t){const o=this,r=o,{fullAllDataRowIdData:l}=r;if(t){const r=l[Se(o,t)];if(r)return r[e]}return-1},or=e=>function(t){const{fullColumnIdData:o}=this;if(t){const r=o[t.id];if(r)return r[e]}return-1};const rr=(e,t)=>{const o=e.xeGanttView;if(o){const e=o.internalData,{elemStore:r}=e,l=Ue(r["main-body-scroll"]);l&&(l.scrollTop=t)}};function lr(e){const t=e,o=e;o.customHeight=wo(e,"height"),o.customMinHeight=wo(e,"minHeight"),o.customMaxHeight=wo(e,"maxHeight"),!t.scrollYLoad||o.customHeight||o.customMinHeight||(o.customHeight=300)}function nr(e,t,o){const r=e.computeColumnOpts,{autoOptions:l}=r,{isCalcHeader:i,isCalcBody:a,isCalcFooter:s}=l||{},c=[];i&&c.push(`.vxe-header-cell--wrapper[colid="${t.id}"]`),a&&c.push(`.vxe-body-cell--wrapper[colid="${t.id}"]`),s&&c.push(`.vxe-footer-cell--wrapper[colid="${t.id}"]`);const d=c.length?o.querySelectorAll(c.join(",")):[];let u=0;const p=d[0];if(p&&p.parentElement){const e=getComputedStyle(p.parentElement);u=Math.ceil(n.a.toNumber(e.paddingLeft)+n.a.toNumber(e.paddingRight))}let h=t.renderAutoWidth-u;for(let e=0;e<d.length;e++){const t=d[e];h=Math.max(h,t?Math.ceil(t.scrollWidth)+4:0)}return h+u}function ir(e){const t=e,o=e.computeAutoWidthColumnList,{fullColumnIdData:r}=t,l=e.$refs.refElem;l&&(l.setAttribute("data-calc-col","Y"),o.forEach(t=>{const o=t.id,n=r[o],i=nr(e,t,l);n&&(n.width=Math.max(i,n.width)),t.renderAutoWidth=i}),e.analyColumnWidth(),l.removeAttribute("data-calc-col"))}function ar(e,t,o){e.analyColumnWidth(),e.recalculate().then(()=>{e.saveCustomStore("update:width"),e.updateCellAreas(),e.dispatchEvent("column-resizable-change",o,t),e.dispatchEvent("resizable-change",o,t),setTimeout(()=>e.recalculate(!0),300)})}function sr(e,t,o){e.resizeHeightFlag++,e.recalculate().then(()=>{e.updateCellAreas(),e.dispatchEvent("row-resizable-change",o,t),setTimeout(()=>e.recalculate(!0),300)})}function cr(e){const t=e,{visibleColumn:o,fullColumnIdData:r}=t;let l=0;for(let e=0,t=o.length;e<t;e++){const t=o[e],n=r[t.id];n&&(n.oLeft=l),l+=t.renderWidth}}function dr(e){const t=e,o=e,{expandColumn:r}=t,{afterFullData:l,fullAllDataRowIdData:n,rowExpandedMaps:i}=o,a=e.computeExpandOpts,s=e.computeRowOpts,c=e.computeCellOpts,d=e.computeDefaultRowHeight,{handleGetRowId:u}=$e(e);let p=0;for(let e=0,t=l.length;e<t;e++){const t=u(l[e]),o=n[t]||{};o.oTop=p,p+=o.resizeHeight||c.height||s.height||o.height||d,r&&i[t]&&(p+=o.expandHeight||a.height||0)}}function ur(e){const t=e,o=e,{expandColumn:r,scrollYLoad:l,scrollYTop:i,isScrollYBig:a}=t,s=e.computeExpandOpts,c=e.computeRowOpts,d=e.computeCellOpts,u=e.computeDefaultRowHeight,{mode:p}=s;if(r&&"fixed"===p){const{elemStore:r,fullAllDataRowIdData:s}=o,p=e.$refs.refRowExpandElem,h=Ue(r["main-body-scroll"]);if(p&&h){let o=!1;n.a.arrayEach(p.children,e=>{const t=e,r=t.getAttribute("rowid")||"",n=s[r];if(n){const e=t.offsetHeight+1,s=h.querySelector(`.vxe-body--row[rowid="${r}"]`);let p=0;l?p=a&&s?s.offsetTop+s.offsetHeight:n.oTop+(n.resizeHeight||d.height||c.height||n.height||u):s&&(p=s.offsetTop+s.offsetHeight),a&&(p+=i),t.style.top=ne(p),o||n.expandHeight!==e&&(o=!0),n.expandHeight=e}}),o&&(t.rowExpandHeightFlag++,e.$nextTick(()=>{dr(e)}))}}}function pr(e){const t=e,{elemStore:o}=t,r=e.$refs.refRowExpandElem,l=Ue(o["main-body-scroll"]);r&&l&&(r.scrollTop=l.scrollTop)}const hr={callSlot(e,t,o,r){const l=this.$xeGrid,i=this.$xeGantt,a=l||i;if(e){if(a)return a.callSlot(e,t,o);if(n.a.isFunction(e))return rt(e.call(this,t,o,r))}return[]},getEl(){return this.$refs.refElem},getParentElem(){const e=this.$xeGrid,t=this.$xeGantt,o=e||t,{$el:r}=this;return o?o.$el.parentNode:r.parentNode},getParentHeight(){const e=this.$xeGrid,t=this.$xeGantt,{height:o}=this,r=this.$refs.refElem;if(r){const l=r.parentNode,n="100%"===o||"auto"===o?ce(l):0;let i=0;return l&&(i=t&&te(l,"vxe-gantt--table-wrapper")?t.getParentHeight():e&&te(l,"vxe-grid--table-wrapper")?e.getParentHeight():l.clientHeight),Math.floor(i-n)}return 0},getExcludeHeight(){const e=this.$xeGrid,t=this.$xeGantt,o=e||t;return o?o.getExcludeHeight():0},clearAll(){return(e=this).clearFilter&&e.clearFilter(),function(e){return e.initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearEdit&&e.clearEdit(),e.clearSelected&&(e.keyboardConfig||e.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&e.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll()}(e);var e},handleUpdateRowGroup(e){Vo(this,e)},syncData(){const e=this,t=e,o=e;return xe("vxe.error.delFunc",["syncData","getData"]),e.$nextTick().then(()=>(t.tableData=[],e.$nextTick().then(()=>qo(e,o.tableFullData,!0))))},updateData(){const e=this,t=e,{scrollXLoad:o,scrollYLoad:r}=t;return e.handleTableData(!0).then(()=>{if(e.updateFooter(),o||r)return o&&e.updateScrollXSpace(),r&&e.updateScrollYSpace(),e.refreshScroll()}).then(()=>(e.updateCellAreas(),zo(e,!0,!0,!0))).then(()=>{setTimeout(()=>zo(e,!1,!0,!0),50)})},handleTableData(e){const t=this,o=t,r=t,{scrollYLoad:l}=o,{scrollYStore:i,fullDataRowIdData:s}=r,c=r.xeGanttView;let d=r.afterFullData;e&&(!function(e){const t=e,o=e,r=e,{treeConfig:l}=t,{isRowGroupStatus:i}=o,{tableFullColumn:s,tableFullData:c,tableFullTreeData:d,tableFullGroupData:u}=r,p=e.computeFilterOpts,h=e.computeSortOpts,g=e.computeAggregateOpts,m=e.computeTreeOpts,f=m.children||m.childrenField,{transform:x,rowField:b,parentField:v,mapChildrenField:C}=m,{isEvery:w,remote:E,filterMethod:y}=p,{remote:T,sortMethod:R,multiple:S,chronological:O}=h;let $=[],F=[];if(E&&T)i?(F=n.a.searchTree(u,()=>!0,{original:!0,isEvery:!0,children:g.mapChildrenField,mapChildren:g.childrenField}),$=F):l&&x?(F=n.a.searchTree(d,()=>!0,{original:!0,isEvery:w,children:C,mapChildren:f}),$=F):($=l?d.slice(0):c.slice(0),F=$);else{const t=[];let o=[];if(s.forEach(e=>{const{field:r,sortable:l,order:n,filters:i}=e;if(!E&&i&&i.length){const o=[],r=[];i.forEach(e=>{e.checked&&(r.push(e),o.push(e.value))}),r.length&&t.push({column:e,valueList:o,itemList:r})}!T&&l&&n&&o.push({column:e,field:r,property:r,order:n,sortTime:e.sortTime})}),S&&O&&o.length>1&&(o=n.a.orderBy(o,"sortTime")),!E&&t.length){const o=o=>t.every(({column:t,valueList:r,itemList:l})=>{const{filterMethod:i,filterRender:s}=t,c=a(s)?Pt.get(s.name):null,d=c?c.tableFilterMethod||c.filterMethod:null,u=c?c.tableFilterDefaultMethod||c.defaultTableFilterMethod||c.defaultFilterMethod:null,p=Ye(o,t);return i?l.some(r=>i({value:r.value,option:r,cellValue:p,row:o,column:t,$table:e})):d?l.some(r=>d({value:r.value,option:r,cellValue:p,row:o,column:t,$table:e})):y?y({$table:e,options:l,values:r,cellValue:p,row:o,column:t}):u?l.some(r=>u({value:r.value,option:r,cellValue:p,row:o,column:t,$table:e})):r.indexOf(n.a.get(o,t.field))>-1});i?(F=n.a.searchTree(u,o,{original:!0,isEvery:!0,children:g.mapChildrenField,mapChildren:g.childrenField}),$=F):l&&x?(F=n.a.searchTree(d,o,{original:!0,isEvery:w,children:C,mapChildren:f}),$=F):($=l?d.filter(o):c.filter(o),F=$)}else i?(F=n.a.searchTree(u,()=>!0,{original:!0,isEvery:!0,children:g.mapChildrenField,mapChildren:g.childrenField}),$=F):l&&x?(F=n.a.searchTree(d,()=>!0,{original:!0,isEvery:w,children:C,mapChildren:f}),$=F):($=l?d.slice(0):c.slice(0),F=$);if(!T&&o.length)if(i){if(R){const t=R({data:F,sortList:o,$table:e});F=n.a.isArray(t)?t:F}else{const t=n.a.toTreeArray(F,{key:g.rowField,parentKey:g.parentField,children:g.mapChildrenField});F=n.a.toArrayTree(n.a.orderBy(t,o.map(({column:t,order:o})=>[Ro(e,t),o])),{key:g.rowField,parentKey:g.parentField,children:g.childrenField,mapChildren:g.mapChildrenField})}$=F}else if(l&&x){if(R){const t=R({data:F,sortList:o,$table:e});F=n.a.isArray(t)?t:F}else{const t=n.a.toTreeArray(F,{children:C});F=n.a.toArrayTree(n.a.orderBy(t,o.map(({column:t,order:o})=>[Ro(e,t),o])),{key:b,parentKey:v,children:f,mapChildren:C})}$=F}else{if(R){const t=R({data:$,sortList:o,$table:e});$=n.a.isArray(t)?t:$}else{if(S)$=n.a.orderBy($,o.map(({column:t,order:o})=>[Ro(e,t),o]));else{const t=o[0];let r;n.a.isArray(t.sortBy)&&(r=t.sortBy.map(e=>[e,t.order])),$=n.a.orderBy($,r||[t].map(({column:t,order:o})=>[Ro(e,t),o]))}$=n.a.orderBy($,o.map(({column:t,order:o})=>[Ro(e,t),o]))}F=$}}r.afterFullData=$,r.afterTreeFullData=F,r.afterGroupFullData=F,oo(e)}(t),d=ro(t));const u=l?d.slice(i.startIndex,i.endIndex):d.slice(0),p={};return u.forEach((e,o)=>{const r=Se(t,e),l=s[r];l&&(l.$index=o),p[r]=e}),o.tableData=u,r.visibleDataRowIdData=p,c&&c.updateViewData&&c.updateViewData(),t.$nextTick()},loadTableData(e,t){return qo(this,e,t)},loadData(e){const t=this,{initStatus:o}=this;return qo(t,e,!1).then(()=>(this.inited=!0,this.initStatus=!0,o||Xo(t),zo(t,!1,!0,!0)))},reloadData(e){const t=this;return this.clearAll().then(()=>(this.inited=!0,this.initStatus=!0,qo(t,e,!0))).then(()=>(Xo(t),zo(t,!1,!0,!0)))},setRow(e,t){if(t){let o=e;n.a.isArray(e)||(o=[e]),o.forEach(e=>Object.assign(e,t))}return this.$nextTick()},reloadRow(e,t,o){const r=this,l=r,i=r,a=r,{keepSource:s}=l,{tableData:c}=i,{sourceDataRowIdData:d}=a;if(s){if(r.isAggregateRecord(e))return r.$nextTick();const l=d[Se(r,e)];if(l&&e)if(o){const r=n.a.clone(n.a.get(t||e,o),!0);n.a.set(e,o,r),n.a.set(l,o,r)}else{const o=Re(r),i=Se(r,e),a=n.a.clone(Object.assign({},t),!0);n.a.set(a,o,i),n.a.destructuring(l,Object.assign(e,a))}i.tableData=c.slice(0)}else xe("vxe.error.reqProp",["keep-source"]);return r.$nextTick()},loadColumn(e){const t=this,o=t,{lastScrollLeft:r,lastScrollTop:l}=o,i=n.a.mapTree(e,e=>wt.createColumn(t,e),{children:"children"});return Jo(t,i).then(()=>{let e=r,o=l;const n=t.computeVirtualXOpts,i=t.computeVirtualYOpts;n.scrollToLeftOnChange&&(e=0),i.scrollToTopOnChange&&(o=0),Ee(t,e,o)})},reloadColumn(e){return this.clearAll().then(()=>this.loadColumn(e))},handleInitColumn(e){return Jo(this,e)},cacheRowMap(e){const t=this,o=t,r=t,l=t,{treeConfig:i}=o,{isRowGroupStatus:a}=r,{currKeyField:s,fullAllDataRowIdData:c,tableFullData:d,tableFullTreeData:u,tableFullGroupData:p,treeExpandedMaps:h}=l,g=e?{}:Object.assign({},c),m={},f={},{handleUpdateRowId:x}=Oe(t),b=(e,t,o,r,l,n,i,a)=>{let c=g[n];f[n]&&xe("vxe.error.repeatKey",[s,n]),c||(c={row:e,rowid:n,seq:a,index:-1,_index:-1,$index:-1,treeIndex:t,_tIndex:-1,items:o,parent:l,level:i,height:0,resizeHeight:0,oTop:0,expandHeight:0}),c.treeLoaded=!1,c.expandLoaded=!1,c.row=e,c.items=o,c.parent=l,c.level=i,c.index=r,c.treeIndex=t,f[n]=!0,m[n]=c,g[n]=c};if(i){const e=t.computeTreeOpts,{lazy:o}=e,r=e.children||e.childrenField,l=e.hasChild||e.hasChildField;n.a.eachTree(u,(e,t,n,a,s,c)=>{const d=x(e);i&&o&&(e[l]&&void 0===e[r]&&(e[r]=null),h[d]&&(e[r]&&e[r].length||delete h[d])),b(e,t,n,s?-1:t,s,d,c.length-1,ye(a))},{children:r})}else if(a){const e=t.computeAggregateOpts,{mapChildrenField:o}=e;n.a.eachTree(p,(e,t,o,r,l,n)=>{const i=x(e);b(e,t,o,l?-1:t,l,i,n.length-1,ye(r))},{children:o})}else d.forEach((e,t,o)=>{b(e,t,o,t,null,x(e),0,t+1)});l.fullDataRowIdData=m,l.fullAllDataRowIdData=g,r.treeExpandedFlag++},cacheSourceMap(e){const t=this,{treeConfig:o}=this,r=this.computeTreeOpts,l=n.a.clone(e,!0),{handleUpdateRowId:i}=Oe(this),a={},s=e=>{const t=i(e);a[t]=e};if(o){const e=r.children||r.childrenField;n.a.eachTree(l,s,{children:r.transform?r.mapChildrenField:e})}else l.forEach(s);t.sourceDataRowIdData=a,t.tableSourceData=l},getParams(){return this.params},loadTreeChildren(e,t){const o=this,r=o,l=o,{keepSource:i}=r,{tableSourceData:a,fullDataRowIdData:s,fullAllDataRowIdData:c,sourceDataRowIdData:d}=l,u=o.computeTreeOpts,{transform:p,mapChildrenField:h}=u,g=u.children||u.childrenField,m=c[Se(o,e)],f=m?m.level:0;return this.createData(t).then(t=>{if(i){const o=Se(this,e),r=n.a.findTree(a,e=>o===Se(this,e),{children:g});r&&(r.item[g]=n.a.clone(t,!0)),t.forEach(e=>{const t=Se(this,e);d[t]=n.a.clone(e,!0)})}return n.a.eachTree(t,(e,t,r,l,n,i)=>{const a=Se(o,e),d={row:e,rowid:a,seq:-1,index:t,_index:-1,$index:-1,treeIndex:-1,_tIndex:-1,items:r,parent:n||m.row,level:f+i.length,height:0,resizeHeight:0,oTop:0,expandHeight:0};s[a]=d,c[a]=d},{children:g}),e[g]=t,p&&(e[h]=n.a.clone(t,!1)),oo(o),t})},getRowNode(e){const t=this;if(e){const{fullAllDataRowIdData:o}=t,r=e.getAttribute("rowid");if(r){const e=o[r];if(e)return{rowid:e.rowid,item:e.row,index:e.index,items:e.items,parent:e.parent}}}return null},getColumnNode(e){const t=this;if(e){const{fullColumnIdData:o}=t,r=e.getAttribute("colid");if(r){const e=o[r];if(e)return{colid:e.colid,item:e.column,index:e.index,items:e.items,parent:e.parent}}}return null},getRowSeq:tr("seq"),getRowIndex:tr("index"),getVTRowIndex:tr("_index"),getVMRowIndex:tr("$index"),_getRowIndex(e){return fe("vxe.error.delFunc",["_getRowIndex","getVTRowIndex"]),this.getVTRowIndex(e)},$getRowIndex(e){return fe("vxe.error.delFunc",["$getRowIndex","getVMRowIndex"]),this.getVMRowIndex(e)},getColumnIndex:or("index"),getVTColumnIndex:or("_index"),getVMColumnIndex:or("$index"),_getColumnIndex(e){return fe("vxe.error.delFunc",["_getColumnIndex","getVTColumnIndex"]),this.getVTColumnIndex(e)},$getColumnIndex(e){return fe("vxe.error.delFunc",["$getColumnIndex","getVMColumnIndex"]),this.getVMColumnIndex(e)},isSeqColumn:e=>e&&"seq"===e.type,defineField(e){const t=this,{treeConfig:o}=this,r=this.computeExpandOpts,l=this.computeTreeOpts,i=this.computeRadioOpts,a=this.computeCheckboxOpts,s=l.children||l.childrenField,c=Re(this);return n.a.isArray(e)||(e=[e||{}]),e.map(e=>{t.tableFullColumn.forEach(t=>{const{field:o,editRender:r}=t;if(o&&!n.a.has(e,o)){let l=null;if(r){const{defaultValue:e}=r;n.a.isFunction(e)?l=e({column:t}):n.a.isUndefined(e)||(l=e)}n.a.set(e,o,l)}});return[i.labelField,a.checkField,a.labelField,r.labelField].forEach(t=>{t&&m(n.a.get(e,t))&&n.a.set(e,t,null)}),o&&l.lazy&&n.a.isUndefined(e[s])&&(e[s]=null),m(n.a.get(e,c))&&n.a.set(e,c,Te()),e})},createData(e){const t=this;return t.$nextTick().then(()=>t.defineField(e))},createRow(e){const t=n.a.isArray(e);return t||(e=[e]),this.createData(e).then(e=>t?e:e[0])},revertData(e,t){const o=this,r=o,l=o,i=o,{keepSource:a,treeConfig:s}=r,{fullAllDataRowIdData:c,fullDataRowIdData:d,tableSourceData:u,sourceDataRowIdData:p,tableFullData:h,afterFullData:g,removeRowMaps:m}=i,f=o.computeTreeOpts,{transform:x}=f,{handleGetRowId:b}=$e(o);if(!a)return xe("vxe.error.reqProp",["keep-source"]),o.$nextTick();let v=e;e?n.a.isArray(e)||(v=[e]):v=n.a.toArray(o.getUpdateRecords());let C=!1;return v.length&&v.forEach(e=>{const r=b(e),l=c[r];if(l){const e=l.row;if(!o.isInsertByRow(e)){const l=p[r];l&&e&&(t?n.a.set(e,t,n.a.clone(n.a.get(l,t),!0)):n.a.destructuring(e,n.a.clone(l,!0)),!d[r]&&o.isRemoveByRow(e)&&(m[r]&&delete m[r],h.unshift(e),g.unshift(e),C=!0))}}}),e?(C&&(l.removeRowFlag++,o.updateFooter(),o.cacheRowMap(!1),o.handleTableData(s&&x),s&&x||o.updateAfterDataIndex(),o.checkSelectionStatus(),l.scrollYLoad&&o.updateScrollYSpace()),o.$nextTick().then(()=>(o.updateCellAreas(),zo(o,!1,!0,!0)))):o.reloadData(u)},clearData(e,t){const{tableFullData:o,visibleColumn:r}=this;return arguments.length?e&&!n.a.isArray(e)&&(e=[e]):e=o,t?e.forEach(e=>n.a.set(e,t,null)):e.forEach(e=>{r.forEach(t=>{t.field&&Ke(e,t,null)})}),this.$nextTick()},getCellElement(e,t){const{elemStore:o}=this,r=He(this,t);if(!r)return null;const l=Se(this,e),n=Ue(o["main-body-scroll"]),i=Ue(o["left-body-scroll"]),a=Ue(o["right-body-scroll"]);let s;return r&&(r.fixed&&("left"===r.fixed?i&&(s=i):a&&(s=a)),s||(s=n),s)?s.querySelector(`.vxe-body--row[rowid="${l}"] .${r.id}`):null},getCellLabel(e,t){const o=this,r=o,l=He(this,t);if(!l)return null;const i=l.formatter,a=Ye(e,l);let s=a;if(i){let t;const{fullAllDataRowIdData:c}=r,d=Se(o,e),u=l.id,p=c[d];if(p&&(t=p.formatData,t||(t=c[d].formatData={}),p&&t[u]&&t[u].value===a))return t[u].label;const h={cellValue:a,row:e,rowIndex:this.getRowIndex(e),column:l,columnIndex:this.getColumnIndex(l)};if(n.a.isString(i)){const e=Bt.get(i),t=e?e.tableCellFormatMethod||e.cellFormatMethod:null;s=t?t(h):""}else if(n.a.isArray(i)){const e=Bt.get(i[0]),t=e?e.tableCellFormatMethod||e.cellFormatMethod:null;s=t?t(h,...i.slice(1)):""}else s=i(h);t&&(t[u]={value:a,label:s})}return s},isInsertByRow(e){const t=Se(this,e);return!!this.insertRowFlag&&!!this.insertRowMaps[t]},isRemoveByRow(e){const t=Se(this,e);return!!this.removeRowFlag&&!!this.removeRowMaps[t]},removeInsertRow(){const{insertRowMaps:e}=this;return this.remove(n.a.values(e))},isUpdateByRow(e,t){const o=this,r=o,l=o,{keepSource:i}=r,{tableFullColumn:a,fullDataRowIdData:s,sourceDataRowIdData:c}=l;if(i){const r=n.a.isString(e)||n.a.isNumber(e)?e:Se(o,e),l=s[r];if(!l)return!1;const i=l.row,d=c[r];if(d){if(arguments.length>1)return!Nt(d,i,t);for(let e=0,t=a.length;e<t;e++){const t=a[e].field;if(t&&!Nt(d,i,t))return!0}}}return!1},getColumns(e){const{visibleColumn:t}=this;return n.a.isUndefined(e)?t.slice(0):t[e]},getColid(e){const t=He(this,e);return t?t.id:null},getColumnById(e){const{fullColumnIdData:t}=this;return t[e]?t[e].column:null},getColumnByField(e){const{fullColumnFieldData:t}=this;return t[e]?t[e].column:null},getParentColumn(e){const t=this.fullColumnIdData,o=He(this,e);return o&&o.parentId&&t[o.parentId]?t[o.parentId].column:null},getTableColumn(){const e=this,t=this;return{collectColumn:t.collectColumn.slice(0),fullColumn:t.tableFullColumn.slice(0),visibleColumn:t.visibleColumn.slice(0),tableColumn:e.tableColumn.slice(0)}},moveColumnTo(e,t,o){const r=this,l=r,{fullColumnIdData:i,visibleColumn:a}=l,{dragToChild:s,dragPos:c,isCrossDrag:d}=Object.assign({},o),u=He(r,e);let p=null;const h=u?i[u.id]:null;let g="left";if(n.a.isNumber(t)){if(h&&t){let e=h.items,o=h._index+t;d&&(e=a,o=h._index+t),o>0&&o<e.length-1&&(p=e[o]),t>0&&(g="right")}}else{p=He(r,t);const e=p?i[p.id]:null;h&&e&&e._index>h._index&&(g="right")}return r.handleColDragSwapEvent(null,!0,u,p,c||g,!0===s)},moveRowTo(e,t,o){const r=this,l=r,i=r,{treeConfig:a}=l,{fullAllDataRowIdData:s,afterFullData:c}=i,{dragToChild:d,dragPos:u,isCrossDrag:p}=Object.assign({},o),h=r.computeTreeOpts,g=Pe(r,e);let m=null,f="top";const x=g?s[Se(r,g)]:null;if(n.a.isNumber(t)){if(x&&t){let e=c,o=x._index+t;a&&(e=x.items,h.transform&&(o=x.treeIndex+t,p&&(e=c,o=x._index+t))),o>=0&&o<=e.length-1&&(m=e[o]),t>0&&(f="bottom")}}else{m=Pe(r,t);const e=m?s[Se(r,m)]:null;x&&e&&e._index>x._index&&(f="bottom")}const b=r.handleRowDragSwapEvent(null,!0,g,m,u||f,!0===d);return Io(r),b},getFullColumns(){const{collectColumn:e}=this;return e.slice(0)},getData(e){const t=this.data||this.tableSynchData;return n.a.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords(e){const{treeConfig:t}=this,{updateCheckboxFlag:o}=this,{tableFullData:r,afterFullData:l,tableFullTreeData:i,fullDataRowIdData:a,afterFullRowMaps:s,selectCheckboxMaps:c}=this,d=this.computeTreeOpts,u=this.computeCheckboxOpts,{transform:p,mapChildrenField:h}=d,{checkField:g}=u,m=d.children||d.childrenField;let f=[];if(o)if(g)if(t){const t=e?p?i:r:p?i:l;f=n.a.filterTree(t,e=>n.a.get(e,g),{children:p?h:m})}else{f=(e?r:l).filter(e=>n.a.get(e,g))}else{const o=e||t&&!p?a:s;n.a.each(c,(e,t)=>{o[t]&&f.push(a[t].row)})}return f},updateAfterDataIndex(){oo(this)},getTreeRowChildren(e){const t=this,o=t,r=t,{treeConfig:l}=o,{fullAllDataRowIdData:i}=r,a=t.computeTreeOpts,{transform:s,mapChildrenField:c}=a,d=a.children||a.childrenField;if(e&&l){let o;if(o=n.a.isString(e)?e:Se(t,e),o){const e=i[o],t=e?e.row:null;if(t)return t[s?c:d]||[]}}return[]},getTreeRowLevel(e){const t=this,o=t,r=t,{treeConfig:l}=o,{fullAllDataRowIdData:i}=r;if(e&&l){let o;if(o=n.a.isString(e)?e:Se(t,e),o){const e=i[o];if(e)return e.level}}return-1},getTreeParentRow(e){const t=this,o=t,r=t,{treeConfig:l}=o,{fullAllDataRowIdData:i}=r;if(e&&l){let o;if(o=n.a.isString(e)?e:Se(t,e),o){const e=i[o];if(e)return e.parent}}return null},getParentRow(e){return fe("vxe.error.delFunc",["getParentRow","getTreeParentRow"]),this.getTreeParentRow(e)},getRowById(e){const{fullAllDataRowIdData:t}=this,o=n.a.eqNull(e)?"":encodeURIComponent(e);return t[o]?t[o].row:null},getRowid(e){return Se(this,e)},getTableData(){const{tableData:e,footerTableData:t}=this,{tableFullData:o,afterFullData:r,tableFullTreeData:l}=this;return{fullData:this.treeConfig?l.slice(0):o.slice(0),visibleData:r.slice(0),tableData:e.slice(0),footerData:t.slice(0)}},getFullData(){const e=this,t=e,o=e,{treeConfig:r}=t,{tableFullData:l,tableFullTreeData:i}=o;if(r){const t=e.computeTreeOpts,{transform:o,mapChildrenField:r,rowField:l,parentField:a}=t,s=t.children||t.childrenField;return o?n.a.toArrayTree(n.a.toTreeArray(i,{children:r}),{key:l,parentKey:a,children:s,mapChildren:r}):i.slice(0)}return l.slice(0)},handleLoadDefaults(){Xo(this)},handleInitDefaults(){Yo(this)},setColumnFixed(e,t){const o=this;let l=!1;const i=n.a.isArray(e)?e:[e],a=o.computeColumnOpts,s=o.computeIsMaxFixedColumn;for(let e=0;e<i.length;e++){const c=Ge(o,He(o,i[e]));if(c&&c.fixed!==t){if(!c.fixed&&s)return r.c.modal&&r.c.modal.message({status:"error",content:Ht("vxe.table.maxFixedCol",[a.maxFixedSize])}),o.$nextTick();n.a.eachTree([c],e=>{e.fixed=t,e.renderFixed=t}),o.saveCustomStore("update:fixed"),l||(l=!0)}}return l?o.refreshColumn():o.$nextTick()},clearColumnFixed(e){const t=this;let o=!1;return(n.a.isArray(e)?e:[e]).forEach(e=>{const r=He(t,e),l=Ge(t,r);l&&l.fixed&&(n.a.eachTree([l],e=>{e.fixed=null,e.renderFixed=null}),t.saveCustomStore("update:fixed"),o||(o=!0))}),o?t.refreshColumn():t.$nextTick()},hideColumn(e){const t=this;let o=!1;return(n.a.isArray(e)?e:[e]).forEach(e=>{const r=He(t,e);r&&r.visible&&(r.visible=!1,o||(o=!0))}),o?t.handleCustom():t.$nextTick()},showColumn(e){const t=this;let o=!1;return(n.a.isArray(e)?e:[e]).forEach(e=>{const r=He(t,e);r&&!r.visible&&(r.visible=!0,o||(o=!0))}),o?t.handleCustom():t.$nextTick()},setColumnWidth(e,t){const o=this,r=o,{elemStore:l}=r;let i=!1;const a=n.a.isArray(e)?e:[e];let s=n.a.toInteger(t);if(ee(t)){const e=Ue(l["main-body-scroll"]),t=e?e.clientWidth-1:0;s=Math.floor(s*t)}return s&&(a.forEach(e=>{const t=He(o,e);t&&(t.resizeWidth=s,i||(i=!0))}),i)?o.refreshColumn().then(()=>({status:i})):o.$nextTick().then(()=>({status:i}))},getColumnWidth(e){const t=He(this,e);return t?t.renderWidth:0},resetColumn(e){return fe("vxe.error.delFunc",["resetColumn","resetCustom"]),this.resetCustom(e)},handleCustom(){const e=this,t=e,{mouseConfig:o}=t;return o&&(e.clearSelected&&e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.analyColumnWidth(),e.refreshColumn(!0)},restoreCustomStorage(){const e=this,t=e,{customConfig:o}=t,r=e.computeTableId,l=e.computeCustomOpts,{storage:n,restoreStore:i,storeOptions:s}=l,c=!0===n,d=c?{}:Object.assign({},n||{},s),u=Wt(d.resizable,c),p=Wt(d.visible,c),h=Wt(d.fixed,c),g=Wt(d.aggGroup,c),m=Wt(d.sort,c);if(n&&(o?a(l):l.enabled)&&(u||p||h||g||m)){if(!r)return void xe("vxe.error.reqProp",["id"]);const t=Xt(r);return i?Promise.resolve(i({$table:e,id:r,type:"restore",storeData:t})).then(t=>{if(t)return Zt(e,t)}).catch(e=>e):Zt(e,t)}},getCustomStoreData(){const e=this,t=e,o=e,r=e,{id:l}=t,i=e.computeCustomOpts,{isRowGroupStatus:a,rowGroupList:s}=o,{fullColumnFieldData:c,collectColumn:d}=r,{storage:u,checkMethod:p,storeOptions:h}=i,g=!0===u,m=g?{}:Object.assign({},u||{},h),f=Wt(m.resizable,g),x=Wt(m.visible,g),b=Wt(m.fixed,g),v=Wt(m.sort,g),C=Wt(m.aggGroup,g),w=Wt(m.aggFunc,g),E={},y=[],T={},R={},S={},O={},$={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0,aggGroupData:void 0,aggFuncData:void 0};if(!l)return u&&xe("vxe.error.reqProp",["id"]),$;let F=0,D=0,k=0,M=0,I=0;const A={};return n.a.eachTree(d,(t,o,r,l,n)=>{const i=t.getKey();if(i){if(n){if(v){const e=n.getKey(),t=A[e];if(D=1,t){const e={k:i};A[i]=e,t.c||(t.c=[]),t.c.push(e)}}}else{if(v){D=1;const e={k:i};A[i]=e,y.push(e)}b&&(t.fixed||"")!==(t.defaultFixed||"")&&(k=1,R[i]=t.fixed)}f&&t.resizeWidth&&(F=1,E[i]=t.renderWidth),!x||p&&!p({$table:e,column:t})||(!t.visible&&t.defaultVisible?(M=1,T[i]=!1):t.visible&&!t.defaultVisible&&(M=1,T[i]=!0)),w&&(t.aggFunc||"")!==(t.defaultAggFunc||"")&&(I=1,O[i]=t.aggFunc)}else xe("vxe.error.reqProp",[(t.getTitle()||t.type||"")+" -> column.field=?"])}),F&&($.resizableData=E),D&&($.sortData=y),k&&($.fixedData=R),M&&($.visibleData=T),C&&a&&(s.forEach(e=>{const t=c[e.field];t&&(S[t.column.getKey()]=!0)}),$.aggGroupData=S),I&&($.aggFuncData=O),$},saveCustomStore(e){const t=this,o=t,r=t,{customConfig:l}=o,i=t.computeTableId,s=t.computeCustomOpts,{updateStore:c,storage:d,storeOptions:u}=s,p=!0===d,h=p?{}:Object.assign({},d||{},u),g=Wt(h.resizable,p),m=Wt(h.visible,p),f=Wt(h.fixed,p),x=Wt(h.sort,p),b=Wt(h.aggGroup,p),v=Wt(h.aggFunc,p);if("reset"!==e&&(r.isCustomStatus=!0),d&&(l?a(s):s.enabled)&&(g||m||f||x||b||v)){if(!i)return xe("vxe.error.reqProp",["id"]),this.$nextTick();const o="reset"===e?{resizableData:{},sortData:{},visibleData:{},fixedData:{},aggGroupData:{},aggFuncData:{}}:this.getCustomStoreData();if(c)return c({$table:t,id:i,type:e,storeData:o});((e,t)=>{const o=_t().version,r=Xt();r[e]=t||void 0,r._v=o,localStorage.setItem("VXE_CUSTOM_STORE",n.a.toJSONString(r))})(i,"reset"===e?null:o)}return this.$nextTick()},handleUpdateDataQueue(){this.upDataFlag++},handleRefreshColumnQueue(){this.reColumnFlag++},handleFilterOptions(e){const t=this,o=t,{filterStore:r}=o,{filters:l,filterMultiple:n,filterRender:i}=e,s=a(i)?Pt.get(i.name):null,c=e.filterRecoverMethod||(s?s.tableFilterRecoverMethod||s.filterRecoverMethod:null);r.multiple=n,r.options=l,r.column=e,r.options.forEach(o=>{const{_checked:r,checked:l}=o;o._checked=l,l||r===l||c&&c({option:o,column:e,$table:t})}),t.checkFilterOptions()},refreshColumn(e){const t=this;return e&&Uo(t),Qo(t,!0).then(()=>this.refreshScroll()).then(()=>zo(t,!1,!0,!0))},analyColumnWidth(){const{columnOpts:e}=this,{width:t,minWidth:o}=e,r=[],l=[],n=[],i=[],a=[],s=[],c=[],d=[];this.tableFullColumn.forEach(e=>{t&&!e.width&&(e.width=t),o&&!e.minWidth&&(e.minWidth=o),e.visible&&(e.resizeWidth?r.push(e):"auto"===e.width?c.push(e):J(e.width)?l.push(e):ee(e.width)?a.push(e):J(e.minWidth)?n.push(e):"auto"===e.minWidth?i.push(e):ee(e.minWidth)?s.push(e):d.push(e))}),Object.assign(this.columnStore,{resizeList:r,pxList:l,pxMinList:n,autoMinList:i,scaleList:a,scaleMinList:s,autoList:c,remainList:d})},handleColResizeMousedownEvent(e,t,o){const r=this,l=r,i=r;e.stopPropagation(),e.preventDefault();const{column:a}=o,{columnStore:s,overflowX:c,scrollbarHeight:d}=l,{visibleColumn:u}=i,{leftList:p,rightList:h}=s,g=r.computeResizableOpts,m=c?d:0,f=r.$refs.refElem,x=r.$refs.refLeftContainer,b=r.$refs.refRightContainer,v=r.$refs.refColResizeBar;if(!v)return;const C="left"===t,w="right"===t,E=v.firstElementChild,y=r.computeScrollbarXToTop,{clientX:T}=e,R=e.target;let S=a;const O=a.children&&a.children.length;O&&n.a.eachTree(a.children,e=>{S=e});let $=R.parentElement;if(O){const e=$?$.parentElement:null,t=e?e.parentElement:null;$=t?t.querySelector(`.vxe-header--column[colid="${S.id}"]`):null}if(!$)return;const F=n.a.assign(o,{cell:$,$table:r});let D=0;const k=f.getBoundingClientRect(),M=b?b.getBoundingClientRect():null,I=$.getBoundingClientRect(),A=R.getBoundingClientRect(),L=R.clientWidth,_=n.a.floor(L/2),H=A.x-k.x+_,P=Ne(F)-_,B=w?0:I.x-k.x+L+P,z=I.x-k.x+$.clientWidth-P;let j=0,G=0;if(C||w){let e=!1;const t=C?p:h;for(let o=0;o<t.length;o++){const r=t[o];e?j+=r.renderWidth:(e=r.id===S.id,e||(G+=r.renderWidth))}}const V=e=>{e.stopPropagation(),e.preventDefault();const t=f.clientHeight,o=e.clientX-T;let r=H+o;C?M&&(r=Math.min(r,M.x-k.x-j-P)):w&&(x&&(r=Math.max(r,x.clientWidth+G+P)),r=Math.min(r,z)),D=Math.max(r,B);const n=Math.max(1,D);if(v.style.left=n+"px",v.style.top=(y?m:0)+"px",v.style.height=(y?t-m:t)+"px",g.showDragTip&&E){E.textContent=Ht("vxe.table.resizeColTip",[Math.floor(S.renderWidth+(w?H-D:D-H))]);const o=f.clientWidth,r=v.clientWidth,l=E.clientWidth,i=E.clientHeight;let a=-l;n<l+r?a=0:n>o&&(a+=o-n),E.style.left=a+"px",E.style.top=Math.min(t-i,Math.max(0,e.clientY-k.y-i/2))+"px"}l.isDragResize=!0};l.isDragResize=!0,re(f,"col-drag--resize"),v.style.display="block",document.onmousemove=V,document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,v.style.display="none",i._lastResizeTime=Date.now(),setTimeout(()=>{l.isDragResize=!1},50);const t=S.renderWidth+(w?H-D:D-H),n=Object.assign(Object.assign({},o),{resizeWidth:t,resizeColumn:S});"fixed"===g.dragMode&&u.forEach(e=>{e.id!==S.id&&(e.resizeWidth||(e.resizeWidth=e.renderWidth))}),r.handleColResizeCellAreaEvent?r.handleColResizeCellAreaEvent(e,n):(S.resizeWidth=t,ar(r,e,n)),oe(f,"col-drag--resize")},V(e),r.closeMenu&&r.closeMenu()},handleColResizeDblclickEvent(e,t){const o=this,r=o,l=o,i=o.computeResizableOpts,{isDblclickAutoWidth:a}=i,s=o.$refs.refElem;if(a&&s){e.stopPropagation(),e.preventDefault();const{fullColumnIdData:i}=l,{column:a}=t;let c=a;a.children&&a.children.length&&n.a.eachTree(a.children,e=>{c=e});const d=i[c.id],u=e.target.parentNode,p=Ne(Object.assign(t,{cell:u,$table:o}));s.setAttribute("data-calc-col","Y");let h=nr(o,c,s);s.removeAttribute("data-calc-col"),d&&(h=Math.max(h,d.width)),h=Math.max(p,h);const g=Object.assign(Object.assign({},t),{resizeWidth:h,resizeColumn:c});r.isDragResize=!1,l._lastResizeTime=Date.now(),o.handleColResizeDblclickCellAreaEvent?o.handleColResizeDblclickCellAreaEvent(e,g):(c.resizeWidth=h,ar(o,e,g))}},handleRowResizeMousedownEvent(e,t){const o=this,r=o,l=o,i=o;e.stopPropagation(),e.preventDefault();const a=o.$xeGantt,{row:s}=t,{showOverflow:c}=r,{overflowX:d,scrollbarWidth:u,overflowY:p,scrollbarHeight:h}=l,{elemStore:g,fullAllDataRowIdData:m}=i,f=p?u:0,x=d?h:0,b=o.computeScrollbarYToLeft,v=o.computeResizableOpts,C=o.computeRowOpts,w=o.computeCellOpts;let E=o.$refs.refElem;if(a){const e=a.$refs.refGanttContainerElem;e&&(E=e)}const y=o.$refs.refRowResizeBar;if(!y)return;const{clientY:T}=e,R=y.firstElementChild,S=e.currentTarget.parentNode,O=S.parentNode;if(!Ue(g["main-body-scroll"]))return;const $=m[Se(o,s)];if(!$)return;const F=o.computeDefaultRowHeight;let D=$.resizeHeight||w.height||C.height||$.height||F;c||(D=S.clientHeight);const k=E.getBoundingClientRect(),M=O.getBoundingClientRect(),I=T-M.y-O.clientHeight;let A=D;const L=S.querySelector(".vxe-cell");let _=0;if(L){const e=getComputedStyle(L);_=Math.max(1,Math.ceil(n.a.toNumber(e.paddingTop)+n.a.toNumber(e.paddingBottom)))}const H=M.y-k.y+_,P=e=>{e.stopPropagation(),e.preventDefault();const t=E.clientWidth-f,o=E.clientHeight-x;let r=e.clientY-k.y-I;if(r<H?r=H:A=Math.max(_,D+e.clientY-T),y.style.left=(b?f:0)+"px",y.style.top=r+"px",y.style.width=t+"px",v.showDragTip&&R){R.textContent=Ht("vxe.table.resizeRowTip",[A]);const l=R.clientWidth,n=R.clientHeight;let i=Math.max(2,e.clientX-k.x),a=0;i+l>=t-2&&(i=t-l-2),r+n>=o&&(a=o-(r+n)),R.style.left=i+"px",R.style.top=a+"px"}l.isDragResize=!0};l.isDragResize=!0,re(E,"row-drag--resize"),y.style.display="block",document.onmousemove=P,document.onmouseup=function(e){if(document.onmousemove=null,document.onmouseup=null,y.style.display="none",i._lastResizeTime=Date.now(),setTimeout(()=>{l.isDragResize=!1},50),A!==D){const r=Object.assign(Object.assign({},t),{resizeHeight:A,resizeRow:s});i.isResizeCellHeight=!0,o.handleRowResizeCellAreaEvent?o.handleRowResizeCellAreaEvent(e,r):($.resizeHeight=A,sr(o,e,r),dr(o))}oe(E,"row-drag--resize")},P(e)},handleRowResizeDblclickEvent(e,t){const o=this,r=o,l=o,n=o.computeResizableOpts,{isDblclickAutoHeight:i}=n,a=o.$refs.refElem;if(i&&a){e.stopPropagation(),e.preventDefault();const{editStore:n}=r,{fullAllDataRowIdData:i}=l,{actived:s}=n,{row:c}=t,d=i[Se(o,c)];if(!d)return;const u=()=>{const n=yo(d,a),i=Object.assign(Object.assign({},t),{resizeHeight:n,resizeRow:c});r.isDragResize=!1,l._lastResizeTime=Date.now(),o.handleRowResizeDblclickCellAreaEvent?o.handleRowResizeDblclickCellAreaEvent(e,i):(d.resizeHeight=n,sr(o,e,i))};s.row||s.column?o.clearEdit().then(u):u()}},setRowHeightConf(e){const t=this,o=t,r=t,{fullAllDataRowIdData:l}=r;let i=!1;return e&&(n.a.each(e,(e,t)=>{const o=l[t];if(o){const t=n.a.toInteger(e);t&&(o.resizeHeight=t,i||(i=!0))}}),i&&(r.isResizeCellHeight=!0,o.resizeHeightFlag++)),t.$nextTick().then(()=>(dr(t),{status:i}))},getRowHeightConf(e){const{fullAllDataRowIdData:t,afterFullData:o}=this,{handleGetRowId:r}=$e(this),l=this.computeRowOpts,n=this.computeCellOpts,i=this.computeDefaultRowHeight,a={};return o.forEach(o=>{const s=r(o),c=t[s];if(c){const t=c.resizeHeight;if(t||e){const e=t||n.height||l.height||c.height||i;a[s]=e}}}),a},recalcRowHeight(e){const t=this,o=t,r=t,{fullAllDataRowIdData:l}=r,i=n.a.isArray(e)?e:[e],a=t.$refs.refElem;if(a){const{handleGetRowId:e}=$e(t);a.setAttribute("data-calc-row","Y"),i.forEach(t=>{const o=n.a.isString(t)||n.a.isNumber(t)?t:e(t),r=l[o];r&&(r.resizeHeight=yo(r,a)),a.removeAttribute("data-calc-row")}),o.calcCellHeightFlag++}return t.$nextTick()},setRowHeight(e,t){const o=this,r=o,l=o,{fullAllDataRowIdData:i}=l;let a=!1;const s=n.a.isArray(e)?e:[e];let c=n.a.toInteger(t);if(ee(t)){const e=o.$refs.refTableBody,t=e?e.$el:null,r=t?t.clientHeight-1:0;c=Math.floor(c*r)}if(c){const{handleGetRowId:e}=$e(o);s.forEach(t=>{const o=n.a.isString(t)||n.a.isNumber(t)?t:e(t),r=i[o];r&&(r.resizeHeight=c,a||(a=!0))}),a&&(l.isResizeCellHeight=!0,r.resizeHeightFlag++)}return o.$nextTick()},getRowHeight(e){const{fullAllDataRowIdData:t}=this,o=this.computeRowOpts,r=this.computeCellOpts,l=this.computeDefaultRowHeight,i=t[n.a.isString(e)||n.a.isNumber(e)?e:Se(this,e)];return i?i.resizeHeight||r.height||o.height||i.height||l:0},refreshScroll(){const e=this,t=e,{elemStore:o,lastScrollLeft:r,lastScrollTop:l}=t,n=Ue(o["main-header-scroll"]),i=Ue(o["main-body-scroll"]),a=Ue(o["main-footer-scroll"]),s=Ue(o["left-body-scroll"]),c=Ue(o["right-body-scroll"]),d=e.$refs.refScrollXHandleElem,u=e.$refs.refScrollYHandleElem;return new Promise(o=>{if(r||l)return Ee(e,r,l).then(()=>{setTimeout(o,10)});t.intoRunScroll=!0,de(u,l),de(i,l),de(s,l),de(c,l),ue(d,r),ue(i,r),ue(n,r),ue(a,r),setTimeout(()=>{t.intoRunScroll=!1,o()},10)})},handleResizeEvent(){jo(this)},recalculate(e){const t=!!e;return zo(this,t,t,t)},updateStyle(){return lo(this)},checkScrolling(){const{elemStore:e}=this,t=Ue(e["main-body-scroll"]),o=this.$refs.refLeftContainer,r=this.$refs.refRightContainer,l=this.$refs.refScrollXHandleElem||t;l&&(o&&(l.scrollLeft>0?re(o,"scrolling--middle"):oe(o,"scrolling--middle")),r&&(l.clientWidth<l.scrollWidth-Math.ceil(l.scrollLeft)?re(r,"scrolling--middle"):oe(r,"scrolling--middle")))},preventEvent(e,t,o,r,l){const n=this,i=n.$xeGrid,a=n.$xeGantt;let s=zt.get(t);s.length||"event.clearEdit"!==t||(s=zt.get("event.clearActived"),s.length&&fe("vxe.error.delEvent",["event.clearActived","event.clearEdit"]));let c=null,d=!1;for(let t=0;t<s.length;t++){const r=(0,s[t])(Object.assign({$table:n,$grid:i,$gantt:a,$event:e},o));if(!1===r){d=!0;break}if(r&&!1===r.status){c=r.result,d=!0;break}}return d||r&&(c=r()),l&&l(),c},handleGlobalMousedownEvent(e){const t=this,o=t.$xeGrid,r=t.$xeGantt,l=o||r,{$el:n,$refs:i,$toolbar:a,mouseConfig:s,editStore:c,ctxMenuStore:d,editRules:u,editOpts:p,validOpts:h,areaOpts:g,filterStore:m,customStore:f,getRowNode:x}=this,{actived:b}=c,v=i.refTableFilter,C=i.refTableMenu,w=i.refTableCustom,E=i.refValidTooltip;if(v&&(he(e,n,"vxe-cell--filter").flag||he(e,v.$el).flag||he(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearFilter",m.args,this.closeFilter)),w&&(f.btnEl===e.target||he(e,document.body,"vxe-toolbar-custom-target").flag||he(e,w.$el).flag||he(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearCustom",{},()=>this.closeCustom())),b.row){if(!1!==p.autoClear){const o=b.args.cell;o&&he(e,o).flag||E&&he(e,E.$el).flag||(!this.lastCallTime||this.lastCallTime+50<Date.now())&&(he(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearEdit",b.args,()=>{let o;if("row"===p.mode){const t=he(e,n,"vxe-body--row");o=!!t.flag&&x(t.targetElem).item!==b.args.row}else o=!he(e,n,"col--edit").flag;if(o||(o=he(e,n,"vxe-header--row").flag),o||(o=he(e,n,"vxe-footer--row").flag),!o&&this.height&&!this.overflowY){const t=e.target;te(t,"vxe-table--body-wrapper")&&(o=e.offsetY<t.clientHeight)}!o&&he(e,n).flag||setTimeout(()=>{t.handleClearEdit(e).then(()=>{!this.isActivated&&u&&h.autoClear&&(this.validErrorMaps={})})})}))}}else if(s&&!(he(e,n).flag||l&&he(e,l.$el).flag||C&&he(e,C.$el).flag||a&&he(e,a.$el).flag)&&(t.clearSelected&&t.clearSelected(),g.autoClear&&t.getCellAreas)){const o=t.getCellAreas();o&&o.length&&!he(e,document.body,"vxe-table--ignore-areas-clear").flag&&t.preventEvent(e,"event.clearAreas",{},()=>{t.clearCellAreas(),t.clearCopyCellArea(),t.dispatchEvent("clear-cell-area-selection",{cellAreas:o},e)})}d.visible&&C&&!he(e,C.$el).flag&&this.closeMenu();const y=he(e,(l||t).$el).flag;!y&&u&&h.autoClear&&(this.validErrorMaps={}),this.isActivated=y},handleGlobalBlurEvent(){this.closeFilter(),this.closeMenu()},handleGlobalMousewheelEvent(){this.closeTooltip(),this.closeMenu()},keydownEvent(e){const t=this,{filterStore:o,ctxMenuStore:r,editStore:l,keyboardConfig:n,mouseConfig:i,mouseOpts:a,keyboardOpts:s}=this,{actived:c}=l,{keyCode:d}=e;27===d&&this.preventEvent(e,"event.keydown",null,()=>{if(t.dispatchEvent("keydown-start",{},e),n&&i&&a.area&&this.handleKeyboardCellAreaEvent)this.handleKeyboardCellAreaEvent(e);else if((c.row||o.visible||r.visible)&&(e.stopPropagation(),this.closeFilter(),this.closeMenu(),n&&s.isEsc&&c.row)){const t=c.args;this.handleClearEdit(e),i&&a.selected&&this.$nextTick(()=>this.handleSelected(t,e))}t.dispatchEvent("keydown",{},e),t.dispatchEvent("keydown-end",{},e)})},handleGlobalKeydownEvent(e){const t=this,o=t,r=t,l=t,i=t.$xeGrid,s=t.$xeGantt;r.isActivated&&t.preventEvent(e,"event.keydown",null,()=>{const{mouseConfig:c,keyboardConfig:d,treeConfig:u,editConfig:h,highlightCurrentRow:g,highlightCurrentColumn:m}=o,{ctxMenuStore:f,editStore:x,currentRow:b}=l,{afterFullData:v}=r,C=t.computeIsContentMenu,w=t.computeBodyMenu,E=t.computeKeyboardOpts,y=t.computeMouseOpts,T=t.computeEditOpts,R=t.computeTreeOpts,S=t.computeMenuList,O=t.computeRowOpts,$=t.computeColumnOpts,{selected:F,actived:D}=x,{keyCode:k}=e,M=8===k,I=9===k,A=13===k,L=27===k,_=32===k,H=37===k,P=38===k,B=39===k,z=40===k,j=46===k,G=113===k,V=93===k,N=le(e),W=e.shiftKey,q=e.altKey,X=H||P||B||z,Y=C&&f.visible&&(A||_||X),K=a(h)&&D.column&&D.row,U=R.children||R.childrenField,Z=T.beforeEditMethod||T.activeMethod;if(Y)e.preventDefault(),f.showChild&&p(f.selected)?t.moveCtxMenu(e,f,"selectChild",H,!1,f.selected.children):t.moveCtxMenu(e,f,"selected",B,!0,S);else if(d&&c&&y.area&&t.handleKeyboardCellAreaEvent)t.handleKeyboardCellAreaEvent(e);else if(L){if(t.closeMenu&&t.closeMenu(),t.closeFilter(),d&&E.isEsc&&D.row){const o=D.args;t.handleClearEdit(e),y.selected&&t.$nextTick(()=>t.handleSelected(o,e))}}else if(d&&_&&E.isChecked&&F.row&&F.column&&("checkbox"===F.column.type||"radio"===F.column.type))e.preventDefault(),"checkbox"===F.column.type?t.handleToggleCheckRowEvent(e,F.args):t.triggerRadioRowEvent(e,F.args);else if(G&&a(h))K||F.row&&F.column&&(e.stopPropagation(),e.preventDefault(),t.handleEdit(F.args,e));else if(V)r._keyCtx=F.row&&F.column&&w.length,clearTimeout(r.keyCtxTimeout),r.keyCtxTimeout=setTimeout(()=>{r._keyCtx=!1},1e3);else if(A&&!q&&d&&E.isEnter&&(F.row||D.row||u&&(O.isCurrent||g)&&b)){const{isLastEnterAppendRow:o,beforeEnterMethod:r,enterMethod:l}=E;if(N){if(D.row){const o=D.args;t.handleClearEdit(e),c&&y.selected&&t.$nextTick(()=>t.handleSelected(o,e))}}else if(F.row||D.row){const n=F.row?F.args:D.args;if(W)E.enterToTab?t.moveTabSelected(n,W,e):t.moveEnterSelected(n,H,!0,B,!1,e);else if(E.enterToTab)t.moveTabSelected(n,W,e);else{const i=F.row||D.row,a=F.column||D.column,s=t.getVTRowIndex(i),c={row:i,rowIndex:t.getRowIndex(i),$rowIndex:t.getVMRowIndex(i),_rowIndex:s,column:a,columnIndex:t.getColumnIndex(a),$columnIndex:t.getVMColumnIndex(a),_columnIndex:t.getVTColumnIndex(a),$table:t};if(!r||!1!==r(c)){if(o&&s>=v.length-1)return t.insertAt({},-1).then(({row:o})=>{t.scrollToRow(o,F.column),t.handleSelected(Object.assign(Object.assign({},n),{row:o}),e)}),void t.dispatchEvent("enter-append-row",c,e);t.moveEnterSelected(n,H,!1,B,!0,e),l&&l(c)}}}else if(u&&(O.isCurrent||g)&&b){const o=b[U];if(o&&o.length){e.preventDefault();const r=o[0],l={$table:t,row:r,rowIndex:t.getRowIndex(r),$rowIndex:t.getVMRowIndex(r)};t.setTreeExpand(b,!0).then(()=>t.scrollToRow(r)).then(()=>t.triggerCurrentRowEvent(e,l))}}}else if(X&&d&&E.isArrow)K||(y.selected&&F.row&&F.column?t.moveArrowSelected(F.args,H,P,B,z,e):((P||z)&&(O.isCurrent||g)&&t.moveCurrentRow(P,z,e),(H||B)&&($.isCurrent||m)&&t.moveCurrentColumn(H,B,e)));else if(I&&d&&E.isTab)F.row||F.column?t.moveTabSelected(F.args,W,e):(D.row||D.column)&&t.moveTabSelected(D.args,W,e);else if(d&&E.isDel&&j&&a(h)&&(F.row||F.column)){if(!K){const{delMethod:o}=E,r={row:F.row,rowIndex:t.getRowIndex(F.row),column:F.column,columnIndex:t.getColumnIndex(F.column),$table:t,$grid:i,$gantt:s};Z&&!Z(r)||(o?o(r):Ke(F.row,F.column,null),t.updateFooter(),t.dispatchEvent("cell-delete-value",r,e))}}else if(M&&d&&E.isBack&&a(h)&&(F.row||F.column)){if(!K){const{editMode:o,backMethod:r}=E;if(E.isDel&&a(h)&&(F.row||F.column)){const l={row:F.row,rowIndex:t.getRowIndex(F.row),column:F.column,columnIndex:t.getColumnIndex(F.column),$table:t,$grid:i,$gantt:s};Z&&!Z(l)||(r?r(l):("insert"!==o&&Ke(F.row,F.column,null),t.handleEdit(F.args,e)),t.dispatchEvent("cell-backspace-value",l,e))}}}else if(M&&d&&u&&E.isBack&&(O.isCurrent||g)&&b){const{parent:o}=n.a.findTree(r.afterTreeFullData,e=>e===b,{children:U});if(o){e.preventDefault();const r={row:o,rowIndex:t.getRowIndex(o),$rowIndex:t.getVMRowIndex(o),$table:t,$grid:i,$gantt:s};t.setTreeExpand(o,!1).then(()=>t.scrollToRow(o)).then(()=>t.triggerCurrentRowEvent(e,r))}}else if(d&&E.isEdit&&!N&&(_||k>=48&&k<=57||k>=65&&k<=90||k>=96&&k<=111||k>=186&&k<=192||k>=219&&k<=222)){const{editMethod:o}=E;if(F.column&&F.row&&a(F.column.editRender)){const r=T.beforeEditMethod||T.activeMethod,l={row:F.row,rowIndex:t.getRowIndex(F.row),column:F.column,columnIndex:t.getColumnIndex(F.column),$table:t,$grid:i,$gantt:s};r&&!r(l)||(o?o(l):(Ke(F.row,F.column,null),t.handleEdit(F.args,e)))}}t.dispatchEvent("keydown",{},e)})},handleGlobalPasteEvent(e){const t=this,{isActivated:o,keyboardConfig:r,keyboardOpts:l,mouseConfig:n,mouseOpts:i,editStore:a,filterStore:s}=this,{actived:c}=a;o&&!s.visible&&(c.row||c.column||r&&l.isClip&&n&&i.area&&this.handlePasteCellAreaEvent&&this.handlePasteCellAreaEvent(e),t.dispatchEvent("paste",{},e))},handleGlobalCopyEvent(e){const t=this,{isActivated:o,keyboardConfig:r,keyboardOpts:l,mouseConfig:n,mouseOpts:i,editStore:a,filterStore:s}=this,{actived:c}=a;o&&!s.visible&&(c.row||c.column||r&&l.isClip&&n&&i.area&&this.handleCopyCellAreaEvent&&this.handleCopyCellAreaEvent(e),t.dispatchEvent("copy",{},e))},handleGlobalCutEvent(e){const t=this,{isActivated:o,keyboardConfig:r,keyboardOpts:l,mouseConfig:n,mouseOpts:i,editStore:a,filterStore:s}=this,{actived:c}=a;o&&!s.visible&&(c.row||c.column||r&&l.isClip&&n&&i.area&&this.handleCutCellAreaEvent&&this.handleCutCellAreaEvent(e),t.dispatchEvent("cut",{},e))},handleGlobalResizeEvent(){this.closeMenu(),this.updateCellAreas(),jo(this),this.updateCellAreas()},handleUpdateBodyMerge(){const e=this,t=this,{mergeBodyList:o}=t;t.mergeBodyCellMaps=bo(o),e.mergeBodyFlag++},handleUpdateHeaderMerge(){const e=this,t=this,{mergeHeaderList:o}=t;t.mergeHeaderCellMaps=bo(o),e.mergeHeadFlag++},handleUpdateFooterMerge(){const e=this,t=this,{mergeFooterList:o}=t;t.mergeFooterCellMaps=bo(o),e.mergeFootFlag++},handleAggregateSummaryData(){return function(e){const t=e,o=e,r=e,{aggregateConfig:l,rowGroupConfig:i}=t,{isRowGroupStatus:a}=o,{tableFullGroupData:s}=r,c=e.computeAggregateOpts,{mapChildrenField:d}=c;if((l||i)&&a){const t=[];n.a.eachTree(s,e=>{e.isAggregate&&t.push(e)},{children:d}),No(e,t)}}(this)},handleTargetLeaveEvent(){const e=this,t=e,o=e.computeTooltipOpts;let r=e.$refs.refTooltip;r&&r.setActived&&r.setActived(!1),o.enterable?t.tooltipTimeout=setTimeout(()=>{r=e.$refs.refTooltip,r&&r.isActived&&!r.isActived()&&e.closeTooltip()},o.leaveDelay):e.closeTooltip()},triggerHeaderTitleEvent(e,t,o){const r=this,l=r,n=t.content||t.message;if(n){const{tooltipStore:i}=l,{column:a}=o,s=h(n);So(r,!0),i.row=null,i.column=a,i.visible=!0,i.currOpts=t,r.$nextTick(()=>{const t=r.$refs.refTooltip;t&&t.open&&t.open(e.currentTarget,s)})}},triggerHeaderTooltipEvent(e,t){const o=this,r=o,{tooltipStore:l}=r,n=o.computeHeaderTooltipOpts,{column:i}=t;So(o,!0);const a=e.currentTarget;if(!a)return;const s=a.parentElement;if(!s)return;const c=s.parentElement;if(!c)return;const d=c.parentElement;if(d&&(l.column!==i||!l.visible)){const e=d.querySelector(".vxe-cell--title");Ao(o,0,n,"header",d,(te(d,"col--ellipsis")?e:s)||s,e||c,t)}},triggerBodyTooltipEvent(e,t){const o=this,r=o,l=o,{editConfig:n}=r,{editStore:i}=l,{tooltipStore:s}=l,c=o.computeTooltipOpts,d=o.computeEditOpts,{actived:u}=i,{row:p,column:h}=t,g=e.currentTarget;if(So(o,s.column!==h||s.row!==p),h.editRender&&a(n)){if("row"===d.mode&&u.row===p)return;if(u.row===p&&u.column===h)return}if(s.column!==h||s.row!==p||!s.visible){const e=g.querySelector(".vxe-cell--wrapper");let r=null,l=g.querySelector("html"===h.type?".vxe-cell--html":".vxe-cell--label");h.treeNode&&(r=g.querySelector(".vxe-tree-cell")),l||(l=e),Ao(o,0,c,"body",g,r||e,l,t)}},triggerFooterTooltipEvent(e,t){const o=this,r=o,{column:l}=t,{tooltipStore:n}=r,i=o.computeFooterTooltipOpts,a=e.currentTarget;if(So(o,n.column!==l||!!n.row),n.column!==l||!n.visible){const e=a.querySelector(".vxe-cell--wrapper");let r=null,n=a.querySelector("html"===l.type?".vxe-cell--html":".vxe-cell--label");"html"===l.type&&(r=a.querySelector(".vxe-cell--html")),n||(n=e),Ao(o,0,i,"footer",a,r||e,n,t)}},openTooltip(e,t){const{$refs:o}=this,r=o.refCommTooltip;return r?r.open(e,t):this.$nextTick()},closeTooltip(){const{tooltipStore:e}=this,t=this.$refs.refTooltip,o=this.$refs.refCommTooltip;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1,type:null,currOpts:{}}),t&&t.close()),o&&o.close(),this.$nextTick()},isAllCheckboxChecked(){return this.isAllSelected},isAllCheckboxIndeterminate(){return!this.isAllSelected&&this.isIndeterminate},isCheckboxIndeterminate(){return fe("vxe.error.delFunc",["isCheckboxIndeterminate","isAllCheckboxIndeterminate"]),this.isAllCheckboxIndeterminate()},getCheckboxIndeterminateRecords(e){const{treeConfig:t}=this,{fullDataRowIdData:o,treeIndeterminateRowMaps:r}=this;if(t){const t=[],l=[];return n.a.each(r,(e,r)=>{e&&(t.push(e),o[r]&&l.push(e))}),e?t:l}return[]},handleCheckedCheckboxRow(e,t,o){return co(this,e,t,o)},setCheckboxRow(e,t){return e&&!n.a.isArray(e)&&(e=[e]),co(this,e,t,!0)},setCheckboxRowKey(e,t){const{fullAllDataRowIdData:o}=this;e&&!n.a.isArray(e)&&(e=[e]);const r=[];return e.forEach(e=>{const t=o[e];t&&r.push(t.row)}),co(this,r,t,!0)},isCheckedByCheckboxRow(e){const{updateCheckboxFlag:t}=this,{selectCheckboxMaps:o}=this,r=this.computeCheckboxOpts,{checkField:l}=r;return l?n.a.get(e,l):!!t&&!!o[Se(this,e)]},isCheckedByCheckboxRowKey(e){const{updateCheckboxFlag:t}=this,{fullAllDataRowIdData:o,selectCheckboxMaps:r}=this,l=this.computeCheckboxOpts,{checkField:i}=l;if(i){const t=o[e];return!!t&&n.a.get(t.row,i)}return!!t&&!!r[e]},isIndeterminateByCheckboxRow(e){const{treeIndeterminateRowMaps:t}=this;return!!t[Se(this,e)]&&!this.isCheckedByCheckboxRow(e)},isIndeterminateByCheckboxRowKey(e){const{treeIndeterminateRowMaps:t}=this;return!!t[e]&&!this.isCheckedByCheckboxRowKey(e)},handleBatchSelectRows(e,t,o){const r=this,l=r,i=r,a=r,{treeConfig:s}=l,{isRowGroupStatus:c}=i,{selectCheckboxMaps:d}=a,u=r.computeAggregateOpts,p=r.computeTreeOpts,{transform:h,mapChildrenField:g}=p,m=p.children||p.childrenField,f=r.computeCheckboxOpts,{checkField:x,checkStrictly:b,checkMethod:v}=f,{handleGetRowId:C}=$e(r),w=f.indeterminateField||f.halfField;if(x)return!s&&!c||b?(e.forEach(e=>{(o||!v||v({$table:r,row:e}))&&(n.a.set(e,x,t),ao(r,e,t))}),void i.updateCheckboxFlag++):(n.a.eachTree(e,e=>{(o||!v||v({$table:r,row:e}))&&(n.a.set(e,x,t),w&&n.a.set(e,w,!1),ao(r,e,t))},{children:h?g:m}),void i.updateCheckboxFlag++);if(!b){if(c)return n.a.eachTree(e,e=>{const l=C(e);(o||!v||v({$table:r,row:e}))&&(t?d[l]=e:d[l]&&delete d[l],ao(r,e,t))},{children:u.mapChildrenField}),void i.updateCheckboxFlag++;if(s)return n.a.eachTree(e,e=>{const l=C(e);(o||!v||v({$table:r,row:e}))&&(t?d[l]=e:d[l]&&delete d[l],ao(r,e,t))},{children:h?g:m}),void i.updateCheckboxFlag++}e.forEach(e=>{const l=C(e);(o||!v||v({$table:r,row:e}))&&(t?d[l]||(d[l]=e):d[l]&&delete d[l],ao(r,e,t),i.updateCheckboxFlag++)})},handleSelectRow({row:e},t,o){this.handleBatchSelectRows([e],t,o)},handleToggleCheckRowEvent(e,t){const o=this,r=o,{selectCheckboxMaps:l}=r,i=o.computeCheckboxOpts,{checkField:a,trigger:s}=i,{row:c}=t;if("manual"===s)return;let d=!1;d=a?!n.a.get(c,a):!l[Se(o,c)],e?o.triggerCheckRowEvent(e,t,d):(o.handleBatchSelectRows([c],d),o.checkSelectionStatus())},triggerCheckRowEvent(e,t,o){const r=this,l=r,n=r,i=r,{treeConfig:a}=l,{row:s}=t,{isRowGroupStatus:c}=n,{afterFullData:d}=i,u=r.computeCheckboxOpts,{checkMethod:p,trigger:h}=u;if("manual"!==h){if(e.stopPropagation(),u.isShiftKey&&e.shiftKey&&!a&&!c){const o=r.getCheckboxRecords();if(o.length){const l=o[0],n=r.getVTRowIndex(s),i=r.getVTRowIndex(l);if(n!==i){r.setAllCheckboxRow(!1);const o=n<i?d.slice(n,i+1):d.slice(i,n+1);return r.$nextTick(()=>{co(r,o,!0,!1)}),void r.dispatchEvent("checkbox-range-select",Object.assign({rangeRecords:o},t),e)}}}(c||!p||p({$table:r,row:s}))&&(r.handleBatchSelectRows([s],o),r.checkSelectionStatus(),r.dispatchEvent("checkbox-change",Object.assign({records:()=>r.getCheckboxRecords(),reserves:()=>r.getCheckboxReserveRecords(),indeterminates:()=>r.getCheckboxIndeterminateRecords(),checked:o},t),e))}},toggleCheckboxRow(e){const{selectCheckboxMaps:t}=this,o=this.computeCheckboxOpts,{checkField:r}=o,l=r?!n.a.get(e,r):!t[Se(this,e)];return this.handleBatchSelectRows([e],l,!0),this.checkSelectionStatus(),this.$nextTick()},setAllCheckboxRow(e){return uo(this,e,!0)},updateCheckboxStatus(){const e=this,t=e,o=e,r=e,{treeConfig:l}=t,{isRowGroupStatus:i}=o,{afterTreeFullData:a,afterGroupFullData:s,selectCheckboxMaps:c,treeIndeterminateRowMaps:d}=r,u=e.computeAggregateOpts,p=e.computeTreeOpts,h=p.children||p.childrenField,g=e.computeCheckboxOpts,{checkField:m,indeterminateField:f,checkStrictly:x,checkMethod:b}=g;if(!x){if(i||l){const{handleGetRowId:t}=$e(e),o={},r=[];if(i){const e=u.mapChildrenField;e&&n.a.eachTree(s,l=>{const n=t(l),i=l[e];i&&i.length&&!o[n]&&(o[n]=1,r.unshift([l,n,i]))},{children:e})}else if(l){const{transform:e,mapChildrenField:l}=p;n.a.eachTree(a,i=>{const a=t(i),s=i[e?l:h];s&&s.length&&!o[a]?(o[a]=1,r.unshift([i,a,s])):f&&n.a.set(i,f,!1)},{children:e?l:h})}r.forEach(o=>{const r=o[0],l=o[1],i=o[2];let a=0,s=0,u=0;const p=i.length;i.forEach(b?o=>{const r=t(o),l=m?n.a.get(o,m):c[r];b({$table:e,row:o})?(l?a++:d[r]&&s++,u++):l?a++:d[r]&&s++}:e=>{const o=t(e);(m?n.a.get(e,m):c[o])?a++:d[o]&&s++,u++});let h=!1;h=p>0?u>0?(a>0||s>0)&&a>=u:a>0&&a>=u||!!c[l]:c[l];const g=!h&&(a>0||s>0);m&&n.a.set(r,m,h),f&&n.a.set(r,f,g),h?(m||(c[l]=r),d[l]&&delete d[l]):(m||c[l]&&delete c[l],g?d[l]=r:d[l]&&delete d[l])})}o.updateCheckboxFlag++}},updateAllCheckboxStatus(){const e=this,t=e,o=e,r=e,{treeConfig:l}=t,{isRowGroupStatus:i}=o,{afterFullData:a,afterTreeFullData:s,afterGroupFullData:c,checkboxReserveRowMap:d,selectCheckboxMaps:u,treeIndeterminateRowMaps:p}=r,h=e.computeAggregateOpts,{mapChildrenField:g}=h,m=e.computeCheckboxOpts,{checkField:f,checkMethod:x,showReserveStatus:b}=m,{handleGetRowId:v}=$e(e);let C=0,w=0,E=0,y=0,T=0;const R=l?s:i?c:a;R.forEach(x?t=>{const o=v(t),r=f?n.a.get(t,f):u[o];if(i&&e.isAggregateRecord(t)){const l=t[g||""];r?(T++,C++):p[o]?(T++,E++):l&&l.length&&l.some(t=>x({$table:e,row:t}))&&T++}else x({$table:e,row:t})?(r?C++:p[o]&&E++,T++):r?w++:p[o]&&y++}:e=>{const t=v(e);(f?n.a.get(e,f):u[t])?C++:p[t]&&E++,T++});const S=R.length>0&&(T>0?C>=T:C>=R.length);let O=!S&&(C>0||E>0||w>0||y>0);S||O||!b||(O=!n.a.isEmpty(d)),o.isAllSelected=S,o.isIndeterminate=O},checkSelectionStatus(){this.updateCheckboxStatus(),this.updateAllCheckboxStatus()},getRadioReserveRecord(e){const{fullDataRowIdData:t,radioReserveRow:o,radioOpts:r,afterFullData:l,treeConfig:i,treeOpts:a}=this,s=a.children||a.childrenField;if(r.reserve&&o){const r=Se(this,o);if(e){if(!t[r])return o}else{const e=Re(this);if(i){if(n.a.findTree(l,t=>r===n.a.get(t,e),{children:s}))return o}else if(!l.some(t=>r===n.a.get(t,e)))return o}}return null},clearRadioReserve(){return this.radioReserveRow=null,this.$nextTick()},getCheckboxReserveRecords(e){const t=this,o=t,r=t,{treeConfig:l}=o,{afterFullData:i,fullDataRowIdData:a,checkboxReserveRowMap:s}=r,c=t.computeCheckboxOpts,d=t.computeTreeOpts,u=d.children||d.childrenField,p=[];if(c.reserve){const{handleGetRowId:o}=$e(t),r={};l?n.a.eachTree(i,e=>{r[o(e)]=1},{children:u}):i.forEach(e=>{r[o(e)]=1}),n.a.each(s,(t,o)=>{t&&(e?a[o]||p.push(t):r[o]||p.push(t))})}return p},clearCheckboxReserve(){return this.checkboxReserveRowMap={},this.$nextTick()},handleCheckboxReserveRow(e,t){const{checkboxReserveRowMap:o,checkboxOpts:r}=this;if(r.reserve){const r=Se(this,e);t?o[r]=e:o[r]&&delete o[r]}},handleCheckAllEvent(e,t){const o=this;uo(o,t),e&&o.dispatchEvent("checkbox-all",{records:()=>o.getCheckboxRecords(),reserves:()=>o.getCheckboxReserveRecords(),indeterminates:()=>o.getCheckboxIndeterminateRecords(),checked:t},e)},triggerCheckAllEvent(e,t){const{checkboxOpts:o}=this,{trigger:r}=o;"manual"!==r&&(e&&e.stopPropagation(),this.handleCheckAllEvent(e,t))},toggleAllCheckboxRow(){return this.handleCheckAllEvent(null,!this.isAllSelected),this.$nextTick()},clearCheckboxRow(){const e=this,t=this,{treeConfig:o}=this,{tableFullData:r}=t,l=this.computeTreeOpts,i=l.children||l.childrenField,a=this.computeCheckboxOpts,{checkField:s,reserve:c}=a,d=a.indeterminateField||a.halfField;if(s){const e=e=>{o&&d&&n.a.set(e,d,!1),n.a.set(e,s,!1)};o?n.a.eachTree(r,e,{children:i}):r.forEach(e)}return c&&r.forEach(e=>this.handleCheckboxReserveRow(e,!1)),e.isAllSelected=!1,e.isIndeterminate=!1,t.selectCheckboxMaps={},t.treeIndeterminateRowMaps={},e.updateCheckboxFlag++,this.$nextTick()},triggerRadioRowEvent(e,t){const o=this,r=o,{selectRadioRow:l}=r,{row:n}=t,i=o.computeRadioOpts,{trigger:a,checkMethod:s}=i;if("manual"!==a&&(e.stopPropagation(),!s||s({$table:o,row:n}))){let r=n,a=l!==r;a?so(o,r):i.strict||(a=l===r,a&&(r=null,o.clearRadioRow())),a&&o.dispatchEvent("radio-change",Object.assign({oldValue:l,newValue:r},t),e)}},triggerCurrentColumnEvent(e,t){const o=this,r=o,{currentColumn:l}=r,n=o.computeColumnOpts,i=o.computeCurrentColumnOpts,a=i.beforeSelectMethod||n.currentMethod,{column:s}=t,{trigger:c}=i;if("manual"===c)return;const d=l!==s;!a||a({column:s,$table:o})?(o.setCurrentColumn(s),d&&o.dispatchEvent("current-column-change",Object.assign({oldValue:l,newValue:s},t),e)):o.dispatchEvent("current-column-disabled",t,e)},triggerCurrentRowEvent(e,t){const o=this,r=o,{currentRow:l}=r,n=o.computeRowOpts,i=o.computeCurrentRowOpts,a=i.beforeSelectMethod||n.currentMethod,{row:s}=t,{trigger:c}=i;if("manual"===c)return;const d=l!==s;!a||a({row:s,$table:o})?(o.setCurrentRow(s),d&&(o.dispatchEvent("current-row-change",Object.assign({oldValue:l,newValue:s},t),e),o.dispatchEvent("current-change",Object.assign({oldValue:l,newValue:s},t),e))):o.dispatchEvent("current-row-disabled",t,e)},setCurrentRow(e){const t=this,o=t.xeGanttView,r=t.$refs.refElem,l=t.computeRowOpts;return this.clearCurrentRow(),this.currentRow=e,(l.isCurrent||this.highlightCurrentRow)&&r&&n.a.arrayEach(r.querySelectorAll(`[rowid="${Se(t,e)}"]`),e=>re(e,"row--current")),o&&o.handleUpdateCurrentRow&&o.handleUpdateCurrentRow(e),this.$nextTick()},isCheckedByRadioRow(e){const t=this,o=t,{selectRadioRow:r}=o;return!(!e||!r)&&t.eqRow(r,e)},isCheckedByRadioRowKey(e){const t=this,o=t,{selectRadioRow:r}=o;return!!r&&e===Se(t,r)},setRadioRow(e){return so(this,e,!0)},setRadioRowKey(e){const t=this,o=t,{fullAllDataRowIdData:r}=o,l=r[e];return l?so(t,l.row,!0):t.$nextTick()},clearCurrentRow(){const e=this,t=this,o=t.xeGanttView,r=this.$refs.refElem;return e.currentRow=null,t.hoverRow=null,r&&n.a.arrayEach(r.querySelectorAll(".row--current"),e=>oe(e,"row--current")),o&&o.handleUpdateCurrentRow&&o.handleUpdateCurrentRow(),this.$nextTick()},clearRadioRow(){return this.selectRadioRow=null,this.$nextTick()},getCurrentRecord(e){const t=this,o=t,r=t,l=t,{currentRow:n}=r,{fullDataRowIdData:i,afterFullRowMaps:a}=l;if(t.computeRowOpts.isCurrent||o.highlightCurrentRow){const o=Se(t,n);if(e){if(i[o])return n}else if(a[o])return n}return null},getRadioRecord(e){const{selectRadioRow:t,fullDataRowIdData:o,afterFullRowMaps:r}=this;if(t){const l=Se(this,t);if(e){if(o[l])return t}else if(r[l])return t}return null},triggerHoverEvent(e,{row:t}){this.setHoverRow(t)},setHoverRow(e){const t=this,o=t,r=o.xeGanttView,l=t.$refs.refElem;t.clearHoverRow(),l&&n.a.arrayEach(l.querySelectorAll(`.vxe-body--row[rowid="${Se(t,e)}"]`),e=>re(e,"row--hover")),o.hoverRow=e,r&&r.handleUpdateHoverRow&&r.handleUpdateHoverRow(e)},clearHoverRow(){const e=this,t=e.xeGanttView,o=this.$refs.refElem;o&&n.a.arrayEach(o.querySelectorAll(".vxe-body--row.row--hover"),e=>oe(e,"row--hover")),e.hoverRow=null,t&&t.handleUpdateHoverRow&&t.handleUpdateHoverRow()},triggerHeaderCellClickEvent(e,t){const o=this,r=o,l=o,{_lastResizeTime:n}=l,i=o.computeSortOpts,a=o.computeColumnOpts,s=o.computeCurrentColumnOpts,{column:c}=t,d=e.currentTarget,u=n&&n>Date.now()-300,p=he(e,d,"vxe-cell--sort").flag,h=he(e,d,"vxe-cell--filter").flag;return"cell"!==i.trigger||u||p||h||o.triggerSortEvent(e,c,qt(o,c)),o.dispatchEvent("header-cell-click",Object.assign({triggerResizable:u,triggerSort:p,triggerFilter:h,cell:d},t),e),!a.isCurrent&&!r.highlightCurrentColumn||s.trigger&&!["header","default"].includes(s.trigger)||o.triggerCurrentColumnEvent(e,t),o.$nextTick()},triggerHeaderCellDblclickEvent(e,t){this.dispatchEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},getCurrentColumn(){return this.columnOpts.isCurrent||this.highlightCurrentColumn?this.currentColumn:null},setCurrentColumn(e){const t=this,o=t,r=t,{mouseConfig:l}=o,n=t.computeMouseOpts,i=l&&n.selected,a=He(t,e);return a&&(t.clearCurrentColumn(),r.currentColumn=a),t.$nextTick().then(()=>{i&&t.addCellSelectedClass()})},clearCurrentColumn(){return this.currentColumn=null,this.$nextTick()},triggerCellClickEvent(e,t){const o=this,r=o,l=o,{treeConfig:n,highlightCurrentRow:i,highlightCurrentColumn:s,editConfig:c,aggregateConfig:d,rowGroupConfig:u}=r,{editStore:p,isDragResize:h,expandColumn:g,checkboxColumn:m,radioColumn:f}=l;if(h)return;const x=o.computeExpandOpts,b=o.computeEditOpts,v=o.computeTreeOpts,C=o.computeRadioOpts,w=o.computeCheckboxOpts,E=o.computeKeyboardOpts,y=o.computeAggregateOpts,T=o.computeRowOpts,R=o.computeColumnOpts,S=o.computeCurrentColumnOpts,{actived:O,focused:$}=p,{row:F,column:D}=t,{type:k,treeNode:M,rowGroupNode:I}=D,A="radio"===k,L="checkbox"===k,_="expand"===k,H=e.currentTarget,P=A&&he(e,H,"vxe-cell--radio").flag,B=L&&he(e,H,"vxe-cell--checkbox").flag,z=M&&he(e,H,"vxe-cell--tree-btn").flag,j=_&&he(e,H,"vxe-table--expanded").flag,G=_&&he(e,H,"vxe-row-group--node-btn").flag;t=Object.assign({cell:H,triggerRadio:P,triggerCheckbox:B,triggerTreeNode:z,triggerExpandNode:j},t),B||P||(!j&&(g&&"row"===x.trigger||_&&"cell"===x.trigger)&&o.triggerRowExpandEvent(e,t),n&&("row"===v.trigger||M&&"cell"===v.trigger)&&o.triggerTreeExpandEvent(e,t),(d||u)&&("row"===y.trigger||I&&"cell"===y.trigger)&&o.triggerRowGroupExpandEvent(e,t)),z||(j||G||((T.isCurrent||i)&&(B||P||o.triggerCurrentRowEvent(e,t)),!R.isCurrent&&!s||S.trigger&&!["cell","default"].includes(S.trigger)||B||P||o.triggerCurrentColumnEvent(e,t),!P&&(f&&"row"===C.trigger||A&&"cell"===C.trigger)&&o.triggerRadioRowEvent(e,t),!B&&(m&&"row"===w.trigger||L&&"cell"===w.trigger)&&o.handleToggleCheckRowEvent(e,t)),a(c)&&(E.arrowCursorLock&&e&&"cell"===b.mode&&e.target&&/^input|textarea$/i.test(e.target.tagName)&&($.column=D,$.row=F),"manual"===b.trigger?O.args&&O.row===F&&D!==O.column&&io(o,e,t):O.args&&F===O.row&&D===O.column||("click"===b.trigger||"dblclick"===b.trigger&&"row"===b.mode&&O.row===F)&&io(o,e,t))),a(c)&&"dblclick"===b.trigger&&O.row&&O.column&&("row"===b.mode?o.eqRow(O.row,F)||o.handleClearEdit(e):"cell"===b.mode&&(o.eqRow(O.row,F)&&O.column.id===D.id||o.handleClearEdit(e))),o.dispatchEvent("cell-click",t,e)},triggerCellDblclickEvent(e,t){const o=this,r=o,l=o,{editConfig:n}=r,{editStore:i,isDragResize:s}=l;if(s)return;const c=o.computeEditOpts,{actived:d}=i,u=e.currentTarget;t=Object.assign({cell:u},t),a(n)&&"dblclick"===c.trigger&&(d.args&&e.currentTarget===d.args.cell||("row"===c.mode?no(o,"blur").catch(e=>e).then(()=>{o.handleEdit(t,e).then(()=>no(o,"change")).catch(e=>e)}):"cell"===c.mode&&o.handleEdit(t,e).then(()=>no(o,"change")).catch(e=>e))),o.dispatchEvent("cell-dblclick",t,e)},handleColumnSortEvent(e,t){const o=this,r=o,{mouseConfig:l}=r,n=o.computeMouseOpts,{field:i,sortable:a,order:s}=t;if(a){const r={$table:o,$event:e,column:t,field:i,property:i,order:s,sortList:o.getSortColumns(),sortTime:t.sortTime};l&&n.area&&o.handleSortEvent&&o.handleSortEvent(e,r),s||o.dispatchEvent("clear-sort",r,e),o.dispatchEvent("sort-change",r,e)}},triggerSortEvent(e,t,o){const r=this,l=r.computeSortOpts,{multiple:n,allowClear:i}=l,{field:a,sortable:s}=t;(s||t.remoteSort)&&(o&&t.order!==o?r.sort({field:a,order:o}):i&&r.clearSort(n?t:null),r.handleColumnSortEvent(e,t))},handleCellRuleUpdateStatus(e,t,o){const r=this,l=r,{validStore:i}=l,{row:a,column:s}=t;if(r.hasCellRules&&r.hasCellRules(e,a,s)){const t=r.getCellElement(a,s);if(t){const l=!n.a.isUndefined(o);return r.validCellRules(e,a,s,o).then(()=>{l&&i.visible&&Ke(a,s,o),r.clearValidate(a,s)}).catch(({rule:e})=>{l&&Ke(a,s,o),r.showValidTooltip({rule:e,row:a,column:s,cell:t})})}}return r.$nextTick()},triggerHeaderCellMousedownEvent(e,t){const o=this,r=o,{mouseConfig:l}=r,n=o.computeMouseOpts,i=o.computeColumnOpts,a=o.computeColumnDragOpts,{trigger:s,isCrossDrag:c,isPeerDrag:d,disabledMethod:u}=a,p=e.currentTarget,h=p&&p.tagName&&"input"===p.tagName.toLowerCase(),g=he(e,p,"vxe-cell--checkbox").flag,m=he(e,p,"vxe-cell--sort").flag,f=he(e,p,"vxe-cell--filter").flag;let x=!1;const b=i.drag&&"cell"===s;if(!(h||g||m||f)){const{column:r}=t;!b||r.fixed||!c&&!d&&r.parentId||u&&u(t)||(x=!0,o.handleHeaderCellDragMousedownEvent(e,t))}!x&&l&&n.area&&o.handleHeaderCellAreaModownEvent&&o.handleHeaderCellAreaModownEvent(e,Object.assign({cell:p,triggerSort:m,triggerFilter:f},t)),o.focus(),o.closeMenu&&o.closeMenu()},triggerCellMousedownEvent(e,t){const o=this,{column:r}=t,{type:l,treeNode:n}=r,i="radio"===l,a="checkbox"===l,s="expand"===l,c=o.computeRowOpts,d=o.computeRowDragOpts,{trigger:u,isCrossDrag:p,isPeerDrag:h,disabledMethod:g}=d,m=e.currentTarget;t.cell=m;const f=m&&m.tagName&&"input"===m.tagName.toLowerCase(),x=i&&he(e,m,"vxe-cell--radio").flag,b=a&&he(e,m,"vxe-cell--checkbox").flag,v=n&&he(e,m,"vxe-cell--tree-btn").flag,C=s&&he(e,m,"vxe-table--expanded").flag;let w=!1;c.drag&&(w="row"===u||r.dragSort&&"cell"===u);let E=!1;f||x||b||v||C||!w||!p&&!h&&t.level||g&&g(t)||(E=!0,o.handleCellDragMousedownEvent(e,t)),!E&&o.handleCellMousedownEvent&&o.handleCellMousedownEvent(e,t),o.focus(),o.closeFilter(),o.closeMenu&&o.closeMenu()},triggerCellMouseupEvent(){$o(this)},handleRowDragDragstartEvent(e){e.dataTransfer&&e.dataTransfer.setDragImage(Z(),0,0)},handleRowDragSwapEvent(e,t,o,l,i,a){const s=this,c=s.$xeGantt,d=s,u=s,p=s,{treeConfig:h,dragConfig:g}=d,m=s.computeRowDragOpts,{afterFullData:f,tableFullData:x,fullAllDataRowIdData:b}=p,{animation:v,isPeerDrag:C,isCrossDrag:w,isSelfToChildDrag:E,dragEndMethod:y,dragToChildMethod:T}=m,R=s.computeTreeOpts,S=s.computeCellOpts,O=s.computeRowOpts,$=s.computeDefaultRowHeight,{transform:F,rowField:D,mapChildrenField:k,parentField:M}=R,I=R.children||R.childrenField,A=y||(g?g.dragEndMethod:null),L="bottom"===i?1:0,_=s.$refs.refElem,H={status:!1};if(!(_&&l&&o))return Promise.resolve(H);if(l!==o){const t={oldRow:o,newRow:l,dragRow:o,dragPos:i,dragToChild:!!a,offsetIndex:L},d=E&&T?T(t):a;return Promise.resolve(!A||A(t)).then(t=>{if(!t)return H;const a=Se(s,o),g=b[a]||{},m=g._index;let y=0,T=-1;if(v){y=Be(g,S,O,$);const e=_.querySelector(`.vxe-body--row[rowid="${a}"]`);e&&(T=e.offsetTop)}let R=-1,A=-1;if(h){if(F){const e=g,t=Se(s,l),i=b[t];if(e&&i){const{level:a}=e,{level:c}=i,u={};n.a.eachTree([o],e=>{u[Se(s,e)]=e},{children:k});let h=!1;if(a&&c)if(C&&!w){if(e.row[M]!==i.row[M])return H}else{if(!w)return H;if(u[t]&&(h=!0,!w||!E))return r.c.modal&&r.c.modal.message({status:"error",content:Ht("vxe.error.treeDragChild")}),H}else if(a){if(!w)return H}else if(c){if(!w)return H;if(u[t]&&(h=!0,!w||!E))return r.c.modal&&r.c.modal.message({status:"error",content:Ht("vxe.error.treeDragChild")}),H}const g=n.a.toTreeArray(p.afterTreeFullData,{key:D,parentKey:M,children:k}),m=s.findRowIndexOf(g,o);g.splice(m,1);const f=s.findRowIndexOf(g,l)+L;g.splice(f,0,o),h&&w&&E&&n.a.each(o[I],e=>{e[M]=o[M]}),o[M]=d?l[D]:l[M],p.tableFullTreeData=n.a.toArrayTree(g,{key:D,parentKey:M,children:I,mapChildren:k})}}}else{R=s.findRowIndexOf(f,o);const e=s.findRowIndexOf(x,o);f.splice(R,1),x.splice(e,1);const t=s.findRowIndexOf(f,l),r=s.findRowIndexOf(x,l);A=t+L;const n=r+L;f.splice(A,0,o),x.splice(n,0,o)}return s.handleTableData(h&&F),s.cacheRowMap(!1),Jt(s),h&&F||oo(s),s.checkSelectionStatus(),u.scrollYLoad&&s.updateScrollYSpace(),e&&s.dispatchEvent("row-dragend",{oldRow:o,newRow:l,dragRow:o,dragPos:i,dragToChild:d,offsetIndex:L,_index:{newIndex:A,oldIndex:R}},e),s.$nextTick().then(()=>{if(v){const{tableData:e}=u,t=b[a],o=t._index,r=e[0],l=b[Se(s,r)];let n=_;if(c){const e=c.$refs.refGanttContainerElem;e&&(n=e)}if(l){const r=l._index,i=r+e.length;let a=-1,d=-1,u=1;if(m<r)a=0,d=o-r;else if(m>i){a=t.$index+1,d=e.length,u=-1}else o>m?(a=m-r,d=a+o-m):(a=o-r,d=a+m-o+1,u=-1);const p=e.slice(a,d);if(p.length){const e=[];p.forEach(t=>{const o=Se(s,t);e.push(`.vxe-body--row[rowid="${o}"]`),c&&e.push(`.vxe-gantt-view--body-row[rowid="${o}"]`,`.vxe-gantt-view--chart-row[rowid="${o}"]`)});Mt(n.querySelectorAll(e.join(",")),u*y)}}const i=[`.vxe-body--row[rowid="${a}"]`];c&&i.push(`.vxe-gantt-view--body-row[rowid="${a}"]`,`.vxe-gantt-view--chart-row[rowid="${a}"]`);const d=n.querySelectorAll(i.join(",")),p=d[0];T>-1&&p&&Mt(d,T-p.offsetTop)}dr(s),ur(s),s.updateCellAreas(),s.recalculate()}).then(()=>({status:!0}))}).catch(()=>H)}return Promise.resolve(H)},handleCrossTableRowDragFinishEvent(e){const t=this,o=t.$xeGantt,r=t,l=t,i=Lt(t),{tableData:a}=r,{fullAllDataRowIdData:s}=l,c=t.computeRowOpts,d=t.computeCellOpts,u=t.computeDefaultRowHeight,p=t.computeRowDragOpts,{animation:h,isCrossTableDrag:g}=p,m=t.computeTreeOpts,{mapChildrenField:f}=m,x=t.$refs.refElem;if(g&&Vt&&i){const{row:r}=i;if(r){const i=s[Se(t,r)];let p=0,g=-1;i&&(h&&(p=Be(i,d,c,u)),g=i.$index);const m=g>-1&&g<a.length-1?a.slice(g+1):[],b=n.a.toTreeArray([r],{updated:!0,children:f});t.remove(b).then(()=>{if(h&&p&&m.length){const e=l.xeGanttView;let r=x;if(o&&e){const e=o.$refs.refGanttContainerElem;e&&(r=e)}const n=[];m.forEach(e=>{const r=Se(t,e);n.push(`.vxe-body--row[rowid="${r}"]`),o&&n.push(`.vxe-gantt-view--body-row[rowid="${r}"]`,`.vxe-gantt-view--chart-row[rowid="${r}"]`)});Mt(r.querySelectorAll(n.join(",")),p)}}),t.dispatchEvent("row-remove-dragend",{row:r},e),Io(t),Oo(t)}}},handleCrossTableRowDragoverEmptyEvent(e){const t=this,o=t,r=t,{tableData:l}=o,n=t.computeRowDragOpts,{isCrossTableDrag:i}=n;if(i&&Vt&&!l.length){const{$oldTable:l,$newTable:n}=Vt;if(l){const i=l;l.xID!==t.xID&&(n&&n.xID!==t.xID&&n.hideCrossTableRowDropClearStatus(),e.preventDefault(),l.hideCrossTableRowDropClearStatus(),Vt.$newTable=t,r.prevDragRow=null,o.dragTipText=i.dragTipText,ko(t,e,e.currentTarget,null,!0,""))}}},handleCrossTableRowDragInsertEvent(e){const t=this,o=t.$xeGantt,r=t,l=t,i=t,a=Lt(t),{treeConfig:s}=r,{prevDragRow:c,prevDragPos:d,prevDragToChild:u}=i,p=t.computeRowDragOpts,{animation:h,isSelfToChildDrag:g,isCrossTableDrag:m,dragEndMethod:f,dragToChildMethod:x}=p,b=t.computeRowOpts,v=t.computeCellOpts,C=t.computeDefaultRowHeight,w=t.computeTreeOpts,{parentField:E,mapChildrenField:y}=w,T=w.children||w.childrenField;if(m&&Vt&&a){const{row:r}=a,{$oldTable:p}=Vt,m=t.$refs.refElem;if(p&&r){const a=r;let w=-1;c&&(w="bottom"===d?1:0);const R={oldRow:a,newRow:c,dragRow:a,dragPos:d,dragToChild:!!u,offsetIndex:w},S=g&&x?x(R):u,O={status:!1};Promise.resolve(!f||f(R)).then(u=>{if(!u)return O;let g=Promise.resolve();if(s){const o=n.a.toTreeArray([a],{updated:!0,children:y});p.handleCrossTableRowDragFinishEvent(e),a[E]=c?c[E]:null,o.forEach(e=>{e[T]=void 0,e[y]=void 0}),g=c?"bottom"===d?t.insertNextAt(o,c):t.insertAt(o,c):t.insert(o)}else p.handleCrossTableRowDragFinishEvent(e),g=c?"bottom"===d?t.insertNextAt(a,c):t.insertAt(a,c):t.insert(a);t.dispatchEvent("row-insert-dragend",{oldRow:r,newRow:c,dragRow:a,dragPos:d,dragToChild:S,offsetIndex:w},e),Io(t),g.then(()=>{const{tableData:e}=l,{fullAllDataRowIdData:r}=i,n=r[Se(t,a)];let s=0,c=-1;n&&(h&&(s=Be(n,v,b,C)),c=n.$index);const d=c>-1?e.slice(c):[];if(h&&s&&d.length){const e=i.xeGanttView;let r=m;if(o&&e){const e=o.$refs.refGanttContainerElem;e&&(r=e)}const l=[];d.forEach(e=>{const r=Se(t,e);l.push(`.vxe-body--row[rowid="${r}"]`),o&&l.push(`.vxe-gantt-view--body-row[rowid="${r}"]`,`.vxe-gantt-view--chart-row[rowid="${r}"]`)});Mt(r.querySelectorAll(l.join(",")),-s)}})})}}},hideCrossTableRowDropClearStatus(){Mo(this)},handleRowDragDragendEvent(e){const t=this,o=t,r=t,l=t,{treeConfig:n}=o,{fullAllDataRowIdData:i,prevDragToChild:a}=l,{dragRow:s}=r,c=t.computeTreeOpts,{lazy:d}=c,u=c.hasChild||c.hasChildField,{prevDragRow:p,prevDragPos:h}=l,g=t.computeRowDragOpts,{isCrossTableDrag:m,isCrossDrag:f}=g;if(m&&Vt){const{$newTable:o}=Vt;if(o&&o.xID!==t.xID)return void(n&&!f||o.handleCrossTableRowDragInsertEvent(e))}if(n&&d&&a){const o=i[Se(t,p)];p[u]?o&&o.treeLoaded&&t.handleRowDragSwapEvent(e,!0,s,p,h,a):t.handleRowDragSwapEvent(e,!0,s,p,h,a)}else t.handleRowDragSwapEvent(e,!0,s,p,h,a);Io(t),Oo(t)},handleRowDragDragoverEvent(e){const t=this,o=t,r=t,l=t,{treeConfig:n}=o,{fullAllDataRowIdData:i}=l,{dragRow:a}=r,s=t.computeTreeOpts,{lazy:c,transform:d,parentField:u}=s,p=s.hasChild||s.hasChildField,h=t.computeRowDragOpts,{isPeerDrag:g,isCrossDrag:m,isToChildDrag:f,isCrossTableDrag:x}=h;if(!a&&(!x||n&&!m||!Vt))return void e.preventDefault();const b=le(e),v=e.currentTarget,C=i[v.getAttribute("rowid")||""];if(C){e.preventDefault();const o=C.row,s=i[Se(t,o)],h=e.clientY-v.getBoundingClientRect().y<v.clientHeight/2?"top":"bottom";if(l.prevDragToChild=!!(n&&d&&m&&f&&b),l.prevDragRow=o,l.prevDragPos=h,x&&(!n||m)&&Vt){const{$oldTable:o,$newTable:l}=Vt;if(o){const i=o;if(o.xID===t.xID)l&&l.hideCrossTableRowDropClearStatus(),r.isCrossDragRow=!1,i.isCrossDragRow=!1,Vt.$newTable=null;else if(!n||m)return l&&l.xID!==t.xID&&l.hideCrossTableRowDropClearStatus(),o.hideCrossTableRowDropClearStatus(),i.isCrossDragRow=!0,r.dragTipText=i.dragTipText,Vt.$newTable=t,void ko(t,e,v,null,!0,h)}}if(t.eqRow(a,o)||b&&n&&c&&o[p]&&s&&!s.treeLoaded||!m&&n&&d&&(g?a[u]!==o[u]:C.level))return void ko(t,e,v,null,!1,h);ko(t,e,v,null,!0,h),t.dispatchEvent("row-dragover",{oldRow:a,targetRow:o,dragPos:h},e)}},handleCellDragMousedownEvent(e,t){var o;const r=this,l=r,i=r,a=Lt(r);e.stopPropagation();const{dragConfig:s}=l,c=r.computeRowDragOpts,{isCrossTableDrag:d,trigger:u,dragStartMethod:p}=c,{row:h}=t,g=e.currentTarget,m="cell"===u||"row"===u?g:null===(o=g.parentElement)||void 0===o?void 0:o.parentElement,f=m.parentElement,x=p||(s?s.dragStartMethod:null);if(Fo(r),x&&!x(t))return f.draggable=!1,i.dragRow=null,i.dragCol=null,Oo(r),void Mo(r);d&&(a.row=h,Vt={$oldTable:r,$newTable:null}),i.dragRow=h,i.isCrossDragRow=!1,i.dragCol=null,f.draggable=!0,function(e,t){const o=e.$el;if(o){const r="row--drag-origin",l=Se(e,t);n.a.arrayEach(o.querySelectorAll(`[rowid="${l}"]`),e=>{re(e,r)})}}(r,h),function(e,t){const o=e,r=e,{dragConfig:l}=r,{dragRow:n}=o,i=e.computeRowDragOpts,{tooltipMethod:a}=i,s=a||(l?l.rowTooltipMethod:null);let c="";if(s){c=""+(s({$table:e,row:n})||"")}else c=Ht("vxe.table.dragTip",[t.textContent||""]);o.dragTipText=c}(r,m),r.dispatchEvent("row-dragstart",t,e)},handleCellDragMouseupEvent(){$o(this)},handleHeaderCellDragDragstartEvent(e){e.dataTransfer&&e.dataTransfer.setDragImage(Z(),0,0)},handleColDragSwapColumn(){const e=this;return Uo(e),Qo(e,!1).then(()=>{e.updateCellAreas(),e.saveCustomStore("update:sort")})},handleColDragSwapEvent(e,t,o,l,i,a){const s=this,c=s,d=s,u=s,{mouseConfig:p}=c,h=s.computeColumnDragOpts,{animation:g,isPeerDrag:m,isCrossDrag:f,isSelfToChildDrag:x,isToChildDrag:b,dragEndMethod:v,dragToChildMethod:C}=h,{collectColumn:w,fullColumnIdData:E}=u,y=s.$refs.refElem,T="right"===i?1:0,R={status:!1};if(!(y&&l&&o))return Promise.resolve(R);if(l!==o){const c=o,h=l,S={oldColumn:c,newColumn:h,dragColumn:c,dragPos:i,dragToChild:!!a,offsetIndex:T},O=x&&C?C(S):a;return Promise.resolve(!v||v(S)).then(o=>{if(!o)return R;let l=null;const a=[];let v=0;g&&n.a.eachTree([c],e=>{l||e.children&&e.children.length||(l=e,v+=e.renderWidth),a.push(e)}),l||(l=c);const C=E[l.id]||{},S=C._index;let $=-1;if(g){const e=y.querySelector(`.vxe-table--column[colid="${l.id}"]`);e&&($=e.offsetLeft)}let F=-1,D=-1;const k={};n.a.eachTree([c],e=>{k[e.id]=e});let M=!1;if(c.parentId&&h.parentId)if(m&&!f){if(c.parentId!==h.parentId)return R}else{if(!f)return R;if(k[h.id]&&(M=!0,!f||!x))return r.c.modal&&r.c.modal.message({status:"error",content:Ht("vxe.error.treeDragChild")}),R}else if(c.parentId){if(!f)return R}else if(h.parentId){if(!f)return R;if(k[h.id]&&(M=!0,!f||!x))return r.c.modal&&r.c.modal.message({status:"error",content:Ht("vxe.error.treeDragChild")}),R}const I=n.a.findTree(w,e=>e.id===c.id);if(M&&f&&x){if(I){const{items:e,index:t}=I,o=c.children||[];o.forEach(e=>{e.parentId=c.parentId}),e.splice(t,1,...o),c.children=[]}}else if(I){const{items:e,index:t,parent:o}=I;e.splice(t,1),o||(F=t)}const A=n.a.findTree(w,e=>e.id===h.id);if(A){const{items:e,index:t,parent:o}=A;f&&b&&O?(c.parentId=h.id,h.children=(h.children||[]).concat([c])):(c.parentId=h.parentId,e.splice(t+T,0,c)),o||(D=t)}return n.a.eachTree(w,(e,t,o,r,l)=>{if(!l){const o=t+1;e.renderSortNumber=o}}),p&&(s.clearSelected&&s.clearSelected(),s.clearCellAreas&&(s.clearCellAreas(),s.clearCopyCellArea())),e&&s.dispatchEvent("column-dragend",{oldColumn:c,newColumn:h,dragColumn:c,dragPos:i,dragToChild:O,offsetIndex:T,_index:{newIndex:D,oldIndex:F}},e),s.$nextTick().then(()=>{if(t)return s.handleColDragSwapColumn()}).then(()=>{if(g){const{tableColumn:e}=d,{visibleColumn:t,fullColumnIdData:o}=u;let r=null;const l={};if(n.a.eachTree([c],e=>{r||e.children&&e.children.length||(r=e),l[e.id]=e}),r||(r=c),v&&a.length){const i=n.a.findIndexOf(t,e=>!!r&&e.id===r.id),s=o[e[0].id];if(s){const t=s._index,o=t+e.length;let r=-1,a=-1,c=1;if(S<t)r=0,a=i-t;else if(S>o){r=C.$index+1,a=e.length,c=-1}else i>S?(r=S-t,a=r+i-S):(r=i-t+1,a=r+S-i,c=-1);const d=[],u={};for(let t=r;t<a;t++){const o=e[t];u[o.id]||l[o.id]||(u[o.id]=o,d.push(o))}if(n.a.eachTree([h],e=>{u[e.id]||(u[e.id]=e,d.push(e))}),d.length){It(y.querySelectorAll(d.map(e=>`.vxe-table--column[colid="${e.id}"]`).join(",")),c*v)}}const c=y.querySelectorAll(a.map(e=>`.vxe-table--column[colid="${e.id}"]`).join(",")),d=c[0];$>-1&&d&&It(c,$-d.offsetLeft)}}return cr(s),Zo(s),s.updateCellAreas(),{status:!0}})}).catch(()=>R)}return Promise.resolve(R)},handleHeaderCellDragDragendEvent(e){const t=this,o=this,{dragCol:r}=t,{prevDragCol:l,prevDragPos:i,prevDragToChild:a}=o,s=this.$refs.refElem;var c,d;this.handleColDragSwapEvent(e,!0,r,l,i,a),Mo(this),Do(this),c=s,d=[".vxe-table--column"],setTimeout(()=>{c&&n.a.arrayEach(c.querySelectorAll(d.map(e=>e+".row--drag-move").join(",")),e=>oe(e,"col--drag-move"))},500),o.prevDragToChild=!1,t.dragRow=null,t.dragCol=null,Oo(this)},handleHeaderCellDragDragoverEvent(e){const t=this,o=t,r=t,{dragCol:l}=o,n=t.computeColumnDragOpts,{isToChildDrag:i,isPeerDrag:a,isCrossDrag:s}=n;if(!l)return void e.preventDefault();const c=le(e),d=e.currentTarget,u=d.getAttribute("colid"),p=t.getColumnById(u);if(p){e.preventDefault();const{clientX:o}=e,n=o-d.getBoundingClientRect().x<d.clientWidth/2?"left":"right";if(r.prevDragToChild=!!(s&&i&&c),r.prevDragCol=p,r.prevDragPos=n,p.fixed||l&&l.id===p.id||!s&&(a?l.parentId!==p.parentId:p.parentId))return void ko(t,e,null,d,!1,n);ko(t,e,null,d,!0,n),t.dispatchEvent("column-dragover",{oldColumn:l,targetColumn:p,dragPos:n},e);const u=t.$refs.refElem;if(!u)return;const h=t.$refs.refScrollXHandleElem,g=t.$refs.refTableBody,m=g?g.$el:null,f=h||m;if(f){const e=u.getBoundingClientRect(),r=u.clientWidth,l=t.$refs.refLeftContainer,n=l?l.clientWidth:0,i=t.$refs.refRightContainer,a=i?i.clientWidth:0,s=28,c=o-(e.x+n),d=e.x+r-a-o;if(c>0&&c<=s){const e=Math.floor(r/(c>s/2?240:120));f.scrollLeft-=e*(s-c)}else if(d>0&&d<=s){const e=Math.floor(r/(d>s/2?240:120));f.scrollLeft+=e*(s-d)}}}},handleHeaderCellDragMousedownEvent(e,t){var o;const r=this,l=r;e.stopPropagation();const i=r.computeColumnDragOpts,{trigger:a,dragStartMethod:s}=i,{column:c}=t,d=e.currentTarget,u="cell"===a?d:null===(o=d.parentElement)||void 0===o?void 0:o.parentElement;if(Do(r),s&&!s(t))return u.draggable=!1,l.dragRow=null,l.dragCol=null,Mo(r),void Oo(r);l.dragCol=c,l.dragRow=null,u.draggable=!0,Oo(r),function(e,t){const o=e.$el;if(o){const e=[];n.a.eachTree([t],t=>{e.push(`[colid="${t.id}"]`)});const r="col--drag-origin";n.a.arrayEach(o.querySelectorAll(e.join(",")),e=>{re(e,r)})}}(r,c),function(e,t){const o=e,{dragCol:r}=o,l=e.computeColumnDragOpts,{tooltipMethod:n}=l;let i="";if(n){i=""+(n({$table:e,column:r})||"")}else i=Ht("vxe.table.dragTip",[t.textContent||""]);o.dragTipText=i}(r,u),r.dispatchEvent("column-dragstart",t,e)},handleHeaderCellDragMouseupEvent(){const e=this;Do(this),Mo(this),Oo(this),e.dragRow=null,e.dragCol=null},setPendingRow(e,t){const o=this,{handleGetRowId:r}=$e(this),{pendingRowMaps:l}=this;return e&&!n.a.isArray(e)&&(e=[e]),t?e.forEach(e=>{const t=r(e);t&&!l[t]&&(l[t]=e)}):e.forEach(e=>{const t=r(e);t&&l[t]&&delete l[t]}),o.pendingRowFlag++,this.$nextTick()},togglePendingRow(e){const t=this,{handleGetRowId:o}=$e(this),{pendingRowMaps:r}=this;return e&&!n.a.isArray(e)&&(e=[e]),e.forEach(e=>{const t=o(e);t&&(r[t]?delete r[t]:r[t]=e)}),t.pendingRowFlag++,this.$nextTick()},hasPendingByRow(e){return this.isPendingByRow(e)},isPendingByRow(e){const{pendingRowMaps:t}=this;return!!t[Se(this,e)]},getPendingRecords(){const{fullAllDataRowIdData:e,pendingRowMaps:t}=this,o=[];return n.a.each(t,(t,r)=>{e[r]&&o.push(t)}),o},clearPendingRow(){const e=this;return this.pendingRowMaps={},e.pendingRowFlag++,this.$nextTick()},sort(e,t){const o=this,r=o.computeSortOpts,{multiple:l,remote:i,orders:a}=r;if(e&&n.a.isString(e)&&(e=[{field:e,order:t}]),n.a.isArray(e)||(e=[e]),e.length){let t;return l||Co(o),(l?e:[e[0]]).forEach((e,r)=>{let{field:l,order:i}=e,s=l;n.a.isString(l)&&(s=o.getColumnByField(l)),s&&(s.sortable||s.remoteSort)&&(t||(t=s),a&&-1===a.indexOf(i)&&(i=qt(o,s)),s.order!==i&&(s.order=i),s.sortTime=Date.now()+r)}),(!i||t&&t.remoteSort)&&o.handleTableData(!0),o.$nextTick().then(()=>(dr(o),o.updateCellAreas(),lo(o)))}return o.$nextTick()},setSort(e,t){return vo(this,null,e,t)},setSortByEvent(e,t){return vo(this,e,t,!0)},clearSort(e){const t=this,o=t.computeSortOpts;if(e){const o=He(t,e);o&&(o.order=null)}else Co(t);return o.remote||t.handleTableData(!0),t.$nextTick().then(()=>(dr(t),lo(t)))},clearSortByEvent(e,t){const o=this,r=o,{tableFullColumn:l}=r,n=o.computeSortOpts,{multiple:i}=n,a=[];let s=null;if(e&&(t?(s=He(o,t),s&&(s.order=null)):l.forEach(e=>{e.order&&(e.order=null,a.push(e))}),n.remote||o.handleTableData(!0),i||(s=a[0]),s&&o.handleColumnSortEvent(e,s),i&&a.length)){const t={$table:o,$event:e,cols:a,sortList:[]};o.dispatchEvent("clear-all-sort",t,e)}return o.$nextTick().then(()=>(dr(o),lo(o)))},getSortColumn(){return fe("vxe.error.delFunc",["getSortColumn","getSortColumns"]),n.a.find(this.tableFullColumn,e=>(e.sortable||e.remoteSort)&&e.order)},isSort(e){if(e){const t=He(this,e);return t&&t.sortable&&!!t.order}return this.getSortColumns().length>0},getSortColumns(){const{multiple:e,chronological:t}=this.sortOpts,o=[];return this.tableFullColumn.forEach(e=>{const{field:t,order:r}=e;(e.sortable||e.remoteSort)&&r&&o.push({column:e,field:t,property:t,order:r,sortTime:e.sortTime})}),e&&t&&o.length>1?n.a.orderBy(o,"sortTime"):o},setFilterByEvent(e,t,o){const r=this,l=He(r,t);return l&&l.filters?(l.filters=Ve(o||[]),r.handleColumnConfirmFilter(l,e)):r.$nextTick()},closeFilter(){const e=this,t=e,{filterStore:o}=t,{column:r,visible:l}=o;return o.isAllSelected=!1,o.isIndeterminate=!1,o.options=[],o.visible=!1,l&&e.dispatchEvent("filter-visible",{column:r,field:r.field,property:r.field,filterList:()=>e.getCheckedFilters(),visible:!1},null),e.$nextTick()},isActiveFilterByColumn(e){const t=He(this,e);return t?t.filters&&t.filters.some(e=>e.checked):this.getCheckedFilters().length>0},isFilter(e){return this.isActiveFilterByColumn(e)},clearFilterByEvent(e,t){const o=this,r=o,l=o,{filterStore:n}=r,{tableFullColumn:i}=l,a=o.computeFilterOpts,{multiple:s}=a,c=[];let d=null;if(t?(d=He(o,t),d&&o.handleClearFilter(d)):i.forEach(e=>{e.filters&&(c.push(e),o.handleClearFilter(e))}),t&&d===n.column||Object.assign(n,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),a.remote||o.updateData(),s||(d=c[0]),d){const t=()=>o.getCheckedFilters(),r=[],l=[];d.filters.forEach(e=>{e.checked&&(r.push(e.value),l.push(e.data))});const n={$table:o,$event:e,column:d,field:d.field,property:d.field,values:r,datas:l,filters:t,filterList:t};o.dispatchEvent("filter-change",n,e),o.dispatchEvent("clear-filter",n,e)}if(s&&c.length){const t={$table:o,$event:e,cols:c,filterList:[]};o.dispatchEvent("clear-all-filter",t,e)}return o.$nextTick()},isRowExpandLoaded(e){const{fullAllDataRowIdData:t}=this,o=t[Se(this,e)];return o&&!!o.expandLoaded},clearRowExpandLoaded(e){const t=this,{fullAllDataRowIdData:o,rowExpandLazyLoadedMaps:r}=this,l=this.computeExpandOpts,{lazy:n}=l,i=Se(this,e),a=o[i];return n&&a&&(a.expandLoaded=!1,delete r[i]),t.rowExpandedFlag++,this.$nextTick()},reloadRowExpand(e){const t=this,o=t,{rowExpandLazyLoadedMaps:r}=o,l=t.computeExpandOpts,{lazy:n}=l,i=Se(this,e);return n&&!r[i]&&t.clearRowExpandLoaded(e).then(()=>go(t,e)),t.$nextTick()},reloadExpandContent(e){return fe("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),this.reloadRowExpand(e)},triggerRowExpandEvent(e,t){const o=this,r=o,l=o,{expandColumn:n}=r,{rowExpandLazyLoadedMaps:i}=l,a=o.computeExpandOpts,{row:s}=t,{lazy:c,trigger:d}=a;if("manual"===d)return;e.stopPropagation();const u=Se(o,s);if(!c||!i[u]){const t=!o.isRowExpandByRow(s),r=n?o.getColumnIndex(n):-1,l=n?o.getVMColumnIndex(n):-1;o.setRowExpand(s,t),o.dispatchEvent("toggle-row-expand",{expanded:t,column:n,columnIndex:r,$columnIndex:l,row:s,rowIndex:o.getRowIndex(s),$rowIndex:o.getVMRowIndex(s)},e)}},toggleRowExpand(e){return this.setRowExpand(e,!this.isRowExpandByRow(e))},setAllRowExpand(e){const{treeConfig:t,treeOpts:o,tableFullData:r,tableFullTreeData:l}=this,i=o.children||o.childrenField;let a=[];return t?n.a.eachTree(l,e=>{a.push(e)},{children:i}):a=r,this.setRowExpand(a,e)},setRowExpand(e,t){const o=this,r=o,l=o,{expandColumn:i}=r;let{fullAllDataRowIdData:a,rowExpandedMaps:s,rowExpandLazyLoadedMaps:c}=l;const{handleGetRowId:d}=$e(o),u=o.computeExpandOpts,{reserve:p,lazy:h,accordion:g,toggleMethod:m}=u,f=[],x=i?o.getColumnIndex(i):-1,b=i?o.getVMColumnIndex(i):-1;if(e){n.a.isArray(e)||(e=[e]),g&&(s={},l.rowExpandedMaps=s,e=e.slice(e.length-1,e.length));const r=m?e.filter(e=>m({$table:o,expanded:t,column:i,columnIndex:x,$columnIndex:b,row:e,rowIndex:o.getRowIndex(e),$rowIndex:o.getVMRowIndex(e)})):e;t?r.forEach(e=>{const t=d(e);if(!s[t]){const r=a[t];h&&!r.expandLoaded&&!c[t]?f.push(go(o,e)):s[t]=e}}):r.forEach(e=>{const t=d(e);s[t]&&delete s[t]}),p&&r.forEach(e=>_o(o,e,t))}return r.rowExpandedFlag++,Promise.all(f).then(()=>o.$nextTick()).then(()=>zo(o,!0,!0,!0)).then(()=>(dr(o),ur(o),pr(o),o.updateCellAreas()))},isRowExpandByRow(e){const{rowExpandedFlag:t}=this,{rowExpandedMaps:o}=this,r=Se(this,e);return!!t&&!!o[r]},isExpandByRow(e){return fe("vxe.error.delFunc",["isExpandByRow","isRowExpandByRow"]),this.isRowExpandByRow(e)},clearRowExpand(){const e=this,t=e,o=e,{tableFullData:r,scrollYStore:l}=o,n=e.computeExpandOpts,{reserve:i}=n,a=e.getRowExpandRecords();return o.rowExpandedMaps={},i&&r.forEach(t=>_o(e,t,!1)),t.rowExpandedFlag++,l.startIndex=0,l.endIndex=1,e.$nextTick().then(()=>{if(a.length)return zo(e,!0,!0,!0)}).then(()=>(dr(e),ur(e),pr(e),e.updateCellAreas()))},clearRowExpandReserve(){return this.rowExpandedReserveRowMap={},this.$nextTick()},getRowExpandRecords(){const e=[];return n.a.each(this.rowExpandedMaps,t=>{t&&e.push(t)}),e},setRowGroups(e){const t=this,o=t,l=t,{aggregateConfig:i,rowGroupConfig:a}=o,s=t.computeAggregateOpts,{maxGroupSize:c}=s;if(!i&&!a)return xe("vxe.error.reqProp",["aggregate-config"]),t.$nextTick();const d=e?n.a.isArray(e)?e:[e]:[];return c&&d.length>c?(r.c.modal&&r.c.modal.message({status:"error",content:Ht("vxe.table.maxGroupCol",[c])}),t.$nextTick()):d.length?(Vo(t,d.map(e=>n.a.isString(e)?e:e.field)),qo(t,l.tableSynchData,!0)):t.$nextTick()},getRowGroups(){const e=this,{aggregateConfig:t,rowGroupConfig:o}=this,{fullColumnFieldData:r}=this;if(t||o){const{rowGroupList:t}=e;return t.map(({field:e})=>{const t=r[e];return t?t.column:{field:e}})}return[]},getRowGroupFields(){return this.getRowGroups().map(e=>e.field)},clearRowGroups(){const e=this,t=e,o=e,{aggregateConfig:r,rowGroupConfig:l}=t;return r||l?(Vo(e,[]),qo(e,o.tableSynchData,!0)):(xe("vxe.error.reqProp",["aggregate-config"]),e.$nextTick())},isRowGroupRecord(e){return fe("vxe.error.delFunc",["isRowGroupRecord","isAggregateRecord"]),this.isAggregateRecord(e)},isRowGroupExpandByRow(e){return fe("vxe.error.delFunc",["isRowGroupExpandByRow","isAggregateExpandByRow"]),this.isAggregateExpandByRow(e)},isAggregateRecord(e){const{isRowGroupStatus:t}=this;return t&&e.isAggregate},getAggregateContentByRow(e){const{isRowGroupStatus:t}=this;return t&&e&&e.isAggregate?e.groupContent:""},getAggregateRowChildren(e){const t=this.computeAggregateOpts,{childrenField:o,mapChildrenField:r}=t,{isRowGroupStatus:l}=this;return l&&e&&e.isAggregate&&o&&r&&e[r]||[]},isAggregateExpandByRow(e){const{rowGroupExpandedFlag:t}=this,{rowGroupExpandedMaps:o}=this;return!!t&&!!o[Se(this,e)]},setRowGroupExpand(e,t){const o=this;return e?(n.a.isArray(e)||(e=[e]),to(o,e,t)):o.$nextTick()},setRowGroupExpandByField(e,t){const o=this,r=o,l=o,{isRowGroupStatus:i}=r,a=o.computeAggregateOpts,{childrenField:s}=a;if(e&&(n.a.isArray(e)||(e=[e]),i)){const r=[],i={};if(e.forEach(e=>{i[e]=!0}),n.a.eachTree(l.afterGroupFullData,e=>{e.isAggregate&&i[e.groupField]&&r.push(e)},{children:s}),r.length)return to(o,r,t)}return o.$nextTick()},setAllRowGroupExpand(e){const t=this,o=t,r=t,{tableFullGroupData:l}=r,i=t.computeAggregateOpts,{mapChildrenField:a}=i,s={};return e&&a&&n.a.eachTree(l,e=>{e[a]&&e[a].length&&(s[Se(t,e)]=e)},{children:a}),r.rowGroupExpandedMaps=s,ro(t),t.handleTableData(),oo(t),o.rowGroupExpandedFlag++,zo(t,!0,!0,!0)},clearRowGroupExpand(){const e=this;return this.rowGroupExpandedMaps={},ro(this),this.handleTableData(),oo(this),e.rowGroupExpandedFlag++,zo(this,!0,!0,!0)},getTreeExpandRecords(){const e=[];return n.a.each(this.treeExpandedMaps,t=>{t&&e.push(t)}),e},getTreeStatus(){return this.treeConfig?{config:this.treeOpts,rowExpandeds:this.getTreeExpandRecords()}:null},isTreeExpandLoaded(e){const{fullAllDataRowIdData:t}=this,o=t[Se(this,e)];return o&&!!o.treeLoaded},clearTreeExpandLoaded(e){const t=this,o=t,r=t,{fullAllDataRowIdData:l,treeExpandedMaps:i}=r,a=t.computeTreeOpts,{transform:s}=a;return e?(n.a.isArray(e)||(e=[e]),e.forEach(e=>{const o=Se(t,e),r=l[o];r&&(r.treeLoaded=!1,i[o]&&delete i[o])})):n.a.each(l,e=>{e.treeLoaded=!1}),r.treeExpandedMaps={},s&&(ro(t),t.handleTableData()),o.treeExpandedFlag++,t.$nextTick()},reloadTreeExpand(e){const t=this,o=t,r=t,{treeExpandLazyLoadedMaps:l}=r,n=t.computeTreeOpts,{transform:i,lazy:a}=n,s=n.hasChild||n.hasChildField,c=Se(t,e);return a&&e[s]&&!l[c]?t.clearTreeExpandLoaded(e).then(()=>po(t,e)).then(()=>{i&&(ro(t),t.handleTableData()),o.treeExpandedFlag++}).then(()=>t.recalculate()):t.$nextTick()},reloadTreeChilds(e){return fe("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),this.reloadTreeExpand(e)},triggerRowGroupExpandEvent(e,t){const{rowGroupExpandedMaps:o}=this,r=this.computeAggregateOpts,{row:l,column:n}=t,{trigger:i}=r;if("manual"===i)return;e.stopPropagation();const a=!o[Se(this,l)],s=this.getColumnIndex(n),c=this.getVMColumnIndex(n);this.setRowGroupExpand(l,a),this.dispatchEvent("toggle-row-group-expand",{expanded:a,column:n,columnIndex:s,$columnIndex:c,row:l},e)},triggerTreeExpandEvent(e,t){const o=this,r=o,{treeExpandLazyLoadedMaps:l,treeEATime:n}=r,i=o.computeTreeOpts,{row:a,column:s}=t,{lazy:c,trigger:d,accordion:u}=i;if("manual"===d)return;e.stopPropagation();const p=Se(this,a);if(!c||!l[p]){const t=!o.isTreeExpandByRow(a),l=o.getColumnIndex(s),i=o.getVMColumnIndex(s);n&&clearTimeout(n),o.setTreeExpand(a,t).then(()=>{u&&(r.treeEATime=setTimeout(()=>{r.treeEATime=void 0,o.scrollToRow(a)},30))}),o.dispatchEvent("toggle-tree-expand",{expanded:t,column:s,columnIndex:l,$columnIndex:i,row:a},e)}},toggleTreeExpand(e){return this.setTreeExpand(e,!this.isTreeExpandByRow(e))},setAllTreeExpand(e){const t=this,o=t,r=t,{tableFullData:l}=r,i=t.computeTreeOpts,{transform:a,lazy:s}=i,c=i.children||i.childrenField,d=[];return n.a.eachTree(l,e=>{const t=e[c];(s||t&&t.length)&&d.push(e)},{children:c}),t.setTreeExpand(d,e).then(()=>{if(a)return ro(t),o.treeExpandedFlag++,t.recalculate()})},setTreeExpand(e,t){const o=this,{treeOpts:r}=this,{transform:l}=r;return e&&(n.a.isArray(e)||(e=[e]),e.length)?l?function(e,t,o){const r=e;return eo(e,t,o).then(()=>(ro(e),e.handleTableData(),r.treeExpandedFlag++,oo(e),e.$nextTick())).then(()=>zo(e,!0,!0,!0)).then(()=>{setTimeout(()=>{e.updateCellAreas()},30)})}(o,e,t):eo(o,e,t):this.$nextTick()},isTreeExpandByRow(e){const{treeExpandedFlag:t}=this,{treeExpandedMaps:o}=this;return!!t&&!!o[Se(this,e)]},clearTreeExpand(){const e=this,t=e,o=e,{tableFullTreeData:r}=o,l=e.computeTreeOpts,i=l.children||l.childrenField,{transform:a,reserve:s}=l,c=e.getTreeExpandRecords();return o.treeExpandedMaps={},s&&n.a.eachTree(r,t=>ho(e,t,!1),{children:i}),e.handleTableData().then(()=>{a&&(ro(e),e.handleTableData()),t.treeExpandedFlag++}).then(()=>{c.length&&e.recalculate()})},clearTreeExpandReserve(){return this.treeExpandedReserveRowMap={},this.$nextTick()},getScroll(){const{scrollXLoad:e,scrollYLoad:t}=this,{elemStore:o}=this,r=Ue(o["main-body-scroll"]);return{virtualX:e,virtualY:t,scrollTop:r?r.scrollTop:0,scrollLeft:r?r.scrollLeft:0}},handleScrollEvent(e,t,o,r,l,n){const i=this,a=i,s=i,c=i,{highlightHoverRow:d}=a,{lastScrollLeft:u,lastScrollTop:p}=c,h=i.$refs.refScrollXHandleElem,g=i.$refs.refScrollYHandleElem;if(!h||!g)return;const m=i.computeRowOpts,f=i.$refs.refValidTooltip,x=i.$refs.refTooltip,b=g.clientHeight,v=h.clientWidth,C=g.scrollHeight,w=h.scrollWidth;let E=!1,y=!1,T=!1,R=!1,S="",O=!1,$=!1,F=!1,D=!1;if(o){const e=i.computeScrollXThreshold;T=l<=0,T||(R=l+v>=w-1),l>u?(S="right",l+v>=w-e&&(D=!0)):(S="left",l<=e&&(F=!0)),i.checkScrolling(),c.lastScrollLeft=l}if(t){const e=i.computeScrollYThreshold;E=r<=0,E||(y=r+b>=C-1),r>p?(S="bottom",r+b>=C-e&&($=!0)):(S="top",r<=e&&(O=!0)),c.lastScrollTop=r}s.lastScrollTime=Date.now();const k=Object.assign({scrollTop:r,scrollLeft:l,bodyHeight:b,bodyWidth:v,scrollHeight:C,scrollWidth:w,isX:o,isY:t,isTop:E,isBottom:y,isLeft:T,isRight:R,direction:S},n);ur(i),function(e,t,o){const r=e,l=e,{lcsTimeout:n}=l;n&&clearTimeout(n),l.lcsTimeout=setTimeout(()=>{const{scrollXLoad:n,scrollYLoad:i,isAllOverflow:a}=r;l.lcsRunTime=Date.now(),l.lcsTimeout=void 0,l.intoRunScroll=!1,l.inVirtualScroll=!1,l.inWheelScroll=!1,l.inHeaderScroll=!1,l.inBodyScroll=!1,l.inFooterScroll=!1,l.scrollRenderType="",a||(To(e),dr(e)),t&&n&&e.updateScrollXData(),o&&i&&e.updateScrollYData().then(()=>{a||(To(e),dr(e)),e.updateScrollYSpace()}),e.updateCellAreas()},200)}(i,o,t),o&&i.closeFilter(),(m.isHover||d)&&i.clearHoverRow(),f&&f.reactData.visible&&f.close(),x&&x.reactData.visible&&x.close(),($||O||D||F)&&i.dispatchEvent("scroll-boundary",k,e),i.dispatchEvent("scroll",k,e)},triggerScrollXEvent(){const e=this;e.computeVirtualXOpts.immediate?Zo(e):function(e){const t=e,{lxTimeout:o,lxRunTime:r,scrollXStore:l}=t,{visibleSize:n}=l,i=n>26?26:n>16?14:6;o&&clearTimeout(o),(!r||r+i<Date.now())&&(t.lxRunTime=Date.now(),Zo(e)),t.lxTimeout=setTimeout(()=>{t.lxTimeout=void 0,t.lxRunTime=void 0,Zo(e)},i)}(e)},triggerScrollYEvent(){const e=this;e.computeVirtualYOpts.immediate?er(e):function(e){const t=e,{lyTimeout:o,lyRunTime:r,scrollYStore:l}=t,{visibleSize:n}=l,i=n>30?32:n>20?18:8;o&&clearTimeout(o),(!r||r+i<Date.now())&&(t.lyRunTime=Date.now(),er(e)),t.lyTimeout=setTimeout(()=>{t.lyTimeout=void 0,t.lyRunTime=void 0,er(e)},i)}(e)},triggerBodyScrollEvent(e,t){const o=this,r=o,l=o,{scrollYLoad:n,scrollXLoad:i}=r,{elemStore:a,intoRunScroll:s,lastScrollTop:c,lastScrollLeft:d,inWheelScroll:u,inVirtualScroll:p,inHeaderScroll:h,inBodyScroll:g,scrollRenderType:m,inFooterScroll:f}=l;if(u||p||h||f)return;const x=o.$refs.refScrollXHandleElem,b=o.$refs.refScrollYHandleElem,v=Ue(a["left-body-scroll"]),C=Ue(a["main-body-scroll"]),w=Ue(a["right-body-scroll"]),E=Ue(a["main-header-scroll"]),y=Ue(a["main-footer-scroll"]),T=o.$refs.refRowExpandElem;if(s)return;if(!C)return;if(!x)return;if(!b)return;if(g&&m!==t)return;let R=b.scrollTop,S=x.scrollLeft;v&&"left"===t?R=v.scrollTop:w&&"right"===t?R=w.scrollTop:(R=C.scrollTop,S=C.scrollLeft);const O=S!==d,$=R!==c;l.inBodyScroll=!0,l.scrollRenderType=t,$&&("left"===t?(de(C,R),de(w,R)):"right"===t?(de(C,R),de(v,R)):(de(v,R),de(w,R)),de(b,R),de(T,R),rr(o,R),n&&o.triggerScrollYEvent(e)),O&&(ue(x,S),ue(E,S),ue(y,S),i&&o.triggerScrollXEvent(e)),o.handleScrollEvent(e,$,O,R,S,{type:"body",fixed:t})},triggerHeaderScrollEvent(e,t){const o=this,r=o,l=o,{scrollXLoad:n}=r,{elemStore:i,intoRunScroll:a,inWheelScroll:s,inVirtualScroll:c,inBodyScroll:d,inFooterScroll:u}=l;if(s||c||d||u)return;if(a)return;const p=o.$refs.refScrollXHandleElem,h=o.$refs.refScrollYHandleElem,g=Ue(i["main-body-scroll"]),m=Ue(i["main-header-scroll"]),f=Ue(i["main-footer-scroll"]);if(!m)return;if(!p)return;if(!h)return;const x=h.scrollTop,b=m.scrollLeft;l.inHeaderScroll=!0,ue(p,b),ue(f,b),ue(g,b),n&&o.triggerScrollXEvent(e),o.handleScrollEvent(e,!1,!0,x,b,{type:"header",fixed:t})},triggerFooterScrollEvent(e,t){const o=this,r=o,l=o,{scrollXLoad:n}=r,{elemStore:i,intoRunScroll:a,inWheelScroll:s,inVirtualScroll:c,inHeaderScroll:d,inBodyScroll:u}=l;if(s||c||d||u)return;const p=o.$refs.refScrollXHandleElem,h=o.$refs.refScrollYHandleElem,g=Ue(i["main-body-scroll"]),m=Ue(i["main-header-scroll"]),f=Ue(i["main-footer-scroll"]);if(a)return;if(!f)return;if(!p)return;if(!h)return;const x=h.scrollTop,b=f.scrollLeft;l.inFooterScroll=!0,ue(p,b),ue(m,b),ue(g,b),n&&o.triggerScrollXEvent(e),o.handleScrollEvent(e,!1,!0,x,b,{type:"footer",fixed:t})},triggerBodyWheelEvent(e){const t=this,o=t,r=t,l=t,{target:n,deltaY:i,deltaX:a,shiftKey:s}=e;if(n&&/^textarea$/i.test(n.tagName))return;const{highlightHoverRow:c}=o,{scrollXLoad:d,scrollYLoad:u,expandColumn:p}=r,h=t.computeLeftFixedWidth,g=t.computeRightFixedWidth;if(!(h||g||p))return;const{elemStore:m,lastScrollTop:f,lastScrollLeft:x}=l,b=t.computeRowOpts,v=t.$refs.refScrollXHandleElem,C=t.$refs.refScrollYHandleElem,w=Ue(m["left-body-scroll"]),E=Ue(m["main-header-scroll"]),y=Ue(m["main-body-scroll"]),T=Ue(m["main-footer-scroll"]),R=Ue(m["right-body-scroll"]),S=t.$refs.refRowExpandElem;if(!v)return;if(!C)return;if(!y)return;const O=(e=>{let t=1;const o=Date.now();return e+25>o?t=1.18:e+30>o?t=1.15:e+40>o?t=1.12:e+55>o?t=1.09:e+75>o?t=1.06:e+100>o&&(t=1.03),t})(r.lastScrollTime),$=s?0:Math.ceil(i*O),F=Math.ceil((s&&i||a)*O),D=$<0,k=y.scrollTop;if(D?k<=0:k>=y.scrollHeight-y.clientHeight)return;const M=k+$,I=y.scrollLeft+F,A=I!==x,L=M!==f;if((b.isHover||c)&&t.clearHoverRow(),A)if(e.preventDefault(),l.inWheelScroll=!0,Gt.firefox||Gt.safari){const o=I;ue(v,o),ue(y,o),ue(E,o),ue(T,o),d&&t.triggerScrollXEvent(e),t.handleScrollEvent(e,L,A,y.scrollTop,o,{type:"table",fixed:""})}else((e,t)=>{requestAnimationFrame(()=>{t(e)})})(I,o=>{const r=o;ue(v,r),ue(y,r),ue(E,r),ue(T,r),d&&t.triggerScrollXEvent(e),t.handleScrollEvent(e,L,A,y.scrollTop,r,{type:"table",fixed:""})});if(L)if(e.preventDefault(),Gt.firefox||Gt.safari){const o=M;de(C,o),de(y,o),de(w,o),de(R,o),de(S,o),rr(t,o),u&&t.triggerScrollYEvent(e),t.handleScrollEvent(e,L,A,o,y.scrollLeft,{type:"table",fixed:""})}else((e,t)=>{const o=Math.abs(e),r=performance.now();let l=0;const n=i=>{let a=(i-r)/o;a>1&&(a=1);const s=Math.pow(a,2),c=Math.floor(e*s)-l;l+=c,t(c),a<1&&requestAnimationFrame(n)};requestAnimationFrame(n)})(M-k,o=>{const r=y.scrollTop+o;l.inWheelScroll=!0,de(C,r),de(y,r),de(w,r),de(R,r),de(S,r),rr(t,r),u&&t.triggerScrollYEvent(e),t.handleScrollEvent(e,L,A,r,y.scrollLeft,{type:"table",fixed:""})})},triggerVirtualScrollXEvent(e){const t=this,o=t,r=t,{scrollXLoad:l}=o,{elemStore:n,inWheelScroll:i,lastScrollTop:a,inHeaderScroll:s,inBodyScroll:c,inFooterScroll:d}=r;if(s||c||d)return;if(i)return;const u=Ue(n["main-header-scroll"]),p=Ue(n["main-body-scroll"]),h=Ue(n["main-footer-scroll"]),g=t.$refs.refScrollYHandleElem,m=e.currentTarget,{scrollLeft:f}=m,x=g||p;let b=0;x&&(b=x.scrollTop);const v=b!==a;r.inVirtualScroll=!0,ue(p,f),ue(u,f),ue(h,f),l&&t.triggerScrollXEvent(e),t.handleScrollEvent(e,v,!0,b,f,{type:"table",fixed:""})},triggerVirtualScrollYEvent(e){const t=this,o=t,r=t,{scrollYLoad:l}=o,{elemStore:n,inWheelScroll:i,lastScrollLeft:a,inHeaderScroll:s,inBodyScroll:c,inFooterScroll:d}=r;if(s||c||d)return;if(i)return;const u=Ue(n["left-body-scroll"]),p=Ue(n["main-body-scroll"]),h=Ue(n["right-body-scroll"]),g=t.$refs.refRowExpandElem,m=t.$refs.refScrollXHandleElem,f=e.currentTarget,{scrollTop:x}=f,b=m||p;let v=0;b&&(v=b.scrollLeft);const C=v!==a;r.inVirtualScroll=!0,de(p,x),de(u,x),de(h,x),de(g,x),rr(t,x),l&&t.triggerScrollYEvent(e),t.handleScrollEvent(e,!0,C,x,v,{type:"table",fixed:""})},updateScrollXData(){const e=this,t=e,{isAllOverflow:o}=t;return Ko(e),e.updateScrollXSpace(),e.$nextTick().then(()=>{Ko(e),e.updateScrollXSpace(),o||e.updateScrollYSpace()})},updateScrollXSpace(){const e=this,t=e,o=e,{scrollXLoad:r,overflowX:l,scrollXWidth:n}=t,{visibleColumn:i,scrollXStore:a,elemStore:s,fullColumnIdData:c}=o,d=o.xeGanttView,u=e.computeMouseOpts,p=e.$refs.refTableBody;if(p?p.$el:null){const o=Ue(s["main-body-scroll"]),p=Ue(s["main-body-table"]),h=Ue(s["main-header-table"]),g=Ue(s["main-footer-table"]);let m=0;const f=i[a.startIndex];if(f){m=(c[f.id]||{}).oLeft}let x=0;o&&(x=o.clientWidth);let b=!1,v=n;n>5e6&&(m=o&&p&&o.scrollLeft+x>=5e6?5e6-p.clientWidth:m/(n-x)*(5e6-x),v=5e6,b=!0),r&&l||(m=0),h&&(h.style.transform=h.getAttribute("xvm")?`translate(${m}px, 0px)`:""),p&&(p.style.transform=`translate(${m}px, ${t.scrollYTop||0}px)`),g&&(g.style.transform=g.getAttribute("xvm")?`translate(${m}px, 0px)`:"");["main"].forEach(e=>{["header","body","footer"].forEach(t=>{const o=Ue(s[`${e}-${t}-xSpace`]);o&&(o.style.width=r?v+"px":"")})}),t.scrollXLeft=m,t.scrollXWidth=v,t.isScrollXBig=b;const C=e.$refs.refScrollXSpaceElem;return C&&(C.style.width=v+"px"),Po(e),b&&u.area&&xe("vxe.error.notProp",["mouse-config.area"]),d&&d.handleUpdateSXSpace&&d.handleUpdateSXSpace(),e.$nextTick(()=>{lo(e)})}},updateScrollYData(){const e=this;return e.handleTableData(),e.updateScrollYSpace(),e.$nextTick().then(()=>{e.handleTableData(),e.updateScrollYSpace()})},updateScrollYSpace(){const e=this,t=e,o=e,{isAllOverflow:r,scrollYLoad:l,expandColumn:n}=t,{scrollYStore:i,elemStore:a,isResizeCellHeight:s,afterFullData:c,fullAllDataRowIdData:d,rowExpandedMaps:u}=o,p=o.xeGanttView,{startIndex:h}=i,g=e.computeMouseOpts,m=e.computeExpandOpts,f=e.computeRowOpts,x=e.computeCellOpts,b=e.computeDefaultRowHeight,v=Ue(a["main-body-scroll"]),C=Ue(a["main-body-table"]),w=Ue(a["left-body-table"]),E=Ue(a["right-body-table"]);let y=0,T=0,R=!1;if(l){if(s||x.height||f.height||n||!r){const t=c[h];let o=Se(e,t),r=d[o]||{};y=r.oTop||0;const l=c[c.length-1];o=Se(e,l),r=d[o]||{},T=(r.oTop||0)+(r.resizeHeight||x.height||f.height||r.height||b),n&&u[o]&&(T+=r.expandHeight||m.height||0),T>5e6&&(R=!0)}else T=c.length*b,T>5e6&&(R=!0),y=Math.max(0,h*b)}else C&&(T=C.clientHeight);let S=0;v&&(S=v.clientHeight);let O=T,$=y;R&&($=v&&C&&v.scrollTop+S>=5e6?5e6-C.clientHeight:y/(T-S)*(5e6-S),O=5e6),w&&(w.style.transform=`translate(0px, ${$}px)`),C&&(C.style.transform=`translate(${t.scrollXLeft||0}px, ${$}px)`),E&&(E.style.transform=`translate(0px, ${$}px)`),["main","left","right"].forEach(e=>{["header","body","footer"].forEach(t=>{const o=Ue(a[`${e}-${t}-ySpace`]);o&&(o.style.height=O?O+"px":"")})});const F=e.$refs.refScrollYSpaceElem;F&&(F.style.height=O?O+"px":"");const D=e.$refs.refRowExpandYSpaceElem;return D&&(D.style.height=O?O+"px":""),t.scrollYTop=$,t.scrollYHeight=T,t.isScrollYBig=R,Po(e),R&&g.area&&xe("vxe.error.notProp",["mouse-config.area"]),p&&p.handleUpdateSYSpace&&p.handleUpdateSYSpace(),e.$nextTick().then(()=>{lo(e)})},updateScrollYStatus(){return Jt(this)},scrollTo(e,t){const o=this,r=o,l=o,{elemStore:i}=l,a=Ue(i["main-header-scroll"]),s=Ue(i["main-body-scroll"]),c=Ue(i["main-footer-scroll"]),d=Ue(i["left-body-scroll"]),u=Ue(i["right-body-scroll"]),p=o.$refs.refScrollXHandleElem,h=o.$refs.refScrollYHandleElem;return l.intoRunScroll=!0,e&&(n.a.isNumber(e)||(t=e.top,e=e.left)),n.a.isNumber(e)&&(ue(p,e),ue(s,e),ue(a,e),ue(c,e),Zo(o)),n.a.isNumber(t)&&(de(h,t),de(s,t),de(d,t),de(u,t),er(o)),r.scrollXLoad||r.scrollYLoad?new Promise(e=>{setTimeout(()=>{o.$nextTick(()=>{l.intoRunScroll=!1,e()})},30)}):o.$nextTick().then(()=>{l.intoRunScroll=!1})},scrollToRow(e,t){const o=this,r=o,l=o,{isAllOverflow:n,scrollYLoad:i,scrollXLoad:a}=l,s=[];return e&&(r.treeConfig?s.push(o.scrollToTreeRow(e)):s.push(Je(o,e))),t&&s.push(Lo(o,t,e)),Promise.all(s).then(()=>{if(e)return n||!i&&!a||(To(o),ir(o)),o.$nextTick()})},scrollToColumn(e){return Lo(this,e)},scrollToTreeRow(e){const t=this,o=t,r=t,l=t,{treeConfig:i}=o,{isRowGroupStatus:a}=r,{tableFullData:s}=l,c=[];if(i||a){const o=t.computeAggregateOpts,r=t.computeTreeOpts,l=r.children||r.childrenField,i=n.a.findTree(s,o=>t.eqRow(o,e),{children:a?o.mapChildrenField:l});if(i){const e=i.nodes;e.forEach((o,r)=>{r<e.length-1&&!t.isTreeExpandByRow(o)&&c.push(t.setTreeExpand(o,!0))})}}return Promise.all(c).then(()=>Je(t,e))},clearScroll(){const e=this,{elemStore:t,scrollXStore:o,scrollYStore:r}=e,l=Ue(t["main-header-scroll"]),n=Ue(t["main-body-scroll"]),i=Ue(t["main-footer-scroll"]),a=Ue(t["left-body-scroll"]),s=Ue(t["right-body-scroll"]),c=this.$refs.refScrollXHandleElem,d=this.$refs.refScrollYHandleElem;return e.intoRunScroll=!0,ue(c,0),ue(n,0),ue(l,0),ue(i,0),de(d,0),de(n,0),de(a,0),de(s,0),o.startIndex=0,o.visibleStartIndex=0,o.endIndex=o.visibleSize,o.visibleEndIndex=o.visibleSize,r.startIndex=0,r.visibleStartIndex=0,r.endIndex=r.visibleSize,r.visibleEndIndex=r.visibleSize,this.$nextTick().then(()=>{e.intoRunScroll=!1})},updateFooter(){const e=this,t=e,o=e,r=e,l=e.$xeGrid,n=e.$xeGantt,{showFooter:i,footerData:a,footerMethod:s}=t,{visibleColumn:c,afterFullData:d}=r;let u=[];return i&&a&&a.length?u=a.slice(0):i&&s&&(u=c.length?s({columns:c,data:d,$table:e,$grid:l,$gantt:n}):[]),o.footerTableData=u,e.handleUpdateFooterMerge(),e.dispatchEvent("footer-data-change",{visibleColumn:r.visibleColumn,footData:u},null),e.$nextTick()},updateStatus(e,t){const o=this,r=o;return this.$nextTick().then(()=>{const{editRules:l}=r;if(e&&l)return o.handleCellRuleUpdateStatus("change",e,t)})},setMergeCells(e){const t=this,o=t,r=t;return t.spanMethod&&xe("vxe.error.errConflicts",["merge-cells","span-method"]),function(e,t){const o=e,{fullAllDataRowIdData:r,fullColumnIdData:l,visibleColumn:i,afterFullData:a,mergeBodyList:s,mergeBodyMaps:c}=o;if(t){const{handleGetRowId:o}=$e(e);n.a.isArray(t)||(t=[t]),t.forEach(e=>{let{row:t,col:d,rowspan:u,colspan:p}=e,h=-1,g=-1;if(n.a.isNumber(t))h=t;else{const e=t?o(t):null,l=e?r[e]:null;l&&(h=l._index)}if(n.a.isNumber(d))g=d;else{const e=d?d.id:null,t=e?l[e]:null;t&&(g=t._index)}if(h>-1&&g>-1&&(u||p)&&(u=n.a.toNumber(u)||1,p=n.a.toNumber(p)||1,u>1||p>1)){const e=a[h],t=i[g];let o=c[`${h}:${g}`];o?(o.rowspan=u,o.colspan=p,o._rowspan=u,o._colspan=p):(o={row:h,col:g,rowspan:u,colspan:p,_row:e,_col:t,_rowspan:u,_colspan:p},c[`${h}:${g}`]=o,s.push(o))}})}}(t,e),t.handleUpdateBodyMerge(),t.$nextTick().then(()=>{const{expandColumn:e}=o,{mergeBodyList:l}=r;return e&&l.length&&fe("vxe.error.errConflicts",["type=expand","merge-cells | span-method"]),t.updateCellAreas(),lo(t)})},removeMergeCells(e){const t=this;t.spanMethod&&xe("vxe.error.errConflicts",["merge-cells","span-method"]);const o=function(e,t){const o=e,{mergeBodyList:r,fullColumnIdData:l,fullAllDataRowIdData:i,mergeBodyMaps:a}=o,s=[];if(t){const{handleGetRowId:o}=$e(e);n.a.isArray(t)||(t=[t]),t.forEach(e=>{const{row:t,col:c}=e;let d=-1,u=-1;if(n.a.isNumber(t))d=t;else{const e=t?o(t):null,r=e?i[e]:null;r&&(d=r._index)}if(n.a.isNumber(c))u=c;else{const e=c?c.id:null,t=e?l[e]:null;t&&(u=t._index)}const p=n.a.findIndexOf(r,e=>e.row===d&&e.col===u);if(p>-1){const e=r.splice(p,1);e[0]&&(s.push(e[0]),a[`${d}:${u}`]&&delete a[`${d}:${u}`])}})}return s}(t,e);return t.handleUpdateBodyMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),lo(t),o))},getMergeCells(){return this.mergeBodyList.slice(0)},clearMergeCells(){const e=this,t=e,o=e;return o.mergeBodyList=[],o.mergeBodyMaps={},o.mergeBodyCellMaps={},t.mergeBodyFlag++,e.$nextTick().then(()=>lo(e))},setMergeHeaderCells(e){const t=this;return function(e,t){const o=e,r=e,{footerTableData:l}=o,{mergeHeaderList:i,mergeHeaderMaps:a,fullColumnIdData:s}=r;if(t){const{visibleColumn:e}=r;n.a.isArray(t)||(t=[t]),t.forEach(t=>{let{row:o,col:r,rowspan:c,colspan:d}=t;const u=n.a.isNumber(o)?o:-1;let p=-1;if(n.a.isNumber(r))p=r;else{const e=r?r.id:null,t=e?s[e]:null;t&&(p=t._index)}if(u>-1&&p>-1&&(c||d)&&(c=n.a.toNumber(c)||1,d=n.a.toNumber(d)||1,c>1||d>1)){const t=l[u],o=e[p];let r=a[`${u}:${p}`];r?(r.rowspan=c,r.colspan=d,r._rowspan=c,r._colspan=d):(r={row:u,col:p,rowspan:c,colspan:d,_row:t,_col:o,_rowspan:c,_colspan:d},a[`${u}:${p}`]=r,i.push(r))}})}}(t,e),t.handleUpdateHeaderMerge(),t.$nextTick().then(()=>lo(t))},removeMergeHeaderCells(e){const t=this,o=function(e,t){const o=e,{mergeHeaderList:r,fullColumnIdData:l,mergeHeaderMaps:i}=o,a=[];return t&&(n.a.isArray(t)||(t=[t]),t.forEach(e=>{const{row:t,col:o}=e,s=n.a.isNumber(t)?t:-1;let c=-1;if(n.a.isNumber(o))c=o;else{const e=o?o.id:null,t=e?l[e]:null;t&&(c=t._index)}const d=n.a.findIndexOf(r,e=>e.row===s&&e.col===c);if(d>-1){const e=r.splice(d,1)[0];e&&(a.push(e),i[`${s}:${c}`]&&delete i[`${s}:${c}`])}})),a}(t,e);return t.handleUpdateHeaderMerge(),t.$nextTick().then(()=>(lo(t),o))},getMergeHeaderCells(){return this.mergeHeaderList.slice(0)},clearMergeHeaderCells(){const e=this,t=e,o=e;return o.mergeHeaderList=[],o.mergeHeaderMaps={},o.mergeHeaderCellMaps={},t.mergeHeadFlag++,e.$nextTick().then(()=>lo(e))},setMergeFooterCells(e){const t=this;return t.footerSpanMethod&&xe("vxe.error.errConflicts",["merge-footer-cells | merge-footer-items","footer-span-method"]),function(e,t){const o=e,r=e,{footerTableData:l}=o,{mergeFooterList:i,mergeFooterMaps:a,fullColumnIdData:s}=r;if(t){const{visibleColumn:e}=r;n.a.isArray(t)||(t=[t]),t.forEach(t=>{let{row:o,col:r,rowspan:c,colspan:d}=t;const u=n.a.isNumber(o)?o:-1;let p=-1;if(n.a.isNumber(r))p=r;else{const e=r?r.id:null,t=e?s[e]:null;t&&(p=t._index)}if(u>-1&&p>-1&&(c||d)&&(c=n.a.toNumber(c)||1,d=n.a.toNumber(d)||1,c>1||d>1)){const t=l[u],o=e[p];let r=a[`${u}:${p}`];r?(r.rowspan=c,r.colspan=d,r._rowspan=c,r._colspan=d):(r={row:u,col:p,rowspan:c,colspan:d,_row:t,_col:o,_rowspan:c,_colspan:d},a[`${u}:${p}`]=r,i.push(r))}})}}(t,e),t.handleUpdateFooterMerge(),t.$nextTick().then(()=>lo(t))},setMergeFooterItems(e){return this.setMergeFooterCells(e)},removeMergeFooterCells(e){const t=this;t.footerSpanMethod&&xe("vxe.error.errConflicts",["merge-footer-cells | merge-footer-items","footer-span-method"]);const o=function(e,t){const o=e,{mergeFooterList:r,fullColumnIdData:l,mergeFooterMaps:i}=o,a=[];return t&&(n.a.isArray(t)||(t=[t]),t.forEach(e=>{const{row:t,col:o}=e,s=n.a.isNumber(t)?t:-1;let c=-1;if(n.a.isNumber(o))c=o;else{const e=o?o.id:null,t=e?l[e]:null;t&&(c=t._index)}const d=n.a.findIndexOf(r,e=>e.row===s&&e.col===c);if(d>-1){const e=r.splice(d,1)[0];e&&(a.push(e),i[`${s}:${c}`]&&delete i[`${s}:${c}`])}})),a}(t,e);return t.handleUpdateFooterMerge(),t.$nextTick().then(()=>(lo(t),o))},removeMergeFooterItems(e){return this.removeMergeFooterCells(e)},getMergeFooterCells(){return this.mergeFooterList.slice(0)},getMergeFooterItems(){return this.getMergeFooterCells()},clearMergeFooterCells(){const e=this,t=e,o=e;return o.mergeFooterList=[],o.mergeFooterMaps={},o.mergeFooterCellMaps={},t.mergeFootFlag++,e.$nextTick().then(()=>lo(e))},clearMergeFooterItems(){return this.clearMergeFooterCells()},handleUpdateAggData(){return qo(this,this.tableSynchData,!0)},updateZindex(){this.zIndex?this.tZindex=this.zIndex:this.tZindex<u()&&(this.tZindex=d())},updateCellAreas(){const e=this,t=e,{mouseConfig:o}=t,r=e.computeMouseOpts;return o&&r.area&&e.handleRecalculateCellAreaEvent?e.handleRecalculateCellAreaEvent():e.$nextTick()},dispatchEvent(e,t,o){const r=this.$xeGrid,l=this.$xeGantt;this.$emit(e,jt(o,{$table:this,$grid:r,$gantt:l},t))},emitEvent(e,t,o){this.dispatchEvent(e,t,o)},focus(){return this.isActivated=!0,this.$nextTick()},blur(){return this.isActivated=!1,this.$nextTick()},connect(e){return this.connectToolbar(e)},connectToolbar(e){const t=this;return e&&e.syncUpdate?(e.syncUpdate({collectColumn:this.collectColumn,$table:t}),this.$toolbar=e):xe("vxe.error.barUnableLink"),this.$nextTick()},handleConnectGanttView(e){const t=this,o=t;return e&&e.connectUpdate&&(e.connectUpdate({$table:t}),o.xeGanttView=e),t.$nextTick()},getCell(e,t){return this.getCellElement(e,t)},findRowIndexOf(e,t){return t?n.a.findIndexOf(e,e=>this.eqRow(e,t)):-1},eqRow(e,t){return!(!e||!t)&&(e===t||Se(this,e)===Se(this,t))},getSetupOptions:()=>_t()};"setFilter,openFilter,clearFilter,saveFilterPanel,saveFilterPanelByEvent,resetFilterPanel,resetFilterPanelByEvent,getCheckedFilters,updateFilterOptionStatus,closeMenu,setActiveCellArea,getActiveCellArea,getCellAreas,clearCellAreas,copyCellArea,cutCellArea,pasteCellArea,getCopyCellArea,getCopyCellAreas,clearCopyCellArea,setCellAreas,openFNR,openFind,openReplace,closeFNR,getSelectedCell,clearSelected,insert,insertAt,insertNextAt,insertChild,insertChildAt,insertChildNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,clearEdit,clearActived,getEditRecord,getEditCell,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell,setSelectCell,clearValidate,fullValidate,validate,fullValidateField,validateField,openExport,closeExport,openPrint,closePrint,getPrintHtml,exportData,openImport,closeImport,importData,saveFile,readFile,importByFile,print,getCustomVisible,openCustom,closeCustom,toggleCustom,saveCustom,cancelCustom,resetCustom,toggleCustomAllCheckbox,setCustomAllCheckbox".split(",").forEach(e=>{hr[e]=function(...t){return this["_"+e]||("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").includes(e)?xe("vxe.error.reqModule",["Export"]):"fullValidate,validate".split(",").includes(e)?xe("vxe.error.reqModule",["Validator"]):"setFilter,openFilter,clearFilter,getCheckedFilters".split(",").includes(e)?xe("vxe.error.reqModule",["Filter"]):"insert,insertAt,insertNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,getEditRecord,getEditCell,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell".split(",").includes(e)?xe("vxe.error.reqModule",["Edit"]):"openCustom".split(",").includes(e)&&xe("vxe.error.reqModule",["Custom"])),this["_"+e]?this["_"+e](...t):null}});var gr=hr;const{getI18n:mr,renderer:fr,renderEmptyElement:xr}=r.c,br=e=>{const t=e,o=e,{delayHover:r}=t,{lastScrollTime:l,isDragResize:n}=o;return!!(n||l&&Date.now()<l+r)};function vr(e,t,o,r,l,i,s,c,d,u,p,h,g,m,x){const b=t,v=t,C=t,w=t.$xeGrid,E=t.$xeGantt,{columnKey:y,resizable:T,showOverflow:R,border:S,height:O,treeConfig:$,cellClassName:F,cellStyle:D,align:k,spanMethod:M,mouseConfig:I,editConfig:A,editRules:L,tooltipConfig:_,padding:H}=b,{tableData:P,tableColumn:B,dragRow:z,overflowX:j,overflowY:G,currentColumn:V,scrollXLoad:N,scrollYLoad:W,mergeBodyFlag:q,calcCellHeightFlag:X,resizeHeightFlag:Y,resizeWidthFlag:K,editStore:U,isAllOverflow:Z,validErrorMaps:Q}=v,{fullAllDataRowIdData:J,fullColumnIdData:ee,mergeBodyCellMaps:te,visibleColumn:oe,afterFullData:re,mergeBodyList:le,scrollXStore:ne,scrollYStore:ie}=C,ae=t.computeCellOpts,se=t.computeValidOpts,ce=t.computeCheckboxOpts,de=t.computeEditOpts,ue=t.computeTooltipOpts,he=t.computeVirtualXOpts,ge=t.computeVirtualYOpts,{isAllColumnDrag:me,isAllRowDrag:fe}=t.resizableOpts,xe=t.computeRowOpts,be=t.computeRowDragOpts,ve=t.computeDefaultRowHeight,Ce=X?ae.height||xe.height:0,{disabledMethod:we,isCrossDrag:Ee,isPeerDrag:ye}=be,Te=t.computeColumnOpts,Re=t.computeMouseOpts,Oe=t.computeAreaOpts,$e=t.computeCellOffsetWidth,{selectCellToRow:Fe}=Oe,{type:De,cellRender:ke,editRender:Me,align:Ie,showOverflow:Ae,className:Le,treeNode:_e,rowResize:He,padding:Pe,verticalAlign:ze,slots:je}=h,{verticalAlign:Ge}=ae,{actived:Ve}=U,Ne=J[r]||{},We=h.id,Ye=ee[We]||{},Ke=Me||ke,Ue=Ke?fr.get(Ke.name):null,Ze=Ue?Ue.tableCellClassName||Ue.cellClassName:null,Qe=Ue?Ue.tableCellStyle||Ue.cellStyle:"",Je=ue.showAll,et=Ye.index,tt=Ye._index,ot=a(Me),rt=Y?Ne.resizeHeight:0;let lt=j&&(l?h.fixed!==l:!!h.fixed);const nt=n.a.eqNull(Pe)?null===H?ae.padding:H:Pe,it=n.a.eqNull(Ae)?R:Ae,at="ellipsis"===it,st="title"===it,ct=!0===it||"tooltip"===it,dt=Z||st||ct||at,ut=n.a.isBoolean(h.resizable)?h.resizable:Te.resizable||T,pt=!!Ce,ht=rt>0;let gt;const mt={},ft=Ie||(Ue?Ue.tableCellAlign:"")||k,xt=n.a.eqNull(ze)?Ge:ze,bt=Q[`${r}:${We}`],vt=L&&se.showMessage&&("default"===se.message?O||P.length>1:"inline"===se.message),Ct={colid:We},wt={$table:t,$grid:w,$gantt:E,isEdit:!1,seq:o,rowid:r,row:c,rowIndex:d,$rowIndex:u,_rowIndex:p,column:h,columnIndex:et,$columnIndex:g,_columnIndex:tt,fixed:l,type:"body",isHidden:!!lt,level:s,visibleData:re,data:P,items:x};let Et=!1,yt=!1;xe.drag&&(Et="row"===be.trigger||h.dragSort&&"cell"===be.trigger),Et&&(yt=!(!we||!we(wt))),(st||ct||Je||_)&&(mt.mouseover=e=>{br(t)||(st?pe(e.currentTarget,h):(ct||Je)&&t.triggerBodyTooltipEvent(e,wt)),t.dispatchEvent("cell-mouseenter",Object.assign({cell:e.currentTarget},wt),e)}),(ct||Je||_)&&(mt.mouseleave=e=>{br(t)||(ct||Je)&&t.handleTargetLeaveEvent(e),t.dispatchEvent("cell-mouseleave",Object.assign({cell:e.currentTarget},wt),e)}),(Et||ce.range||I)&&(mt.mousedown=e=>{t.triggerCellMousedownEvent(e,wt)}),Et&&(mt.mouseup=t.triggerCellMouseupEvent),mt.click=e=>{t.triggerCellClickEvent(e,wt)},mt.dblclick=e=>{t.triggerCellDblclickEvent(e,wt)};let Tt=!1,Rt=1,St=1;if(q&&le.length){const e=te[`${p}:${tt}`];if(e){const{rowspan:o,colspan:r}=e;if(!o||!r)return xr(t);o>1&&(Tt=!0,St=o,Ct.rowspan=o),r>1&&(Tt=!0,Rt=r,Ct.colspan=r)}}else if(M){const{rowspan:e=1,colspan:o=1}=M(wt)||{};if(!e||!o)return xr(t);e>1&&(Tt=!0,St=e,Ct.rowspan=e),o>1&&(Tt=!0,Rt=o,Ct.colspan=o)}lt&&Tt&&(Ct.colspan>1||Ct.rowspan>1)&&(lt=!1),!lt&&A&&(Me||ke)&&(de.showStatus||de.showUpdateStatus)&&(gt=t.isUpdateByRow(c,h.field));const Ot=!dt&&(W||N);let $t=Be(Ne,ae,xe,ve);const Ft=g===m.length-1,Dt=!h.resizeWidth&&("auto"===h.minWidth||"auto"===h.width);let kt=!1;if(Tt||z&&Se(t,z)===r||(G&&W&&!$&&P.length>16&&!ge.immediate&&(p<ie.visibleStartIndex-ie.preloadSize||p>ie.visibleEndIndex+ie.preloadSize)||j&&N&&B.length>10&&!he.immediate&&!h.fixed&&(tt<ne.visibleStartIndex-ne.preloadSize||tt>ne.visibleEndIndex+ne.preloadSize))&&(kt=!0),St>1){const e=re[p+St-1];if(e){const o=J[Se(t,e)];o&&($t+=o.oTop+Be(o,ae,xe,ve)-Ne.oTop-Be(Ne,ae,xe,ve))}}const Mt={};if(dt&&K){let e=0;if(Rt>1)for(let t=1;t<Rt;t++){const o=oe[et+t];o&&(e+=o.renderWidth)}Mt.width=h.renderWidth+e-$e+"px"}W||N||dt||pt||ht?Mt.height=$t+"px":Mt.minHeight=$t+"px";const It=[];if(lt&&Z)It.push(e("div",{key:"tc",class:["vxe-cell",{"c--title":st,"c--tooltip":ct,"c--ellipsis":at}],style:Mt}));else if($&&It.push(...function(e,t,o,r,l){const n=t,i=t,{column:a}=r,{afterFullData:s}=i,{treeConfig:c}=n,d=t.computeTreeOpts,{slots:u,treeNode:p}=a,{fullAllDataRowIdData:h}=i;if(u&&u.line)return t.callSlot(u.line,r,e);const g=h[o];let m=0,f=null;return g&&(m=g.level,f=g.items[g.treeIndex-1]),c&&p&&(d.showLine||d.line)?[e("div",{key:"tl",class:"vxe-tree--line-wrapper"},[e("div",{class:"vxe-tree--line",style:{height:(Se(t,s[0])===o?1:Xe(r,f))+"px",bottom:`-${Math.floor(l/2)}px`,left:m*d.indent+(m?2-qe(t):0)+16+"px"}})])]:[]}(e,t,r,wt,$t)),It.push(e("div",{key:"tc",class:["vxe-cell",{"c--title":st,"c--tooltip":ct,"c--ellipsis":at}],style:Mt,attrs:{title:st?t.getCellLabel(c,h):null}},kt?[]:[e("div",{attrs:{colid:We,rowid:r},class:"vxe-cell--wrapper vxe-body-cell--wrapper"},h.renderCell(e,wt))])),vt&&bt){const o=bt.rule,r=je?je.valid:null,l=Object.assign(Object.assign(Object.assign({},wt),bt),{rule:bt});It.push(e("div",{key:"tcv",class:["vxe-cell--valid-error-tip",f(se.className,bt)],style:o&&o.maxWidth?{width:o.maxWidth+"px"}:void 0},[e("div",{class:"vxe-cell--valid-error-wrapper vxe-cell--valid-error-theme-"+(se.theme||"normal")},[r?t.callSlot(r,l,e):[e("span",{class:"vxe-cell--valid-error-msg"},bt.content)]])]))}let At=!1;return I&&Re.area&&!tt&&Fe&&(At=!0),!lt&&ut&&me&&It.push(e("div",{key:"tcc",class:["vxe-cell--col-resizable",{"is--line":!S||"none"===S}],on:{mousedown:e=>t.handleColResizeMousedownEvent(e,l,wt),dblclick:e=>t.handleColResizeDblclickEvent(e,wt)}})),(He||fe)&&xe.resizable&&It.push(e("div",{key:"tcr",class:"vxe-cell--row-resizable",on:{mousedown:e=>t.handleRowResizeMousedownEvent(e,wt),dblclick:e=>t.handleRowResizeDblclickEvent(e,wt)}})),e("td",{class:["vxe-table--column vxe-body--column",We,xt?"col--vertical-"+xt:"",ft?"col--"+ft:"",De?"col--"+De:"",{"col--last":Ft,"col--tree-node":_e,"col--edit":ot,"col--ellipsis":dt,"col--cs-height":pt,"col--rs-height":ht,"col--to-row":At,"col--auto-height":Ot,"fixed--width":!Dt,"fixed--hidden":lt,"is--padding":nt,"is--progress":lt&&Z||kt,"is--drag-cell":Et&&(Ee||ye||!s),"is--drag-disabled":yt,"col--dirty":gt,"col--active":A&&ot&&Ve.row===c&&(Ve.column===h||"row"===de.mode),"col--valid-error":!!bt,"col--current":V===h},f(Ze,wt),f(Le,wt),f(F,wt)],key:y||N||W||Te.useKey||xe.useKey||Te.drag?h.id:g,attrs:Ct,style:Object.assign({},n.a.isFunction(Qe)?Qe(wt):Qe,n.a.isFunction(D)?D(wt):D),on:mt},i&&lt?[]:It)}function Cr(e,t,o,r,l,i){const a=t.$parent,s=a,c=a,d=a,u=a.$xeGrid,p=a.$xeGantt,{stripe:h,rowKey:g,highlightHoverRow:m,rowClassName:f,rowStyle:x,editConfig:b,treeConfig:v}=s,{hasFixedColumn:C,treeExpandedFlag:w,scrollXLoad:E,scrollYLoad:y,isAllOverflow:T,rowExpandedFlag:R,expandColumn:S,selectRadioRow:O,pendingRowFlag:$,rowExpandHeightFlag:F,isRowGroupStatus:D}=c,{fullAllDataRowIdData:k,fullColumnIdData:M,treeExpandedMaps:I,pendingRowMaps:A,rowExpandedMaps:L}=d,_=a.computeCheckboxOpts,H=a.computeRadioOpts,P=a.computeTreeOpts,B=a.computeEditOpts,z=a.computeRowOpts,j=a.computeColumnOpts,{transform:G,seqMode:V}=P,N=P.children||P.childrenField,W=[],{handleGetRowId:q}=$e(a),X=v||D;return l.forEach((s,c)=>{const d={},Y=q(s),K=k[Y]||{};let U=c,Z=0,Q=-1,J=-1;const ee=D&&s.isAggregate;(z.isHover||m)&&(d.mouseover=e=>{br(a)||a.triggerHoverEvent(e,{row:s,rowIndex:U})},d.mouseleave=()=>{br(a)||a.clearHoverRow()}),K&&(U=K.index,J=K._index,Z=K.level,Q=K.seq,ee||v&&G&&"increasing"===V?Q=K._index+1:v&&"fixed"===V&&(Q=K._tIndex+1));const te={$table:a,seq:Q,rowid:Y,fixed:o,type:"body",level:Z,row:s,rowIndex:U,$rowIndex:c,_rowIndex:J},oe=S&&!!R&&!!L[Y];let re=!1,le=[],ne=!1;b&&(ne=a.isInsertByRow(s)),!v||y||G||(le=s[N],re=!!w&&le&&le.length>0&&!!I[Y]),!z.drag||D||v&&!G||(d.dragstart=a.handleRowDragDragstartEvent,d.dragend=a.handleRowDragDragendEvent,d.dragover=a.handleRowDragDragoverEvent);const ie=["vxe-body--row",X?"row--level-"+Z:"",{"row--stripe":h&&(J+1)%2==0,"is--new":ne,"is--expand-row":oe,"is--expand-tree":re,"row--new":ne&&(B.showStatus||B.showInsertStatus),"row--radio":H.highlight&&O===s,"row--checked":_.highlight&&a.isCheckedByCheckboxRow(s),"row--pending":!!$&&!!A[Y],"row--group":ee},f?n.a.isFunction(f)?f(te):f:""],ae=i.map((t,n)=>vr(e,a,Q,Y,o,r,Z,s,U,c,J,t,n,i,l));if(W.push(e("tr",{class:ie,attrs:{rowid:Y},style:x?n.a.isFunction(x)?x(te):x:void 0,key:g||E||y||z.useKey||z.drag||j.drag||D||v?Y:c,on:d},ae)),oe){const t=a.computeExpandOpts,{height:r,padding:l,mode:d}=t;if("fixed"===d)W.push(e("tr",{class:"vxe-body--row-expanded-place",key:"expand_"+Y,attrs:{rowid:Y}},[e("td",{class:"vxe-body--row-expanded-place-column",attrs:{colspan:i.length},style:{height:(F?K.expandHeight||r:0)+"px"}})]));else{const t={};r&&(t.height=r+"px"),v&&(t.paddingLeft=Z*P.indent+30+"px");const{showOverflow:d}=S||{},h=S.id,g=M[h]||{},m=n.a.eqNull(d)?T:d;let f=-1,x=-1,b=-1;g&&(f=g.index,x=g.$index,b=g._index);const w={$grid:u,$table:a,$gantt:p,seq:Q,column:S,columnIndex:f,$columnIndex:x,_columnIndex:b,fixed:o,type:"body",level:Z,row:s,rowid:Y,rowIndex:U,$rowIndex:c,_rowIndex:J,isHidden:!1,isEdit:!1,visibleData:[],data:[],items:[]};W.push(e("tr",{class:["vxe-body--expanded-row",{"is--padding":l}],key:"expand_"+Y},[e("td",{class:["vxe-body--expanded-column",{"fixed--hidden":o&&!C,"col--ellipsis":m}],attrs:{colspan:i.length}},[e("div",{class:["vxe-body--expanded-cell",{"is--ellipsis":r}],style:t},[S.renderData(e,w)])])]))}}re&&W.push(...Cr(e,t,o,r,le,i))}),W}var wr={name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:{type:String,default:""}},mounted(){const e=this,t=e,o=e.$parent,{fixedType:r}=t,{elemStore:l}=o,n=(r||"main")+"-body-";l[n+"wrapper"]=e.$refs.refElem,l[n+"scroll"]=e.$refs.refBodyScroll,l[n+"table"]=e.$refs.refBodyTable,l[n+"colgroup"]=e.$refs.refBodyColgroup,l[n+"list"]=e.$refs.refBodyTBody,l[n+"xSpace"]=e.$refs.refBodyXSpace,l[n+"ySpace"]=e.$refs.refBodyYSpace,l[n+"emptyBlock"]=e.$refs.refBodyEmptyBlock},destroyed(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-body-";o[r+"wrapper"]=null,o[r+"scroll"]=null,o[r+"table"]=null,o[r+"colgroup"]=null,o[r+"list"]=null,o[r+"xSpace"]=null,o[r+"ySpace"]=null,o[r+"emptyBlock"]=null},render(e){const t=this.$parent,o=t,r=t,l=t,n=t.$xeGrid,i=t.$xeGantt,a=t.$scopedSlots,{xID:s}=t,{fixedColumn:c,fixedType:d,tableColumn:u}=this,{spanMethod:p,footerSpanMethod:h,mouseConfig:g}=o,{isGroup:m,tableData:f,isColLoading:x,overflowX:b,scrollXLoad:v,scrollYLoad:C,isAllOverflow:w,expandColumn:E,dragRow:y,dragCol:T}=r,{visibleColumn:R,fullAllDataRowIdData:S,fullColumnIdData:O}=l,$=t.computeEmptyOpts,F=t.computeMouseOpts,D=t.computeExpandOpts;let k,M=f,I=u,A=!1;if((v||C||w)&&(E&&"fixed"!==D.mode||p||h||(A=!0)),x||!d&&b||(I=R),d&&A&&(I=c||[]),C&&y&&M.length>2){const e=S[Se(t,y)];if(e){const o=e._index,r=M[0],l=M[M.length-1],n=S[Se(t,r)],i=S[Se(t,l)];if(n&&i){const e=n._index,t=i._index;o<e?M=[y].concat(M):o>t&&(M=M.concat([y]))}}}if(!d&&!m&&v&&T&&I.length>2){const e=O[T.id];if(e){const t=e._index,o=I[0],r=I[I.length-1],l=O[o.id],n=O[r.id];if(l&&n){const e=l._index,o=n._index;t<e?I=[T].concat(I):t>o&&(I=I.concat([T]))}}}const L=a?a.empty:null,_={$table:t,$grid:n,$gantt:i};if(L)k=L.call(t,_);else{const r=$.name?fr.get($.name):null,l=r?r.renderTableEmpty||r.renderTableEmptyView||r.renderEmpty:null;k=l?rt(l.call(t,e,$,_)):o.emptyText||mr("vxe.table.emptyText")}return e("div",{ref:"refElem",class:["vxe-table--body-wrapper",d?`fixed-${d}--wrapper`:"body--wrapper"],attrs:{xid:s}},[e("div",{ref:"refBodyScroll",class:"vxe-table--body-inner-wrapper",on:{scroll(e){t.triggerBodyScrollEvent(e,d)}}},[d?xr(t):e("div",{ref:"refBodyXSpace",class:"vxe-body--x-space"}),e("div",{ref:"refBodyYSpace",class:"vxe-body--y-space"}),e("table",{ref:"refBodyTable",class:"vxe-table--body",attrs:{xid:s,cellspacing:0,cellpadding:0,border:0,xvm:A?"1":null}},[e("colgroup",{ref:"refBodyColgroup"},I.map((t,o)=>e("col",{attrs:{name:t.id},key:o,style:{width:t.renderWidth+"px"}}))),e("tbody",{ref:"refBodyTBody"},Cr(e,this,d,A,M,I))]),e("div",{class:"vxe-table--checkbox-range"}),g&&F.area?e("div",{class:"vxe-table--cell-area",attrs:{xid:s}},[e("span",{class:"vxe-table--cell-main-area"},F.extension?[e("span",{class:"vxe-table--cell-main-area-btn",on:{mousedown(e){t.triggerCellAreaExtendMousedownEvent&&t.triggerCellAreaExtendMousedownEvent(e,{$table:t,fixed:d,type:"body"})}}})]:null),e("span",{class:"vxe-table--cell-clip-area"}),e("span",{class:"vxe-table--cell-extend-area"}),e("span",{class:"vxe-table--cell-multi-area"}),e("span",{class:"vxe-table--cell-active-area"}),e("span",{class:"vxe-table--cell-row-status-area"})]):xr(t),d?xr(t):e("div",{class:"vxe-table--empty-block",ref:"emptyBlock"},[e("div",{class:"vxe-table--empty-content"},k)])])])}};const{renderer:Er,renderEmptyElement:yr}=r.c;function Tr(e,t,o,r,l,i,a){const s=t,c=t.$parent,d=c.$xeGrid,u=c.$xeGantt,p=c,h=c,g=c,{fixedType:m}=s,{resizable:x,columnKey:b,showCustomHeader:v,headerCellClassName:C,headerCellStyle:w,showHeaderOverflow:E,headerAlign:y,align:T,mouseConfig:R}=p,{currentColumn:S,dragCol:O,scrollXLoad:$,scrollYLoad:F,overflowX:D,mergeHeadFlag:k,tableColumn:M}=h,{fullColumnIdData:I,scrollXStore:A,mergeHeaderList:L,mergeHeaderCellMaps:_}=g,H=c.computeVirtualXOpts,P=c.computeColumnOpts,B=c.computeColumnDragOpts,z=c.computeCellOpts,j=c.computeDefaultRowHeight,G=c.computeHeaderCellOpts,V=_e(G.height)||j,{disabledMethod:N,isCrossDrag:W,isPeerDrag:q}=B,X=i===l.length-1;return a.map((t,l)=>{const{type:s,showHeaderOverflow:p,headerAlign:h,align:g,filters:j,headerClassName:Y,editRender:K,cellRender:U}=t,Z=t.id,Q=I[Z]||{},J=K||U,ee=J?Er.get(J.name):null,te=t.children&&t.children.length,oe=D&&!te&&(m?t.fixed!==m:!!t.fixed),re=n.a.isBoolean(G.padding)?G.padding:z.padding,le=n.a.isUndefined(p)||n.a.isNull(p)?E:p,ne=h||(ee?ee.tableHeaderCellAlign:"")||y||g||(ee?ee.tableCellAlign:"")||T,ie="ellipsis"===le,ae="title"===le,se=!0===le||"tooltip"===le,ce=ae||se||ie;let de=!1,ue=null;j&&(ue=j[0],de=j.some(e=>e.checked));const pe=Q.index,he=v?l:Q._index,ge={$table:c,$grid:d,$gantt:u,$rowIndex:i,column:t,columnIndex:pe,$columnIndex:l,_columnIndex:he,firstFilterOption:ue,fixed:m,type:"header",isHidden:oe,hasFilter:de},me={colid:Z};let fe=!1;if(v||(me.colspan=t.colSpan>1?t.colSpan:null,me.rowspan=t.rowSpan>1?t.rowSpan:null),k&&L.length&&(v||X)){const e=_[`${i}:${v?l:he}`];if(e){const{rowspan:t,colspan:o}=e;if(!t||!o)return null;t>1&&(fe=!0,me.rowspan=t),o>1&&(fe=!0,me.colspan=o)}}const xe={click:e=>c.triggerHeaderCellClickEvent(e,ge),dblclick:e=>c.triggerHeaderCellDblclickEvent(e,ge)},be=P.drag&&"cell"===B.trigger;let ve=!1;be&&(ve=!(!N||!N(ge))),(R||be)&&(xe.mousedown=e=>c.triggerHeaderCellMousedownEvent(e,ge)),P.drag&&(xe.dragstart=c.handleHeaderCellDragDragstartEvent,xe.dragend=c.handleHeaderCellDragDragendEvent,xe.dragover=c.handleHeaderCellDragDragoverEvent,be&&(xe.mouseup=c.handleHeaderCellDragMouseupEvent));const Ce=l===a.length-1,we=n.a.isBoolean(t.resizable)?t.resizable:P.resizable||x,Ee=!t.resizeWidth&&("auto"===t.minWidth||"auto"===t.width);let ye=!1;r&&D&&!o&&!fe&&(O&&O.id===Z||$&&M.length>10&&!t.fixed&&!H.immediate&&(he<A.visibleStartIndex-A.preloadSize||he>A.visibleEndIndex+A.preloadSize)&&(ye=!0));const Te={};if(ce?Te.height=V+"px":Te.minHeight=V+"px",te&&!X){const e=function e(t){const{children:o}=t;return o&&o.length?e(o[0]):t}(t),o=function e(t){const{children:o}=t;return o&&o.length?e(o[o.length-1]):t}(t);if(e&&o&&e.id!==o.id){const t=I[e.id],r=I[o.id];t&&r&&(Te.width=r.oLeft-t.oLeft+o.renderWidth+"px")}}return e("th",{class:["vxe-table--column vxe-header--column",Z,oe?"fixed--hidden":"fixed--visible",{["col--"+ne]:ne,["col--"+s]:s,"col--last":Ce,"col--fixed":t.fixed,"col--group":te,"col--ellipsis":ce,"fixed--width":!Ee,"is--padding":re,"is--sortable":t.sortable,"col--filter":!!j,"is--filter-active":de,"is--drag-active":P.drag&&!t.fixed&&!ve&&(W||q||!t.parentId),"is--drag-disabled":P.drag&&ve,"col--current":S===t},f(Y,ge),f(C,ge)],attrs:me,style:w?n.a.isFunction(w)?w(ge):w:void 0,on:xe,key:v?`${Z}${l}`:b||$||F||P.useKey||P.drag||te?Z:l},[e("div",{class:["vxe-cell",{"c--title":ae,"c--tooltip":se,"c--ellipsis":ie}],style:Te},ye||r&&oe?[]:[e("div",{attrs:{colid:Z},class:"vxe-cell--wrapper vxe-header-cell--wrapper"},t.renderHeader(e,ge))]),oe||!we||v&&!X?yr(c):e("div",{class:"vxe-cell--col-resizable",on:{mousedown:e=>c.handleColResizeMousedownEvent(e,m,ge),dblclick:e=>c.handleColResizeDblclickEvent(e,ge)}})])})}function Rr(e,t,o,r,l){const i=t,a=t.$parent,s=a,{fixedType:c}=i,{headerRowClassName:d,headerRowStyle:u}=s;return l.map((i,s)=>{const p={$table:a,$rowIndex:s,fixed:c,type:"header"};return e("tr",{key:s,class:["vxe-header--row",d?n.a.isFunction(d)?d(p):d:""],style:u?n.a.isFunction(u)?u(p):u:void 0},Tr(e,t,o,r,l,s,i))})}var Sr={name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},data:()=>({headerColumn:[]}),watch:{tableColumn(){this.uploadColumn()}},created(){this.uploadColumn()},mounted(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-header-";o[r+"wrapper"]=this.$refs.refElem,o[r+"scroll"]=this.$refs.refHeaderScroll,o[r+"table"]=this.$refs.refHeaderTable,o[r+"colgroup"]=this.$refs.refHeaderColgroup,o[r+"list"]=this.$refs.refHeaderTHead,o[r+"xSpace"]=this.$refs.refHeaderXSpace,o[r+"repair"]=this.$refs.refHeaderBorderRepair},destroyed(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-header-";o[r+"wrapper"]=null,o[r+"scroll"]=null,o[r+"table"]=null,o[r+"colgroup"]=null,o[r+"list"]=null,o[r+"xSpace"]=null,o[r+"repair"]=null},render(e){const t=this.$parent,o=t,r=t,l=t,{xID:n}=t,{fixedType:i,fixedColumn:a,tableColumn:s}=this,{headerColumn:c}=this,{mouseConfig:d,showHeaderOverflow:u,spanMethod:p,footerSpanMethod:h}=o,{isGroup:g,isColLoading:m,overflowX:f,scrollXLoad:x,dragCol:b}=r,{visibleColumn:v,fullColumnIdData:C}=l,w=t.computeMouseOpts;let E=c,y=s,T=!1;if(g?y=v:(x&&u&&(p||h||(T=!0)),T&&(m||!i&&f)||(y=v),i&&T&&(y=a||[]),E=[y]),!i&&!g&&x&&b&&y.length>2){const e=C[b.id];if(e){const t=e._index,o=y[0],r=y[y.length-1],l=C[o.id],n=C[r.id];if(l&&n){const e=l._index,o=n._index;t<e?(y=[b].concat(y),E=[[b].concat(E[0])].concat(E.slice(1))):t>o&&(y=y.concat([b]),E=[E[0].concat([b])].concat(E.slice(1)))}}}return e("div",{ref:"refElem",class:["vxe-table--header-wrapper",i?`fixed-${i}--wrapper`:"body--wrapper"],attrs:{xid:n}},[e("div",{ref:"refHeaderScroll",class:"vxe-table--header-inner-wrapper",on:{scroll(e){t.triggerHeaderScrollEvent(e,i)}}},[i?yr(t):e("div",{ref:"refHeaderXSpace",class:"vxe-body--x-space"}),e("table",{ref:"refHeaderTable",class:"vxe-table--header",attrs:{xid:n,cellspacing:0,cellpadding:0,border:0,xvm:T?"1":null}},[e("colgroup",{ref:"refHeaderColgroup"},y.map((t,o)=>e("col",{attrs:{name:t.id},key:o,style:{width:t.renderWidth+"px"}}))),e("thead",{ref:"refHeaderTHead"},Rr(e,this,g,T,E))]),d&&w.area?e("div",{class:"vxe-table--cell-area",attrs:{xid:n}},[e("span",{class:"vxe-table--cell-main-area"}),e("span",{class:"vxe-table--cell-clip-area"}),e("span",{class:"vxe-table--cell-extend-area"}),e("span",{class:"vxe-table--cell-multi-area"}),e("span",{class:"vxe-table--cell-active-area"}),e("span",{class:"vxe-table--cell-col-status-area"})]):yr(t)])])},methods:{uploadColumn(){const e=this.$parent,t=e,o=e,r=e,{showCustomHeader:l}=t,{collectColumn:n,visibleColumn:i}=r,{tableGroupColumn:a}=this,{isGroup:s}=o;let c=s?(e=>{let t=1;const o=(e,r)=>{if(r&&(e.level=r.level+1,t<e.level&&(t=e.level)),e.children&&e.children.length&&e.children.some(e=>e.visible)){let t=0;e.children.forEach(r=>{r.visible&&(o(r,e),t+=r.colSpan)}),e.colSpan=t}else e.colSpan=1};e.forEach(e=>{e.level=1,o(e)});const r=[];for(let e=0;e<t;e++)r.push([]);return we(e).forEach(e=>{e.children&&e.children.length&&e.children.some(e=>e.visible)?e.rowSpan=1:e.rowSpan=t-e.level+1,r[e.level-1].push(e)}),r})(a):[],d=[];l&&c.length>1&&(d=function(e){const t=e.length,o=e[0].reduce((e,t)=>e+t.colSpan,0),r=[],l=[];for(let e=0;e<t;e++){const e=[],t=[];for(let r=0;r<o;r++)e.push(!1),t.push("");r.push(e),l.push(t)}for(let n=0;n<t;n++){let t=0;for(const i of e[n]){const{colSpan:e,rowSpan:a}=i;let s=-1;for(let l=t;l<=o-e;l++){let t=!0;for(let o=0;o<e;o++)if(r[n][l+o]){t=!1;break}if(t){s=l;break}}if(-1===s){for(let t=0;t<=o-e;t++){let o=!0;for(let l=0;l<e;l++)if(r[n][t+l]){o=!1;break}if(o){s=t;break}}if(-1===s)break}for(let t=n;t<n+a;t++)for(let o=s;o<s+e;o++)r[t][o]=!0,l[t][o]=i;t=s+e}}return l}(c),c=d),this.headerColumn=c,e.dispatchEvent("columns-change",{visibleColgroups:d,collectColumn:n,visibleColumn:i},null)}}};const{renderer:Or,renderEmptyElement:$r}=r.c;function Fr(e,t,o,r){const l=t,i=t.$parent,a=i,{fixedType:s,footerTableData:c}=l,{footerRowClassName:d,footerRowStyle:u}=a;return c.map((l,a)=>{const p=a,h={$table:i,row:l,_rowIndex:p,$rowIndex:a,fixed:s,type:"footer"};return e("tr",{key:a,class:["vxe-footer--row",d?n.a.isFunction(d)?d(h):d:""],style:u?n.a.isFunction(u)?u(h):u:void 0},function(e,t,o,r,l,i,a,s){const c=t,d=t.$parent,u=d,p=d,h=d,g=d.$xeGrid,m=d.$xeGantt,{fixedType:x}=c,{resizable:b,border:v,footerCellClassName:C,footerCellStyle:w,footerAlign:E,footerSpanMethod:y,align:T,columnKey:R,showFooterOverflow:S}=u,{scrollXLoad:O,scrollYLoad:$,overflowX:F,currentColumn:D,mergeFootFlag:k}=p,{fullColumnIdData:M,mergeFooterList:I,mergeFooterCellMaps:A,scrollXStore:L}=h,_=d.computeVirtualXOpts,H=d.computeFooterTooltipOpts,P=d.resizableOpts,{isAllColumnDrag:B}=P,z=d.computeColumnOpts,j=d.computeDefaultRowHeight,G=d.computeCellOpts,V=d.computeFooterCellOpts,N=_e(V.height)||j;return r.map((t,c)=>{const{type:u,showFooterOverflow:p,footerAlign:h,align:P,footerClassName:j,editRender:W,cellRender:q}=t,X=t.id,Y=M[X]||{},K=W||q,U=K?Or.get(K.name):null,Z=H.showAll,Q=F&&(x?t.fixed!==x:!!t.fixed),J=n.a.isBoolean(V.padding)?V.padding:G.padding,ee=n.a.eqNull(p)?S:p,te=h||(U?U.tableFooterCellAlign:"")||E||P||(U?U.tableCellAlign:"")||T,oe="ellipsis"===ee,re="title"===ee,le=!0===ee||"tooltip"===ee,ne=re||le||oe,ie=n.a.isBoolean(t.resizable)?t.resizable:z.resizable||b,ae={colid:X},se={},ce=Y.index,de=Y._index,ue={$table:d,$grid:g,$gantt:m,row:i,rowIndex:s,_rowIndex:s,$rowIndex:a,column:t,columnIndex:ce,$columnIndex:c,_columnIndex:de,itemIndex:de,items:i,fixed:x,type:"footer",data:l};(re||le||Z)&&(se.mouseenter=e=>{re?pe(e.currentTarget,t):(le||Z)&&d.triggerFooterTooltipEvent(e,ue)}),(le||Z)&&(se.mouseleave=e=>{(le||Z)&&d.handleTargetLeaveEvent(e)}),se.click=e=>{d.dispatchEvent("footer-cell-click",Object.assign({cell:e.currentTarget},ue),e)},se.dblclick=e=>{d.dispatchEvent("footer-cell-dblclick",Object.assign({cell:e.currentTarget},ue),e)};let he=!1;if(k&&I.length){const e=A[`${s}:${de}`];if(e){const{rowspan:t,colspan:o}=e;if(!t||!o)return null;t>1&&(he=!0,ae.rowspan=t),o>1&&(he=!0,ae.colspan=o)}}else if(y){const{rowspan:e=1,colspan:t=1}=y(ue)||{};if(!e||!t)return null;e>1&&(ae.rowspan=e),t>1&&(ae.colspan=t)}const ge=c===r.length-1,me=!t.resizeWidth&&("auto"===t.minWidth||"auto"===t.width);let fe=!1;o&&F&&!he&&O&&r.length>10&&!t.fixed&&!_.immediate&&(de<L.visibleStartIndex-L.preloadSize||de>L.visibleEndIndex+L.preloadSize)&&(fe=!0);const xe={};return ne?xe.height=N+"px":xe.minHeight=N+"px",e("td",{class:["vxe-table--column vxe-footer--column",t.id,{["col--"+te]:te,["col--"+u]:u,"col--last":ge,"fixed--width":!me,"fixed--hidden":Q,"is--padding":J,"col--ellipsis":ne,"col--current":D===t},f(j,ue),f(C,ue)],attrs:ae,style:w?n.a.isFunction(w)?w(ue):w:void 0,on:se,key:R||O||$||z.useKey||z.drag?t.id:c},[e("div",{class:["vxe-cell",{"c--title":re,"c--tooltip":le,"c--ellipsis":oe}],style:xe},fe?[]:[e("div",{attrs:{colid:X},class:"vxe-cell--wrapper vxe-footer-cell--wrapper"},t.renderFooter(e,ue))]),!Q&&ie&&B?e("div",{class:["vxe-cell--col-resizable",{"is--line":!v||"none"===v}],on:{mousedown:e=>d.handleColResizeMousedownEvent(e,x,ue),dblclick:e=>d.handleColResizeDblclickEvent(e,ue)}}):$r(d)])})}(e,t,o,r,c,l,a,p))})}var Dr={name:"VxeTableFooter",props:{footerTableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},fixedColumn:{type:Array,default:()=>[]},fixedType:{type:String,default:null}},mounted(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-footer-";o[r+"wrapper"]=this.$refs.refElem,o[r+"scroll"]=this.$refs.refFooterScroll,o[r+"table"]=this.$refs.refFooterTable,o[r+"colgroup"]=this.$refs.refFooterColgroup,o[r+"list"]=this.$refs.refFooterTFoot,o[r+"xSpace"]=this.$refs.refFooterXSpace},destroyed(){const e=this.$parent,{fixedType:t}=this,{elemStore:o}=e,r=(t||"main")+"-footer-";o[r+"wrapper"]=null,o[r+"scroll"]=null,o[r+"table"]=null,o[r+"colgroup"]=null,o[r+"list"]=null,o[r+"xSpace"]=null},render(e){const t=this.$parent,o=t,r=t,l=t,{xID:n}=t,{fixedType:i,fixedColumn:a,tableColumn:s}=this,{spanMethod:c,footerSpanMethod:d,showFooterOverflow:u}=o,{visibleColumn:p,fullColumnIdData:h}=l,{isGroup:g,isColLoading:m,overflowX:f,scrollXLoad:x,dragCol:b}=r;let v=s,C=!1;if(x&&u&&(c||d||(C=!0)),C&&(m||!i&&f)||(v=p),i&&C&&(v=a||[]),!i&&!g&&x&&b&&v.length>2){const e=h[b.id];if(e){const t=e._index,o=v[0],r=v[v.length-1],l=h[o.id],n=h[r.id];if(l&&n){const e=l._index,o=n._index;t<e?v=[b].concat(v):t>o&&(v=v.concat([b]))}}}return e("div",{ref:"refElem",class:["vxe-table--footer-wrapper",i?`fixed-${i}--wrapper`:"body--wrapper"],attrs:{xid:n}},[e("div",{ref:"refFooterScroll",class:"vxe-table--footer-inner-wrapper",on:{scroll(e){t.triggerFooterScrollEvent(e,i)}}},[i?$r(t):e("div",{ref:"refFooterXSpace",class:"vxe-body--x-space"}),e("table",{ref:"refFooterTable",class:"vxe-table--footer",attrs:{xid:n,cellspacing:0,cellpadding:0,border:0,xvm:C?"1":null}},[e("colgroup",{ref:"refFooterColgroup"},v.map((t,o)=>e("col",{attrs:{name:t.id},key:o,style:{width:t.renderWidth+"px"}}))),e("tfoot",{ref:"refFooterTFoot"},Fr(e,this,C,v))])])])}};const{getI18n:kr,getIcon:Mr,renderEmptyElement:Ir}=r.c;function Ar(e,t,o,r,l){const n=e.internalData,i=e.$refs.refBodyWrapperElem;if(!i)return;const a=e.$refs.refCustomBodyElem;if(!a)return;const{prevDragToChild:s}=n,c=i.getBoundingClientRect(),d=a.getBoundingClientRect(),u=e.$refs.refDragLineElem;if(o){if(u)if(r){const e=o.getBoundingClientRect();u.style.display="block",u.style.left=Math.max(0,d.x-c.x)+"px",u.style.top=Math.max(1,e.y+i.scrollTop-c.y)+"px",u.style.height=e.height+"px",u.style.width=e.width+"px",u.setAttribute("drag-pos",l),u.setAttribute("drag-to-child",s?"y":"n")}else u.style.display=""}else u&&(u.style.display="node");const p=e.$refs.refDragTipElem;p&&(p.style.display="block",p.style.top=Math.min(i.clientHeight+i.scrollTop-p.clientHeight,t.clientY+i.scrollTop-c.y)+"px",p.style.left=Math.min(i.clientWidth+i.scrollLeft-p.clientWidth,t.clientX+i.scrollLeft-c.x)+"px",p.setAttribute("drag-status",r?s?"sub":"normal":"disabled"))}function Lr(e){const t=e.$refs.refDragTipElem,o=e.$refs.refDragLineElem;t&&(t.style.display=""),o&&(o.style.display="")}const _r=(e,t)=>{const o=t.$xeTable,r=t.reactData,{dragTipText:l}=r;return e("div",{},[e("div",{ref:"refDragLineElem",class:["vxe-table-custom-popup--drag-line",{"is--guides":o.computeColumnDragOpts.showGuidesStatus}]}),e("div",{ref:"refDragTipElem",class:"vxe-table-custom-popup--drag-tip"},[e("div",{class:"vxe-table-custom-popup--drag-tip-wrapper"},[e("div",{class:"vxe-table-custom-popup--drag-tip-status"},[e("span",{class:["vxe-table-custom-popup--drag-tip-normal-status",Mr().TABLE_DRAG_STATUS_ROW]}),e("span",{class:["vxe-table-custom-popup--drag-tip-sub-status",Mr().TABLE_DRAG_STATUS_SUB_ROW]}),e("span",{class:["vxe-table-custom-popup--drag-tip-group-status",Mr().TABLE_DRAG_STATUS_AGG_GROUP]}),e("span",{class:["vxe-table-custom-popup--drag-tip-values-status",Mr().TABLE_DRAG_STATUS_AGG_VALUES]}),e("span",{class:["vxe-table-custom-popup--drag-tip-disabled-status",Mr().TABLE_DRAG_DISABLED]})]),e("div",{class:"vxe-table-custom-popup--drag-tip-content"},""+(l||""))])])])};var Hr={name:"VxeTableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},provide(){return{$xeTableCustomPanel:this}},inject:{$xeTable:{default:null}},data:()=>({reactData:{dragCol:null,dragGroupField:null,dragAggFnCol:null,dragTipText:""},internalData:{}}),computed:{},created(){const e=this,t=r.c.getComponent("VxeModal"),o=r.c.getComponent("VxeDrawer"),l=r.c.getComponent("VxeButton"),n=r.c.getComponent("VxeNumberInput"),i=r.c.getComponent("VxeRadioGroup");e.$nextTick(()=>{const r=e.$xeTable,{customOpts:a}=r,{mode:s}=a;t||"modal"!==s||xe("vxe.error.reqComp",["vxe-modal"]),o||"drawer"!==s||xe("vxe.error.reqComp",["vxe-drawer"]),l||xe("vxe.error.reqComp",["vxe-button"]),n||xe("vxe.error.reqComp",["vxe-number-input"]),i||xe("vxe.error.reqComp",["vxe-radio-group"])})},render(e){const t=this,o=t.$xeTable.computeCustomOpts;return["modal","drawer","popup"].includes(""+o.mode)?((e,t)=>{const o=r.c.getComponent("VxeModal"),l=r.c.getComponent("VxeDrawer"),i=r.c.getComponent("VxeButton"),a=r.c.getComponent("VxeNumberInput"),s=t,c=t,d=t.$xeTable,u=d,p=d,h=d.$xeGrid,m=d.$xeGantt,{customStore:f}=c,{treeConfig:x,rowGroupConfig:b,aggregateConfig:v,resizable:C}=u,{isCustomStatus:w,customColumnList:E}=p,y=d.computeCustomOpts,{immediate:T}=y,R=d.computeColumnDragOpts,{mode:S,modalOptions:O,drawerOptions:$,allowVisible:F,allowSort:D,allowFixed:k,allowResizable:M,checkMethod:I,visibleMethod:A}=y,L=d.computeColumnOpts,{maxFixedSize:_}=L,H=d.computeResizableOpts,{minWidth:P,maxWidth:B}=H,z=Object.assign({},O),j=Object.assign({},$),G=d.computeIsMaxFixedColumn,{isCrossDrag:V}=R,N=y.slots||{},W=N.header,q=N.top,X=N.bottom,Y=N.default,K=N.footer,U=[],Z=f.isAll,Q=f.isIndeterminate,J={$table:d,$grid:h,$gantt:m,columns:E,isAllChecked:Z,isAllIndeterminate:Q,isCustomStatus:w};n.a.eachTree(E,(o,r,l,i,c)=>{if(!A||A({$table:d,column:o})){let l=0,i=0;if(M){const e={$table:d,column:o,columnIndex:r,$columnIndex:r,$rowIndex:-1};P&&(l=n.a.toNumber(n.a.isFunction(P)?P(e):P)),B&&(i=n.a.toNumber(n.a.isFunction(B)?B(e):B))}const u=o.renderVisible,p=o.halfVisible,h=g(o.getTitle(),1),m=o.children&&o.children.length,f=!!I&&!I({$table:d,column:o}),x=!u;U.push(e("tr",{key:o.id,attrs:{colid:o.id},class:["vxe-table-custom-popup--row level--"+o.level,{"is--group":m}],on:{dragstart:s.sortDragstartEvent,dragend:s.sortDragendEvent,dragover:s.sortDragoverEvent}},[F?e("td",{class:"vxe-table-custom-popup--column-item col--visible"},[e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":u,"is--indeterminate":p,"is--disabled":f}],attrs:{title:kr("vxe.custom.setting.colVisible")},on:{click:e=>{f||s.changeCheckboxOption(o,e)}}},[e("span",{class:["vxe-checkbox--icon",p?Mr().TABLE_CHECKBOX_INDETERMINATE:u?Mr().TABLE_CHECKBOX_CHECKED:Mr().TABLE_CHECKBOX_UNCHECKED]})])]):Ir(d),e("td",{class:"vxe-table-custom-popup--column-item col--name"},[e("div",{class:"vxe-table-custom-popup--name"},[D?V&&T||1===o.level?e("div",{class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":f||x}],attrs:{title:kr("vxe.custom.setting.sortHelpTip")},on:f||x?{}:{mousedown:s.sortMousedownEvent,mouseup:s.sortMouseupEvent}},[e("i",{class:Mr().TABLE_CUSTOM_SORT})]):e("div",{class:"vxe-table-custom-popup--column-sort-placeholder"}):Ir(d),"html"===o.type?e("div",{key:"1",class:"vxe-table-custom-popup--title",domProps:{innerHTML:h}}):e("div",{key:"0",class:"vxe-table-custom-popup--title",attrs:{title:h}},h)])]),M?e("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[o.children&&o.children.length||!(n.a.isBoolean(o.resizable)?o.resizable:L.resizable||C)?e("span","-"):a?e(a,{props:{type:"integer",immediate:!1,disabled:f||x,value:o.renderResizeWidth,min:l||void 0,max:i||void 0},on:{modelValue(e){o.renderResizeWidth=Math.max(0,Number(e))},change(){s.changeColumnWidth(o)}}}):Ir(t)]):Ir(d),k?e("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[c?e("span","-"):e("vxe-radio-group",{props:{value:o.renderFixed||"",type:"button",size:"mini",disabled:f||x,options:[{label:kr("vxe.custom.setting.fixedLeft"),value:"left",disabled:f||x||G},{label:kr("vxe.custom.setting.fixedUnset"),value:"",disabled:f||x},{label:kr("vxe.custom.setting.fixedRight"),value:"right",disabled:f||x||G}]},on:{change({label:e,$event:t}){s.changeFixedOption(o,e,t)}}})]):Ir(d)]))}});const ee={default:()=>e("div",{ref:"refBodyWrapperElem",class:"vxe-table-custom-popup--body-wrapper"},Y?d.callSlot(Y,J,e):[e("div",{ref:"refCustomBodyElem",class:"vxe-table-custom-popup--handle-wrapper"},[q?e("div",{class:"vxe-table-custom-popup--table-top"},d.callSlot(q,J,e)):Ir(d),e("div",{class:"vxe-table-custom-popup--table-wrapper"},[e("table",{},[e("colgroup",{},[F?e("col",{class:"vxe-table-custom-popup--table-col-seq"}):Ir(d),e("col",{class:"vxe-table-custom-popup--table-col-title"}),M?e("col",{class:"vxe-table-custom-popup--table-col-width"}):Ir(d),k?e("col",{class:"vxe-table-custom-popup--table-col-fixed"}):Ir(d)]),e("thead",{},[e("tr",{},[F?e("th",{},[e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":Z,"is--indeterminate":Q}],attrs:{title:kr("vxe.table.allTitle")},on:{click:s.allOptionEvent}},[e("span",{class:["vxe-checkbox--icon",Q?Mr().TABLE_CHECKBOX_INDETERMINATE:Z?Mr().TABLE_CHECKBOX_CHECKED:Mr().TABLE_CHECKBOX_UNCHECKED]}),e("span",{class:"vxe-checkbox--label"},kr("vxe.toolbar.customAll"))])]):Ir(d),e("th",{},kr("vxe.custom.setting.colTitle")),M?e("th",{},kr("vxe.custom.setting.colResizable")):Ir(d),k?e("th",{},kr("vxe.custom.setting."+(_?"colFixedMax":"colFixed"),[_])):Ir(d)])]),e("transition-group",{class:"vxe-table-custom--panel-list",props:{tag:"tbody",name:"vxe-table-custom--list"}},U)])]),X?e("div",{class:"vxe-table-custom-popup--table-bottom"},d.callSlot(X,J,e)):Ir(d),_r(e,s)]),!x&&(v||b)&&d.getPivotTableAggregatePopupPanel?e(d.getPivotTableAggregatePopupPanel(),{props:{customStore:f}}):Ir(d)]),footer:()=>K?d.callSlot(K,J,e):e("div",{class:"vxe-table-custom-popup--footer"},[e(i,{props:{content:y.resetButtonText||kr("vxe.custom.cstmRestore"),disabled:!w},on:{click:s.resetCustomEvent}}),e(i,T?{props:{content:y.resetButtonText||kr("vxe.table.customClose")},on:{click:s.cancelCloseEvent}}:{props:{content:y.resetButtonText||kr("vxe.custom.cstmCancel")},on:{click:s.cancelCustomEvent}}),T?Ir(d):e(i,{props:{status:"primary",content:y.confirmButtonText||kr("vxe.custom.cstmConfirm")},on:{click:s.confirmCustomEvent}})])};return W&&(ee.header=()=>d.callSlot(W,J,e)),"drawer"===S?l?e(l,{key:"drawer",props:{className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",j.className||""].join(" "),value:f.visible,title:j.title||kr("vxe.custom.cstmTitle"),width:j.width||Math.min(880,Math.floor(.6*document.documentElement.clientWidth)),position:j.position,resize:!!j.resize,escClosable:!!j.escClosable,maskClosable:!!j.maskClosable,destroyOnClose:!0,showFooter:!0},on:{input(e){f.visible=e}},scopedSlots:ee}):Ir(t):o?e(o,{key:"modal",props:{className:["vxe-table-custom-popup-wrapper","vxe-table--ignore-clear",z.className||""].join(" "),value:f.visible,title:z.title||kr("vxe.custom.cstmTitle"),width:z.width||Math.min(880,document.documentElement.clientWidth),minWidth:z.minWidth||700,height:z.height||Math.min(680,document.documentElement.clientHeight),minHeight:z.minHeight||400,showZoom:z.showZoom,showMaximize:z.showMaximize,showMinimize:z.showMinimize,mask:z.mask,lockView:z.lockView,resize:z.resize,escClosable:!!z.escClosable,maskClosable:!!z.maskClosable,destroyOnClose:!0,showFooter:!0},on:{input(e){f.visible=e}},scopedSlots:ee}):Ir(t)})(e,t):((e,t)=>{const o=r.c.getComponent("VxeButton"),l=t,i=t.$xeTable,a=i,s=i,c=i.$xeGrid,d=i.$xeGantt,{customStore:u}=l,{treeConfig:p,rowGroupConfig:h,aggregateConfig:m}=a,{isCustomStatus:f,customColumnList:x}=s,b=i.computeCustomOpts,{immediate:v}=b,C=i.computeColumnDragOpts,{maxHeight:w}=u,{checkMethod:E,visibleMethod:y,allowVisible:T,allowSort:R,allowFixed:S,trigger:O,placement:$}=b,F=i.computeIsMaxFixedColumn,{isCrossDrag:D}=C,k=b.slots||{},M=k.header,I=k.top,A=k.bottom,L=k.default,_=k.footer,H=[],P={},B=u.isAll,z=u.isIndeterminate;"hover"===O&&(P.mouseenter=t.handleWrapperMouseenterEvent,P.mouseleave=t.handleWrapperMouseleaveEvent);const j={$table:i,$grid:c,$gantt:d,columns:x,isAllChecked:B,isAllIndeterminate:z,isCustomStatus:f};return n.a.eachTree(x,(r,l,n,a,s)=>{if(!y||y({$table:i,column:r})){const l=r.renderVisible,n=r.halfVisible,a=r.children&&r.children.length,c=g(r.getTitle(),1),d=!!E&&!E({$table:i,column:r}),u=!l;H.push(e("li",{key:r.id,attrs:{colid:r.id},class:["vxe-table-custom--option","level--"+r.level,{"is--hidden":d||u,"is--group":a}],on:{dragstart:t.sortDragstartEvent,dragend:t.sortDragendEvent,dragover:t.sortDragoverEvent}},[T?e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":l,"is--indeterminate":n,"is--disabled":d}],attrs:{title:kr("vxe.custom.setting.colVisible")},on:{click:e=>{d||t.changeCheckboxOption(r,e)}}},[e("span",{class:["vxe-checkbox--icon",n?Mr().TABLE_CHECKBOX_INDETERMINATE:l?Mr().TABLE_CHECKBOX_CHECKED:Mr().TABLE_CHECKBOX_UNCHECKED]})]):Ir(i),e("div",{class:"vxe-table-custom--name-option"},[R&&(D&&v||1===r.level)?e("div",{class:"vxe-table-custom--sort-option"},[e("span",{class:["vxe-table-custom--sort-btn",{"is--disabled":d||u}],attrs:{title:kr("vxe.custom.setting.sortHelpTip")},on:d||u?{}:{mousedown:t.sortMousedownEvent,mouseup:t.sortMouseupEvent}},[e("i",{class:Mr().TABLE_CUSTOM_SORT})])]):Ir(i),"html"===r.type?e("div",{key:"1",class:"vxe-table-custom--checkbox-label",domProps:{innerHTML:c}}):e("div",{key:"0",class:"vxe-table-custom--checkbox-label",attrs:{title:c}},c)]),!s&&S?e("div",{class:"vxe-table-custom--fixed-option"},[e(o,{props:{mode:"text",icon:"left"===r.renderFixed?Mr().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:Mr().TOOLBAR_TOOLS_FIXED_LEFT,status:"left"===r.renderFixed?"primary":"",disabled:d||u||F&&!r.renderFixed,title:kr("left"===r.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft")},on:{click:({$event:e})=>{t.changeFixedOption(r,"left",e)}}}),e(o,{props:{mode:"text",icon:"right"===r.renderFixed?Mr().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:Mr().TOOLBAR_TOOLS_FIXED_RIGHT,status:"right"===r.renderFixed?"primary":"",disabled:d||u||F&&!r.renderFixed,title:kr("right"===r.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight")},on:{click:({$event:e})=>{t.changeFixedOption(r,"right",e)}}})]):Ir(i)]))}}),e("div",{ref:"refElem",key:"simple",class:["vxe-table-custom-wrapper","placement--"+$,{"is--active":u.visible}],style:w&&!["left","right"].includes($||"")?{maxHeight:w+"px"}:{}},u.visible?[e("div",{ref:"refBodyWrapperElem",class:"vxe-table-custom-simple--body-wrapper"},[!p&&(m||h)&&i.getPivotTableAggregateSimplePanel?e(i.getPivotTableAggregateSimplePanel(),{props:{customStore:u}}):Ir(i),e("div",{ref:"refCustomBodyElem",class:"vxe-table-custom--handle-wrapper"},[e("div",{class:"vxe-table-custom--header"},M?i.callSlot(M,j,e):[e("ul",{class:"vxe-table-custom--panel-list"},[e("li",{class:"vxe-table-custom--option"},[T?e("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":B,"is--indeterminate":z}],attrs:{title:kr("vxe.table.allTitle")},on:{click:t.allOptionEvent}},[e("span",{class:["vxe-checkbox--icon",z?Mr().TABLE_CHECKBOX_INDETERMINATE:B?Mr().TABLE_CHECKBOX_CHECKED:Mr().TABLE_CHECKBOX_UNCHECKED]}),e("span",{class:"vxe-checkbox--label"},kr("vxe.toolbar.customAll"))]):e("span",{class:"vxe-checkbox--label"},kr("vxe.table.customTitle"))])])]),e("div",{class:"vxe-table-custom--body"},[I?e("div",{class:"vxe-table-custom--panel-top"},i.callSlot(I,j,e)):Ir(i),L?e("div",{class:"vxe-table-custom--panel-body"},i.callSlot(L,j,e)):e("transition-group",{class:"vxe-table-custom--panel-list",props:{name:"vxe-table-custom--list",tag:"ul"},on:P},H),A?e("div",{class:"vxe-table-custom--panel-bottom"},i.callSlot(A,j,e)):Ir(i)]),b.showFooter?e("div",{class:"vxe-table-custom--footer"},_?i.callSlot(_,j,e):[e("div",{class:"vxe-table-custom--footer-buttons"},[e(o,{props:{mode:"text",content:b.resetButtonText||kr("vxe.table.customRestore"),disabled:!f},on:{click:t.resetCustomEvent}}),e(o,v?{props:{mode:"text",content:b.closeButtonText||kr("vxe.table.customClose")},on:{click:t.cancelCloseEvent}}:{props:{mode:"text",content:b.resetButtonText||kr("vxe.table.customCancel")},on:{click:t.cancelCustomEvent}}),v?Ir(i):e(o,{props:{mode:"text",status:"primary",content:b.confirmButtonText||kr("vxe.table.customConfirm")},on:{click:t.confirmCustomEvent}})])]):null]),_r(e,t)])]:[])})(e,t)},methods:{handleWrapperMouseenterEvent(e){const t=this.$xeTable,{customStore:o}=this;o.activeWrapper=!0,t.customOpenEvent(e)},handleWrapperMouseleaveEvent(e){const t=this.$xeTable,{customStore:o}=this;o.activeWrapper=!1,setTimeout(()=>{o.activeBtn||o.activeWrapper||t.customCloseEvent(e)},300)},getStoreData:()=>({}),confirmCustomEvent({$event:e}){const t=this.$xeTable;t.isCustomStatus=!0,t.saveCustom(),t.closeCustom(),t.emitCustomEvent("confirm",e)},cancelCloseEvent({$event:e}){const t=this.$xeTable;t.closeCustom(),t.emitCustomEvent("close",e)},cancelCustomEvent({$event:e}){const t=this.$xeTable;t.cancelCustom(),t.closeCustom(),t.emitCustomEvent("cancel",e)},handleResetCustomEvent(e){const t=this.$xeTable;t.resetCustom(!0),t.closeCustom(),t.emitCustomEvent("reset",e)},resetCustomEvent(e){r.c.modal?r.c.modal.confirm({content:kr("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(t=>{"confirm"===t&&this.handleResetCustomEvent(e)}):this.handleResetCustomEvent(e)},handleOptionCheck(e){const t=this.$xeTable,{customColumnList:o}=t,r=n.a.findTree(o,t=>t===e);if(r&&r.parent){const{parent:e}=r;e.children&&e.children.length&&(e.renderVisible=e.children.every(e=>e.renderVisible),e.halfVisible=!e.renderVisible&&e.children.some(e=>e.renderVisible||e.halfVisible),this.handleOptionCheck(e))}},changeCheckboxOption(e,t){const o=this.$xeTable,r=o,l=!e.renderVisible;o.computeCustomOpts.immediate?(n.a.eachTree([e],e=>{e.visible=l,e.renderVisible=l,e.halfVisible=!1}),r.isCustomStatus=!0,o.handleCustom(),o.saveCustomStore("update:visible")):n.a.eachTree([e],e=>{e.renderVisible=l,e.halfVisible=!1}),this.handleOptionCheck(e),o.checkCustomStatus(),o.dispatchEvent("custom-visible-change",{column:e,checked:l},t)},changeColumnWidth(e){const t=this.$xeTable,o=t;t.computeCustomOpts.immediate&&e.renderResizeWidth!==e.renderWidth&&(e.resizeWidth=e.renderResizeWidth,e.renderWidth=e.renderResizeWidth,o.isCustomStatus=!0,t.handleCustom(),t.saveCustomStore("update:width"))},changeFixedOption(e,t,o){const r=this.$xeTable,l=r,i=r.computeIsMaxFixedColumn;let a=null;r.computeCustomOpts.immediate?(e.renderFixed===t?(a="",n.a.eachTree([e],e=>{e.fixed="",e.renderFixed=""})):i&&!e.renderFixed||(a=t,n.a.eachTree([e],e=>{e.fixed=t,e.renderFixed=t})),l.isCustomStatus=!0,r.handleCustom(),r.saveCustomStore("update:fixed")):e.renderFixed===t?(a="",n.a.eachTree([e],e=>{e.renderFixed=""})):i&&!e.renderFixed||(a=t,n.a.eachTree([e],e=>{e.renderFixed=t})),null!==a&&r.dispatchEvent("custom-fixed-change",{column:e,fixed:a},o)},allOptionEvent(e){const t=this.$xeTable,o=t,{customStore:r}=o,l=!r.isAll;t.toggleCustomAllCheckbox(),t.dispatchEvent("custom-visible-all",{checked:l},e)},updateColDropTipContent(){const e=this.$xeTable,t=this.reactData,{dragCol:o}=t,r=e.computeColumnDragOpts,{tooltipMethod:l}=r;let n="";if(l){n=""+(l({$table:e,column:o})||"")}else n=kr("vxe.custom.cstmDragTarget",[o&&"html"!==o.type?o.getTitle():""]);t.dragTipText=n},sortMousedownEvent(e){const t=this.$xeTable,o=this.reactData,r=e.currentTarget.parentElement.parentElement.parentElement,l=r.getAttribute("colid"),n=t.getColumnById(l);r.draggable=!0,o.dragCol=n,o.dragGroupField=null,o.dragAggFnCol=null,this.updateColDropTipContent(),re(r,"active--drag-origin")},sortMouseupEvent(e){const t=this.reactData,o=e.currentTarget.parentElement.parentElement.parentElement;Lr(this),o.draggable=!1,t.dragCol=null,t.dragGroupField=null,t.dragAggFnCol=null,oe(o,"active--drag-origin")},sortDragstartEvent(e){const t=this.internalData;e.dataTransfer&&e.dataTransfer.setDragImage(Z(),0,0),t.prevDragGroupField=null,t.prevDragAggFnColid=null},sortDragendEvent(e){const t=this.$xeTable,o=t,l=t,i=t,a=this.reactData,s=this.internalData,{mouseConfig:c}=o,{customColumnList:d}=l,{collectColumn:u}=i,p=t.computeCustomOpts,{immediate:h}=p,g=e.currentTarget,m=t.computeColumnDragOpts,{isCrossDrag:f,isSelfToChildDrag:x,isToChildDrag:b,dragEndMethod:v}=m,{dragCol:C}=a,{prevDragCol:w,prevDragGroupField:E,prevDragAggFnColid:y,prevDragPos:T,prevDragToChild:R}=s,S="bottom"===T?1:0;if(E||y)t.handlePivotTableAggregatePanelDragendEvent&&t.handlePivotTableAggregatePanelDragendEvent(e);else if(w&&C&&w!==C){const o=C,i=w;Promise.resolve(!v||v({oldColumn:o,newColumn:i,dragColumn:o,dragPos:T,dragToChild:!!R,offsetIndex:S})).then(a=>{if(!a)return;let s=-1,p=-1;const g={};n.a.eachTree([o],e=>{g[e.id]=e});let m=!1;if(h){if(o.parentId&&i.parentId){if(!f)return;if(g[i.id]&&(m=!0,!f||!x))return void(r.c.modal&&r.c.modal.message({status:"error",content:kr("vxe.error.treeDragChild")}))}else if(o.parentId){if(!f)return}else if(i.parentId){if(!f)return;if(g[i.id]&&(m=!0,!f||!x))return void(r.c.modal&&r.c.modal.message({status:"error",content:kr("vxe.error.treeDragChild")}))}const e=n.a.findTree(u,e=>e.id===o.id);if(m&&f&&x){if(e){const{items:t,index:r}=e,l=o.children||[];l.forEach(e=>{e.parentId=o.parentId}),t.splice(r,1,...l),o.children=[]}}else if(e){const{items:t,index:o,parent:r}=e;t.splice(o,1),r||(s=o)}const t=n.a.findTree(u,e=>e.id===i.id);if(t){const{items:e,index:r,parent:l}=t;f&&b&&R?(o.parentId=i.id,i.children=(i.children||[]).concat([o])):(o.parentId=i.parentId,e.splice(r+S,0,o)),l||(p=r)}n.a.eachTree(u,(e,t,o,r,l)=>{if(!l){const o=t+1;e.renderSortNumber=o}})}else s=n.a.findIndexOf(d,e=>e.id===o.id),d.splice(s,1),p=n.a.findIndexOf(d,e=>e.id===i.id),d.splice(p+S,0,o);c&&(t.clearSelected&&t.clearSelected(),t.clearCellAreas&&(t.clearCellAreas(),t.clearCopyCellArea())),t.dispatchEvent("column-dragend",{oldColumn:o,newColumn:i,dragColumn:o,dragPos:T,offsetIndex:S,_index:{newIndex:p,oldIndex:s}},e),h&&(l.customColumnList=u.slice(0),t.handleColDragSwapColumn())}).catch(()=>{})}Lr(this),a.dragCol=null,a.dragGroupField=null,a.dragAggFnCol=null,s.prevDragGroupField=null,s.prevDragAggFnColid=null,g.draggable=!1,g.removeAttribute("drag-pos"),oe(g,"active--drag-target"),oe(g,"active--drag-origin")},sortDragoverEvent(e){const t=this,o=t.$xeTable,r=t.reactData,l=t.internalData,{dragCol:n}=r,i=o.computeCustomOpts,{immediate:a}=i,s=o.computeColumnDragOpts,{isCrossDrag:c,isToChildDrag:d}=s,u=e.currentTarget,p=le(e),h=u.getAttribute("colid"),g=o.getColumnById(h);if(l.prevDragGroupField=null,l.prevDragAggFnColid=null,g&&(c||1===g.level)){e.preventDefault();const o=e.clientY-u.getBoundingClientRect().y<u.clientHeight/2?"top":"bottom";if(!n||n&&n.id===g.id||!c&&g.level>1||!a&&g.level>1)return void Ar(t,e,u,!1,o);l.prevDragToChild=!!(c&&d&&p&&a),l.prevDragCol=g,l.prevDragPos=o,Ar(t,e,u,!0,o)}}}};const{getI18n:Pr,getIcon:Br,renderer:zr,globalMixins:jr}=r.c;var Gr={name:"VxeTableFilterPanel",mixins:[jr.sizeMixin],props:{filterStore:Object},inject:{$xeTable:{default:null}},computed:{computeHasCheckOption(){const{filterStore:e}=this;return e&&e.options.some(e=>e.checked)}},mounted(){const e=this.$xeTable.computeFilterOpts,{transfer:t}=e,o=this.$refs.refElem;t&&o&&document.body.appendChild(o)},beforeDestroy(){const e=this.$refs.refElem;e&&e.parentNode&&e.parentNode.removeChild(e)},render(e){const t=this.$xeTable,o=t,{filterStore:r}=this,{visible:l,multiple:n,column:i}=r,s=i?i.filterRender:null,c=a(s)?zr.get(s.name):null,d=c?c.tableFilterClassName||c.filterClassName:"",u=Object.assign({},o._currFilterParams,{$panel:this,$table:t}),p=t,h=this.computeSize,m=t.computeFilterOpts,{destroyOnClose:x}=m;return e("div",{ref:"refElem",class:["vxe-table--filter-wrapper","filter--prevent-default",c&&c.className?c.className:"",f(d,u),{["size--"+h]:h,"is--animat":p.animat,"is--multiple":n,"is--active":l}],style:r.style},r.visible&&(!x||l)&&i?function(e,t,o,r){const l=e,n=e.$xeTable,i=n,{filterStore:a}=l,{column:s,multiple:c,maxHeight:d}=a,u=s?s.slots:null,p=u?u.filter:null,h=Object.assign({},i._currFilterParams,{$panel:e,$table:n}),m=r?r.renderTableFilter||r.renderFilter:null;if(p)return[t("div",{class:"vxe-table--filter-template",style:d?{maxHeight:d+"px"}:{}},n.callSlot(p,h,t))];if(m)return[t("div",{class:"vxe-table--filter-template",style:d?{maxHeight:d+"px"}:{}},rt(m.call(n,t,o,h)))];const f=c?a.isAllSelected:!a.options.some(e=>e._checked),x=c&&a.isIndeterminate;return[t("ul",{class:"vxe-table--filter-header"},[t("li",{class:["vxe-table--filter-option",{"is--checked":f,"is--indeterminate":x}],attrs:{title:Pr(c?"vxe.table.allTitle":"vxe.table.allFilter")},on:{click:t=>{e.changeAllOption(t,!a.isAllSelected)}}},(c?[t("span",{class:["vxe-checkbox--icon",x?Br().TABLE_CHECKBOX_INDETERMINATE:f?Br().TABLE_CHECKBOX_CHECKED:Br().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([t("span",{class:"vxe-checkbox--label"},Pr("vxe.table.allFilter"))]))]),t("ul",{class:"vxe-table--filter-body",style:d?{maxHeight:d+"px"}:{}},a.options.map(o=>{const r=o._checked;return t("li",{class:["vxe-table--filter-option",{"is--checked":r}],attrs:{title:o.label},on:{click:t=>{e.changeOption(t,!o._checked,o)}}},(c?[t("span",{class:["vxe-checkbox--icon",r?Br().TABLE_CHECKBOX_CHECKED:Br().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([t("span",{class:"vxe-checkbox--label"},g(o.label,1))]))}))]}(this,e,s,c).concat(function(e,t){const o=e,r=e.$xeTable,{filterStore:l}=o,{column:n,multiple:i}=l,s=r.computeFilterOpts,c=e.computeHasCheckOption,d=n.filterRender,u=a(d)?zr.get(d.name):null,p=!c&&!l.isAllSelected&&!l.isIndeterminate;return i&&(!u||!1!==u.showTableFilterFooter&&!1!==u.showFilterFooter&&!1!==u.isFooter)?[t("div",{class:"vxe-table--filter-footer"},[t("button",{class:{"is--disabled":p},attrs:{disabled:p},on:{click:e.confirmFilter}},s.confirmButtonText||Pr("vxe.table.confirmFilter")),t("button",{on:{click:e.resetFilter}},s.resetButtonText||Pr("vxe.table.resetFilter"))])]:[]}(this,e)):[])},methods:{filterCheckAllEvent(e,t){const o=this.filterStore;o.options.forEach(e=>{e._checked=t,e.checked=t}),o.isAllSelected=t,o.isIndeterminate=!1},changeRadioOption(e,t,o){const r=this.$parent,{filterStore:l}=this;l.options.forEach(e=>{e._checked=!1}),o._checked=t,r.checkFilterOptions(),this.confirmFilter(e)},changeMultipleOption(e,t,o){const r=this.$parent;o._checked=t,r.checkFilterOptions()},changeAllOption(e,t){this.filterStore.multiple?this.filterCheckAllEvent(e,t):this.resetFilter(e)},changeOption(e,t,o){this.filterStore.multiple?this.changeMultipleOption(e,t,o):this.changeRadioOption(e,t,o)},confirmFilter(e){const t=this.$parent;e||fe("vxe.error.delFunc",["confirmFilter","saveFilterPanelByEvent"]),t.handleFilterConfirmFilter(e||new Event("click"))},resetFilter(e){this.$parent.handleFilterResetFilter(e)}}};const{getI18n:Vr,getIcon:Nr,globalMixins:Wr,renderEmptyElement:qr}=r.c;var Xr={name:"VxeTableImportPanel",mixins:[Wr.sizeMixin],props:{defaultOptions:Object,storeData:Object},components:{},inject:{$xeTable:{default:null}},data:()=>({loading:!1}),computed:{selectName(){return`${this.storeData.filename}.${this.storeData.type}`},hasFile(){return this.storeData.file&&this.storeData.type},parseTypeLabel(){const{storeData:e}=this,{type:t,typeList:o}=e;if(t){const e=n.a.find(o,e=>t===e.value);return e?e.label:"*.*"}return"*."+o.map(e=>e.value).join(", *.")}},created(){const e=r.c.getComponent("VxeModal"),t=r.c.getComponent("VxeButton"),o=r.c.getComponent("VxeSelect");this.$nextTick(()=>{e||xe("vxe.error.reqComp",["vxe-modal"]),t||xe("vxe.error.reqComp",["vxe-button"]),o||xe("vxe.error.reqComp",["vxe-select"])})},render(e){const t=this.$parent,o=t.$xeGrid,r=t.$xeGantt,{hasFile:l,loading:n,parseTypeLabel:i,defaultOptions:a,storeData:s,selectName:c}=this,d=a.slots||{},u=d.top,p=d.bottom,h=d.default,g=d.footer;return e("vxe-modal",{ref:"modal",props:{id:"VXE_IMPORT_MODAL",value:s.visible,title:Vr("vxe.import.impTitle"),width:540,minWidth:360,minHeight:240,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:n},on:{input(e){s.visible=e},show:this.showEvent},scopedSlots:{default:()=>{const n={$table:t,$grid:o,$gantt:r,options:a,params:a.params};return e("div",{class:"vxe-table-export--panel"},[u?e("div",{class:"vxe-table-export--panel-top"},t.callSlot(u,n,e)):qr(this),e("div",{class:"vxe-table-export--panel-body"},h?t.callSlot(h,n,e):[e("table",{class:"vxe-table-export--panel-table",attrs:{cellspacing:0,cellpadding:0,border:0}},[e("tbody",[e("tr",[e("td",Vr("vxe.import.impFile")),e("td",[l?e("div",{class:"vxe-table-export--selected--file",attrs:{title:c}},[e("span",c),e("i",{class:Nr().INPUT_CLEAR,on:{click:this.clearFileEvent}})]):e("button",{ref:"fileBtn",class:"vxe-table-export--select--file",attrs:{type:"button"},on:{click:this.selectFileEvent}},Vr("vxe.import.impSelect"))])]),e("tr",[e("td",Vr("vxe.import.impType")),e("td",i)]),e("tr",[e("td",Vr("vxe.import.impMode")),e("td",[e("vxe-select",{props:{value:a.mode,options:s.modeList},on:{modelValue(e){a.mode=e}}})])])])])]),p?e("div",{class:"vxe-table-export--panel-bottom"},t.callSlot(p,n,e)):qr(this)])},footer:()=>{const i={$table:t,$grid:o,$gantt:r,options:a,params:a.params};return e("div",{class:"vxe-table-export--panel-footer"},g?t.callSlot(g,i,e):[e("div",{class:"vxe-table-export--panel-btns"},[e("vxe-button",{on:{click:this.cancelEvent}},Vr("vxe.import.impCancel")),e("vxe-button",{props:{status:"primary",disabled:!l||n},on:{click:this.importEvent}},Vr("vxe.import.impConfirm"))])])}}})},methods:{clearFileEvent(){Object.assign(this.storeData,{filename:"",sheetName:"",type:""})},selectFileEvent(){this.$parent.readFile(this.defaultOptions).then(e=>{const{file:t}=e;Object.assign(this.storeData,c(t),{file:t})}).catch(e=>e)},showEvent(){this.$nextTick(()=>{const{$refs:e}=this,t=e.fileBtn;t&&t.focus()})},cancelEvent(){this.storeData.visible=!1},importEvent(){const e=this.$parent;this.loading=!0,e.importByFile(this.storeData.file,Object.assign({},e.importOpts,this.defaultOptions)).then(()=>{this.loading=!1,this.storeData.visible=!1}).catch(()=>{this.loading=!1})}}};const{getI18n:Yr,getIcon:Kr,globalMixins:Ur,renderEmptyElement:Zr}=r.c;var Qr={name:"VxeTableExportPanel",mixins:[Ur.sizeMixin],props:{defaultOptions:Object,storeData:Object},components:{},inject:{$xeTable:{default:null}},data:()=>({isAll:!1,isIndeterminate:!1,loading:!1}),computed:{checkedAll(){return this.storeData.columns.every(e=>e.checked)},showSheet(){return["html","xml","xlsx","pdf"].indexOf(this.defaultOptions.type)>-1},supportMerge(){const{storeData:e,defaultOptions:t}=this;return!t.original&&"current"===t.mode&&(e.isPrint||["html","xlsx"].indexOf(t.type)>-1)},supportStyle(){const{defaultOptions:e}=this;return!e.original&&["xlsx"].indexOf(e.type)>-1}},created(){const e=r.c.getComponent("VxeModal"),t=r.c.getComponent("VxeButton"),o=r.c.getComponent("VxeSelect"),l=r.c.getComponent("VxeInput"),n=r.c.getComponent("VxeCheckbox");this.$nextTick(()=>{e||xe("vxe.error.reqComp",["vxe-modal"]),t||xe("vxe.error.reqComp",["vxe-button"]),o||xe("vxe.error.reqComp",["vxe-select"]),l||xe("vxe.error.reqComp",["vxe-input"]),n||xe("vxe.error.reqComp",["vxe-checkbox"])})},render(e){const t=this.$xeTable,o=t.$xeGrid,r=t.$xeGantt,{_e:l,checkedAll:i,isAll:a,isIndeterminate:s,showSheet:c,supportMerge:d,supportStyle:u,defaultOptions:p,storeData:h}=this,{hasTree:m,hasMerge:f,isPrint:x,hasColgroup:b,columns:v}=h,{isHeader:C}=p,w=p.slots||{},E=w.top,y=w.bottom,T=w.default,R=w.footer,S=w.parameter,O=[];return n.a.eachTree(v,t=>{const o=g(t.getTitle(),1),r=t.children&&t.children.length,l=t.checked,n=t.halfChecked,i="html"===t.type;O.push(e("li",{class:["vxe-table-export--panel-column-option","level--"+t.level,{"is--group":r,"is--checked":l,"is--indeterminate":n,"is--disabled":t.disabled}],attrs:{title:o},on:{click:()=>{t.disabled||this.changeOption(t)}}},[e("span",{class:["vxe-checkbox--icon",n?Kr().TABLE_CHECKBOX_INDETERMINATE:l?Kr().TABLE_CHECKBOX_CHECKED:Kr().TABLE_CHECKBOX_UNCHECKED]}),i?e("span",{key:"1",class:"vxe-checkbox--label",domProps:{innerHTML:o}}):e("span",{key:"0",class:"vxe-checkbox--label"},o)]))}),e("vxe-modal",{ref:"modal",props:{id:"VXE_EXPORT_MODAL",value:h.visible,title:Yr(x?"vxe.export.printTitle":"vxe.export.expTitle"),width:660,minWidth:500,minHeight:400,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:this.loading},on:{input(e){h.visible=e},show:this.showEvent},scopedSlots:{default:()=>{const n={$table:t,$grid:o,$gantt:r,options:p,columns:v,params:p.params},g="empty"===p.mode;return e("div",{class:"vxe-table-export--panel"},[E?e("div",{class:"vxe-table-export--panel-top"},t.callSlot(E,n,e)):Zr(this),e("div",{class:"vxe-table-export--panel-body"},T?t.callSlot(T,n,e):[e("table",{attrs:{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0}},[e("tbody",[[x?l():e("tr",[e("td",Yr("vxe.export.expName")),e("td",[e("vxe-input",{ref:"filename",props:{value:p.filename,type:"text",clearable:!0,placeholder:Yr("vxe.export.expNamePlaceholder")},on:{modelValue(e){p.filename=e}}})])]),x?l():e("tr",[e("td",Yr("vxe.export.expType")),e("td",[e("vxe-select",{props:{value:p.type,options:h.typeList},on:{modelValue(e){p.type=e}}})])]),x||c?e("tr",[e("td",Yr("vxe.export.expSheetName")),e("td",[e("vxe-input",{ref:"sheetname",props:{value:p.sheetName,type:"text",clearable:!0,placeholder:Yr("vxe.export.expSheetNamePlaceholder")},on:{modelValue(e){p.sheetName=e}}})])]):l(),e("tr",[e("td",Yr("vxe.export.expMode")),e("td",[e("vxe-select",{props:{value:p.mode,options:h.modeList},on:{modelValue(e){p.mode=e}}})])]),e("tr",[e("td",[Yr("vxe.export.expColumn")]),e("td",[e("div",{class:"vxe-table-export--panel-column"},[e("ul",{class:"vxe-table-export--panel-column-header"},[e("li",{class:["vxe-table-export--panel-column-option",{"is--checked":a,"is--indeterminate":s}],attrs:{title:Yr("vxe.table.allTitle")},on:{click:this.allColumnEvent}},[e("span",{class:["vxe-checkbox--icon",s?Kr().TABLE_CHECKBOX_INDETERMINATE:a?Kr().TABLE_CHECKBOX_CHECKED:Kr().TABLE_CHECKBOX_UNCHECKED]}),e("span",{class:"vxe-checkbox--label"},Yr("vxe.export.expCurrentColumn"))])]),e("ul",{class:"vxe-table-export--panel-column-body"},O)])])]),e("tr",[e("td",Yr("vxe.export.expOpts")),e("td",S?[e("div",{class:"vxe-table-export--panel-option-row"},t.callSlot(S,n,e))]:[e("div",{class:"vxe-table-export--panel-option-row"},[e("vxe-checkbox",{props:{value:g||C,disabled:g,title:Yr("vxe.export.expHeaderTitle"),content:Yr("vxe.export.expOptHeader")},on:{input(e){p.isHeader=e}}}),e("vxe-checkbox",{props:{value:!!C&&p.isTitle,disabled:!C,title:Yr("vxe.export.expTitleTitle"),content:Yr("vxe.export.expOptTitle")},on:{input(e){p.isTitle=e}}}),e("vxe-checkbox",{props:{value:!!(C&&b&&d)&&p.isColgroup,disabled:!C||!b||!d,title:Yr("vxe.export.expColgroupTitle"),content:Yr("vxe.export.expOptColgroup")},on:{input(e){p.isColgroup=e}}})]),e("div",{class:"vxe-table-export--panel-option-row"},[e("vxe-checkbox",{props:{value:!g&&p.original,disabled:g,title:Yr("vxe.export.expOriginalTitle"),content:Yr("vxe.export.expOptOriginal")},on:{input(e){p.original=e}}}),e("vxe-checkbox",{props:{value:!!(f&&d&&i)&&p.isMerge,disabled:g||!f||!d||!i,title:Yr("vxe.export.expMergeTitle"),content:Yr("vxe.export.expOptMerge")},on:{input(e){p.isMerge=e}}}),x?l():e("vxe-checkbox",{props:{value:!!u&&p.useStyle,disabled:!u,title:Yr("vxe.export.expUseStyleTitle"),content:Yr("vxe.export.expOptUseStyle")},on:{input(e){p.useStyle=e}}}),e("vxe-checkbox",{props:{value:!!m&&p.isAllExpand,disabled:g||!m,title:Yr("vxe.export.expAllExpandTitle"),content:Yr("vxe.export.expOptAllExpand")},on:{input(e){p.isAllExpand=e}}})]),e("div",{class:"vxe-table-export--panel-option-row"},[e("vxe-checkbox",{props:{value:p.isFooter,disabled:!h.hasFooter,title:Yr("vxe.export.expFooterTitle"),content:Yr("vxe.export.expOptFooter")},on:{input(e){p.isFooter=e}}})])])])]])])]),y?e("div",{class:"vxe-table-export--panel-bottom"},t.callSlot(y,n,e)):Zr(this)])},footer:()=>{const l={$table:t,$grid:o,$gantt:r,options:p,columns:v,params:p.params};return e("div",{class:"vxe-table-export--panel-footer"},R?t.callSlot(R,l,e):[e("div",{class:"vxe-table-export--panel-btns"},[e("vxe-button",{props:{content:Yr("vxe.export.expCancel")},on:{click:this.cancelEvent}}),e("vxe-button",{ref:"confirmBtn",props:{status:"primary",content:Yr(x?"vxe.export.expPrint":"vxe.export.expConfirm")},on:{click:this.confirmEvent}})])])}}})},methods:{changeOption(e){const t=!e.checked;n.a.eachTree([e],e=>{e.checked=t,e.halfChecked=!1}),this.handleOptionCheck(e),this.checkStatus()},handleOptionCheck(e){const t=n.a.findTree(this.storeData.columns,t=>t===e);if(t&&t.parent){const{parent:e}=t;e.children&&e.children.length&&(e.checked=e.children.every(e=>e.checked),e.halfChecked=!e.checked&&e.children.some(e=>e.checked||e.halfChecked),this.handleOptionCheck(e))}},checkStatus(){const e=this.storeData.columns;this.isAll=e.every(e=>e.disabled||e.checked),this.isIndeterminate=!this.isAll&&e.some(e=>!e.disabled&&(e.checked||e.halfChecked))},allColumnEvent(){const e=!this.isAll;n.a.eachTree(this.storeData.columns,t=>{t.disabled||(t.checked=e,t.halfChecked=!1)}),this.isAll=e,this.checkStatus()},showEvent(){this.$nextTick(()=>{const{$refs:e}=this,t=e.filename||e.sheetname||e.confirmBtn;t&&t.focus()}),this.checkStatus()},getExportOption(){const{checkedAll:e,storeData:t,defaultOptions:o,supportMerge:r}=this,{hasMerge:l,columns:i}=t,a=n.a.searchTree(i,e=>e.checked,{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},o,{columns:a,isMerge:!!(l&&r&&e)&&o.isMerge})},cancelEvent(){this.storeData.visible=!1},confirmEvent(e){this.storeData.isPrint?this.printEvent(e):this.exportEvent(e)},printEvent(){const e=this.$parent;this.storeData.visible=!1,e.print(Object.assign({},e.printOpts,this.getExportOption()))},exportEvent(){const e=this.$xeTable,t=e.exportOpts;this.loading=!0,e.exportData(Object.assign({},t,this.getExportOption())).then(()=>{this.loading=!1,this.storeData.visible=!1}).catch(()=>{this.loading=!1})}}};const{getIcon:Jr,renderEmptyElement:el}=r.c;var tl={name:"VxeTableMenuPanel",props:{ctxMenuStore:Object,ctxMenuOpts:Object},mounted(){document.body.appendChild(this.$el)},beforeDestroy(){const{$el:e}=this;e.parentNode&&e.parentNode.removeChild(e)},render(e){const t=this.$parent,o=t,{ctxMenuStore:r}=o,l=t.computeMenuOpts;return e("div",{class:["vxe-table--context-menu-wrapper",l.className,{"is--visible":r.visible}],style:r.style},r.list.map((o,l)=>o.every(e=>!1===e.visible)?el(t):e("ul",{class:"vxe-context-menu--option-wrapper",key:l},o.map((o,n)=>{const i=o.children&&o.children.some(e=>!1!==e.visible),a=Object.assign({},o.prefixConfig),s=Object.assign({},o.suffixConfig),c=h(o.name);return!1===o.visible?null:e("li",{class:[o.className,{"link--disabled":o.disabled,"link--active":o===r.selected}],key:`${l}_${n}`},[e("a",{class:"vxe-context-menu--link",on:{click(e){t.ctxMenuLinkEvent(e,o)},mouseover(e){t.ctxMenuMouseoverEvent(e,o)},mouseout(e){t.ctxMenuMouseoutEvent(e,o)}}},[e("div",{class:["vxe-context-menu--link-prefix",a.className||""]},[e("i",{class:a.icon||o.prefixIcon}),a.content?e("span",{},""+a.content):el(t)]),e("span",{class:"vxe-context-menu--link-content",attrs:{title:c}},c),e("div",{class:["vxe-context-menu--link-suffix",s.className||""]},[e("i",{class:s.icon||o.suffixIcon||(i?Jr().TABLE_MENU_OPTIONS:"")}),s.content?e("span",""+s.content):el(t)])]),i?e("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":o===r.selected&&r.showChild}]},o.children.map((i,a)=>{const s=Object.assign({},i.prefixConfig),c=Object.assign({},i.suffixConfig),d=h(i.name);return!1===i.visible?null:e("li",{class:[i.className,{"link--disabled":i.disabled,"link--active":i===r.selectChild}],key:`${l}_${n}_${a}`},[e("a",{class:"vxe-context-menu--link",on:{click(e){t.ctxMenuLinkEvent(e,i)},mouseover(e){t.ctxMenuMouseoverEvent(e,o,i)},mouseout(e){t.ctxMenuMouseoutEvent(e,o)}}},[e("div",{class:["vxe-context-menu--link-prefix",s.className||""]},[e("i",{class:s.icon||i.prefixIcon}),s.content?e("span",""+s.content):el(t)]),e("span",{class:"vxe-context-menu--link-content",attrs:{title:d}},d),e("div",{class:["vxe-context-menu--link-suffix",c.className||""]},[e("i",{class:c.icon}),c.content?e("span",""+c.content):el(t)])])])})):null])}))))}};const{renderer:ol}=r.c;var rl={methods:{_openFilter(e){const t=this,o=He(this,e);if(o&&o.filters){const{elemStore:e}=this,{fixed:r}=o;return t.scrollToColumn(o).then(()=>{const t=e[(r||"main")+"-header-wrapper"]||e["main-header-wrapper"];if(t){const e=t.querySelector(`.vxe-header--column.${o.id} .vxe-cell--filter`);n="click",(l=e)&&l.dispatchEvent(new Event(n))}var l,n})}return t.$nextTick()},_setFilter(e,t,o){const r=this,l=r,{filterStore:n}=l,i=He(r,e);if(i&&i.filters){if(i.filters=Ve(t||[]),o)return r.handleColumnConfirmFilter(i,null);n.visible&&r.handleFilterOptions(i)}return r.$nextTick()},checkFilterOptions(){const{filterStore:e}=this;e.isAllSelected=e.options.every(e=>e._checked),e.isIndeterminate=!e.isAllSelected&&e.options.some(e=>e._checked)},triggerFilterEvent(e,t,o){const r=this,l=r,n=r,{filterStore:i}=this;if(i.column===t&&i.visible)i.visible=!1;else{const{initStore:i,filterStore:a}=l,{elemStore:s}=n;if(a.column===t&&a.visible)a.visible=!1;else{const l=r.$refs.refElem,{scrollTop:c,scrollLeft:d,visibleHeight:u,visibleWidth:p}=ae(),h=r.computeFilterOpts,{transfer:g}=h,m=l.getBoundingClientRect(),f=e.currentTarget;r.handleFilterOptions(t),n._currFilterParams=o,a.style=null,a.visible=!0,i.filter=!0,r.$nextTick(()=>{if(!Ue(s["main-header-scroll"]))return;const e=r.$refs.refTableFilter,t=e?e.$el:null;if(!t)return;const o=f.getBoundingClientRect(),n=t.querySelector(".vxe-table--filter-header"),i=t.querySelector(".vxe-table--filter-footer"),h=t.offsetWidth,x=h/2;let b=0,v=0,C=0;g?(b=o.left-x+d,v=o.top+f.clientHeight+c,C=Math.min(Math.max(m.height,Math.floor(u/2)),Math.max(80,u-v-(n?n.clientHeight:0)-(i?i.clientHeight:0)-28)),b<16?b=16:b>p-h-16&&(b=p-h-16)):(b=o.left-m.left-x,v=o.top-m.top+f.clientHeight,C=Math.max(40,l.clientHeight-v-(n?n.clientHeight:0)-(i?i.clientHeight:0)-14),b<1?b=1:b>l.clientWidth-h-1&&(b=l.clientWidth-h-1)),a.style={top:ne(v),left:ne(b)},a.maxHeight=C})}r.dispatchEvent("filter-visible",{column:t,field:t.field,property:t.field,filterList:r.getCheckedFilters(),visible:a.visible},e)}},handleFilterConfirmFilter(e){const{filterStore:t}=this;t.options.forEach(e=>{e.checked=e._checked}),this.confirmFilterEvent(e)},_saveFilterPanel(){return this.handleFilterConfirmFilter(null),this.$nextTick()},_saveFilterPanelByEvent(e){return this.handleFilterConfirmFilter(e),this.$nextTick()},_resetFilterPanel(){return this.handleFilterResetFilter(null),this.$nextTick()},_resetFilterPanelByEvent(e){return this.handleFilterResetFilter(e),this.$nextTick()},_getCheckedFilters(){const{tableFullColumn:e}=this,t=[];return e.forEach(e=>{const{field:o,filters:r}=e,l=[],n=[];r&&r.length&&(r.forEach(e=>{e.checked&&(l.push(e.value),n.push(e.data))}),l.length&&t.push({column:e,field:o,property:o,values:l,datas:n}))}),t},handleColumnConfirmFilter(e,t){const o=this,r=o,l=o,{mouseConfig:n}=r,{scrollXLoad:i,scrollYLoad:a}=l,s=o.computeFilterOpts,c=o.computeMouseOpts,{field:d}=e,u=[],p=[];e.filters.forEach(e=>{e.checked&&(u.push(e.value),p.push(e.data))});const h=o.getCheckedFilters(),g={$table:o,$event:t,column:e,field:d,property:d,values:u,datas:p,filters:h,filterList:h};return s.remote||(o.handleTableData(!0),o.checkSelectionStatus()),n&&c.area&&o.handleFilterEvent&&o.handleFilterEvent(t,g),t&&o.dispatchEvent("filter-change",g,t),o.closeFilter(),o.updateFooter().then(()=>{const{scrollXLoad:e,scrollYLoad:t}=l;if(i||e||a||t)return(i||e)&&o.updateScrollXSpace(),(a||t)&&o.updateScrollYSpace(),o.refreshScroll()}).then(()=>(o.updateCellAreas(),o.recalculate(!0))).then(()=>{setTimeout(()=>o.recalculate(),50)})},confirmFilterEvent(e){const{filterStore:t}=this,{column:o}=t;this.handleColumnConfirmFilter(o,e)},handleClearFilter(e){const t=this;if(e){const{filters:o,filterRender:r}=e;if(o){const l=a(r)?ol.get(r.name):null,i=e.filterResetMethod||(l?l.tableFilterResetMethod||l.filterResetMethod:null);o.forEach(e=>{e._checked=!1,e.checked=!1,i||(e.data=n.a.clone(e.resetValue,!0))}),i&&i({options:o,column:e,$table:t})}}},handleFilterResetFilter(e){const t=this,o=t,{filterStore:r}=o;t.handleClearFilter(r.column),t.confirmFilterEvent(e),e&&t.dispatchEvent("clear-filter",{filterList:[]},e)},_clearFilter(e){const t=this,o=t,r=t,{filterStore:l}=o,{tableFullColumn:n}=r;let i;return e?(i=He(t,e),i&&t.handleClearFilter(i)):n.forEach(t.handleClearFilter),e&&i===l.column||Object.assign(l,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),t.updateData()},_updateFilterOptionStatus(e,t){return e._checked=t,e.checked=t,this.$nextTick()}}};const{menus:ll,globalEvents:nl,GLOBAL_EVENT_KEYS:il}=r.c;var al={methods:{_closeMenu(){return Object.assign(this.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),this.$nextTick()},moveCtxMenu(e,t,o,r,l,i){const a=this;let s;const c=n.a.findIndexOf(i,e=>t[o]===e);if(r)l&&p(t.selected)?t.showChild=!0:(t.showChild=!1,t.selectChild=null);else if(nl.hasKey(e,il.ARROW_UP)){for(let e=c-1;e>=0;e--)if(!1!==i[e].visible){s=i[e];break}t[o]=s||i[i.length-1]}else if(nl.hasKey(e,il.ARROW_DOWN)){for(let e=c+1;e<i.length;e++)if(!1!==i[e].visible){s=i[e];break}t[o]=s||i[0]}else t[o]&&(nl.hasKey(e,il.ENTER)||nl.hasKey(e,il.SPACEBAR))&&a.ctxMenuLinkEvent(e,t[o])},handleGlobalContextmenuEvent(e){const t=this,o=t.$xeGrid,r=t.$xeGantt,l=t,n=t,i=t,{xID:s}=t,{mouseConfig:c,menuConfig:d}=l,{editStore:u,ctxMenuStore:p}=n,{visibleColumn:h}=i,g=t.$refs.refTableFilter,m=t.$refs.refTableMenu,f=t.computeMouseOpts,x=t.computeMenuOpts,b=t.$refs.refElem,{selected:v}=u,C=["header","body","footer"];if(a(d)){if(p.visible&&m&&he(e,m.$el).flag)return void e.preventDefault();if(i._keyCtx){const l="body",n={type:l,$table:t,$grid:o,$gantt:r,keyboard:!0,columns:h.slice(0),$event:e};if(c&&f.area){const o=t.getActiveCellArea();if(o&&o.row&&o.column)return n.row=o.row,n.column=o.column,void t.handleOpenMenuEvent(e,l,n)}else if(c&&f.selected&&v.row&&v.column)return n.row=v.row,n.column=v.column,void t.handleOpenMenuEvent(e,l,n)}for(let l=0;l<C.length;l++){const n=C[l],i=he(e,b,`vxe-${n}--column`,e=>e.parentNode.parentNode.parentNode.getAttribute("xid")===s),a={type:n,$table:t,$grid:o,$gantt:r,columns:h.slice(0),$event:e};if(i.flag){const o=i.targetElem,r=t.getColumnNode(o),l=r?r.item:null;let s=n+"-";if(l&&Object.assign(a,{column:l,columnIndex:t.getColumnIndex(l),cell:o}),"body"===n){const e=t.getRowNode(o.parentNode),r=e?e.item:null;s="",r&&(a.row=r,a.rowIndex=t.getRowIndex(r))}const c=s+"cell-menu";return t.handleOpenMenuEvent(e,n,a),void(t.$listeners[s+"cell-context-menu"]?(fe("vxe.error.delEvent",[s+"cell-context-menu",s+"cell-menu"]),t.dispatchEvent(s+"cell-context-menu",a,e)):t.dispatchEvent(c,a,e))}if(he(e,t.$el,`vxe-table--${n}-wrapper`,e=>e.getAttribute("xid")===s).flag)return void("cell"===x.trigger?e.preventDefault():t.handleOpenMenuEvent(e,n,a))}}g&&!he(e,g.$el).flag&&t.closeFilter(),t.closeMenu()},handleOpenMenuEvent(e,t,o){const r=this,l=r,n=r,{ctxMenuStore:i}=l,a=r.computeIsContentMenu,s=r.computeMenuOpts,c=s[t],d=s.visibleMethod;if(c){const{options:t,disabled:l}=c;l?e.preventDefault():a&&t&&t.length&&(o.options=t,r.preventEvent(e,"event.showMenu",o,()=>{if(!d||d(o)){e.preventDefault(),r.updateZindex();const{scrollTop:l,scrollLeft:a,visibleHeight:s,visibleWidth:c}=ae();let d=e.clientY+l,u=e.clientX+a;const p=()=>{n._currMenuParams=o,Object.assign(i,{visible:!0,list:t,selected:null,selectChild:null,showChild:!1,style:{zIndex:n.tZindex,top:d+"px",left:u+"px"}}),r.$nextTick(()=>{const e=r.$refs.refTableMenu.$el,t=e.clientHeight,o=e.clientWidth,{boundingTop:n,boundingLeft:p}=ge(e),h=p+o-c;n+t-s>-10&&(i.style.top=Math.max(l+2,d-t-2)+"px"),h>-10&&(i.style.left=Math.max(a+2,u-o-2)+"px")})},{keyboard:h,row:g,column:m}=o;h&&g&&m?r.scrollToRow(g,m).then(()=>{const e=r.getCellElement(g,m);if(e){const{boundingTop:t,boundingLeft:o}=ge(e);d=t+l+Math.floor(e.offsetHeight/2),u=o+a+Math.floor(e.offsetWidth/2)}p()}):p()}else r.closeMenu()}))}r.closeFilter()},ctxMenuMouseoverEvent(e,t,o){const r=this,l=r,n=e.currentTarget,{ctxMenuStore:i}=l;e.preventDefault(),e.stopPropagation(),i.selected=t,i.selectChild=o,o||(i.showChild=p(t),i.showChild&&r.$nextTick(()=>{const e=n.nextElementSibling;if(e){const{boundingTop:t,boundingLeft:o,visibleHeight:r,visibleWidth:l}=ge(n),i=t+n.offsetHeight;let a="",s="";o+n.offsetWidth+e.offsetWidth>l-10&&(a="auto",s=n.offsetWidth+"px");let c="",d="";i+e.offsetHeight>r-10&&(c="auto",d="0"),e.style.left=a,e.style.right=s,e.style.top=c,e.style.bottom=d}}))},ctxMenuMouseoutEvent(e,t){const{ctxMenuStore:o}=this;t.children||(o.selected=null),o.selectChild=null},ctxMenuLinkEvent(e,t){const o=this,r=o.$xeGrid,l=o.$xeGantt,n=o;if(!t.disabled&&(t.code||!t.children||!t.children.length)){const i=ll.get(t.code),a=Object.assign({},n._currMenuParams,{menu:t,$table:o,$grid:r,$gantt:l,$event:e});i&&i.menuMethod&&i.menuMethod(a,e),o.$listeners["context-menu-click"]?(fe("vxe.error.delEvent",["context-menu-click","menu-click"]),o.dispatchEvent("context-menu-click",a,e)):o.dispatchEvent("menu-click",a,e),o.closeMenu()}}}};const{getConfig:sl,renderer:cl,getI18n:dl}=r.c,ul=n.a.browse();function pl(e,t){const{model:o,editRender:r}=t;r&&(o.value=Ye(e,t),o.update=!1)}function hl(e,t){const{model:o,editRender:r}=t;r&&o.update&&(Ke(e,t,o.value),o.update=!1,o.value=null)}function gl(e){const t=e.$refs.refElem;if(t){const e=t.querySelector(".col--selected");e&&oe(e,"col--selected")}}function ml(e){const t=e,{editStore:o,tableColumn:r}=t,l=e.computeEditOpts,{actived:n}=o,{row:i,column:a}=n;(i||a)&&("row"===l.mode?r.forEach(e=>hl(i,e)):hl(i,a))}function fl(e,t,o){const r=e,{tableFullTreeData:l,afterFullData:i,fullDataRowIdData:a,fullAllDataRowIdData:s}=r,c=e.computeTreeOpts,{rowField:d,parentField:u,mapChildrenField:p}=c,h=c.children||c.childrenField,g=o?"push":"unshift";t.forEach(t=>{const o=t[u],r=Se(e,t),c=o?n.a.findTree(l,e=>o===e[d],{children:p}):null;if(c){const{item:o}=c,l=s[Se(e,o)],i=l?l.level:0;let d=o[h],u=o[p];n.a.isArray(d)||(d=o[h]=[]),n.a.isArray(u)||(u=o[h]=[]),d[g](t),u[g](t);const m={row:t,rowid:r,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,_tIndex:-1,items:d,parent:o,level:i+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};a[r]=m,s[r]=m}else{o&&fe("vxe.error.unableInsert"),i[g](t),l[g](t);const e={row:t,rowid:r,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,_tIndex:-1,items:l,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};a[r]=e,s[r]=e}})}function xl(e,t,o,r){const l=e,i=e,a=e,{treeConfig:s}=l,{isRowGroupStatus:c}=i,{tableFullTreeData:d,afterFullData:u,mergeBodyList:p,tableFullData:h,fullDataRowIdData:g,fullAllDataRowIdData:m,insertRowMaps:f,removeRowMaps:x}=a,b=e.computeTreeOpts,{transform:v,parentField:C,rowField:w,mapChildrenField:E}=b,y=b.children||b.childrenField;n.a.isArray(t)||(t=[t]);const T=e.defineField(t.map(e=>Object.assign(s&&v?{[E]:[],[y]:[]}:{},e)));let R=[];if(s&&v&&(R=n.a.toArrayTree(T,{key:w,parentKey:C,children:y})),n.a.eqNull(o))if(s&&v)fl(e,T,!1);else if(c){if(s)throw new Error(dl("vxe.error.noTree",["insert"]));fe(dl("vxe.error.noGroup",["remove"]))}else T.forEach(t=>{const o=Se(e,t),r={row:t,rowid:o,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,_tIndex:-1,items:u,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};g[o]=r,m[o]=r,u.unshift(t),h.unshift(t)}),p.forEach(e=>{const{row:t}=e;t>=0&&(e.row=t+T.length)});else if(-1===o)if(s&&v)fl(e,T,!0);else if(c){if(s)throw new Error(dl("vxe.error.noTree",["insert"]));fe(dl("vxe.error.noGroup",["remove"]))}else T.forEach(t=>{const o=Se(e,t),r={row:t,rowid:o,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,_tIndex:-1,items:u,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};g[o]=r,m[o]=r,u.push(t),h.push(t)});else if(s&&v){const t=n.a.findTree(d,e=>o[w]===e[w],{children:E});if(t){const{parent:l}=t,i=l?l[E]:d,a=m[Se(e,l)],s=a?a.level:0;if(R.forEach((e,o)=>{l?e[C]!==l[w]&&(e[C]=l[w],xe("vxe.error.errProp",[`${C}=${e[C]}`,`${C}=${l[w]}`])):null!==e[C]&&(e[C]=null,xe("vxe.error.errProp",[`${C}=${e[C]}`,"null"]));let n=t.index+o;r&&(n+=1),i.splice(n,0,e)}),n.a.eachTree(R,t=>{const o=Se(e,t),r={row:t,rowid:o,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,_tIndex:-1,items:i,parent:l,level:s+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};t[y]&&(t[E]=t[y]),g[o]=r,m[o]=r},{children:y}),l){const e=n.a.findTree(d,e=>o[w]===e[w],{children:y});if(e){const t=e.items;let o=e.index;r&&(o+=1),t.splice(o,0,...R)}}}else fe("vxe.error.unableInsert"),fl(e,T,!0)}else if(c){if(s)throw new Error(dl("vxe.error.noTree",["insert"]));fe(dl("vxe.error.noGroup",["remove"]))}else{if(s)throw new Error(dl("vxe.error.noTree",["insert"]));let t=-1;if(n.a.isNumber(o)?o<u.length&&(t=o):t=e.findRowIndexOf(u,o),r&&(t=Math.min(u.length,t+1)),-1===t)throw new Error(dl("vxe.error.unableInsert"));u.splice(t,0,...T);const l=e.findRowIndexOf(h,o);l>-1?h.splice(l+(r?1:0),0,...T):h.push(...T),p.forEach(e=>{const{row:o,rowspan:l}=e;o>=t?e.row=o+T.length:(r?o+l>=t:o+l>t)&&(e.rowspan=l+T.length)})}const S=t=>{const o=Se(e,t);x[o]?(delete x[o],f[o]&&delete f[o]):f[o]=t};return s&&v?n.a.eachTree(R,S,{children:E}):T.forEach(S),i.removeRowFlag++,i.insertRowFlag++,e.cacheRowMap(!1),e.updateScrollYStatus(),e.handleTableData(s&&v),s&&v||e.updateAfterDataIndex(),e.updateFooter(),e.handleUpdateBodyMerge(),e.checkSelectionStatus(),i.scrollYLoad&&e.updateScrollYSpace(),e.$nextTick().then(()=>(e.updateCellAreas(),e.recalculate(!0))).then(()=>({row:T.length?T[T.length-1]:null,rows:T}))}function bl(e,t,o,r,l){const i=e,{treeConfig:a}=i,s=e.computeTreeOpts,{transform:c,rowField:d,parentField:u}=s;return a&&c?(n.a.isArray(t)||(t=[t]),xl(e,t.map(e=>Object.assign({},e,{[u]:o[d]})),r,l)):(xe("vxe.error.errProp",["tree-config.transform=false","tree-config.transform=true"]),Promise.resolve({row:null,rows:[]}))}function vl(e,t,o){const r=e,{editStore:l}=r,{actived:n,focused:i}=l,{row:a,column:s}=n,c=e.computeValidOpts;if(a||s){if(o&&Se(e,o)!==Se(e,a))return e.$nextTick();ml(e),n.args=null,n.row=null,n.column=null,e.updateFooter(),e.dispatchEvent("edit-closed",{row:a,rowIndex:e.getRowIndex(a),$rowIndex:e.getVMRowIndex(a),column:s,columnIndex:e.getColumnIndex(s),$columnIndex:e.getVMColumnIndex(s)},t||null)}return i.row=null,i.column=null,c.autoClear&&("full"!==c.msgMode||"obsolete"===sl().cellVaildMode)&&e.clearValidate?e.clearValidate():e.$nextTick().then(()=>e.updateCellAreas())}function Cl(e,t,o,r,l){const n=e,i=e,s=e.$xeGrid,{editConfig:c,mouseConfig:d}=n,{editStore:u,tableColumn:p}=i,h=e.computeEditOpts,{mode:g}=h,{actived:m,focused:f}=u,{row:x,column:b}=t,{editRender:v}=b,C=t.cell||e.getCellElement(x,b),w=h.beforeEditMethod||h.activeMethod;if(t.cell=C,C&&a(c)&&a(v)&&!e.isPendingByRow(x)&&!e.isAggregateRecord(x)){if(m.row!==x||"cell"===g&&m.column!==b){let l="edit-disabled";if(!w||w(Object.assign(Object.assign({},t),{$table:e,$grid:s}))){d&&(e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.closeTooltip(),m.column&&vl(e,o),l="edit-activated",b.renderHeight=C.offsetHeight,m.args=t,m.row=x,m.column=b,"row"===g?p.forEach(e=>pl(x,e)):pl(x,b);const n=h.afterEditMethod;e.$nextTick(()=>{r&&e.handleFocus(t,o),n&&n(Object.assign(Object.assign({},t),{$table:e,$grid:s}))})}e.dispatchEvent(l,{row:x,rowIndex:e.getRowIndex(x),$rowIndex:e.getVMRowIndex(x),column:b,columnIndex:e.getColumnIndex(b),$columnIndex:e.getVMColumnIndex(b)},o),"edit-activated"===l&&e.dispatchEvent("edit-actived",{row:x,rowIndex:e.getRowIndex(x),$rowIndex:e.getVMRowIndex(x),column:b,columnIndex:e.getColumnIndex(b),$columnIndex:e.getVMColumnIndex(b)},o)}else{const{column:r}=m;if(d&&(e.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),r!==b){const{model:t}=r;t.update&&Ke(x,r,t.value),e.clearValidate&&e.clearValidate(x,b)}b.renderHeight=C.offsetHeight,m.args=t,m.column=b,l&&setTimeout(()=>{e.handleFocus(t,o)})}f.column=null,f.row=null,e.focus()}return e.$nextTick()}function wl(e,t,o,r){const l=e,i=e,{editConfig:s}=l,c=n.a.isString(o)?e.getColumnByField(o):o;return t&&c&&a(s)&&a(c.editRender)&&!e.isAggregateRecord(t)?Promise.resolve(r?e.scrollToRow(t,c):null).then(()=>{const o=e.getCellElement(t,c);return o&&(Cl(e,{row:t,rowIndex:e.getRowIndex(t),column:c,columnIndex:e.getColumnIndex(c),cell:o,$table:e},null,r,r),i._lastCallTime=Date.now()),e.$nextTick()}):e.$nextTick()}var El={methods:{_insert(e){return xl(this,e,null)},_insertAt(e,t){return xl(this,e,t)},_insertNextAt(e,t){return xl(this,e,t,!0)},_insertChild(e,t){return bl(this,e,t,null)},_insertChildAt(e,t,o){return bl(this,e,t,o)},_insertChildNextAt(e,t,o){return bl(this,e,t,o,!0)},_remove(e){const t=this,o=t,r=t,l=t,{treeConfig:i}=o,{editStore:a,isRowGroupStatus:s}=r,{tableFullTreeData:c,selectCheckboxMaps:d,afterFullData:u,mergeBodyList:p,tableFullData:h,pendingRowMaps:g,insertRowMaps:m,removeRowMaps:f}=l,x=t.computeCheckboxOpts,b=t.computeTreeOpts,{transform:v,mapChildrenField:C}=b,w=b.children||b.childrenField,{actived:E}=a,{checkField:y}=x;let T=[];return e?n.a.isArray(e)||(e=[e]):e=h,e.forEach(e=>{if(!t.isInsertByRow(e)){const o=Se(t,e);f[o]=e}}),y||(e.forEach(e=>{const t=Se(this,e);d[t]&&delete d[t]}),r.updateCheckboxFlag++),h===e?(e=T=h.slice(0),this.tableFullData=[],this.afterFullData=[],this.clearMergeCells()):i&&v?e.forEach(e=>{const t=Se(this,e),o=n.a.findTree(c,e=>t===Se(this,e),{children:C});if(o){const e=o.items.splice(o.index,1);T.push(e[0])}const r=n.a.findTree(c,e=>t===Se(this,e),{children:w});r&&r.items.splice(r.index,1);const l=this.findRowIndexOf(u,e);l>-1&&u.splice(l,1)}):s?fe(dl("vxe.error.noGroup",["remove"])):e.forEach(e=>{const t=this.findRowIndexOf(h,e);if(t>-1){const e=h.splice(t,1);T.push(e[0])}const o=this.findRowIndexOf(u,e);o>-1&&(p.forEach(e=>{const{row:t,rowspan:r}=e;t>o?e.row=t-1:t+r>o&&(e.rowspan=r-1)}),u.splice(o,1))}),E.row&&t.findRowIndexOf(e,E.row)>-1&&t.clearEdit(),e.forEach(e=>{const o=Se(t,e);m[o]&&delete m[o],g[o]&&delete g[o]}),r.removeRowFlag++,r.insertRowFlag++,r.pendingRowFlag++,t.cacheRowMap(!1),t.handleTableData(i&&v),t.updateFooter(),t.handleUpdateBodyMerge(),i&&v||t.updateAfterDataIndex(),t.checkSelectionStatus(),r.scrollYLoad&&t.updateScrollYSpace(),this.$nextTick().then(()=>(this.updateCellAreas(),this.recalculate(!0))).then(()=>({row:T.length?T[T.length-1]:null,rows:T}))},_removeCheckboxRow(){return this.remove(this.getCheckboxRecords()).then(e=>(this.clearCheckboxRow(),e))},_removeRadioRow(){const e=this.getRadioRecord();return this.remove(e||[]).then(e=>(this.clearRadioRow(),e))},_removeCurrentRow(){const e=this.getCurrentRecord();return this.remove(e||[]).then(e=>(this.clearCurrentRow(),e))},_getRecordset(){const e=this.getRemoveRecords(),t=this.getPendingRecords(),o=e.concat(t),r=this.getUpdateRecords().filter(e=>!o.some(t=>this.eqRow(t,e)));return{insertRecords:this.getInsertRecords(),removeRecords:e,updateRecords:r,pendingRecords:t}},_getInsertRecords(){const{fullAllDataRowIdData:e,insertRowMaps:t}=this,o=[];return n.a.each(t,(t,r)=>{e[r]&&o.push(t)}),o},_getRemoveRecords(){const{removeRowMaps:e}=this,t=[];return n.a.each(e,e=>{t.push(e)}),t},_getUpdateRecords(){const e=this,t=e,o=e,{keepSource:r,treeConfig:l}=t,{tableFullData:i}=o,a=e.computeTreeOpts;return r?(ml(e),l?n.a.filterTree(i,t=>e.isUpdateByRow(t),a):i.filter(t=>e.isUpdateByRow(t))):[]},handleEdit(e,t){return Cl(this,e,t,!0,!0)},handleActived(e,t){return this.handleEdit(e,t)},_getColumnModel(e,t){pl(e,t)},_setColumnModel(e,t){hl(e,t)},_syncActivedCell(){ml(this)},_clearActived(e){return fe("vxe.error.delFunc",["clearActived","clearEdit"]),this.clearEdit(e)},_clearEdit(e){return vl(this,null,e)},handleClearEdit(e,t){return vl(this,e,t)},_getActiveRecord(){fe("vxe.error.delFunc",["getActiveRecord","getEditCell"]);const{editStore:e}=this,{fullAllDataRowIdData:t}=this,{args:o,row:r}=e.actived;return o&&r&&t[Se(this,r)]?Object.assign({},o,{row:r}):null},_getEditRecord(){fe("vxe.error.delFunc",["getEditRecord","getEditCell"]);const{editStore:e}=this,{fullAllDataRowIdData:t}=this,{args:o,row:r}=e.actived;return o&&r&&t[Se(this,r)]?Object.assign({},o,{row:r}):null},_getEditCell(){const e=this,t=e,{editStore:o}=t,{row:r,column:l}=o.actived;return l&&r?{row:r,rowIndex:e.getRowIndex(r),column:l,columnIndex:e.getColumnIndex(l)}:null},_isActiveByRow(e){return fe("vxe.error.delFunc",["isActiveByRow","isEditByRow"]),this.isEditByRow(e)},_isEditByRow(e){const{editStore:t}=this;return t.actived.row===e},handleFocus(e){const t=this,{row:o,column:r,cell:l}=e,{editRender:i}=r,s=t.computeEditOpts;if(a(i)){const a=cl.get(i.name);let c,d=i.autofocus||i.autoFocus,u=i.autoSelect||i.autoselect;if(s.autoFocus&&(!d&&a&&(d=a.tableAutoFocus||a.tableAutofocus||a.autoFocus||a.autofocus),!u&&a&&(u=a.tableAutoSelect||a.autoSelect||a.autoselect),n.a.isFunction(d)?c=d.call(t,e):d&&(c=!0===d?l.querySelector("input,textarea"):l.querySelector(d),c&&c.focus())),c){if(u)c.select();else if(ul.msie){const e=c.createTextRange();e.collapse(!1),e.select()}}else s.autoPos&&(r.fixed||t.scrollToRow(o,r))}},_setActiveRow(e){return fe("vxe.error.delFunc",["setActiveRow","setEditRow"]),this.setEditRow(e)},_setEditRow(e,t){const o=this;let r=n.a.find(this.visibleColumn,e=>a(e.editRender)),l=!1;return t&&(l=!0,!0!==t&&(r=n.a.isString(t)?o.getColumnByField(t):t)),wl(o,e,r,l)},_setActiveCell(e,t){return fe("vxe.error.delFunc",["setActiveCell","setEditCell"]),this.setEditCell(e,t)},_setEditCell(e,t){return wl(this,e,t,!0)},_setSelectCell(e,t){const o=this,r=o,{tableData:l}=r,i=o.computeEditOpts,a=n.a.isString(t)?o.getColumnByField(t):t;if(e&&a&&"manual"!==i.trigger){const t=o.findRowIndexOf(l,e);if(t>-1){const r=o.getCellElement(e,a),l={row:e,rowIndex:t,column:a,columnIndex:o.getColumnIndex(a),cell:r};o.handleSelected(l,{})}}return o.$nextTick()},handleSelected(e,t){const o=this,r=o,l=o,{mouseConfig:n}=r,{editStore:i}=l,a=o.computeMouseOpts,s=o.computeEditOpts,{actived:c,selected:d}=i,{row:u,column:p}=e,h=n&&a.selected;return(()=>(!h||d.row===u&&d.column===p||(c.row!==u||"cell"===s.mode&&c.column!==p)&&(vl(o,t),o.clearSelected(),o.clearCellAreas&&(o.clearCellAreas(),o.clearCopyCellArea()),d.args=e,d.row=u,d.column=p,h&&this.addCellSelectedClass(),o.focus(),t&&o.dispatchEvent("cell-selected",e,t)),o.$nextTick()))()},_getSelectedCell(){const{editStore:e}=this,{row:t,column:o}=e.selected;return t&&o?{row:t,column:o}:null},_clearSelected(){const{editStore:e}=this,{selected:t}=e;return t.row=null,t.column=null,gl(this),this.$nextTick()},reColTitleSdCls(){const e=this.elemStore["main-header-list"];e&&n.a.arrayEach(e.querySelectorAll(".col--title-selected"),e=>oe(e,"col--title-selected"))},addCellSelectedClass(){const e=this,t=e,{editStore:o}=t,{selected:r}=o,{row:l,column:n}=r;if(gl(e),l&&n){const t=e.getCellElement(l,n);t&&re(t,"col--selected")}}}};const{getI18n:yl,renderer:Tl}=r.c;let Rl;function Sl(e,t,o,r,l,n){const i=e.computeSeqOpts.seqMethod||l.seqMethod;return i?i({$table:e,row:o,rowIndex:e.getRowIndex(o),$rowIndex:r,column:l,columnIndex:e.getColumnIndex(l),$columnIndex:n}):t}function Ol(e){return!!e.field||-1===["seq","checkbox","radio"].indexOf(e.type||"")}function $l(e){return!0===e?"full":e||"default"}function Fl(e){return n.a.isBoolean(e)?e?"TRUE":"FALSE":e}const Dl=e=>m(e)?"":""+e;function kl(e,t){const o=e.$xeGrid,r=e.$xeGantt,{columns:l,dataFilterMethod:i}=t;let a=t.data;return i&&(a=a.filter((t,l)=>i({$table:e,$grid:o,$gantt:r,row:t,$rowIndex:l}))),function(e,t,o,r){const l=e,{isAllExpand:i,mode:a}=t,{treeConfig:s}=l,c=e.computeRadioOpts,d=e.computeCheckboxOpts,u=e.computeTreeOpts,p=e.computeColumnOpts;if(Rl||(Rl=document.createElement("div")),s){const l=u.children||u.childrenField,s=[],h={},g={},{handleGetRowId:m}=$e(e);return n.a.eachTree(r,(r,l,u,f,x,b)=>{const v=r._row||r,C=m(v);if(g[C])return;const w=x&&x._row?x._row:x,E=w?m(w):"";if(i||!w||h[E]&&e.isTreeExpandByRow(w)){const r=function(e,t){const o=e.computeTreeOpts,r=o.children||o.childrenField;return t[r]&&t[r].length}(e,v),i={_row:v,_level:b.length-1,_hasChild:r,_expand:r&&e.isTreeExpandByRow(v)};o.forEach((o,r)=>{let s="";const u=o.editRender||o.cellRender;let h=o.exportMethod||p.exportMethod;if(!h&&u&&u.name){const e=Tl.get(u.name);e&&(h=e.tableExportMethod||e.exportMethod)}if(h||(h=p.exportMethod),h)s=h({$table:e,row:v,column:o,options:t});else switch(o.type){case"seq":{const t=f.map((e,t)=>t%2==0?Number(e)+1:".").join("");s="all"===a?t:Sl(e,t,v,l,o,r);break}case"checkbox":s=Fl(e.isCheckedByCheckboxRow(v)),i._checkboxLabel=d.labelField?n.a.get(v,d.labelField):"",i._checkboxDisabled=d.checkMethod&&!d.checkMethod({$table:e,row:v});break;case"radio":s=Fl(e.isCheckedByRadioRow(v)),i._radioLabel=c.labelField?n.a.get(v,c.labelField):"",i._radioDisabled=c.checkMethod&&!c.checkMethod({$table:e,row:v});break;default:if(t.original)s=Ye(v,o);else if(s=e.getCellLabel(v,o),"html"===o.type)Rl.innerHTML=s,s=Rl.innerText.trim();else{const t=e.getCellElement(v,o);t&&!te(t,"is--progress")&&(s=t.innerText.trim())}}i[o.id]=Dl(s)}),g[C]=!0,E&&(h[E]=!0),s.push(Object.assign(i,v))}},{children:l}),s}return r.map((r,l)=>{const i={_row:r};return o.forEach((o,s)=>{let u="";const h=o.editRender||o.cellRender;let g=o.exportMethod||p.exportMethod;if(!g&&h&&h.name){const e=Tl.get(h.name);e&&(g=e.tableExportMethod||e.exportMethod)}if(g)u=g({$table:e,row:r,column:o,options:t});else switch(o.type){case"seq":{const t=l+1;u="all"===a?t:Sl(e,t,r,l,o,s);break}case"checkbox":u=Fl(e.isCheckedByCheckboxRow(r)),i._checkboxLabel=d.labelField?n.a.get(r,d.labelField):"",i._checkboxDisabled=d.checkMethod&&!d.checkMethod({$table:e,row:r});break;case"radio":u=Fl(e.isCheckedByRadioRow(r)),i._radioLabel=c.labelField?n.a.get(r,c.labelField):"",i._radioDisabled=c.checkMethod&&!c.checkMethod({$table:e,row:r});break;default:if(t.original)u=Ye(r,o);else if(u=e.getCellLabel(r,o),"html"===o.type)Rl.innerHTML=u,u=Rl.innerText.trim();else{const t=e.getCellElement(r,o);t&&!te(t,"is--progress")&&(u=t.innerText.trim())}}i[o.id]=Dl(u)}),i})}(e,t,l,a)}function Ml(e){return"TRUE"===e||"true"===e||!0===e}function Il(e,t,o){const r=e.computeColumnOpts,l=o.headerExportMethod||r.headerExportMethod;return l?l({column:o,options:t,$table:e}):(t.isTitle?o.getTitle():o.field)||""}function Al(e,t,o,r){const l=e.computeColumnOpts,i=r.editRender||r.cellRender;let a=r.footerExportMethod;if(!a&&i&&i.name){const e=Tl.get(i.name);e&&(a=e.tableFooterExportMethod||e.footerExportMethod||e.footerCellExportMethod)}a||(a=l.footerExportMethod);const s=e.getVTColumnIndex(r);return a?a({$table:e,items:o,itemIndex:s,row:o,_columnIndex:s,column:r,options:t}):n.a.isArray(o)?n.a.toValueString(o[s]):n.a.get(o,r.field)}function Ll(e,t,o){const r=e.$xeGrid,l=e.$xeGantt,{footerFilterMethod:n}=t;return n?o.filter((t,o)=>n({$table:e,$grid:r,$gantt:l,items:t,$rowIndex:o})):o}function _l(e){return/[",\s\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function Hl(e,t,o,r){const l=e;let n="\ufeff";if(t.isHeader&&(n+=o.map(o=>_l(Il(e,t,o))).join(",")+"\r\n"),r.forEach(e=>{n+=o.map(t=>_l(function(e,t){if(t){if("seq"===e.type)return"\t"+t;switch(e.cellType){case"string":if(!isNaN(t))return"\t"+t;break;case"number":break;default:if(t.length>=12&&!isNaN(t))return"\t"+t}}return t}(t,e[t.id]))).join(",")+"\r\n"}),t.isFooter){const{footerTableData:r}=l;Ll(e,t,r).forEach(r=>{n+=o.map(o=>_l(Al(e,t,r,o))).join(",")+"\r\n"})}return n}function Pl(e,t,o,r){const l=e,i=t[o],a=n.a.isUndefined(i)||n.a.isNull(i)?r:i;let s="title"===a||(!0===a||"tooltip"===a)||"ellipsis"===a;const{scrollXLoad:c,scrollYLoad:d}=l;return!c&&!d||s||(s=!0),s}function Bl(e,t,o,r){if(o.length)switch(t.type){case"csv":return Hl(e,t,o,r);case"txt":return function(e,t,o,r){const l=e;let n="";if(t.isHeader&&(n+=o.map(o=>_l(Il(e,t,o))).join("\t")+"\r\n"),r.forEach(e=>{n+=o.map(t=>_l(e[t.id])).join("\t")+"\r\n"}),t.isFooter){const{footerTableData:r}=l;Ll(e,t,r).forEach(r=>{n+=o.map(o=>_l(Al(e,t,r,o))).join("\t")+"\r\n"})}return n}(e,t,o,r);case"html":return function(e,t,o,r){const l=e,i=e,a=e,{id:s,border:c,treeConfig:d,headerAlign:u,align:p,footerAlign:h,showOverflow:m,showHeaderOverflow:f}=l,{isAllSelected:x,isIndeterminate:b}=i,{mergeBodyCellMaps:v}=a,C=e.computeTreeOpts,{print:w,isHeader:E,isFooter:y,isColgroup:T,isMerge:R,colgroups:S,original:O}=t,$=[`<table class="${["vxe-table","border--"+$l(c),w?"is--print":"",E?"is--header":""].filter(e=>e).join(" ")}" border="0" cellspacing="0" cellpadding="0">`,`<colgroup>${o.map(e=>`<col style="width:${e.renderWidth}px">`).join("")}</colgroup>`];if(E&&($.push("<thead>"),T&&!O?S.forEach(o=>{$.push(`<tr>${o.map(o=>{const r=o.headerAlign||o.align||u||p,l=Pl(e,o,"showHeaderOverflow",f)?["col--ellipsis"]:[],i=Il(e,t,o);let a=0,s=0;n.a.eachTree([o],e=>{e.childNodes&&o.childNodes.length||s++,a+=e.renderWidth},{children:"childNodes"});const c=a-s;return r&&l.push("col--"+r),"checkbox"===o.type?`<th class="${l.join(" ")}" colspan="${o._colSpan}" rowspan="${o._rowSpan}"><div ${w?"":`style="width: ${c}px"`}><input type="checkbox" class="check-all" ${x?"checked":""}><span>${i}</span></div></th>`:`<th class="${l.join(" ")}" colspan="${o._colSpan}" rowspan="${o._rowSpan}" title="${i}"><div ${w?"":`style="width: ${c}px"`}><span>${g(i,!0)}</span></div></th>`}).join("")}</tr>`)}):$.push(`<tr>${o.map(o=>{const r=o.headerAlign||o.align||u||p,l=Pl(e,o,"showHeaderOverflow",f)?["col--ellipsis"]:[],n=Il(e,t,o);return r&&l.push("col--"+r),"checkbox"===o.type?`<th class="${l.join(" ")}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="checkbox" class="check-all" ${x?"checked":""}><span>${n}</span></div></th>`:`<th class="${l.join(" ")}" title="${n}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><span>${g(n,!0)}</span></div></th>`}).join("")}</tr>`),$.push("</thead>")),r.length&&($.push("<tbody>"),d?r.forEach(t=>{$.push("<tr>"+o.map(o=>{const r=o.align||p,l=Pl(e,o,"showOverflow",m)?["col--ellipsis"]:[],n=t[o.id];if(r&&l.push("col--"+r),o.treeNode){let e="";return t._hasChild&&(e=`<i class="${t._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon"}"></i>`),l.push("vxe-table--tree-node"),"radio"===o.type?`<td class="${l.join(" ")}" title="${n}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${t._level*C.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_${s}" ${t._radioDisabled?"disabled ":""}${Ml(n)?"checked":""}><span>${t._radioLabel}</span></div></div></div></td>`:"checkbox"===o.type?`<td class="${l.join(" ")}" title="${n}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${t._level*C.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell"><input type="checkbox" ${t._checkboxDisabled?"disabled ":""}${Ml(n)?"checked":""}><span>${t._checkboxLabel}</span></div></div></div></td>`:`<td class="${l.join(" ")}" title="${n}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${t._level*C.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell">${n}</div></div></div></td>`}return"radio"===o.type?`<td class="${l.join(" ")}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="radio" name="radio_${s}" ${t._radioDisabled?"disabled ":""}${Ml(n)?"checked":""}><span>${t._radioLabel}</span></div></td>`:"checkbox"===o.type?`<td class="${l.join(" ")}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="checkbox" ${t._checkboxDisabled?"disabled ":""}${Ml(n)?"checked":""}><span>${t._checkboxLabel}</span></div></td>`:`<td class="${l.join(" ")}" title="${n}"><div ${w?"":`style="width: ${o.renderWidth}px"`}>${g(n,!0)}</div></td>`}).join("")+"</tr>")}):r.forEach(t=>{$.push("<tr>"+o.map(o=>{const r=o.id,l=o.align||p,n=Pl(e,o,"showOverflow",m)?["col--ellipsis"]:[],i=t[r];let a=1,c=1;if(R){const r=e.getVTRowIndex(t._row),l=e.getVTColumnIndex(o),n=v[`${r}:${l}`];if(n){const{rowspan:e,colspan:t}=n;if(!e||!t)return"";e>1&&(a=e),t>1&&(c=t)}}return l&&n.push("col--"+l),"radio"===o.type?`<td class="${n.join(" ")}" rowspan="${a}" colspan="${c}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="radio" name="radio_${s}" ${t._radioDisabled?"disabled ":""}${Ml(i)?"checked":""}><span>${t._radioLabel}</span></div></td>`:"checkbox"===o.type?`<td class="${n.join(" ")}" rowspan="${a}" colspan="${c}"><div ${w?"":`style="width: ${o.renderWidth}px"`}><input type="checkbox" ${t._checkboxDisabled?"disabled ":""}${Ml(i)?"checked":""}><span>${t._checkboxLabel}</span></div></td>`:`<td class="${n.join(" ")}" rowspan="${a}" colspan="${c}" title="${i}"><div ${w?"":`style="width: ${o.renderWidth}px"`}>${g(i,!0)}</div></td>`}).join("")+"</tr>")}),$.push("</tbody>")),y){const{footerTableData:r}=i,l=Ll(e,t,r);l.length&&($.push("<tfoot>"),l.forEach(r=>{$.push(`<tr>${o.map(o=>{const l=o.footerAlign||o.align||h||p,n=Pl(e,o,"showOverflow",m)?["col--ellipsis"]:[],i=Al(e,t,r,o);return l&&n.push("col--"+l),`<td class="${n.join(" ")}" title="${i}"><div ${w?"":`style="width: ${o.renderWidth}px"`}>${g(i,!0)}</div></td>`}).join("")}</tr>`)}),$.push("</tfoot>"))}const F=!x&&b?'<script>(function(){var a=document.querySelector(".check-all");if(a){a.indeterminate=true}})()<\/script>':"";return $.push("</table>",F),w?$.join(""):function(e,t){const{style:o}=e;return["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',`<title>${e.sheetName}</title>`,'<style media="print">.vxe-page-break-before{page-break-before:always;}.vxe-page-break-after{page-break-after:always;}</style>','<style>body{margin:0;padding: 0 1px;color:#333333;font-size:14px;font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}</style>',o?`<style>${o}</style>`:"","</head>",`<body>${t}</body>`,"</html>"].join("")}(t,$.join(""))}(e,t,o,r);case"xml":return function(e,t,o,r){const l=e;let n=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",`<Worksheet ss:Name="${t.sheetName}">`,"<Table>",o.map(e=>`<Column ss:Width="${e.renderWidth}"/>`).join("")].join("");if(t.isHeader&&(n+=`<Row>${o.map(o=>`<Cell><Data ss:Type="String">${Il(e,t,o)}</Data></Cell>`).join("")}</Row>`),r.forEach(e=>{n+="<Row>"+o.map(t=>`<Cell><Data ss:Type="String">${e[t.id]}</Data></Cell>`).join("")+"</Row>"}),t.isFooter){const{footerTableData:r}=l;Ll(e,t,r).forEach(r=>{n+=`<Row>${o.map(o=>`<Cell><Data ss:Type="String">${Al(e,t,r,o)}</Data></Cell>`).join("")}</Row>`})}return n+"</Table></Worksheet></Workbook>"}(e,t,o,r)}return""}function zl(e,t,o){const{filename:l,type:n,download:i}=t;if(!i){const e=function(e,t){return new Blob([e],{type:`text/${t.type};charset=utf-8;`})}(o,t);return Promise.resolve({type:n,content:o,blob:e})}r.c.saveFile&&r.c.saveFile({filename:l,type:n,content:o}).then(()=>{!1!==t.message&&r.c.modal&&r.c.modal.message({content:yl("vxe.table.expSuccess"),status:"success"})})}function jl(e){n.a.eachTree(e,e=>{delete e._level,delete e._colSpan,delete e._rowSpan,delete e._children,delete e.childNodes},{children:"children"})}function Gl(e,t){const o=e.$xeGrid,r=e.$xeGantt,{remote:l,columns:n,colgroups:i,exportMethod:a,afterExportMethod:s}=t;return new Promise(s=>{if(l){const l={options:t,$table:e,$grid:o,$gantt:r};s(a?a(l):l)}else{const o=kl(e,t);s(e.preventEvent(null,"event.export",{options:t,columns:n,colgroups:i,datas:o},()=>zl(0,t,Bl(e,t,n,o))))}}).then(l=>(jl(n),t.print||s&&s({status:!0,options:t,$table:e,$grid:o,$gantt:r}),Object.assign({status:!0},l))).catch(()=>{jl(n),t.print||s&&s({status:!1,options:t,$table:e,$grid:o,$gantt:r});return Promise.reject({status:!1})})}function Vl(e,t){return e.getElementsByTagName(t)}function Nl(e){return`#${e}@${n.a.uniqueId()}`}function Wl(e,t){return e.replace(/#\d+@\d+/g,e=>n.a.hasOwnProp(t,e)?t[e]:e)}function ql(e,t){return Wl(e,t).replace(/^"+$/g,e=>'"'.repeat(Math.ceil(e.length/2)))}function Xl(e,t){const{fieldMaps:o,titleMaps:r}=e;if(!o[t]){const e=r[t];e&&e.field&&(t=e.field)}return t}function Yl(e,t,o){const r=t.split("\r\n"),l=[];let n=[];if(r.length){const t={},i=Date.now();r.forEach(r=>{if(r){const a={},s=(r=r.replace(/("")|(\n)/g,(e,o)=>{const r=Nl(i);return t[r]=o?'"':"\n",r}).replace(/"(.*?)"/g,(e,o)=>{const r=Nl(i);return t[r]=Wl(o,t),r})).split(o);n.length?(s.forEach((e,o)=>{o<n.length&&(a[n[o]]=ql(e.trim(),t))}),l.push(a)):n=s.map(o=>Xl(e,ql(o.trim(),t)))}})}return{fields:n,rows:l}}function Kl(e,t,o){const l=e,{tableFullColumn:i,_importResolve:a,_importReject:s}=l;let c={fields:[],rows:[]};const d={},u={};i.forEach(e=>{const t=e.field,o=e.getTitle();t&&(d[t]=e),o&&(u[e.getTitle()]=e)});const p={fieldMaps:d,titleMaps:u};switch(o.type){case"csv":c=function(e,t){return Yl(e,t,",")}(p,t);break;case"txt":c=function(e,t){return Yl(e,t,"\t")}(p,t);break;case"html":c=function(e,t){const o=Vl((new DOMParser).parseFromString(t,"text/html"),"body"),r=[],l=[];if(o.length){const t=Vl(o[0],"table");if(t.length){const o=Vl(t[0],"thead");if(o.length){n.a.arrayEach(Vl(o[0],"tr"),t=>{n.a.arrayEach(Vl(t,"th"),t=>{l.push(Xl(e,t.textContent||""))})});const i=Vl(t[0],"tbody");i.length&&n.a.arrayEach(Vl(i[0],"tr"),e=>{const t={};n.a.arrayEach(Vl(e,"td"),(e,o)=>{l[o]&&(t[l[o]]=e.textContent||"")}),r.push(t)})}}}return{fields:l,rows:r}}(p,t);break;case"xml":c=function(e,t){const o=Vl((new DOMParser).parseFromString(t,"application/xml"),"Worksheet"),r=[],l=[];if(o.length){const t=Vl(o[0],"Table");if(t.length){const o=Vl(t[0],"Row");o.length&&(n.a.arrayEach(Vl(o[0],"Cell"),t=>{l.push(Xl(e,t.textContent||""))}),n.a.arrayEach(o,(e,t)=>{if(t){const t={},o=Vl(e,"Cell");n.a.arrayEach(o,(e,o)=>{l[o]&&(t[l[o]]=e.textContent)}),r.push(t)}}))}}return{fields:l,rows:r}}(p,t)}const{fields:h,rows:g}=c;h.some(e=>d[e]||u[e])?e.createData(g).then(t=>{let l;return"insert"!==o.mode&&"insertBottom"!==o.mode||(l=e.insertAt(t,-1)),l="insertTop"===o.mode?e.insert(t):e.reloadData(t),!1!==o.message&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({content:yl("vxe.table.impSuccess",[g.length]),status:"success"})),l.then(()=>{a&&a({status:!0})})}):!1!==o.message&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({content:yl("vxe.error.impFields"),status:"error"}),s&&s({status:!1}))}function Ul(e,t,o){const l=e,i=e.computeImportOpts,{importMethod:a,afterImportMethod:s}=o,{type:d,filename:u}=c(t);if(!a&&!n.a.includes(n.a.keys(i._typeMaps),d)){!1!==o.message&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({content:yl("vxe.error.notType",[d]),status:"error"}));const e={status:!1};return Promise.reject(e)}return new Promise((r,n)=>{const i=t=>{r(t),e._importResolve=null,e._importReject=null},s=t=>{n(t),e._importResolve=null,e._importReject=null};if(e._importResolve=i,e._importReject=s,window.FileReader){const r=Object.assign({mode:"insertTop"},o,{type:d,filename:u});if(r.remote)a?Promise.resolve(a({file:t,options:r,$table:e})).then(()=>{i({status:!0})}).catch(()=>{i({status:!0})}):i({status:!0});else{const{tableFullColumn:o}=l;e.preventEvent(null,"event.import",{file:t,options:r,columns:o},()=>{const o=new FileReader;o.onerror=()=>{xe("vxe.error.notType",[d]),s({status:!1})},o.onload=t=>{Kl(e,t.target.result,r)},o.readAsText(t,r.encoding||"UTF-8")})}}else xe("vxe.error.notExp"),i({status:!0})}).then(()=>{s&&s({status:!0,options:o,$table:e})}).catch(t=>(s&&s({status:!1,options:o,$table:e}),Promise.reject(t)))}function Zl(){return r.c.modal?r.c.modal.close("VXE_EXPORT_MODAL"):Promise.resolve()}function Ql(e,t,o){return o.some(e=>{if(Ze(e))return t.id===e.id;if(n.a.isString(e))return t.field===e;{const o=e.id||e.colId,r=e.type,l=e.field;if(o)return t.id===o;if(l&&r)return t.field===l&&t.type===r;if(l)return t.field===l;if(r)return t.type===r}return!1})}function Jl(e,t,o,r){return(!r||!n.a.includes(r,t.field))&&(o?!!n.a.includes(o,t.field):e.original?!!t.field:Ol(t))}function en(e,t,o){const r=e,l=e,i=e,a=e.$xeGrid,s=e.$xeGantt,c=a||s,{treeConfig:d,showHeader:u,showFooter:p}=r,{initStore:h,isGroup:g,footerTableData:m,exportStore:f,exportParams:x}=l,{collectColumn:b,mergeBodyList:v,mergeFooterList:C}=i,w=e.computeExportOpts,E=d,y=e.computeCustomOpts,T=e.getCheckboxRecords(),R=c?c.computeProxyOpts:{},S=!!m.length,O=!(!v.length&&!C.length),$=Object.assign({message:!0,isHeader:u,isTitle:u,isFooter:p,isColgroup:g,isMerge:O,useStyle:!0,current:"current",modes:(R.ajax&&R.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"])},t),F=$.types||n.a.keys(w._typeMaps),D=$.modes||[],k=y.checkMethod,M=b.slice(0),{columns:I,excludeFields:A,includeFields:L}=$,_=F.map(e=>({value:e,label:yl("vxe.export.types."+e)})),H=D.map(e=>e&&e.value?{value:e.value,label:e.label||e.value}:{value:e,label:yl("vxe.export.modes."+e)});n.a.eachTree(M,(t,o,r,l,n)=>{const i=t.children&&t.children.length>0;let a=!1;a=I&&I.length?Ql(0,t,I):A||L?Jl($,t,L,A):t.visible&&(i||Ol(t)),t.checked=a,t.halfChecked=!1,t.disabled=n&&n.disabled||!!k&&!k({$table:e,column:t})}),Object.assign(f,{columns:M,typeList:_,modeList:H,hasFooter:S,hasMerge:O,hasTree:E,isPrint:o,hasColgroup:g,visible:!0}),Object.assign(x,{mode:T.length?"selected":"current"},$);const{filename:P,sheetName:B,mode:z,type:j}=x;return P&&(n.a.isFunction(P)?x.filename=P({options:$,$table:e,$grid:a,$gantt:s}):x.filename=""+P),B&&(n.a.isFunction(B)?x.sheetName=B({options:$,$table:e,$grid:a,$gantt:s}):x.sheetName=""+B),H.some(e=>e.value===z)||(x.mode=H[0].value),_.some(e=>e.value===j)||(x.type=_[0].value),h.export=!0,e.$nextTick()}const tn=e=>{const t=[];return e.forEach(e=>{e.childNodes&&e.childNodes.length?(t.push(e),t.push(...tn(e.childNodes))):t.push(e)}),t};var on={methods:{_exportData(e){const t=this,o=t,r=t,l=t,i=t.$xeGrid,a=t.$xeGantt,s=i||a,{treeConfig:c,showHeader:d,showFooter:u}=o,{isGroup:p}=r,{tableFullColumn:h,afterFullData:g,afterTreeFullData:m,collectColumn:f,mergeBodyList:x,mergeFooterList:b}=l,v=t.computeExportOpts,C=t.computeTreeOpts,w=s?s.computeProxyOpts:{},E=!(!x.length&&!b.length),y=Object.assign({message:!0,isHeader:d,isTitle:d,isFooter:u,isColgroup:p,isMerge:E,useStyle:!0,current:"current",modes:(w.ajax&&w.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"]),download:!0,type:"csv"},v,e);let{filename:T,sheetName:R,type:S,mode:O,columns:$,original:F,columnFilterMethod:D,beforeExportMethod:k,includeFields:M,excludeFields:I}=y,A=[];const L=t.getCheckboxRecords();O||(O=L.length?"selected":"current");let _=!1,H=[];$&&$.length?(_=!0,H=$):H=n.a.searchTree(f,e=>{const t=e.children&&e.children.length>0;let o=!1;return o=$&&$.length?Ql(0,e,$):I||M?Jl(y,e,M,I):e.visible&&(t||Ol(e)),o},{children:"children",mapChildren:"childNodes",original:!0});const P=Object.assign({},y,{filename:"",sheetName:""});_||D||(D=({column:e})=>(!I||!n.a.includes(I,e.field))&&(M?!!n.a.includes(M,e.field):F?!!e.field:Ol(e)),P.columnFilterMethod=D),H?(P._isCustomColumn=!0,A=n.a.searchTree(n.a.mapTree(H,e=>{let o;if(e){if(Ze(e))o=e;else if(n.a.isString(e))o=t.getColumnByField(e);else{const r=e.id||e.colId,l=e.type,n=e.field;r?o=t.getColumnById(r):n&&l?o=h.find(e=>e.field===n&&e.type===l):n?o=t.getColumnByField(n):l&&(o=h.find(e=>e.type===l))}return o||{}}},{children:"childNodes",mapChildren:"_children"}),(e,o)=>Ze(e)&&(!D||D({$table:t,$grid:i,$gantt:a,column:e,$columnIndex:o})),{children:"_children",mapChildren:"childNodes",original:!0})):A=n.a.searchTree(p?f:h,(e,o)=>e.visible&&(!D||D({$table:t,$grid:i,$gantt:a,column:e,$columnIndex:o})),{children:"children",mapChildren:"childNodes",original:!0});const B=[];if(n.a.eachTree(A,e=>{e.children&&e.children.length||B.push(e)},{children:"childNodes"}),P.columns=B,P.colgroups=(e=>{let t=1;const o=(e,r)=>{if(r&&(e._level=r._level+1,t<e._level&&(t=e._level)),e.childNodes&&e.childNodes.length){let t=0;e.childNodes.forEach(r=>{o(r,e),t+=r._colSpan}),e._colSpan=t}else e._colSpan=1};e.forEach(e=>{e._level=1,o(e)});const r=[];for(let e=0;e<t;e++)r.push([]);return tn(e).forEach(e=>{e.childNodes&&e.childNodes.length?e._rowSpan=1:e._rowSpan=t-e._level+1,r[e._level-1].push(e)}),r})(A),T&&(n.a.isFunction(T)?P.filename=T({options:y,$table:t,$grid:i,$gantt:a}):P.filename=""+T),P.filename||(P.filename=yl(P.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[n.a.toDateString(Date.now(),"yyyyMMddHHmmss")])),R&&(n.a.isFunction(R)?P.sheetName=R({options:y,$table:t,$grid:i,$gantt:a}):P.sheetName=""+R),P.sheetName||(P.sheetName=document.title||""),!P.exportMethod&&!n.a.includes(n.a.keys(v._typeMaps),S)){xe("vxe.error.notType",[S]),["xlsx","pdf"].includes(S)&&fe("vxe.error.reqPlugin",[4,"plugin-export-xlsx"]);const e={status:!1};return Promise.reject(e)}if(P.print||k&&k({options:P,$table:t,$grid:i,$gantt:a}),P.data)P._isCustomData=!0;else if(P.data=[],"selected"===O)["html","pdf"].indexOf(S)>-1&&c?P.data=n.a.searchTree(t.getTableData().fullData,e=>t.findRowIndexOf(L,e)>-1,Object.assign({},C,{data:"_row"})):P.data=L;else if("all"===O){if(s||xe("vxe.error.errProp",["all","mode=current,selected"]),s&&!P.remote){const e=s,o=s.computeProxyOpts,{sortData:r}=e,{beforeQueryAll:l,afterQueryAll:c,ajax:d={}}=o,u=o.response||o.props||{},p=d.queryAll,h=d.queryAllSuccess,g=d.queryAllError;if(p||xe("vxe.error.notFunc",["proxy-config.ajax.queryAll"]),p){const o={$table:t,$grid:i,$gantt:a,sort:r.length?r[0]:{},sorts:r,filters:e.filterData,form:e.formData,options:P};return Promise.resolve((l||p)(o)).then(e=>{const r=u.list;return P.data=(r?n.a.isFunction(r)?r({data:e,$table:t,$grid:i,$gantt:a}):n.a.get(e,r):e)||[],c&&c(o),h&&h(Object.assign(Object.assign({},o),{response:e})),Gl(t,P)}).catch(e=>{g&&g(Object.assign(Object.assign({},o),{response:e}))})}}}else"current"===O&&(P.data=c?m:g);return Gl(t,P)},_importByFile(e,t){const o=this,r=Object.assign({},t),{beforeImportMethod:l}=r;return l&&l({options:r,$table:o}),Ul(o,e,r)},_importData(e){const t=this,{importOpts:o}=this,l=Object.assign({types:n.a.keys(o._typeMaps)},o,e),{beforeImportMethod:i,afterImportMethod:a}=l;return i&&i({options:l,$table:this}),r.c.readFile(l).catch(e=>(a&&a({status:!1,options:l,$table:t}),Promise.reject(e))).then(e=>{const{file:o}=e;return Ul(t,o,l)})},_saveFile:e=>r.c.saveFile(e),_readFile:e=>r.c.readFile(e),_print(e){const t=this,o=t.$xeGrid,l=t.$xeGantt,i=t.computePrintOpts,a=Object.assign({original:!1},i,e,{type:"html",download:!1,remote:!1,print:!0}),{sheetName:s}=a;let c="";s&&(c=n.a.isFunction(s)?s({options:a,$table:t,$grid:o,$gantt:l}):""+s),c||(c=document.title||"");const d=a.beforePrintMethod,u=a.html||a.content;return new Promise((e,n)=>{if(r.c.print)e(u?r.c.print({title:c,html:u,customStyle:a.style,beforeMethod:d?({html:e})=>d({html:e,content:e,options:a,$table:t,$grid:o,$gantt:l}):void 0}):t.exportData(a).then(({content:e})=>r.c.print({title:c,html:e,customStyle:a.style,beforeMethod:d?({html:e})=>d({html:e,content:e,options:a,$table:t,$grid:o,$gantt:l}):void 0})));else{n({status:!1})}})},_getPrintHtml(e){const t=this.computePrintOpts,o=Object.assign({original:!1},t,e,{type:"html",download:!1,remote:!1,print:!0});return this.exportData(o).then(({content:e})=>({html:e}))},_closeImport:()=>r.c.modal?r.c.modal.close("VXE_IMPORT_MODAL"):Promise.resolve(),_openImport(e){const{treeConfig:t,importConfig:o}=this,{initStore:l,importStore:i,importParams:a}=this,s=this.computeImportOpts,c=Object.assign({mode:"insertTop",message:!0,types:n.a.keys(s._typeMaps),modes:["insertTop","covering"]},s,e),d=c.types||[],u=c.modes||[];if(!!t)return void(c.message&&r.c.modal.message({content:yl("vxe.error.treeNotImp"),status:"error"}));o||xe("vxe.error.reqProp",["import-config"]);const p=d.map(e=>({value:e,label:yl("vxe.export.types."+e)})),h=u.map(e=>e&&e.value?{value:e.value,label:e.label||e.value}:{value:e,label:yl("vxe.import.modes."+e)});Object.assign(i,{file:null,type:"",filename:"",modeList:h,typeList:p,visible:!0}),Object.assign(a,c),h.some(e=>e.value===a.mode)||(a.mode=h[0].value),l.import=!0},_closeExport:Zl,_openExport(e){const t=this.computeExportOpts,o=Object.assign({message:!0,types:n.a.keys(t._typeMaps)},t,e);return this.exportConfig||xe("vxe.error.reqProp",["export-config"]),en(this,o)},_closePrint:Zl,_openPrint(e){const t=this.computePrintOpts,o=Object.assign({message:!0},t,e);return this.printConfig||xe("vxe.error.reqProp",["print-config"]),en(this,o,!0)}}};const rn=n.a.browse();function ln(e,t,o,r,l,n,i){const a=e,{afterFullData:s,visibleColumn:c}=a,d=Object.assign({},o),u=e.getVTRowIndex(d.row),p=e.getVTColumnIndex(d.column);return t.preventDefault(),l&&u>0?(d.rowIndex=u-1,d.row=s[d.rowIndex]):i&&u<s.length-1?(d.rowIndex=u+1,d.row=s[d.rowIndex]):r&&p?(d.columnIndex=p-1,d.column=c[d.columnIndex]):n&&p<c.length-1&&(d.columnIndex=p+1,d.column=c[d.columnIndex]),e.scrollToRow(d.row,d.column).then(()=>{d.cell=e.getCellElement(d.row,d.column),e.handleSelected(d,t)}),d}function nn(e,t,o){const r=e,{elemStore:l}=r,i=Ue(l["main-body-scroll"]),a=Ue(l["left-body-scroll"]),s=Ue(l["right-body-scroll"]),{column:c,cell:d}=o;if("checkbox"===c.type){let r=i;if(a&&"left"===c.fixed?r=a:s&&"right"===c.fixed&&(r=s),!r)return;const l=e.$refs.refElem,u=t.clientX,p=t.clientY,h=r.querySelector(".vxe-table--checkbox-range"),g=d.parentNode,m=e.getCheckboxRecords();let f=[];const x=1,b=function(e,t){let o=0,r=0;const l=!rn.firefox&&te(e,"vxe-checkbox--label");if(l){const t=getComputedStyle(e);o-=n.a.toNumber(t.paddingTop),r-=n.a.toNumber(t.paddingLeft)}for(;e&&e!==t;)if(o+=e.offsetTop,r+=e.offsetLeft,e=e.offsetParent,l){const t=getComputedStyle(e);o-=n.a.toNumber(t.paddingTop),r-=n.a.toNumber(t.paddingLeft)}return{offsetTop:o,offsetLeft:r}}(t.target,r),v=b.offsetTop+t.offsetY,C=b.offsetLeft+t.offsetX,w=r.scrollTop,E=g.offsetHeight,y=g.getBoundingClientRect(),T=p-y.y;let R=null,S=!1,O=1;const $=(t,o)=>{e.dispatchEvent("checkbox-range-"+t,{records:()=>e.getCheckboxRecords(),reserves:()=>e.getCheckboxReserveRecords()},o)},F=t=>{const{clientX:l,clientY:n}=t,i=l-u,a=n-p+(r.scrollTop-w);let s=Math.abs(a),c=Math.abs(i),d=v,b=C;a<x?(d+=a,d<x&&(d=x,s=v)):s=Math.min(s,r.scrollHeight-v-x),i<x?(b+=i,c>C&&(b=x,c=C)):c=Math.min(c,r.clientWidth-C-x),h.style.height=s+"px",h.style.width=c+"px",h.style.left=b+"px",h.style.top=d+"px",h.style.display="block";const E=function(e,t,o,r,l,n,i){const a=e,s=e,c=e,{showOverflow:d}=a,{fullAllDataRowIdData:u,isResizeCellHeight:p}=c,h=e.computeRowOpts,g=e.computeCellOpts,m=e.computeDefaultRowHeight,{row:f}=o;let x=0,b=[],v=0;const C=i>0,{scrollYLoad:w}=s,{afterFullData:E}=c;if(v=C?n+i:l.height-n+Math.abs(i),w){const t=e.getVTRowIndex(f);if(!(p||g.height||h.height)&&d)b=C?E.slice(t,t+Math.ceil(v/m)):E.slice(t-Math.floor(v/m),t+1);else if(C)for(let o=t;o<E.length;o++){const t=E[o],r=u[e.getRowid(t)]||{};if(x+=r.resizeHeight||g.height||h.height||r.height||m,b.push(t),x>v)return b}else for(let o=t;o>=0;o--){const t=E[o],r=u[e.getRowid(t)]||{};if(x+=r.resizeHeight||g.height||h.height||r.height||m,b.push(t),x>v)return b}}else{const t=C?"next":"previous";for(;r&&x<v;){const o=e.getRowNode(r);o&&(b.push(o.item),x+=r.offsetHeight,r=r[t+"ElementSibling"])}}return b}(e,0,o,g,y,T,a<x?-s:s);if(s>10&&E.length!==f.length){const o=le(t);f=E,o?E.forEach(t=>{e.handleBatchSelectRows([t],-1===m.indexOf(t))}):(e.setAllCheckboxRow(!1),e.handleCheckedCheckboxRow(E,!0,!1)),$("change",t)}},D=()=>{clearTimeout(R),R=null},k=t=>{D(),R=setTimeout(()=>{if(R){const{scrollLeft:o,scrollTop:l,clientHeight:n,scrollHeight:i}=r,a=Math.ceil(50*O/E);S?l+n<i?(e.scrollTo(o,l+a),k(t),F(t)):D():l?(e.scrollTo(o,l-a),k(t),F(t)):D()}},50)};re(l,"drag--range"),document.onmousemove=e=>{e.preventDefault(),e.stopPropagation();const{clientY:t}=e,{boundingTop:o}=ge(r);t<o?(S=!1,O=o-t,R||k(e)):t>o+r.clientHeight?(S=!0,O=t-o-r.clientHeight,R||k(e)):R&&D(),F(e)},document.onmouseup=e=>{D(),oe(l,"drag--range"),h.removeAttribute("style"),document.onmousemove=null,document.onmouseup=null,$("end",e)},$("start",t)}}var an={methods:{moveTabSelected(e,t,o){const r=this,l=r,n=r,{editConfig:i}=l,{afterFullData:a,visibleColumn:s}=n,c=r.computeEditOpts,d=r.computeRowOpts,u=r.computeCurrentRowOpts,p=r.computeColumnOpts,h=r.computeCurrentColumnOpts;let g,m,f;const x=Object.assign({},e),b=r.getVTRowIndex(x.row),v=r.getVTColumnIndex(x.column);o.preventDefault(),t?v<=0?b>0&&(m=b-1,g=a[m],f=s.length-1):f=v-1:v>=s.length-1?b<a.length-1&&(m=b+1,g=a[m],f=0):f=v+1;const C=s[f];C&&(g?(x.rowIndex=m,x.row=g):x.rowIndex=b,x.columnIndex=f,x.column=C,x.cell=r.getCellElement(x.row,x.column),d.isCurrent&&u.isFollowSelected&&r.triggerCurrentRowEvent(o,x),p.isCurrent&&h.isFollowSelected&&r.triggerCurrentColumnEvent(o,x),i?"click"!==c.trigger&&"dblclick"!==c.trigger||("row"===c.mode?r.handleEdit(x,o):r.scrollToRow(x.row,x.column).then(()=>{r.handleSelected(x,o)})):r.scrollToRow(x.row,x.column).then(()=>{r.handleSelected(x,o)}))},moveCurrentRow(e,t,o){const r=this,l=r,i=r,a=r,{treeConfig:s}=l,{currentRow:c}=i,{afterFullData:d}=a,u=r.computeTreeOpts,p=u.children||u.childrenField;let h;if(c)if(s){const{index:o,items:r}=n.a.findTree(d,e=>e===c,{children:p});e&&o>0?h=r[o-1]:t&&o<r.length-1&&(h=r[o+1])}else{const o=r.getVTRowIndex(c);e&&o>0?h=d[o-1]:t&&o<d.length-1&&(h=d[o+1])}else h=d[0];if(h){o.preventDefault();const e={$table:r,row:h,rowIndex:r.getRowIndex(h),$rowIndex:r.getVMRowIndex(h)};r.scrollToRow(h).then(()=>r.triggerCurrentRowEvent(o,e))}},moveCurrentColumn(e,t,o){const r=this,l=r,n=r,{currentColumn:i}=l,{visibleColumn:a}=n;let s=null;if(i){const o=r.getVTColumnIndex(i);e&&o>0?s=a[o-1]:t&&o<a.length-1&&(s=a[o+1])}else s=a[0];if(s){o.preventDefault();const e={$table:r,column:s,columnIndex:r.getColumnIndex(s),$columnIndex:r.getVMColumnIndex(s)};r.scrollToColumn(s).then(()=>r.triggerCurrentColumnEvent(o,e))}},moveArrowSelected(e,t,o,r,l,n){const i=this,a=i,{highlightCurrentRow:s,highlightCurrentColumn:c}=a,d=i.computeRowOpts,u=i.computeCurrentRowOpts,p=i.computeColumnOpts,h=i.computeCurrentColumnOpts,g=ln(i,n,e,t,o,r,l);(d.isCurrent||s)&&(u.isFollowSelected?i.triggerCurrentRowEvent(n,g):(o||l)&&(d.isCurrent||s)&&i.moveCurrentRow(o,l,n)),(p.isCurrent||c)&&(h.isFollowSelected?i.triggerCurrentColumnEvent(n,g):(t||r)&&(p.isCurrent||c)&&i.moveCurrentColumn(t,r,n))},moveEnterSelected(e,t,o,r,l,n){const i=this,a=i,{highlightCurrentRow:s,highlightCurrentColumn:c}=a,d=i.computeRowOpts,u=i.computeCurrentRowOpts,p=i.computeColumnOpts,h=i.computeCurrentColumnOpts,g=ln(i,n,e,t,o,r,l);(d.isCurrent||s)&&u.isFollowSelected&&i.triggerCurrentRowEvent(n,g),(p.isCurrent||c)&&h.isFollowSelected&&i.triggerCurrentColumnEvent(n,g)},moveSelected(e,t,o,r,l,n){ln(this,n,e,t,o,r,l)},handleCellMousedownEvent(e,t){const o=this,r=o,{editConfig:l,checkboxConfig:n,mouseConfig:i}=r,a=o.computeCheckboxOpts,s=o.computeMouseOpts,c=o.computeEditOpts;if(i&&s.area&&o.triggerCellAreaModnEvent)return o.triggerCellAreaModnEvent(e,t);n&&a.range&&nn(o,e,t),i&&s.selected&&(l&&"cell"!==c.mode||o.handleSelected(t,e))}}};const{getConfig:sn,validators:cn}=r.c;class dn{constructor(e){Object.defineProperty(this,"$options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.assign(this,{$options:e,required:e.required,min:e.min,max:e.max,type:e.type,pattern:e.pattern,validator:e.validator,trigger:e.trigger,maxWidth:e.maxWidth})}get content(){return h(this.$options.content||this.$options.message)}get message(){return this.content}}function un(e,t){return!(!n.a.eqNull(e)&&t>n.a.toNumber(e))}function pn(e,t){return!(!n.a.eqNull(e)&&t<n.a.toNumber(e))}function hn(e,t,o){const{type:r,min:l,max:i,pattern:a}=e,s="array"===r,c="number"===r,d="string"===r,u=""+t;if(!function(e,t){return!(e&&!(n.a.isRegExp(e)?e:new RegExp(e)).test(t))}(a,u))return!1;if(s){if(!n.a.isArray(t))return!1;if(o&&!t.length)return!1;if(!pn(l,t.length))return!1;if(!un(i,t.length))return!1}else if(c){const e=Number(t);if(isNaN(e))return!1;if(!pn(l,e))return!1;if(!un(i,e))return!1}else{if(d&&!n.a.isString(t))return!1;if(o&&!u)return!1;if(!pn(l,u.length))return!1;if(!un(i,u.length))return!1}return!0}var gn={methods:{_fullValidate(e,t){return n.a.isFunction(t)&&fe("vxe.error.notValidators",["fullValidate(rows, callback)","fullValidate(rows)"]),this.beginValidate(e,null,t,!0)},_validate(e,t){return n.a.isFunction(t)&&fe("vxe.error.notValidators",["validate(rows, callback)","validate(rows)"]),this.beginValidate(e,null,t)},_fullValidateField(e,t){const o=(n.a.isArray(t)?t:t?[t]:[]).map(e=>He(this,e));return o.length?this.beginValidate(e,o,null,!0):this.$nextTick()},_validateField(e,t){const o=(n.a.isArray(t)?t:t?[t]:[]).map(e=>He(this,e));return o.length?this.beginValidate(e,o,null):this.$nextTick()},handleValidError(e){const t=this,{validOpts:o}=this;return new Promise(r=>{!1===o.autoPos?(t.dispatchEvent("valid-error",e,null),r()):this.handleEdit(e,{type:"valid-error",trigger:"call"}).then(()=>{setTimeout(()=>{r(this.showValidTooltip(e))},10)})})},handleErrMsgMode(e){const{validOpts:t}=this;if("single"===t.msgMode){const t=Object.keys(e),o={};if(t.length){const r=t[0];o[r]=e[r]}return o}return e},beginValidate(e,t,o,r){const l=this,i=l,a=l,s=l,c={},{editRules:d,treeConfig:u}=i,{isRowGroupStatus:p}=a,{afterFullData:h,pendingRowMaps:g,removeRowMaps:m}=s,f=l.computeTreeOpts,x=l.computeAggregateOpts;let b;!0===e?b=h:e&&(n.a.isFunction(e)?o=e:b=n.a.isArray(e)?e:[e]),b||(b=this.getInsertRecords().concat(this.getUpdateRecords()));const v=[];this.lastCallTime=Date.now(),this.validRuleErr=!1,this.clearValidate();const C={};if(d){const e=t&&t.length?t:this.getColumns(),i=t=>{const o=Se(l,t);if(!m[o]&&!g[o]&&!l.isAggregateRecord(t)&&(r||!this.validRuleErr)){const o=[];e.forEach(e=>{const l=n.a.isString(e)?e:e.field;!r&&this.validRuleErr||!n.a.has(d,l)||o.push(this.validCellRules("all",t,e).catch(({rule:o,rules:n})=>{const i={rule:o,rules:n,rowIndex:this.getRowIndex(t),row:t,columnIndex:this.getColumnIndex(e),column:e,field:l,$table:this};if(c[l]||(c[l]=[]),C[`${Se(this,t)}:${e.id}`]={column:e,row:t,rule:o,content:o.content},c[l].push(i),!r)return this.validRuleErr=!0,Promise.reject(i)}))}),v.push(Promise.all(o))}};if(p)n.a.eachTree(b,i,{children:x.mapChildrenField});else if(u){const e=f.children||f.childrenField;n.a.eachTree(b,i,{children:e})}else b.forEach(i);return Promise.all(v).then(()=>{const e=Object.keys(c);return this.validErrorMaps=this.handleErrMsgMode(C),this.$nextTick().then(()=>{if(e.length)return Promise.reject(c[e[0]][0]);o&&o()})}).catch(e=>new Promise((t,r)=>{const l=()=>{this.$nextTick(()=>{o?(o(c),t()):"obsolete"===sn().validToReject?r(c):t(c)})},n=()=>{var t;e.cell=this.getCellElement(e.row,e.column),(t=e.cell)&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView&&t.scrollIntoView()),this.handleValidError(e).then(l)};if(!1===this.validOpts.autoPos)l();else{const t=e.row,o=e.column;this.scrollToRow(t,o).then(n)}}))}return this.validErrorMaps={},this.$nextTick().then(()=>{o&&o()})},hasCellRules(e,t,o){const{editRules:r}=this,{property:l}=o;if(l&&r){const t=n.a.get(r,l);return t&&n.a.find(t,t=>"all"===e||!t.trigger||e===t.trigger)}return!1},validCellRules(e,t,o,r){const{editRules:l}=this,{property:i}=o,a=[],s=[];if(i&&l){const c=n.a.get(l,i);if(c){const l=n.a.isUndefined(r)?n.a.get(t,i):r;c.forEach(r=>{const{trigger:i,validator:d}=r;if("all"===e||!i||e===i)if(d){const e={cellValue:l,rule:r,rules:c,row:t,rowIndex:this.getRowIndex(t),column:o,columnIndex:this.getColumnIndex(o),field:o.property,$table:this};let u;if(n.a.isString(d)){const t=cn.get(d);if(t){const o=t.tableCellValidatorMethod||t.cellValidatorMethod;o?u=o(e):xe("vxe.error.notValidators",[d])}else xe("vxe.error.notValidators",[d])}else u=d(e);u&&(n.a.isError(u)?(this.validRuleErr=!0,a.push(new dn({type:"custom",trigger:i,content:u.message,rule:new dn(r)}))):u.catch&&s.push(u.catch(e=>{this.validRuleErr=!0,a.push(new dn({type:"custom",trigger:i,content:e&&e.message?e.message:r.content||r.message,rule:new dn(r)}))})))}else(function(e,t){const{required:o}=e,r=n.a.isArray(t)?!t.length:m(t);if(o){if(r)return!1;if(!hn(e,t,o))return!1}else if(!r&&!hn(e,t,o))return!1;return!0})(r,l)||(this.validRuleErr=!0,a.push(new dn(r)))})}}return Promise.all(s).then(()=>{if(a.length){const e={rules:a,rule:a[0]};return Promise.reject(e)}})},_clearValidate(e,t){const{validOpts:o,validErrorMaps:r}=this,l=this.$refs.refValidTooltip,i=n.a.isArray(e)?e:e?[e]:[],a=(n.a.isArray(t)?t:t?[t]:[]).map(e=>He(this,e));let s={};if(l&&l.visible&&l.close(),"single"===o.msgMode)return this.validErrorMaps={},this.$nextTick();if(i.length&&a.length)s=Object.assign({},r),i.forEach(e=>{a.forEach(t=>{const o=`${Se(this,e)}:${t.id}`;s[o]&&delete s[o]})});else if(i.length){const e=i.map(e=>""+Se(this,e));n.a.each(r,(t,o)=>{e.indexOf(o.split(":")[0])>-1&&(s[o]=t)})}else if(a.length){const e=a.map(e=>""+e.id);n.a.each(r,(t,o)=>{e.indexOf(o.split(":")[1])>-1&&(s[o]=t)})}return this.validErrorMaps=s,this.$nextTick()},triggerValidate(e){const{editConfig:t,editStore:o,editRules:r,editOpts:l,validOpts:n}=this,{actived:i}=o;if(r&&"single"===n.msgMode&&(this.validErrorMaps={}),t&&r&&i.row){const{row:t,column:o,cell:r}=i.args;if(this.hasCellRules(e,t,o))return this.validCellRules(e,t,o).then(()=>{"row"===l.mode&&this.clearValidate(t,o)}).catch(({rule:l})=>{if(!l.trigger||e===l.trigger){const e={rule:l,row:t,column:o,cell:r};return this.showValidTooltip(e),Promise.reject(e)}return Promise.resolve()})}return Promise.resolve()},showValidTooltip(e){const{$refs:t,height:o,validStore:r,validErrorMaps:l,tableData:n,validOpts:i}=this,{rule:a,row:s,column:c,cell:d}=e,u=t.refValidTooltip,p=a.content;return r.visible=!0,"single"===i.msgMode?this.validErrorMaps={[`${Se(this,s)}:${c.id}`]:{column:c,row:s,rule:a,content:p}}:this.validErrorMaps=Object.assign({},l,{[`${Se(this,s)}:${c.id}`]:{column:c,row:s,rule:a,content:p}}),this.dispatchEvent("valid-error",e,null),u&&u&&("tooltip"===i.message||"default"===i.message&&!o&&n.length<2)?u.open(d,p):this.$nextTick()}}};function mn(e){const t=e.$xeGantt,o=e,{customStore:r}=o;let l=e.$refs.refElem,n=0;if(t){const e=t.$refs.refGanttContainerElem;e&&(l=e)}l&&(n=l.clientHeight-28),r.maxHeight=Math.max(88,n)}function fn(e,t,o){const r=e.$xeGrid,l=e.$xeGantt;(r||l||e).dispatchEvent("custom",{type:t},o)}var xn={methods:{_getCustomVisible(){const{customStore:e}=this;return e.visible},_openCustom(){const e=this,t=e,{initStore:o,customStore:r}=t;return r.visible=!0,o.custom=!0,e.handleUpdateCustomColumn(),e.checkCustomStatus(),mn(e),e.$nextTick().then(()=>mn(e))},_closeCustom(){const e=this,t=e,{customStore:o}=t,r=e.computeCustomOpts;return o.visible&&(o.visible=!1,r.immediate||e.handleCustom()),e.$nextTick()},_toggleCustom(){const e=this,t=e,{customStore:o}=t;return o.visible?e.closeCustom():e.openCustom()},_saveCustom(){const e=this,t=e,o=e,{customColumnList:r,aggHandleFields:l,rowGroupList:i}=t,a=e.computeCustomOpts,{allowVisible:s,allowSort:c,allowFixed:d,allowResizable:u,allowGroup:p,allowValues:h}=a;return n.a.eachTree(r,(e,t,o,r,l)=>{if(l)e.fixed=l.fixed;else{if(c){const o=t+1;e.renderSortNumber=o}d&&(e.fixed=e.renderFixed)}u&&(!e.renderVisible||e.children&&!e.children.length||e.renderResizeWidth!==e.renderWidth&&(e.resizeWidth=e.renderResizeWidth,e.renderWidth=e.renderResizeWidth)),s&&(e.visible=e.renderVisible),p&&h&&(e.aggFunc=e.renderAggFn)}),t.isCustomStatus=!0,p&&h&&e.handlePivotTableAggregateData&&(i.length!==l.length||i.some((e,t)=>e.field!==l[t])?l.length?e.setRowGroups(l):e.clearRowGroups():h&&e.handleUpdateAggData()),c&&(o.collectColumn=r),e.saveCustomStore("confirm")},_cancelCustom(){const{customColumnList:e,customStore:t}=this,{oldSortMaps:o,oldFixedMaps:r,oldVisibleMaps:l}=t,i=this.computeCustomOpts,{allowVisible:a,allowSort:s,allowFixed:c,allowResizable:d}=i;return n.a.eachTree(e,e=>{const t=e.getKey(),n=!!l[t],i=r[t]||"";a&&(e.renderVisible=n,e.visible=n),c&&(e.renderFixed=i,e.fixed=i),s&&(e.renderSortNumber=o[t]||0),d&&(e.renderResizeWidth=e.renderWidth)},{children:"children"}),this.$nextTick()},_resetCustom(e){const t=this,o=t,r=t,{rowGroupList:l}=o,{collectColumn:i}=r,a=t.computeCustomOpts,{checkMethod:s}=a,c=Object.assign({visible:!0,resizable:!0===e,fixed:!0===e,sort:!0===e,aggFunc:!0===e},e),d=[];if(n.a.eachTree(i,e=>{c.resizable&&(e.resizeWidth=0),c.fixed&&(e.fixed=e.defaultFixed),c.sort&&(e.renderSortNumber=e.sortNumber,e.parentId=e.defaultParentId),s&&!s({$table:t,column:e})||(e.visible=e.defaultVisible),c.aggFunc&&(e.aggFunc=e.defaultAggFunc,e.renderAggFn=e.defaultAggFunc),e.renderResizeWidth=e.renderWidth,d.push(e)}),c.sort){const e=n.a.toArrayTree(n.a.orderBy(d,"renderSortNumber"),{key:"id",parentKey:"parentId",children:"children"});r.collectColumn=e,r.tableFullColumn=Qe(e)}return o.isCustomStatus=!1,t.handleCustom().then(()=>{if(c.aggFunc&&t.handlePivotTableAggregateData){const e=t.computeRowGroupFields;(e?e.length:l.length)?e&&e.length?t.setRowGroups(e):t.clearRowGroups():t.handleUpdateAggData()}t.saveCustomStore("reset")})},_toggleCustomAllCheckbox(){const{customStore:e}=this,t=!e.isAll;return this.setCustomAllCheckbox(t)},_setCustomAllCheckbox(e){const t=this,o=t,{customStore:r}=o,{customColumnList:l}=o,i=t.computeCustomOpts,{checkMethod:a,visibleMethod:s}=i,c=!!e;i.immediate?(n.a.eachTree(l,e=>{s&&!s({$table:t,column:e})||a&&!a({$table:t,column:e})||(e.visible=c,e.renderVisible=c,e.halfVisible=!1)}),r.isAll=c,o.isCustomStatus=!0,t.handleCustom(),t.saveCustomStore("update:visible")):(n.a.eachTree(l,e=>{s&&!s({$table:t,column:e})||a&&!a({$table:t,column:e})||(e.renderVisible=c,e.halfVisible=!1)}),r.isAll=c),t.checkCustomStatus()},checkCustomStatus(){const e=this,t=e,o=e,{customStore:r}=t,{collectColumn:l}=o,n=e.computeCustomOpts,{checkMethod:i}=n;r.isAll=l.every(t=>!!i&&!i({$table:e,column:t})||t.renderVisible),r.isIndeterminate=!r.isAll&&l.some(t=>(!i||i({$table:e,column:t}))&&(t.renderVisible||t.halfVisible))},emitCustomEvent(e,t){const o=this.$xeGrid,r=this.$xeGantt;(o||r||this).dispatchEvent("custom",{type:e},t)},triggerCustomEvent(e){const t=this,o=t,{customStore:r}=o;r.visible?(this.closeCustom(),fn(t,"close",e)):(r.btnEl=e.target,this.openCustom(),fn(t,"open",e))},customOpenEvent(e){const t=this,o=t,{customStore:r}=o;r.visible&&(r.activeBtn=!0,r.btnEl=e.target,t.openCustom(),fn(t,"open",e))},customCloseEvent(e){const t=this,o=t,{customStore:r}=o;r.visible&&(r.activeBtn=!1,t.closeCustom(),fn(t,"close",e))},handleUpdateCustomColumn(){const e=this,{customStore:t}=e,{collectColumn:o}=this;if(t.visible){const r={},l={},i={};n.a.eachTree(o,e=>{const t=e.getKey();e.renderFixed=e.fixed,e.renderVisible=e.visible,e.renderResizeWidth=e.renderWidth,r[t]=e.renderSortNumber,l[t]=e.fixed,i[t]=e.visible}),t.oldSortMaps=r,t.oldFixedMaps=l,t.oldVisibleMaps=i,e.customColumnList=o.slice(0)}}}};const{getConfig:bn,getIcon:vn,getI18n:Cn,renderer:wn,globalResize:En,globalEvents:yn,globalMixins:Tn,renderEmptyElement:Rn}=r.c;function Sn(e){const t=e,o=e.computeRowField;t.currKeyField=o,t.isCurrDeepKey=o.indexOf(".")>-1}function On(e,t,o){const r=t,l=t,{showHeader:n,showFooter:i}=r,{tableData:a,tableColumn:s,tableGroupColumn:c,columnStore:d,footerTableData:u}=l,p="left"===o,h=p?d.leftList:d.rightList;return e("div",{ref:p?"refLeftContainer":"refRightContainer",class:`vxe-table--fixed-${o}-wrapper`},[n?e(Sr,{props:{fixedType:o,tableData:a,tableColumn:s,tableGroupColumn:c,fixedColumn:h},ref:o+"Header"}):Rn(t),e(wr,{props:{fixedType:o,tableData:a,tableColumn:s,fixedColumn:h},ref:o+"Body"}),i?e(Dr,{props:{footerTableData:u,tableColumn:s,fixedColumn:h,fixedType:o},ref:o+"Footer"}):Rn(t)])}function $n(e,t){const o=t.$scopedSlots,r=t.$xeGrid,l=t.$xeGantt,n=t.computeEmptyOpts,i=o.empty;let a="";const s={$table:t,$grid:r,$gantt:l};if(i)a=i.call(t,s);else{const o=n.name?wn.get(n.name):null,r=o?o.renderTableEmpty||o.renderTableEmptyView||o.renderEmpty:null;a=r?rt(r.call(t,e,n,s)):h(t.emptyText)||Cn("vxe.table.emptyText")}return a}const Fn=(e,t)=>{const o=t,r=t,l=Lt(t),{dragConfig:n}=o,{dragRow:i,dragCol:a,dragTipText:s}=r,c=t.computeColumnDragOpts,d=t.computeRowDragOpts,u=(d.slots||{}).tip||(n&&n.slots?n.slots.rowTip:null),p=(c.slots||{}).tip,h=i||(d.isCrossTableDrag?l.row:null);return h&&u?t.callSlot(u,{row:h},e):a&&p?t.callSlot(p,{column:a},e):[e("span",s)]},Dn=(e,t)=>{const o=t,r=Lt(t),{dragRow:l,dragCol:n}=o,i=t.computeRowOpts,a=t.computeColumnOpts,s=t.computeRowDragOpts,c=t.computeColumnDragOpts,d=l||(s.isCrossTableDrag?r.row:null);return i.drag||a.drag?e("div",{class:"vxe-table--drag-wrapper"},[e("div",{ref:"refDragRowLineElem",class:["vxe-table--drag-row-line",{"is--guides":s.showGuidesStatus}]}),e("div",{ref:"refDragColLineElem",class:["vxe-table--drag-col-line",{"is--guides":c.showGuidesStatus}]}),d&&s.showDragTip||n&&c.showDragTip?e("div",{ref:"refDragTipElem",class:"vxe-table--drag-sort-tip"},[e("div",{class:"vxe-table--drag-sort-tip-wrapper"},[e("div",{class:"vxe-table--drag-sort-tip-status"},[e("span",{class:["vxe-table--drag-sort-tip-normal-status",d?vn().TABLE_DRAG_STATUS_ROW:vn().TABLE_DRAG_STATUS_COLUMN]}),e("span",{class:["vxe-table--drag-sort-tip-sub-status",vn().TABLE_DRAG_STATUS_SUB_ROW]}),e("span",{class:["vxe-table--drag-sort-tip-disabled-status",vn().TABLE_DRAG_DISABLED]})]),e("div",{class:"vxe-table--drag-sort-tip-content"},Fn(e,t))])]):Rn(t)]):Rn(t)};function kn(e){const t=e.$refs.refElem;t&&t.clientWidth&&t.clientHeight&&e.recalculate()}function Mn(e,t){const o=t,r=t,l=t,i=t.$xeGrid,a=t.$xeGantt,{treeConfig:s}=o,{expandColumn:c,isRowGroupStatus:d}=r,u=t.computeTableRowExpandedList,p=t.computeExpandOpts,{mode:h}=p;if("fixed"!==h)return Rn(t);const g=[e("div",{key:"repY",ref:"refRowExpandYSpaceElem"})];if(c){const{handleGetRowId:o}=$e(t);u.forEach(r=>{const u=t.computeExpandOpts,{height:p,padding:h,indent:m}=u,{fullAllDataRowIdData:f,fullColumnIdData:x}=l,b=t.computeTreeOpts,{transform:v,seqMode:C}=b,w={},E=o(r),y=f[E],T=x[c.id]||{};let R=0,S=-1,O=-1,$=-1,F=-1;y&&($=y.index,F=y.$index,O=y._index,R=y.level,S=y.seq,d||s&&v&&"increasing"===C?S=y._index+1:s&&"fixed"===C&&(S=y._tIndex+1)),p&&(w.height=p+"px"),(d||s)&&(w.paddingLeft=R*(n.a.isNumber(m)?m:b.indent)+30+"px");let D=-1,k=-1,M=-1;T&&(D=T.index,k=T.$index,M=T._index);const I={$table:t,$grid:i,$gantt:a,seq:S,column:c,columnIndex:D,$columnIndex:k,_columnIndex:M,fixed:"",type:"body",level:R,rowid:E,row:r,rowIndex:$,$rowIndex:F,_rowIndex:O,isHidden:!1,isEdit:!1,visibleData:[],data:[],items:[]};g.push(e("div",{key:E,class:["vxe-body--row-expanded-cell",{"is--padding":h,"is--ellipsis":p}],attrs:{rowid:E},style:w},c.renderData(e,I)))})}return e("div",{ref:"refRowExpandElem",class:"vxe-table--row-expanded-wrapper"},g)}function In(e,t){return e("div",{key:"vsx",ref:"refScrollXVirtualElem",class:"vxe-table--scroll-x-virtual"},[e("div",{ref:"refScrollXLeftCornerElem",class:"vxe-table--scroll-x-left-corner"}),e("div",{ref:"refScrollXWrapperElem",class:"vxe-table--scroll-x-wrapper"},[e("div",{ref:"refScrollXHandleElem",class:"vxe-table--scroll-x-handle",on:{scroll:t.triggerVirtualScrollXEvent}},[e("div",{ref:"refScrollXSpaceElem",class:"vxe-table--scroll-x-space"})]),e("div",{class:"vxe-table--scroll-x-handle-appearance"})]),e("div",{ref:"refScrollXRightCornerElem",class:"vxe-table--scroll-x-right-corner"})])}function An(e,t){return e("div",{ref:"refScrollYVirtualElem",class:"vxe-table--scroll-y-virtual"},[e("div",{ref:"refScrollYTopCornerElem",class:"vxe-table--scroll-y-top-corner"}),e("div",{ref:"refScrollYWrapperElem",class:"vxe-table--scroll-y-wrapper"},[e("div",{ref:"refScrollYHandleElem",class:"vxe-table--scroll-y-handle",on:{scroll:t.triggerVirtualScrollYEvent}},[e("div",{ref:"refScrollYSpaceElem",class:"vxe-table--scroll-y-space"})])]),e("div",{ref:"refScrollYBottomCornerElem",class:"vxe-table--scroll-y-bottom-corner"})])}function Ln(e,t){const o=t,r=t,{showHeader:l,showFooter:n}=o,{overflowX:i,tableData:a,tableColumn:s,tableGroupColumn:c,footerTableData:d,columnStore:u}=r,{leftList:p,rightList:h}=u;return e("div",{ref:"refTableViewportElem",class:"vxe-table--viewport-wrapper"},[e("div",{class:"vxe-table--main-wrapper"},[l?e(Sr,{ref:"refTableHeader",props:{tableData:a,tableColumn:s,tableGroupColumn:c}}):Rn(t),e(wr,{ref:"refTableBody",props:{tableData:a,tableColumn:s}}),n?e(Dr,{ref:"refTableFooter",props:{footerTableData:d,tableColumn:s}}):Rn(t)]),e("div",{class:"vxe-table--fixed-wrapper"},[p&&p.length&&i?On(e,t,"left"):Rn(t),h&&h.length&&i?On(e,t,"right"):Rn(t)]),Mn(e,t)])}function _n(e,t){return e("div",{class:"vxe-table--layout-wrapper"},t.computeScrollbarYToLeft?[An(e,t),Ln(e,t)]:[Ln(e,t),An(e,t)])}var Hn={name:"VxeTable",mixins:[Tn.sizeMixin,rl,al,El,on,an,gn,xn],props:kt,provide(){return{$xeTable:this,xecolgroup:null}},inject:{$xeTabs:{default:null},$xeGrid:{default:null},$xeGantt:{default:null}},data(){const e=n.a.uniqueId();return Object.assign(Object.assign({xID:e},{staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,lastScrollTime:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],rowGroupColumn:null,expandColumn:null,checkboxColumn:null,radioColumn:null,treeNodeColumn:null,hasFixedColumn:!1,upDataFlag:0,reColumnFlag:0,initStore:{filter:!1,import:!1,export:!1,custom:!1},customStore:{btnEl:null,isAll:!1,isIndeterminate:!1,activeBtn:!1,activeWrapper:!1,visible:!1,maxHeight:0,oldSortMaps:{},oldFixedMaps:{},oldVisibleMaps:{}},customColumnList:[],filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],autoMinList:[],scaleList:[],scaleMinList:[],autoList:[],remainList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},focused:{row:null,column:null}},tooltipStore:{row:null,column:null,content:null,visible:!1,type:null,currOpts:{}},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isTitle:!1,isFooter:!1},visiblwRowsFlag:1,isRowGroupStatus:!1,rowGroupList:[],aggHandleFields:[],aggHandleAggColumns:[],rowGroupExpandedFlag:1,rowExpandedFlag:1,treeExpandedFlag:1,updateCheckboxFlag:1,pendingRowFlag:1,insertRowFlag:1,removeRowFlag:1,mergeHeadFlag:1,mergeBodyFlag:1,mergeFootFlag:1,rowHeightStore:{large:52,default:48,medium:44,small:40,mini:36},scrollVMLoading:!1,scrollYHeight:0,scrollYTop:0,isScrollYBig:!1,scrollXLeft:0,scrollXWidth:0,isScrollXBig:!1,lazScrollLoading:!1,rowExpandHeightFlag:1,calcCellHeightFlag:1,resizeHeightFlag:1,resizeWidthFlag:1,isCustomStatus:!1,isCrossDragRow:!1,dragRow:null,isCrossDragCol:!1,dragCol:null,dragTipText:"",isDragResize:!1,isRowLoading:!1,isColLoading:!1}),{reScrollFlag:0,reLayoutFlag:0,footFlag:0,mergeFooteCellFlag:0,crossTableDragRowInfo:At})},computed:Object.assign(Object.assign({},{}),{tableId(){return this.computeTableId},computeTableId(){const e=this,t=e,o=e.$xeGrid,r=e.$xeGantt,{id:l}=t;return l?n.a.isFunction(l)?""+(l({$table:e,$grid:o,$gantt:r})||""):""+l:""},computeRowField(){const e=this.computeRowOpts;return""+(this.rowId||e.keyField||"_X_ROW_KEY")},validOpts(){return this.computeValidOpts},computeValidOpts(){return Object.assign({},bn().table.validConfig,this.validConfig)},sXOpts(){return this.computeVirtualXOpts},computeSXOpts(){return this.computeVirtualXOpts},computeScrollXThreshold(){const e=this.computeVirtualXOpts,{threshold:t}=e;return t?n.a.toNumber(t):0},sYOpts(){return this.computeVirtualYOpts},computeSYOpts(){return this.computeVirtualYOpts},computeVirtualXOpts(){const{virtualXConfig:e,scrollX:t}=this,o=bn().table.virtualXConfig,r=bn().table.scrollX;return e?Object.assign({},o,e):t?Object.assign({},r,t):o?Object.assign({},o,e):Object.assign({},r,t)},computeVirtualYOpts(){const{virtualYConfig:e,scrollY:t}=this,o=bn().table.virtualYConfig,r=bn().table.scrollY;return e?Object.assign({},o,e):t?Object.assign({},r,t):o?Object.assign({},o,e):Object.assign({},r,t)},computeScrollbarOpts(){return Object.assign({},bn().table.scrollbarConfig,this.scrollbarConfig)},computeScrollbarXToTop(){const e=this.computeScrollbarOpts;return!(!e.x||"top"!==e.x.position)},computeScrollbarYToLeft(){const e=this.computeScrollbarOpts;return!(!e.y||"left"!==e.y.position)},computeScrollYThreshold(){const e=this.computeVirtualYOpts,{threshold:t}=e;return t?n.a.toNumber(t):0},rowHeightMaps(){return this.computeRowHeightMaps},computeRowHeightMaps(){return this.rowHeightStore},computeDefaultRowHeight(){const e=this.computeSize;return this.computeRowHeightMaps[e||"default"]||18},columnOpts(){return this.computeColumnOpts},computeColumnOpts(){return Object.assign({},bn().table.columnConfig,this.columnConfig)},computeCurrentColumnOpts(){return Object.assign({},bn().table.currentColumnConfig,this.currentColumnConfig)},computeCellOpts(){const e=Object.assign({},bn().table.cellConfig,this.cellConfig);return e.height&&(e.height=n.a.toNumber(e.height)),e},computeHeaderCellOpts(){const e=this.$xeGantt,t=Object.assign({},bn().table.headerCellConfig,this.headerCellConfig),o=this.computeDefaultRowHeight,r=this.computeCellOpts;let l=n.a.toNumber(_e(t.height||r.height));if(e){const t=e.computeTaskScaleConfs;if(t&&t.length>2){const e=o/2*t.length;l=Math.max(e,l)}}return t.height=l,t},computeFooterCellOpts(){const e=Object.assign({},bn().table.footerCellConfig,this.footerCellConfig),t=this.computeCellOpts;return e.height=n.a.toNumber(_e(e.height||t.height)),e},rowOpts(){return this.computeRowOpts},computeRowOpts(){return Object.assign({},bn().table.rowConfig,this.rowConfig)},computeAggregateOpts(){return Object.assign({},bn().table.aggregateConfig||bn().table.rowGroupConfig,this.aggregateConfig||this.rowGroupConfig)},computeRowGroupOpts(){return this.computeAggregateOpts},computeCurrentRowOpts(){return Object.assign({},bn().table.currentRowConfig,this.currentRowConfig)},computeRowDragOpts(){return Object.assign({},bn().table.rowDragConfig,this.rowDragConfig)},computeColumnDragOpts(){return Object.assign({},bn().table.columnDragConfig,this.columnDragConfig)},resizeOpts(){return this.computeResizeOpts},computeResizeOpts(){return Object.assign({},bn().table.resizeConfig,this.resizeConfig)},resizableOpts(){return this.computeResizableOpts},computeResizableOpts(){return Object.assign({},bn().table.resizableConfig,this.resizableConfig)},seqOpts(){return this.computeSeqOpts},computeSeqOpts(){return Object.assign({startIndex:0},bn().table.seqConfig,this.seqConfig)},radioOpts(){return this.computeRadioOpts},computeRadioOpts(){return Object.assign({},bn().table.radioConfig,this.radioConfig)},checkboxOpts(){return this.computeCheckboxOpts},computeCheckboxOpts(){return Object.assign({},bn().table.checkboxConfig,this.checkboxConfig)},tooltipOpts(){return this.computeTooltipOpts},computeTooltipOpts(){return Object.assign({},bn().tooltip,bn().table.tooltipConfig,this.tooltipConfig)},tipConfig(){return Object.assign({},this.tooltipOpts)},computeHeaderTooltipOpts(){return Object.assign({},bn().tooltip,bn().table.headerTooltipConfig,this.headerTooltipConfig)},computeFooterTooltipOpts(){return Object.assign({},bn().tooltip,bn().table.footerTooltipConfig,this.footerTooltipConfig)},computeTableTipConfig(){const{tooltipStore:e}=this,t=this.computeTooltipOpts;return Object.assign({},t,e.currOpts)},computeValidTipConfig(){const e=this.computeTooltipOpts;return Object.assign({},e)},validTipOpts(){return Object.assign({isArrow:!1},this.tooltipOpts)},editOpts(){return this.computeEditOpts},computeEditOpts(){return Object.assign({},bn().table.editConfig,this.editConfig)},sortOpts(){return this.computeSortOpts},computeSortOpts(){return Object.assign({orders:["asc","desc",null]},bn().table.sortConfig,this.sortConfig)},filterOpts(){return this.computeFilterOpts},computeFilterOpts(){return Object.assign({},bn().table.filterConfig,this.filterConfig)},mouseOpts(){return this.computeMouseOpts},computeMouseOpts(){return Object.assign({},bn().table.mouseConfig,this.mouseConfig)},areaOpts(){return this.computeAreaOpts},computeAreaOpts(){return Object.assign({},bn().table.areaConfig,this.areaConfig)},keyboardOpts(){return this.computeKeyboardOpts},computeKeyboardOpts(){return Object.assign({},bn().table.keyboardConfig,this.keyboardConfig)},clipOpts(){return this.computeClipOpts},computeClipOpts(){return Object.assign({},bn().table.clipConfig,this.clipConfig)},fnrOpts(){return this.computeFnrOpts},computeFNROpts(){return this.computeFnrOpts},computeFnrOpts(){return Object.assign({},bn().table.fnrConfig,this.fnrConfig)},headerCtxMenu(){return this.computeHeaderMenu},computeHeaderMenu(){const e=this.computeMenuOpts.header;return e&&e.options?e.options:[]},bodyCtxMenu(){return this.computeBodyMenu},computeBodyMenu(){const e=this.computeMenuOpts.body;return e&&e.options?e.options:[]},footerCtxMenu(){return this.computeFooterMenu},computeFooterMenu(){const e=this.computeMenuOpts.footer;return e&&e.options?e.options:[]},isCtxMenu(){return this.computeIsContentMenu},computeIsMenu(){return this.computeIsContentMenu},computeIsContentMenu(){const e=this.computeMenuOpts,t=this.computeHeaderMenu,o=this.computeBodyMenu,r=this.computeFooterMenu;return!(!this.contextMenu&&!this.menuConfig||!a(e)||!(t.length||o.length||r.length))},ctxMenuList(){return this.computeMenuList},computeMenuList(){const{ctxMenuStore:e}=this,t=[];return e.list.forEach(e=>{e.forEach(e=>{t.push(e)})}),t},ctxMenuOpts(){return this.computeMenuOpts},computeMenuOpts(){return Object.assign({},bn().table.menuConfig,this.contextMenu,this.menuConfig)},computeLeftFixedWidth(){const{columnStore:e}=this,{leftList:t}=e;let o=0;for(let e=0;e<t.length;e++){o+=t[e].renderWidth}return o},computeRightFixedWidth(){const{columnStore:e}=this,{rightList:t}=e;let o=0;for(let e=0;e<t.length;e++){o+=t[e].renderWidth}return o},exportOpts(){return this.computeExportOpts},computeExportOpts(){return Object.assign({},bn().table.exportConfig,this.exportConfig)},importOpts(){return this.computeImportOpts},computeImportOpts(){return Object.assign({},bn().table.importConfig,this.importConfig)},printOpts(){return this.computePrintOpts},computePrintOpts(){return Object.assign({},bn().table.printConfig,this.printConfig)},expandOpts(){return this.computeExpandOpts},computeExpandOpts(){return Object.assign({},bn().table.expandConfig,this.expandConfig)},treeOpts(){return this.computeTreeOpts},computeTreeOpts(){return Object.assign({},bn().table.treeConfig,this.treeConfig)},emptyOpts(){return this.computeEmptyOpts},computeEmptyOpts(){return Object.assign({},bn().table.emptyRender,this.emptyRender)},loadingOpts(){return this.computeLoadingOpts},computeLoadingOpts(){return Object.assign({},bn().table.loadingConfig,this.loadingConfig)},computeCellOffsetWidth(){return this.border?Math.max(2,Math.ceil(this.scrollbarWidth/this.tableColumn.length)):1},customOpts(){return this.computeCustomOpts},computeCustomOpts(){return Object.assign({},bn().table.customConfig,this.customConfig)},computeTableRowExpandedList(){const{tableData:e,rowExpandedFlag:t,expandColumn:o,rowGroupExpandedFlag:r,treeExpandedFlag:l}=this,{visibleDataRowIdData:i,rowExpandedMaps:a}=this,s=[];return e.length&&o&&t&&r&&l&&n.a.each(a,(e,t)=>{i[t]&&s.push(e)}),s},computeAutoWidthColumnList(){const{tableColumn:e,visibleColumn:t}=this;return e.length||t.length?t.filter(e=>"auto"===e.width||"auto"===e.minWidth):[]},computeFixedColumnSize(){const{tableColumn:e}=this,{collectColumn:t}=this;let o=0;return e.length&&t.length&&t.forEach(e=>{e.renderFixed&&o++}),o},fixedColumnSize(){return this.computeFixedColumnSize},computeIsMaxFixedColumn(){const e=this.computeFixedColumnSize,t=this.columnOpts,{maxFixedSize:o}=t;return!!o&&e>=o},computeTableBorder(){const{border:e}=this;return!0===e?"full":e||"default"},isAllCheckboxDisabled(){const{tableFullData:e,tableData:t,treeConfig:o,checkboxOpts:r}=this,{strict:l,checkMethod:n}=r;return!!l&&(!t.length&&!e.length||!!n&&e.every(e=>!n({row:e})))},computeVirtualScrollBars(){const{overflowX:e,scrollXLoad:t,overflowY:o,scrollYLoad:r}=this;return{x:e&&t,y:o&&r}},computeRowGroupFields(){return this.computeAggregateOpts.groupFields},computeRowGroupColumns(){const{rowGroupList:e}=this,{fullColumnFieldData:t}=this,o=[];return e.forEach(e=>{const r=t[e.field];r&&o.push(r.column)}),o},tabsResizeFlag(){const e=this.$xeTabs;return e?e.reactData.resizeFlag:null},computeVxeLanguage:()=>r.c.getLanguage()}),watch:{data(e){const t=this,o=t,{initStatus:r}=this;e&&e.length>=5e4&&fe("vxe.error.errLargeData",["loadData(data), reloadData(data)"]),this.loadTableData(e||[],!0).then(()=>{const{scrollXLoad:e,scrollYLoad:l,expandColumn:n}=o,i=t.computeExpandOpts;this.inited=!0,this.initStatus=!0,r||this.handleLoadDefaults(),(e||l)&&n&&"fixed"!==i.mode&&fe("vxe.error.scrollErrProp",["column.type=expand"]),this.recalculate()})},staticColumns(e){this.$nextTick(()=>this.handleInitColumn(n.a.clone(e)))},tableColumn(){this.analyColumnWidth()},upDataFlag(){this.$nextTick().then(()=>this.updateData())},reColumnFlag(){this.$nextTick().then(()=>this.refreshColumn())},computeSize(){this.reLayoutFlag++},showHeader(){this.reLayoutFlag++},showFooter(){this.reLayoutFlag++},overflowX(){this.reLayoutFlag++},overflowY(){this.reLayoutFlag++},height(){this.reLayoutFlag++},maxHeight(){this.reLayoutFlag++},computeScrollbarXToTop(){this.reLayoutFlag++},computeScrollbarYToLeft(){this.reLayoutFlag++},computeVxeLanguage(){this.reLayoutFlag++},reLayoutFlag(){const e=this;e.$nextTick(()=>e.recalculate(!0))},footerData(){this.footFlag++},footFlag(){this.updateFooter()},syncResize(e){const t=this;e&&(kn(t),t.$nextTick(()=>{kn(t),setTimeout(()=>kn(t))}))},tabsResizeFlag(){this.handleGlobalResizeEvent()},mergeCells(e){!function(e,t){const o=e;o.mergeBodyList=[],o.mergeBodyMaps={},o.mergeBodyCellMaps={},e.setMergeCells(t)}(this,e)},mergeHeaderCells(e){!function(e,t){const o=e;o.mergeHeaderList=[],o.mergeHeaderMaps={},o.mergeHeaderCellMaps={},e.setMergeHeaderCells(t)}(this,e)},mergeFooterCells(){this.mergeFooteCellFlag++},mergeFooterItems(){this.mergeFooteCellFlag++},mergeFooteCellFlag(){!function(e,t){const o=e;o.mergeFooterList=[],o.mergeFooterMaps={},o.mergeFooterCellMaps={},e.setMergeFooterCells(t)}(this,this.mergeFooterCells||this.mergeFooterItems||[])},computeRowGroupFields(e){this.handleUpdateRowGroup(e)},computeRowField(){const e=this,t=e,o=e,{inited:r,tableFullData:l}=o;r&&(Sn(e),t.tableData=[],e.$nextTick(()=>{e.reloadData(l)}))}},created(){const e=this;n.a.assign(this,{tZindex:0,currKeyField:"",isCurrDeepKey:!1,elemStore:{},scrollXStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},scrollYStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,customHeight:0,customMinHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterGroupFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableFullGroupData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},fullDataRowIdData:{},visibleDataRowIdData:{},sourceDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},mergeHeaderList:[],mergeHeaderMaps:{},mergeHeaderCellMaps:{},mergeBodyList:[],mergeBodyMaps:{},mergeBodyCellMaps:{},mergeFooterList:[],mergeFooterMaps:{},mergeFooterCellMaps:{},rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},rowGroupExpandedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},selectCheckboxMaps:{},pendingRowMaps:{},insertRowMaps:{},removeRowMaps:{},cvCacheMaps:{},tHeaderHeight:0,tBodyHeight:0,tFooterHeight:0,teleportToWrapperElem:null,inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1}),Sn(this);const{data:t,exportConfig:o,importConfig:r,treeConfig:l,showOverflow:i,highlightCurrentRow:s,highlightCurrentColumn:c}=e,{scrollXStore:d,scrollYStore:u}=this,p=this.computeColumnOpts,h=this.computeEditOpts,g=this.computeTreeOpts,m=this.computeRadioOpts,f=this.computeCheckboxOpts,x=this.computeExpandOpts,b=this.computeRowOpts,v=this.computeCustomOpts,C=this.computeMouseOpts,w=this.computeExportOpts,E=this.computeImportOpts,y=this.computeCurrentRowOpts,T=this.computeCurrentColumnOpts,R=this.computeKeyboardOpts,S=this.computeAggregateOpts,O=this.computeRowDragOpts,{groupFields:$}=S;if(e.rowId&&fe("vxe.error.delProp",["row-id","row-config.keyField"]),e.rowKey&&fe("vxe.error.delProp",["row-key","row-config.useKey"]),e.columnKey&&fe("vxe.error.delProp",["column-id","column-config.useKey"]),e.rowId||b.keyField||!(f.reserve||f.checkRowKeys||m.reserve||m.checkRowKey||x.expandRowKeys||g.expandRowKeys)||fe("vxe.error.reqProp",["row-config.keyField"]),e.editConfig&&h.showStatus&&!e.keepSource&&fe("vxe.error.reqProp",["keep-source"]),l&&(g.showLine||g.line)&&!i&&fe("vxe.error.reqProp",["show-overflow"]),l&&!g.transform&&e.stripe&&fe("vxe.error.noTree",["stripe"]),!e.showFooter||e.footerMethod||e.footerData||fe("vxe.error.reqProp",["footer-data | footer-method"]),b.height&&fe("vxe.error.delProp",["row-config.height","cell-config.height"]),this.tooltipOpts.enabled&&fe("vxe.error.delProp",["tooltip-config.enabled","tooltip-config.showAll"]),this.highlightCurrentRow&&fe("vxe.error.delProp",["highlight-current-row","row-config.isCurrent"]),this.highlightHoverRow&&fe("vxe.error.delProp",["highlight-hover-row","row-config.isHover"]),this.highlightCurrentColumn&&fe("vxe.error.delProp",["highlight-current-column","column-config.isCurrent"]),this.highlightHoverColumn&&fe("vxe.error.delProp",["highlight-hover-column","column-config.isHover"]),e.resizable&&fe("vxe.error.delProp",["resizable","column-config.resizable"]),e.virtualXConfig&&e.scrollX&&fe("vxe.error.notSupportProp",["virtual-x-config","scroll-x","scroll-x=null"]),e.virtualYConfig&&e.scrollY&&fe("vxe.error.notSupportProp",["virtual-y-config","scroll-y","scroll-y=null"]),e.aggregateConfig&&e.rowGroupConfig&&fe("vxe.error.notSupportProp",["aggregate-config","row-group-config","row-group-config=null"]),r&&E.types&&!E.importMethod&&!n.a.includeArrays(n.a.keys(E._typeMaps),E.types)&&fe("vxe.error.errProp",["export-config.types="+E.types.join(","),E.types.filter(e=>n.a.includes(n.a.keys(E._typeMaps),e)).join(",")||n.a.keys(E._typeMaps).join(",")]),o&&w.types&&!w.exportMethod&&!n.a.includeArrays(n.a.keys(w._typeMaps),w.types)&&fe("vxe.error.errProp",["export-config.types="+w.types.join(","),w.types.filter(e=>n.a.includes(n.a.keys(w._typeMaps),e)).join(",")||n.a.keys(w._typeMaps).join(",")]),e.id||(e.customConfig?a(v):v.enabled)&&v.storage&&xe("vxe.error.reqProp",["id"]),l&&f.range&&xe("vxe.error.noTree",["checkbox-config.range"]),b.height&&!this.showOverflow&&fe("vxe.error.notProp",["table.show-overflow"]),this.triggerCellAreaModnEvent||(e.areaConfig&&fe("vxe.error.notProp",["area-config"]),e.clipConfig&&fe("vxe.error.notProp",["clip-config"]),e.fnrConfig&&fe("vxe.error.notProp",["fnr-config"]),!C.area)){if(!this.handlePivotTableAggregateData){if(v.allowGroup)return void xe("vxe.error.notProp",["custom-config.allowGroup"]);if(v.allowValues)return void xe("vxe.error.notProp",["custom-config.allowValues"])}l&&b.drag&&!g.transform&&fe("vxe.error.notSupportProp",["row-config.drag","tree-config.transform=false","tree-config.transform=true"]),l&&O.isCrossTableDrag&&!O.isCrossDrag&&xe("vxe.error.reqSupportProp",["tree-config & row-drag-config.isCrossTableDrag","row-drag-config.isCrossDrag"]),e.dragConfig&&fe("vxe.error.delProp",["drag-config","row-drag-config"]),e.rowGroupConfig&&fe("vxe.error.delProp",["row-group-config","aggregate-config"]),S.countFields&&fe("vxe.error.delProp",["row-group-config.countFields","column.agg-func"]),S.aggregateMethod&&fe("vxe.error.delProp",["row-group-config.aggregateMethod","aggregate-config.calcValuesMethod"]),S.countMethod&&fe("vxe.error.delProp",["aggregate-config.countMethod","aggregate-config.calcValuesMethod"]),e.treeConfig&&g.children&&fe("vxe.error.delProp",["tree-config.children","tree-config.childrenField"]),e.treeConfig&&g.line&&fe("vxe.error.delProp",["tree-config.line","tree-config.showLine"]),C.area&&C.selected&&fe("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),C.area&&e.treeConfig&&!g.transform&&xe("vxe.error.noTree",["mouse-config.area"]),e.editConfig&&h.activeMethod&&fe("vxe.error.delProp",["table.edit-config.activeMethod","table.edit-config.beforeEditMethod"]),e.treeConfig&&f.isShiftKey&&xe("vxe.error.errConflicts",["tree-config","checkbox-config.isShiftKey"]),f.halfField&&fe("vxe.error.delProp",["checkbox-config.halfField","checkbox-config.indeterminateField"]),l&&n.a.arrayEach(["rowField","parentField","childrenField","hasChildField","mapChildrenField"],e=>{const t=g[e];t&&t.indexOf(".")>-1&&xe("vxe.error.errProp",[`${e}=${t}`,`${e}=${t.split(".")[0]}`])}),this.contextMenu&&(fe("vxe.error.delProp",["context-menu","menu-config"]),n.a.isObject(this.contextMenu)||fe("vxe.error.errProp",["table.context-menu="+this.contextMenu,"table.context-menu={}"])),e.menuConfig&&!n.a.isObject(e.menuConfig)&&fe("vxe.error.errProp",["table.menu-config="+e.menuConfig,"table.menu-config={}"]),e.exportConfig&&!n.a.isObject(e.exportConfig)&&fe("vxe.error.errProp",["table.export-config="+e.exportConfig,"table.export-config={}"]),e.importConfig&&!n.a.isObject(e.importConfig)&&fe("vxe.error.errProp",["table.import-config="+e.importConfig,"table.import-config={}"]),e.printConfig&&!n.a.isObject(e.printConfig)&&fe("vxe.error.errProp",["table.print-config="+e.printConfig,"table.print-config={}"]),e.treeConfig&&!n.a.isObject(e.treeConfig)&&fe("vxe.error.errProp",["table.tree-config="+e.treeConfig,"table.tree-config={}"]),e.customConfig&&!n.a.isObject(e.customConfig)&&fe("vxe.error.errProp",["table.custom-config="+e.customConfig,"table.custom-config={}"]),e.editConfig&&!n.a.isObject(e.editConfig)&&fe("vxe.error.errProp",["table.edit-config="+e.editConfig,"table.edit-config={}"]),e.emptyRender&&!n.a.isObject(e.emptyRender)&&fe("vxe.error.errProp",["table.empty-render="+e.emptyRender,"table.empty-render={}"]),b.currentMethod&&fe("vxe.error.delProp",["row-config.currentMethod","current-row-config.beforeSelectMethod"]),p.currentMethod&&fe("vxe.error.delProp",["row-config.currentMethod","current-column-config.beforeSelectMethod"]),(b.isCurrent||s)&&e.keyboardConfig&&R.isArrow&&!n.a.isBoolean(y.isFollowSelected)&&fe("vxe.error.notConflictProp",["row-config.isCurrent","current-row-config.isFollowSelected"]),(p.isCurrent||c)&&e.keyboardConfig&&R.isArrow&&!n.a.isBoolean(T.isFollowSelected)&&fe("vxe.error.notConflictProp",["column-config.isCurrent","current-column-config.isFollowSelected"]),e.editConfig&&!this.insert&&xe("vxe.error.reqModule",["Edit"]),e.editRules&&!this.validate&&xe("vxe.error.reqModule",["Validator"]),(f.range||e.keyboardConfig||e.mouseConfig)&&!this.handleCellMousedownEvent&&xe("vxe.error.reqModule",["Keyboard"]),(e.printConfig||e.importConfig||e.exportConfig)&&!this.exportData&&xe("vxe.error.reqModule",["Export"]),Object.assign(u,{startIndex:0,endIndex:1,visibleSize:0}),Object.assign(d,{startIndex:0,endIndex:1,visibleSize:0}),this.handleUpdateRowGroup($),this.loadTableData(t,!0).then(()=>{t&&t.length&&(this.inited=!0,this.initStatus=!0,this.handleLoadDefaults()),this.handleInitDefaults(),this.updateStyle()}),yn.on(this,"paste",this.handleGlobalPasteEvent),yn.on(this,"copy",this.handleGlobalCopyEvent),yn.on(this,"cut",this.handleGlobalCutEvent),yn.on(this,"mousedown",this.handleGlobalMousedownEvent),yn.on(this,"blur",this.handleGlobalBlurEvent),yn.on(this,"mousewheel",this.handleGlobalMousewheelEvent),yn.on(this,"keydown",this.handleGlobalKeydownEvent),yn.on(this,"resize",this.handleGlobalResizeEvent),yn.on(this,"contextmenu",this.handleGlobalContextmenuEvent),this.preventEvent(null,"created")}else xe("vxe.error.notProp",["mouse-config.area"])},mounted(){const e=this,t=e,o=e,l=e.$xeGantt,n=e.computeColumnOpts,i=e.computeRowOpts,a=e.computeCustomOpts,s=e.computeVirtualYOpts;if(l){const t=l.$refs.refClassifyWrapperElem,r=e.$refs.refTeleportWrapper;t&&(r&&t.appendChild(r),o.teleportToWrapperElem=t)}(n.drag||i.drag||a.allowSort)&&U();const{$listeners:c}=this;!this.menuConfig&&(c["menu-click"]||c["cell-menu"]||c["header-cell-menu"]||c["footer-cell-menu"])&&fe("vxe.error.reqProp",["menu-config"]),this.tooltipConfig||!c["cell-mouseenter"]&&!c["cell-mouseleave"]||fe("vxe.error.reqProp",["tooltip-config"]);const d=r.c.getComponent("VxeLoading"),u=r.c.getComponent("VxeTooltip");if(e.$nextTick(()=>{if(t.loading&&(d||this.$scopedSlots.loading||(xe("vxe.error.errProp",["loading=true","loading=false | <template #loading>...</template>"]),xe("vxe.error.reqComp",["vxe-loading"]))),(!0===t.showOverflow||"tooltip"===t.showOverflow||!0===t.showHeaderOverflow||"tooltip"===t.showHeaderOverflow||!0===t.showFooterOverflow||"tooltip"===t.showFooterOverflow||t.tooltipConfig||t.editRules)&&(u||(!0===t.showOverflow&&xe("vxe.error.errProp",["show-overflow=true","show-overflow=title"]),"tooltip"===t.showOverflow&&xe("vxe.error.errProp",["show-overflow=tooltip","show-overflow=title"]),!0===t.showHeaderOverflow&&xe("vxe.error.errProp",["show-header-overflow=true","show-header-overflow=title"]),"tooltip"===t.showHeaderOverflow&&xe("vxe.error.errProp",["show-header-overflow=tooltip","show-header-overflow=title"]),!0===t.showFooterOverflow&&xe("vxe.error.errProp",["show-footer-overflow=true","show-footer-overflow=title"]),"tooltip"===t.showFooterOverflow&&xe("vxe.error.errProp",["show-footer-overflow=tooltip","show-footer-overflow=title"]),xe("vxe.error.reqComp",["vxe-tooltip"]))),this.autoResize){const e=En.create(()=>{this.autoResize&&this.handleResizeEvent()});e.observe(this.$el),e.observe(this.getParentElem()),this.$resize=e}}),"scroll"!==s.mode){const t=e.$refs.refTableViewportElem;t&&t.addEventListener("wheel",e.triggerBodyWheelEvent,{passive:!1})}e.preventEvent(null,"mounted")},activated(){this.recalculate().then(()=>this.refreshScroll()),this.preventEvent(null,"activated")},deactivated(){const e=this,t=e,o=e,{filterStore:r}=t;r.visible&&e.clearFilter(),e.closeTooltip(),o.isActivated=!1,this.preventEvent(null,"deactivated")},beforeDestroy(){const e=this,t=e.$refs.refTeleportWrapper;t&&t.parentElement&&t.parentElement.removeChild(t);const o=e.$refs.refTableViewportElem;o&&o.removeEventListener("wheel",e.triggerBodyWheelEvent),this.$resize&&this.$resize.disconnect(),this.closeFilter(),this.closeMenu(),yn.off(e,"paste"),yn.off(e,"copy"),yn.off(e,"cut"),yn.off(e,"mousedown"),yn.off(e,"blur"),yn.off(e,"mousewheel"),yn.off(e,"keydown"),yn.off(e,"resize"),yn.off(e,"contextmenu"),this.preventEvent(null,"beforeDestroy")},destroyed(){this.preventEvent(null,"destroyed"),n.a.assign(this,{tZindex:0,currKeyField:"",isCurrDeepKey:!1,elemStore:{},scrollXStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},scrollYStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,customHeight:0,customMinHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterGroupFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableFullGroupData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},fullDataRowIdData:{},visibleDataRowIdData:{},sourceDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},mergeHeaderList:[],mergeHeaderMaps:{},mergeHeaderCellMaps:{},mergeBodyList:[],mergeBodyMaps:{},mergeBodyCellMaps:{},mergeFooterList:[],mergeFooterMaps:{},mergeFooterCellMaps:{},rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},rowGroupExpandedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},selectCheckboxMaps:{},pendingRowMaps:{},insertRowMaps:{},removeRowMaps:{},cvCacheMaps:{},tHeaderHeight:0,tBodyHeight:0,tFooterHeight:0,teleportToWrapperElem:null,inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1})},render(e){const t=r.c.getComponent("VxeLoading"),o=r.c.getComponent("VxeTooltip"),l=this,n=l.$xeGrid,i=l.$xeGantt,a=l,s=l.$scopedSlots,c=l,{xID:d}=l,{loading:u,stripe:p,showHeader:h,height:g,treeConfig:m,mouseConfig:f,showFooter:x,highlightCell:b,highlightHoverRow:v,highlightHoverColumn:C,editConfig:w,editRules:E}=a,{isGroup:y,overflowX:T,overflowY:R,scrollXLoad:S,scrollYLoad:O,tableData:$,initStore:F,isRowGroupStatus:D,columnStore:k,filterStore:M,customStore:I,tooltipStore:A}=c,{leftList:L,rightList:_}=k,H=s.loading,P={header:s.headerTooltip||s["header-tooltip"],body:s.tooltip,footer:s.footerTooltip||s["footer-tooltip"]},B=A.visible&&A.type?P[A.type]:null,z=l.computeRowDragOpts,j=l.computeTableTipConfig,G=l.computeValidTipConfig,V=l.computeValidOpts,N=l.computeCheckboxOpts,W=l.computeTreeOpts,q=l.computeRowOpts,X=l.computeColumnOpts,Y=l.computeSize,K=l.computeTableBorder,U=l.computeMouseOpts,Z=l.computeAreaOpts,Q=l.computeLoadingOpts,J=l.computeIsContentMenu,ee=c.isColLoading||c.isRowLoading||u,te=l.computeResizableOpts,oe=f&&U.area,re=l.computeColumnDragOpts,le=l.computeScrollbarXToTop,ne=l.computeScrollbarYToLeft,{isCrossTableDrag:ie}=z,ae={keydown:this.keydownEvent};return ie&&!$.length&&(ae.dragover=l.handleCrossTableRowDragoverEmptyEvent),e("div",{ref:"refElem",class:["vxe-table","vxe-table--render-default","tid_"+d,"border--"+K,"sx-pos--"+(le?"top":"bottom"),"sy-pos--"+(ne?"left":"right"),{["size--"+Y]:Y,["valid-msg--"+V.msgMode]:!!E,"vxe-editable":!!w,"old-cell-valid":E&&"obsolete"===bn().cellVaildMode,"cell--highlight":b,"cell--selected":f&&U.selected,"cell--area":oe,"header-cell--area":oe&&Z.selectCellByHeader,"body-cell--area":oe&&Z.selectCellByBody,"row--highlight":q.isHover||v,"column--highlight":X.isHover||C,"checkbox--range":N.range,"col--drag-cell":X.drag&&"cell"===re.trigger,"is--header":h,"is--footer":x,"is--group":y,"is-row-group":D,"is--tree-line":m&&(W.showLine||W.line),"is--fixed-left":L.length,"is--fixed-right":_.length,"is--animat":!!a.animat,"is--round":a.round,"is--stripe":!m&&p,"is--loading":ee,"is--empty":!ee&&!$.length,"is--scroll-y":R,"is--scroll-x":T,"is--virtual-x":S,"is--virtual-y":O}],attrs:{spellcheck:!1},on:ae},[e("div",{class:"vxe-table-slots",ref:"hideColumn"},this.$slots.default),e("div",{ref:"refVarElem",class:"vxe-table-vars"},[e("div",{class:"vxe-table-var-default"}),e("div",{class:"vxe-table-var-medium"}),e("div",{class:"vxe-table-var-small"}),e("div",{class:"vxe-table-var-mini"})]),e("div",{key:"tw",class:"vxe-table--render-wrapper"},le?[In(e,l),_n(e,l)]:[_n(e,l),In(e,l)]),e("div",{key:"tn",ref:"refEmptyPlaceholder",class:"vxe-table--empty-placeholder"},[e("div",{class:"vxe-table--empty-content"},$n(e,l))]),e("div",{key:"tl",class:"vxe-table--border-line"}),e("div",{key:"tcl",ref:"refColResizeBar",class:"vxe-table--resizable-col-bar"},te.showDragTip?[e("div",{ref:"refColResizeTip",class:"vxe-table--resizable-number-tip"})]:[]),e("div",{key:"ttw"},[e("div",{ref:"refTeleportWrapper"},[e("div",{key:"trl",ref:"refRowResizeBar",class:"vxe-table--resizable-row-bar"},te.showDragTip?[e("div",{class:"vxe-table--resizable-number-tip"})]:[]),F.custom?e(Hr,{key:"cs",ref:"refTableCustom",props:{customStore:I}}):Rn(l),t?e(t,{key:"lg",class:"vxe-table--loading",props:{value:ee,icon:Q.icon,text:Q.text},scopedSlots:H?{default:()=>l.callSlot(H,{$table:l,$grid:n,$gantt:i,loading:ee},e)}:{}}):H?e("div",{class:["vxe-loading--custom-wrapper",{"is--visible":ee}]},l.callSlot(H,{$table:l,$grid:n,$gantt:i,loading:ee},e)):Rn(l),Dn(e,this)])]),F.filter?e(Gr,{key:"tf",ref:"refTableFilter",props:{filterStore:M}}):Rn(l),F.import&&this.importConfig?e(Xr,{key:"it",props:{defaultOptions:this.importParams,storeData:this.importStore}}):Rn(l),F.export&&(this.exportConfig||this.printConfig)?e(Qr,{key:"et",props:{defaultOptions:this.exportParams,storeData:this.exportStore}}):Rn(l),J?e(tl,{key:"tm",ref:"refTableMenu",props:{ctxMenuStore:this.ctxMenuStore,ctxMenuOpts:this.ctxMenuOpts}}):Rn(l),e("div",{},[o?e(o,{key:"ctp",ref:"refCommTooltip",props:{isArrow:!1,enterable:!1}}):Rn(l),o?e(o,{key:"btp",ref:"refTooltip",props:{theme:j.theme,enterable:j.enterable,enterDelay:j.enterDelay,leaveDelay:j.leaveDelay,useHTML:j.useHTML,width:j.width,height:j.height,minWidth:j.minWidth,minHeight:j.minHeight,maxWidth:j.maxWidth,maxHeight:j.maxHeight},scopedSlots:B?{content:()=>{const{type:t,row:o,column:r,content:a}=A;if(B){if(r&&"header"===t)return e("div",{key:t},B({column:r,tooltipContent:a,$table:l,$grid:n,$gantt:i}));if(o&&r&&"body"===t)return e("div",{key:t},B({row:o,column:r,tooltipContent:a,$table:l,$grid:n,$gantt:i}));if(o&&r&&"footer"===t)return e("div",{key:t},B({row:o,column:r,tooltipContent:a,$table:l,$grid:n,$gantt:i}))}return Rn(l)}}:{}}):Rn(l),o&&this.editRules&&V.showMessage&&("default"===V.message?!g:"tooltip"===V.message)?e(o,{key:"vtp",ref:"refValidTooltip",class:[{"old-cell-valid":E&&"obsolete"===bn().cellVaildMode},"vxe-table--valid-error"],props:{theme:G.theme,enterable:G.enterable,enterDelay:G.enterDelay,leaveDelay:G.leaveDelay}}):Rn(l)])])},methods:gr};const{getConfig:Pn,getIcon:Bn,getI18n:zn,renderer:jn,commands:Gn,createEvent:Vn,globalMixins:Nn,renderEmptyElement:Wn}=r.c;var qn={name:"VxeToolbar",mixins:[Nn.sizeMixin],props:{loading:Boolean,refresh:[Boolean,Object],refreshOptions:Object,import:[Boolean,Object],importOptions:Object,export:[Boolean,Object],exportOptions:Object,print:[Boolean,Object],printOptions:Object,zoom:[Boolean,Object],zoomOptions:Object,custom:[Boolean,Object],customOptions:Object,buttons:{type:Array,default:()=>Pn().toolbar.buttons},tools:{type:Array,default:()=>Pn().toolbar.tools},perfect:{type:Boolean,default:()=>Pn().toolbar.perfect},size:{type:String,default:()=>Pn().toolbar.size||Pn().size},className:[String,Function]},inject:{$xeGrid:{default:null},$xeGantt:{default:null}},data:()=>({xID:n.a.uniqueId(),reactData:{isRefresh:!1,connectFlag:0,columns:[]},internalData:{connectTable:null}}),computed:Object.assign(Object.assign({},{}),{computeRefreshOpts(){return Object.assign({},n.a.clone(Pn().toolbar.refresh,!0),this.refreshOptions,this.refresh)},computeImportOpts(){return Object.assign({},n.a.clone(Pn().toolbar.import,!0),this.importOptions,this.import)},computeExportOpts(){return Object.assign({},n.a.clone(Pn().toolbar.export,!0),this.exportOptions,this.export)},computePrintOpts(){return Object.assign({},n.a.clone(Pn().toolbar.print,!0),this.printOptions,this.print)},computeZoomOpts(){return Object.assign({},n.a.clone(Pn().toolbar.zoom,!0),this.zoomOptions,this.zoom)},computeCustomOpts(){return Object.assign({},n.a.clone(Pn().toolbar.custom,!0),this.customOptions,this.custom)},computeTableCustomOpts(){const e=this.reactData,t=this.internalData,{connectTable:o}=t,r=o;return(e.connectFlag||r)&&r?r.computeCustomOpts:{trigger:""}},computeTrigger(){return this.computeTableCustomOpts.trigger}}),methods:{dispatchEvent(e,t,o){this.$emit(e,Vn(o,{$toolbar:this},t))},fintTable(){const{$children:e}=this.$parent,t=e.indexOf(this);return n.a.find(e,(e,o)=>e&&e.loadData&&o>t&&"vxe-table"===e.$vnode.componentOptions.tag)},syncUpdate(e){const t=this.reactData;this.internalData.connectTable=e.$table,t.columns=e.collectColumn,t.connectFlag++},checkTable(){const e=this.internalData,{connectTable:t}=e;if(t)return!0;xe("vxe.error.barUnableLink")},handleClickSettingEvent({$event:e}){const t=this.internalData,{connectTable:o}=t,r=o;r&&r.triggerCustomEvent&&r.triggerCustomEvent(e)},handleMouseenterSettingEvent({$event:e}){const t=this.internalData,{connectTable:o}=t;o&&o.customOpenEvent(e)},handleMouseleaveSettingEvent({$event:e}){const t=this.internalData,{connectTable:o}=t,r=o;if(r){const{customStore:t}=r.reactData;t.activeBtn=!1,setTimeout(()=>{t.activeBtn||t.activeWrapper||r.customCloseEvent(e)},350)}},refreshEvent({$event:e}){const t=this.reactData,o=this.$xeGrid,r=this.$xeGantt,l=o||r,{isRefresh:n}=t,i=this.computeRefreshOpts;if(!n){const o=i.queryMethod||i.query;if(o){t.isRefresh=!0;try{Promise.resolve(o({})).catch(e=>e).then(()=>{t.isRefresh=!1})}catch(e){t.isRefresh=!1}}else l&&(t.isRefresh=!0,l.triggerToolbarCommitEvent({code:i.code||"reload"},e).catch(()=>{}).then(()=>{t.isRefresh=!1}))}},zoomEvent({$event:e}){const t=this.$xeGrid,o=this.$xeGantt,r=t||o;r?r.triggerZoomEvent(e):fe("vxe.error.notProp",["[toolbar] zoom"])},importEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.importData()}},openImportEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.openImport()}},exportEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.exportData()}},openExportEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.openExport()}},printEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.print()}},openPrintEvent(){const e=this.internalData;if(this.checkTable()){const{connectTable:t}=e,o=t;o&&o.openPrint()}},handleDefaultCodeEvent(e,t,o){const r=this;switch(t.code){case"print":r.printEvent();break;case"open_print":r.openPrintEvent();break;case"custom":r.handleClickSettingEvent(e);break;case"export":r.exportEvent();break;case"open_export":r.openExportEvent();break;case"import":r.importEvent();break;case"open_import":r.openImportEvent();break;case"zoom":r.zoomEvent(e);break;case"refresh":r.refreshEvent(e);break;default:o()}},btnEvent(e,t){const o=this,r=o.internalData,l=o.$xeGrid,n=o.$xeGantt,i=l||n,{$event:a}=e,{connectTable:s}=r,c=s,{code:d}=t;d&&o.handleDefaultCodeEvent(e,t,()=>{if(i)i.triggerToolbarBtnEvent(t,a);else{const e=Gn.get(d),r={code:d,button:t,$table:c,$grid:l,$gantt:n,$event:a};if(e){const t=e.tableCommandMethod||e.commandMethod;t?t(r):xe("vxe.error.notCommands",["[toolbar] "+d])}o.dispatchEvent("button-click",r,a)}})},tolEvent(e,t){const o=this,r=o.internalData,l=o.$xeGrid,n=o.$xeGantt,i=l||n,{$event:a}=e,{connectTable:s}=r,c=s,{code:d}=t;d&&o.handleDefaultCodeEvent(e,t,()=>{if(i)i.triggerToolbarTolEvent(t,a);else{const e=Gn.get(d),r={code:d,button:null,tool:t,$table:c,$grid:l,$gantt:n,$event:a};if(e){const t=e.tableCommandMethod||e.commandMethod;t?t(r):xe("vxe.error.notCommands",["[toolbar] "+d])}o.dispatchEvent("tool-click",r,a)}})},renderDropdowns(e,t,o){const l=r.c.getComponent("VxeButton"),n=this,{dropdowns:i}=t;return i?i.map((t,r)=>!1===t.visible?Wn(n):l?e(l,{key:r,props:Object.assign({},t,{content:t.name,options:void 0}),on:{click:e=>o?n.btnEvent(e,t):n.tolEvent(e,t)}}):Wn(n)):[]},renderLeftBtns(e){const t=r.c.getComponent("VxeButton"),o=this,l=o,i=o.$scopedSlots,a=o.internalData,s=o.$xeGrid,c=o.$xeGantt,{buttons:d}=l,{connectTable:u}=a,p=u,h=i.buttonPrefix||i["button-prefix"],g=i.buttonSuffix||i["button-suffix"],m=[];return h&&m.push(...rt(h.call(o,{buttons:d||[],$grid:s,$gantt:c,$table:p}))),d&&d.forEach(r=>{const{dropdowns:l,buttonRender:i}=r;if(!1!==r.visible){const a=i?jn.get(i.name):null;if(i&&a&&a.renderToolbarButton){const t=a.toolbarButtonClassName,o={$grid:s,$gantt:c,$table:p,button:r};m.push(e("span",{class:["vxe-button--item",t?n.a.isFunction(t)?t(o):t:""]},rt(a.renderToolbarButton(e,i,o))))}else t&&m.push(e(t,{props:Object.assign({},r,{content:r.name,options:void 0}),on:{click:e=>o.btnEvent(e,r)},scopedSlots:l&&l.length?{dropdowns:()=>o.renderDropdowns(e,r,!0)}:{}}))}}),g&&m.push(...rt(g.call(o,{buttons:d||[],$grid:s,$gantt:c,$table:p}))),m},renderRightTools(e){const t=r.c.getComponent("VxeButton"),o=this,l=o,i=o.$scopedSlots,a=o.internalData,s=o.$xeGrid,c=o.$xeGantt,{tools:d}=l,{connectTable:u}=a,p=u,h=i.toolPrefix||i["tool-prefix"],g=i.toolSuffix||i["tool-suffix"],m=[];return h&&m.push(...rt(h.call(o,{tools:d||[],$grid:s,$gantt:c,$table:p}))),d&&d.forEach((r,l)=>{const{dropdowns:i,toolRender:a}=r;if(!1!==r.visible){const d=a?a.name:null,u=a?jn.get(d):null;if(a&&u&&u.renderToolbarTool){const t=u.toolbarToolClassName,o={$grid:s,$gantt:c,$table:p,tool:r};m.push(e("span",{key:d,class:["vxe-tool--item",t?n.a.isFunction(t)?t(o):t:""]},rt(u.renderToolbarTool(e,a,o))))}else t&&m.push(e(t,{key:l,props:Object.assign({},r,{content:r.name,options:void 0}),on:{click:e=>o.tolEvent(e,r)},scopedSlots:i&&i.length?{dropdowns:()=>o.renderDropdowns(e,r,!1)}:{}}))}}),g&&m.push(...rt(g.call(o,{tools:d||[],$grid:s,$gantt:c,$table:p}))),m},renderToolImport(e){const t=r.c.getComponent("VxeButton"),o=this.computeImportOpts;return t?e(t,{key:"import",props:{circle:!0,icon:o.icon||Bn().TOOLBAR_TOOLS_IMPORT,title:zn("vxe.toolbar.import")},on:{click:this.openImportEvent}}):Wn(this)},renderToolExport(e){const t=r.c.getComponent("VxeButton"),o=this.computeExportOpts;return t?e(t,{key:"export",props:{circle:!0,icon:o.icon||Bn().TOOLBAR_TOOLS_EXPORT,title:zn("vxe.toolbar.export")},on:{click:this.openExportEvent}}):Wn(this)},renderToolPrint(e){const t=r.c.getComponent("VxeButton"),o=this.computePrintOpts;return t?e(t,{key:"print",props:{circle:!0,icon:o.icon||Bn().TOOLBAR_TOOLS_PRINT,title:zn("vxe.toolbar.print")},on:{click:this.openPrintEvent}}):Wn(this)},renderToolRefresh(e){const t=r.c.getComponent("VxeButton"),o=this.reactData,l=this.computeRefreshOpts;return t?e(t,{key:"refresh",props:{circle:!0,icon:o.isRefresh?l.iconLoading||Bn().TOOLBAR_TOOLS_REFRESH_LOADING:l.icon||Bn().TOOLBAR_TOOLS_REFRESH,title:zn("vxe.toolbar.refresh")},on:{click:this.refreshEvent}}):Wn(this)},renderToolZoom(e){const t=r.c.getComponent("VxeButton"),o=this.$xeGrid,l=this.$xeGantt,n=o||l,i=this.computeZoomOpts;return n&&t?e(t,{key:"zoom",props:{circle:!0,icon:n.isMaximized()?i.iconOut||Bn().TOOLBAR_TOOLS_MINIMIZE:i.iconIn||Bn().TOOLBAR_TOOLS_FULLSCREEN,title:zn("vxe.toolbar.zoom"+(n.isMaximized()?"Out":"In"))},on:{click:this.zoomEvent}}):Wn(this)},renderToolCustom(e){const t=r.c.getComponent("VxeButton"),o=this,l=o.computeCustomOpts,n=o.computeTrigger,i={};return"manual"===n||("hover"===n?(i.mouseenter=o.handleMouseenterSettingEvent,i.mouseleave=o.handleMouseleaveSettingEvent):i.click=o.handleClickSettingEvent),t?e(t,{key:"custom",props:{circle:!0,icon:l.icon||Bn().TOOLBAR_TOOLS_CUSTOM,title:zn("vxe.toolbar.custom"),className:"vxe-toolbar-custom-target"},on:i}):Wn(o)},renderVN(e){const t=this.$scopedSlots,o=this.internalData,r=this.$xeGrid,l=this.$xeGantt,i=r||l,{perfect:a,loading:s,refresh:c,zoom:d,custom:u,className:p}=this,{connectTable:h}=o,g=h,m=t.tools,f=t.buttons,x=this.computeSize;return e("div",{ref:"refElem",class:["vxe-toolbar",p?n.a.isFunction(p)?p({$toolbar:this}):p:"",{["size--"+x]:x,"is--perfect":a,"is--loading":s}]},[e("div",{class:"vxe-buttons--wrapper"},f?f({$grid:r,$gantt:l,$table:g}):this.renderLeftBtns(e)),e("div",{class:"vxe-tools--wrapper"},m?m({$grid:r,$gantt:l,$table:g}):this.renderRightTools(e)),e("div",{class:"vxe-tools--operate"},[this.import?this.renderToolImport(e):Wn(this),this.export?this.renderToolExport(e):Wn(this),this.print?this.renderToolPrint(e):Wn(this),c?this.renderToolRefresh(e):Wn(this),d&&i?this.renderToolZoom(e):Wn(this),u?this.renderToolCustom(e):Wn(this)])])}},created(){const e=this,t=e,o=e.$xeGrid,l=e.$xeGantt,i=o||l;e.$nextTick(()=>{const o=e.computeRefreshOpts,r=e.fintTable(),l=o.queryMethod||o.query;!t.refresh||i||l||fe("vxe.error.notFunc",["[toolbar] queryMethod"]),n.a.isPlainObject(t.custom)&&fe("vxe.error.delProp",["[toolbar] custom={...}","custom=boolean & custom-options={...}"]),n.a.isPlainObject(t.print)&&fe("vxe.error.delProp",["[toolbar] print={...}","print=boolean & print-options={...}"]),n.a.isPlainObject(t.export)&&fe("vxe.error.delProp",["[toolbar] export={...}","export=boolean & export-options={...}"]),n.a.isPlainObject(t.import)&&fe("vxe.error.delProp",["[toolbar] import={...}","import=boolean & import-options={...}"]),n.a.isPlainObject(t.refresh)&&fe("vxe.error.delProp",["[toolbar] refresh={...}","refresh=boolean & refresh-options={...}"]),n.a.isPlainObject(t.refresh)&&fe("vxe.error.delProp",["[toolbar] zoom={...}","zoom=boolean & zoom-options={...}"]),r&&r.connect(this);const a=e.computeCustomOpts;a.isFooter&&fe("vxe.error.delProp",["[toolbar] toolbar.custom.isFooter","table.custom-config.showFooter"]),a.showFooter&&fe("vxe.error.delProp",["[toolbar] toolbar.custom.showFooter","table.custom-config.showFooter"]),a.immediate&&fe("vxe.error.delProp",["[toolbar] toolbar.custom.immediate","table.custom-config.immediate"]),a.trigger&&fe("vxe.error.delProp",["[toolbar] toolbar.custom.trigger","table.custom-config.trigger"])});const a=r.c.getComponent("VxeButton");(t.refresh||t.import||t.export||t.print||t.zoom)&&(a||xe("vxe.error.reqComp",["vxe-button"]))},destroyed(){const e=this.internalData;n.a.assign(e,{connectTable:null})},render(e){return this.renderVN(e)}};const{getConfig:Xn,getI18n:Yn,commands:Kn,globalEvents:Un,globalMixins:Zn,createEvent:Qn,GLOBAL_EVENT_KEYS:Jn,renderEmptyElement:ei}=r.c,ti={},oi=Object.keys(kt),ri=[["Form"],["Toolbar","Top","Table","Bottom","Pager"]];function li(e){const{$listeners:t,proxyConfig:o,proxyOpts:r}=e,l={};return n.a.each(t,(t,o)=>{l[o]=(...t)=>{e.$emit(o,...t)}}),o&&(r.sort&&(l["sort-change"]=e.sortChangeEvent,l["clear-all-sort"]=e.clearAllSortEvent),r.filter&&(l["filter-change"]=e.filterChangeEvent,l["clear-all-filter"]=e.clearAllFilterEvent)),l}n.a.each(Hn.methods,(e,t)=>{ti[t]=function(...e){const o=this.$refs.refTable;return o&&o[t](...e)}});var ni={name:"VxeGrid",mixins:[Zn.sizeMixin],props:Object.assign(Object.assign({},kt),{layouts:Array,columns:Array,pagerConfig:Object,proxyConfig:Object,toolbarConfig:Object,formConfig:Object,zoomConfig:Object,size:{type:String,default:()=>Xn().grid.size||Xn().size}}),provide(){return{$xeGrid:this,$xeGantt:null}},data(){var e;return{xID:n.a.uniqueId(),reactData:{tableLoading:!1,proxyInited:!1,isZMax:!1,tableData:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:(null===(e=Xn().pager)||void 0===e?void 0:e.pageSize)||10,currentPage:1}},internalData:{}}},computed:Object.assign(Object.assign({},{}),{isRespMsg(){return this.computeIsRespMsg},computeIsRespMsg(){const e=this.computeProxyOpts;return!!(n.a.isBoolean(e.message)?e.message:e.showResponseMsg)},isActiveMsg(){return this.computeIsActiveMsg},computeIsActiveMsg(){const e=this.computeProxyOpts;return n.a.isBoolean(e.showActionMsg)?e.showActionMsg:!!e.showActiveMsg},proxyOpts(){return this.computeProxyOpts},computeProxyOpts(){return n.a.merge({},n.a.clone(Xn().grid.proxyConfig,!0),this.proxyConfig)},pagerOpts(){return this.computePagerOpts},computePagerOpts(){return Object.assign({},Xn().grid.pagerConfig,this.pagerConfig)},formOpts(){return this.computeFormOpts},computeFormOpts(){return Object.assign({},Xn().grid.formConfig,this.formConfig)},toolbarOpts(){return this.computeToolbarOpts},computeToolbarOpts(){return Object.assign({},Xn().grid.toolbarConfig,this.toolbarConfig)},zoomOpts(){return this.computeZoomOpts},computeZoomOpts(){return Object.assign({},Xn().grid.zoomConfig,this.zoomConfig)},computeStyles(){const e=this.reactData,{height:t,maxHeight:o}=this,{isZMax:r,tZindex:l}=e,n={};return r?n.zIndex=l:(t&&(n.height="auto"===t||"100%"===t?"100%":ne(t)),o&&(n.maxHeight="auto"===o||"100%"===o?"100%":ne(o))),n},computeTableExtendProps(){const e={},t=this;return oi.forEach(o=>{e[o]=t[o]}),e},computeTableProps(){const e=this.reactData,{seqConfig:t,pagerConfig:o,editConfig:r,proxyConfig:l}=this,{isZMax:n,tablePage:i}=e,s=this.computeTableExtendProps,c=this.computeProxyOpts,d=this.computePagerOpts,u=this.computeIsLoading,p=Object.assign({},s);return n&&(s.maxHeight?p.maxHeight="100%":p.height="100%"),l&&a(c)&&(p.loading=u,o&&c.seq&&a(d)&&(p.seqConfig=Object.assign({},t,{startIndex:(i.currentPage-1)*i.pageSize}))),r&&(p.editConfig=Object.assign({},r)),p},tableProps(){return this.computeTableProps},computeCurrLayoutConf(){const{layouts:e}=this;let t=[];t=e&&e.length?e:Xn().grid.layouts||ri;let o=[],r=[],l=[];return t.length&&(n.a.isArray(t[0])?(o=t[0],r=t[1]||[],l=t[2]||[]):r=t),{headKeys:o,bodyKeys:r,footKeys:l}},computeCustomCurrentPageFlag(){return this.computePagerOpts.currentPage},computeCustomPageSizeFlag(){return this.computePagerOpts.pageSize},computeCustomTotalFlag(){return this.computePagerOpts.total},computePageCount(){const e=this.reactData,{tablePage:t}=e;return Math.max(Math.ceil(t.total/t.pageSize),1)},computeIsLoading(){const e=this.reactData,{loading:t,proxyConfig:o}=this,{tableLoading:r}=e,l=this.computeProxyOpts,{showLoading:n}=l;return t||r&&n&&o&&a(l)}}),watch:{columns(e){const t=this;t.$nextTick(()=>t.loadColumn(e))},toolbar(e){e&&this.initToolbar()},toolbarConfig(e){e&&this.initToolbar()},proxyConfig(){this.initProxy()},computeCustomCurrentPageFlag(){this.initPages("currentPage")},computeCustomPageSizeFlag(){this.initPages("pageSize")},computeCustomTotalFlag(){this.initPages("total")}},methods:Object.assign(Object.assign({},ti),{dispatchEvent(e,t,o){this.$emit(e,Qn(o,{$grid:this,$gantt:null},t))},initPages(e){const t=this.reactData,{tablePage:o}=t,{pagerConfig:r}=this,l=this.computePagerOpts;if(r&&a(l))if(e)l[e]&&(o[e]=n.a.toNumber(l[e]));else{const{currentPage:e,pageSize:t,total:r}=l;e&&(o.currentPage=e),t&&(o.pageSize=t),r&&(o.total=r)}},callSlot(e,t,o){const r=this.$scopedSlots;return e&&(n.a.isString(e)&&(e=r[e]||null),n.a.isFunction(e))?rt(e.call(this,t,o)):[]},getEl(){return this.$refs.refElem},getExcludeHeight(){const e=this,t=e.reactData,{isZMax:o}=t,r=e.$refs.refElem;if(r){const t=e.$refs.refFormWrapper,l=e.$refs.refToolbarWrapper,n=e.$refs.refTopWrapper,i=e.$refs.refBottomWrapper,a=e.$refs.refPagerWrapper,s=r.parentElement;return(o?0:s?ce(s):0)+ce(r)+se(t)+se(l)+se(n)+se(i)+se(a)}return 0},getParentHeight(){const e=this,t=e.reactData,o=e.$refs.refElem;if(o){const r=o.parentElement;return(t.isZMax?ae().visibleHeight:r?n.a.toNumber(getComputedStyle(r).height):0)-e.getExcludeHeight()}return 0},initToolbar(){const e=this;e.$nextTick(()=>{const t=e.$refs.refTable,o=e.$refs.refToolbar;t&&o&&t.connectToolbar(o)})},getDefaultFormData(){const e=this.computeFormOpts;if(e.items){const t={};return e.items.forEach(e=>{const{field:o,itemRender:r}=e;if(o){let l=null;if(r){const{startField:o,endField:i,defaultValue:a}=r;n.a.isFunction(a)?l=a({item:e}):n.a.isUndefined(a)||(l=a),o&&i&&(n.a.set(t,o,null),n.a.set(t,i,null))}t[o]=l}}),t}return{}},initProxy(){const e=this,t=e,o=e.reactData,{proxyConfig:r,formConfig:l}=t,{proxyInited:n}=o,i=e.computeProxyOpts,s=e.computeFormOpts;r&&(a(l)&&i.form&&s.items&&(o.formData=e.getDefaultFormData()),n||!1===i.autoLoad||(o.proxyInited=!0,e.$nextTick().then(()=>e.commitProxy("initial")).then(t=>{e.dispatchEvent("proxy-query",Object.assign(Object.assign({},t),{isInited:!0}),new Event("initial"))})))},handleGlobalKeydownEvent(e){const t=this,o=t.reactData,r=t.computeZoomOpts;Un.hasKey(e,Jn.ESCAPE)&&o.isZMax&&!1!==r.escRestore&&t.triggerZoomEvent(e)},getRespMsg(e,t){const o=this,r=o.computeProxyOpts,l=(r.response||r.props||{}).message,i=o.$refs.refTable;let a;return e&&l&&(a=n.a.isFunction(l)?l({data:e,$table:i,$grid:o,$gantt:null}):n.a.get(e,l)),a||Yn(t)},handleDeleteRow(e,t,o){const l=this.computeIsActiveMsg,n=this.getCheckboxRecords();if(l)if(n.length){if(r.c.modal)return r.c.modal.confirm({id:"cfm_"+e,content:Yn(t),escClosable:!0}).then(e=>{if("confirm"===e)return o()})}else r.c.modal&&r.c.modal.message({id:"msg_"+e,content:Yn("vxe.grid.selectOneRecord"),status:"warning"});else n.length&&o();return Promise.resolve()},triggerPendingEvent(e){const t=this,o=t.computeIsActiveMsg,l=t.$refs.refTable,n=l.getCheckboxRecords();n.length?(l.togglePendingRow(n),t.clearCheckboxRow()):o&&r.c.modal&&r.c.modal.message({id:e,content:Yn("vxe.grid.selectOneRecord"),status:"warning"})},commitProxy(e,...t){const o=this,l=o,i=o.reactData,s=l.toolbar,{proxyConfig:c,toolbarConfig:d,pagerConfig:u,editRules:p,validConfig:h}=l,{tablePage:g}=i,m=o.computeIsActiveMsg,f=o.computeIsRespMsg,x=o.computeProxyOpts,b=o.computePagerOpts,v=o.computeToolbarOpts,{beforeQuery:C,afterQuery:w,beforeDelete:E,afterDelete:y,beforeSave:T,afterSave:R,ajax:S={}}=x,O=x.response||x.props||{},$=o.$refs.refTable;let F=o.getFormData(),D=null,k=null;if(n.a.isString(e)){const{buttons:t}=v,o=(d||s)&&a(v)&&t?n.a.findTree(t,t=>t.code===e,{children:"dropdowns"}):null;D=o?o.item:null,k=e}else D=e,k=D.code;const M=D?D.params:null;switch(k){case"insert":return $.insert({});case"insert_edit":case"insert_actived":return $.insert({}).then(({row:e})=>$.setEditRow(e,!0));case"mark_cancel":o.triggerPendingEvent(k);break;case"remove":return o.handleDeleteRow(k,"vxe.grid.removeSelectRecord",()=>$.removeCheckboxRow());case"import":$.importData(M);break;case"open_import":$.openImport(M);break;case"export":$.exportData(M);break;case"open_export":$.openExport(M);break;case"reset_custom":$.resetCustom(!0);break;case"initial":case"reload":case"query":{const e=S.query,r=S.querySuccess,l=S.queryError;if(e){const s="initial"===k,d="reload"===k;if(!s&&i.tableLoading)return o.$nextTick();let p=[],h=[],m={};if(u&&((s||d)&&(g.currentPage=1),a(u)&&(m=Object.assign({},g))),s){if(c&&a(x)&&x.form&&(F=o.getDefaultFormData(),i.formData=F),$){const e=$,{tableFullColumn:t,fullColumnFieldData:o}=e;let r=$.computeSortOpts.defaultSort;t.forEach(e=>{e.order=null}),r&&(n.a.isArray(r)||(r=[r]),p=r.map(e=>{const{field:t,order:r}=e,l=o[t];if(l){const e=l.column;e&&(e.order=r)}return{field:t,property:t,order:r}})),h=$.getCheckedFilters()}}else $&&(d?$.clearAll():(p=$.getSortColumns(),h=$.getCheckedFilters()));const f={$table:$,$grid:o,$gantt:null,code:k,button:D,isInited:s,isReload:d,page:m,sort:p.length?p[0]:{},sorts:p,filters:h,form:F,options:e};i.sortData=p,i.filterData=h,i.tableLoading=!0;const v=[f].concat(t);return Promise.resolve((C||e)(...v)).then(e=>{let t=[];if(i.tableLoading=!1,e)if(u&&a(b)){const r=O.total,l=(n.a.isFunction(r)?r({data:e,$table:$,$grid:o,$gantt:null}):n.a.get(e,r||"page.total"))||0;g.total=n.a.toNumber(l);const i=O.result;t=(n.a.isFunction(i)?i({data:e,$table:$,$grid:o,$gantt:null}):n.a.get(e,i||"result"))||[];const a=Math.max(Math.ceil(l/g.pageSize),1);g.currentPage>a&&(g.currentPage=a)}else{const r=O.list;t=(r?n.a.isFunction(r)?r({data:e,$table:$,$grid:o,$gantt:null}):n.a.get(e,r):e)||[]}return $?$.loadData(t):$.$nextTick(()=>{$&&$.loadData(t)}),w&&w(...v),r&&r(Object.assign(Object.assign({},f),{response:e})),{status:!0}}).catch(e=>(i.tableLoading=!1,l&&l(Object.assign(Object.assign({},f),{response:e})),{status:!1}))}xe("vxe.error.notFunc",["[grid] proxy-config.ajax.query"]);break}case"delete":{const e=S.delete,l=S.deleteSuccess,n=S.deleteError;if(e){const a=$.getCheckboxRecords(),s=a.filter(e=>!$.isInsertByRow(e)),c={$table:$,$grid:o,$gantt:null,code:k,button:D,body:{removeRecords:s},form:F,options:e},d=[c].concat(t);if(a.length)return o.handleDeleteRow(k,"vxe.grid.deleteSelectRecord",()=>s.length?(i.tableLoading=!0,Promise.resolve((E||e)(...d)).then(e=>(i.tableLoading=!1,$.setPendingRow(s,!1),f&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({content:o.getRespMsg(e,"vxe.grid.delSuccess"),status:"success"})),y?y(...d):o.commitProxy("query"),l&&l(Object.assign(Object.assign({},c),{response:e})),{status:!0})).catch(e=>(i.tableLoading=!1,f&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({id:k,content:o.getRespMsg(e,"vxe.grid.operError"),status:"error"})),n&&n(Object.assign(Object.assign({},c),{response:e})),{status:!1}))):$.remove(a));m&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({id:k,content:Yn("vxe.grid.selectOneRecord"),status:"warning"}))}else xe("vxe.error.notFunc",["[grid] proxy-config.ajax.delete"]);break}case"save":{const e=S.save,l=S.saveSuccess,n=S.saveError;if(e){const a=o.getRecordset(),{insertRecords:s,removeRecords:c,updateRecords:d,pendingRecords:u}=a,g={$table:$,$grid:o,$gantt:null,code:k,button:D,body:a,form:F,options:e},x=[g].concat(t);s.length&&(a.pendingRecords=u.filter(e=>-1===s.indexOf(e))),u.length&&(a.insertRecords=s.filter(e=>-1===u.indexOf(e)));let b=Promise.resolve();return p&&(b=o[h&&"full"===h.msgMode?"fullValidate":"validate"](a.insertRecords.concat(d))),b.then(t=>{if(!t)return a.insertRecords.length||c.length||d.length||a.pendingRecords.length?(i.tableLoading=!0,Promise.resolve((T||e)(...x)).then(e=>(i.tableLoading=!1,$.clearPendingRow(),f&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({content:o.getRespMsg(e,"vxe.grid.saveSuccess"),status:"success"})),R?R(...x):o.commitProxy("query"),l&&l(Object.assign(Object.assign({},g),{response:e})),{status:!0})).catch(e=>(i.tableLoading=!1,f&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({id:k,content:o.getRespMsg(e,"vxe.grid.operError"),status:"error"})),n&&n(Object.assign(Object.assign({},g),{response:e})),{status:!1}))):void(m&&(r.c.modal||xe("vxe.error.reqModule",["Modal"]),r.c.modal.message({id:k,content:Yn("vxe.grid.dataUnchanged"),status:"info"})))})}xe("vxe.error.notFunc",["[grid] proxy-config.ajax.save"]);break}default:{const e=Kn.get(k);if(e){const r=e.tableCommandMethod||e.commandMethod;r?r({code:k,button:D,$grid:o,$table:$,$gantt:null},...t):xe("vxe.error.notCommands",["[grid] "+k])}}}return o.$nextTick()},getFormData(){const e=this.reactData,{proxyConfig:t}=this,{formData:o}=e,r=this.computeProxyOpts,l=this.computeFormOpts;return t&&a(r)&&r.form?o:l.data},getFormItems(e){const t=this.computeFormOpts,{formConfig:o}=this,{items:r}=t,l=[];return n.a.eachTree(o&&a(t)&&r?r:[],e=>{l.push(e)},{children:"children"}),n.a.isUndefined(e)?l:l[e]},resetForm(){const e=this.$refs.refForm;return e?e.reset():this.$nextTick()},validateForm(){const e=this.$refs.refForm;return e?e.validate():this.$nextTick()},validateFormField(e){const t=this.$refs.refForm;return t?t.validateField(e):this.$nextTick()},clearFormValidate(e){const t=this.$refs.refForm;return t?t.clearValidate(e):this.$nextTick()},homePage(){const e=this.reactData,{tablePage:t}=e;return t.currentPage=1,this.$nextTick()},homePageByEvent(e){const t=this.$refs.refPager;t&&t.homePageByEvent(e)},endPage(){const e=this.reactData,{tablePage:t}=e,o=this.computePageCount;return t.currentPage=o,this.$nextTick()},endPageByEvent(e){const t=this.$refs.refPager;t&&t.endPageByEvent(e)},setCurrentPage(e){const t=this.reactData,{tablePage:o}=t,r=this.computePageCount;return o.currentPage=Math.min(r,Math.max(1,n.a.toNumber(e))),this.$nextTick()},setCurrentPageByEvent(e,t){const o=this.$refs.refPager;o&&o.setCurrentPageByEvent(e,t)},setPageSize(e){const t=this.reactData,{tablePage:o}=t;return o.pageSize=Math.max(1,n.a.toNumber(e)),this.$nextTick()},setPageSizeByEvent(e,t){const o=this.$refs.refPager;o&&o.setPageSizeByEvent(e,t)},triggerToolbarCommitEvent(e,t){const o=this,{code:r}=e;return o.commitProxy(e,t).then(e=>{r&&e&&e.status&&["query","reload","delete","save"].includes(r)&&o.dispatchEvent("delete"===r||"save"===r?"proxy-"+r:"proxy-query",Object.assign(Object.assign({},e),{isReload:"reload"===r}),t)})},triggerToolbarBtnEvent(e,t){this.triggerToolbarCommitEvent(e,t),this.dispatchEvent("toolbar-button-click",{code:e.code,button:e},t)},triggerToolbarTolEvent(e,t){this.triggerToolbarCommitEvent(e,t),this.dispatchEvent("toolbar-tool-click",{code:e.code,tool:e},t)},pageChangeEvent(e){const t=this,o=t,r=t.reactData,{proxyConfig:l}=o,{tablePage:n}=r,{$event:i,currentPage:s,pageSize:c}=e,d=t.computeProxyOpts;n.currentPage=s,n.pageSize=c,t.dispatchEvent("page-change",e,i),l&&a(d)&&t.commitProxy("query").then(e=>{t.dispatchEvent("proxy-query",e,i)})},handleSortEvent(e){const t=this,o=t,r=t.reactData,l=t.$refs.refTable,{proxyConfig:n}=o,i=t.computeProxyOpts;l.computeSortOpts.remote&&(r.sortData=e.sortList,n&&a(i)&&(r.tablePage.currentPage=1,t.commitProxy("query").then(o=>{t.dispatchEvent("proxy-query",o,e.$event)})))},sortChangeEvent(e){this.handleSortEvent(e),this.dispatchEvent("sort-change",e,e.$event)},clearAllSortEvent(e){this.handleSortEvent(e),this.dispatchEvent("clear-all-sort",e,e.$event)},handleFilterEvent(e){const t=this,o=t,r=t.reactData,l=t.$refs.refTable,{proxyConfig:n}=o,i=t.computeProxyOpts;l.computeFilterOpts.remote&&(r.filterData=e.filterList,n&&a(i)&&(r.tablePage.currentPage=1,t.commitProxy("query").then(o=>{t.dispatchEvent("proxy-query",o,e.$event)})))},filterChangeEvent(e){this.handleFilterEvent(e),this.dispatchEvent("filter-change",e,e.$event)},clearAllFilterEvent(e){this.handleFilterEvent(e),this.dispatchEvent("clear-all-filter",e,e.$event)},submitFormEvent(e){const t=this,o=t,r=t.reactData,{proxyConfig:l}=o,n=t.computeProxyOpts;r.tableLoading||(l&&a(n)&&t.commitProxy("reload").then(o=>{t.dispatchEvent("proxy-query",Object.assign(Object.assign({},o),{isReload:!0}),e.$event)}),t.dispatchEvent("form-submit",e,e.$event))},resetFormEvent(e){const t=this,o=t,r=t.$refs.refTable,{proxyConfig:l}=o,{$event:n}=e,i=t.computeProxyOpts;l&&a(i)&&(r.clearScroll(),t.commitProxy("reload").then(e=>{t.dispatchEvent("proxy-query",Object.assign(Object.assign({},e),{isReload:!0}),n)})),t.dispatchEvent("form-reset",e,n)},submitInvalidEvent(e){this.dispatchEvent("form-submit-invalid",e,e.$event)},collapseEvent(e){const{$event:t}=e;this.dispatchEvent("form-toggle-collapse",e,t),this.dispatchEvent("form-collapse",e,t)},triggerZoomEvent(e){const t=this.reactData;this.zoom(),this.dispatchEvent("zoom",{type:t.isZMax?"max":"revert"},e)},getParams(){return this.params},zoom(){const e=this;return e.reactData.isZMax?e.revert():e.maximize()},isMaximized(){return this.reactData.isZMax},maximize(){return this.handleZoom(!0)},revert(){return this.handleZoom()},handleZoom(e){const t=this,o=t.reactData,{isZMax:r}=o;return(e?!r:r)&&(o.isZMax=!r,o.tZindex<u()&&(o.tZindex=d())),t.$nextTick().then(()=>t.recalculate(!0)).then(()=>(setTimeout(()=>t.recalculate(!0),15),o.isZMax))},getProxyInfo(){const e=this,t=e,o=e.$refs.refTable,r=e.reactData;if(t.proxyConfig){const{sortData:t}=r;return{data:o?o.getFullData():[],filter:r.filterData,form:e.getFormData(),sort:t.length?t[0]:{},sorts:t,pager:r.tablePage,pendingRecords:o?o.getPendingRecords():[]}}return null},loadColumn(e){const t=this.$scopedSlots,o=this.$refs.refTable;return n.a.eachTree(e,e=>{e.slots&&n.a.each(e.slots,e=>{n.a.isFunction(e)||t[e]||xe("vxe.error.notSlot",["[grid] "+e])})}),o.loadColumn(e)},reloadColumn(e){return this.clearAll(),this.loadColumn(e)},getConfigSlot(e){const t=this.$scopedSlots,o={};return n.a.objectMap(e,(e,r)=>{e&&(n.a.isString(e)?t[e]?o[r]=t[e]:xe("vxe.error.notSlot",["[grid] "+e]):o[r]=e)}),o},getToolbarSlots(){const e=this,t=e.$scopedSlots,o=e.computeToolbarOpts.slots,r={};if(!t.buttons||o&&"buttons"===o.buttons||fe("vxe.error.reqProp",["[grid] toolbar-config.slots.buttons"]),!t.tools||o&&"tools"===o.tools||fe("vxe.error.reqProp",["[grid] toolbar-config.slots.tools"]),o){const t=e.getFuncSlot(o,"buttons"),l=e.getFuncSlot(o,"buttonPrefix"),n=e.getFuncSlot(o,"buttonSuffix"),i=e.getFuncSlot(o,"tools"),a=e.getFuncSlot(o,"toolPrefix"),s=e.getFuncSlot(o,"toolSuffix");t&&(r.buttons=t),l&&(r.buttonPrefix=l),n&&(r.buttonSuffix=n),i&&(r.tools=i),a&&(r.toolPrefix=a),s&&(r.toolSuffix=s)}return r},getFuncSlot(e,t){const o=this.$scopedSlots,r=e[t];if(r){if(!n.a.isString(r))return r;if(o[r])return o[r];xe("vxe.error.notSlot",["[grid] "+r])}return null},renderDefaultForm(e){const t=r.c.getComponent("VxeForm"),o=this,l=o,i=o.$scopedSlots,s=o.reactData,{proxyConfig:c,formConfig:d}=l,{formData:u}=s,p=o.computeProxyOpts,h=o.computeFormOpts;if(a(d)&&h.items&&h.items.length){const r={};if(!h.inited){h.inited=!0;const e=p.beforeItem;p&&e&&h.items.forEach(t=>{e.call(o,{$grid:o,$gantt:null,item:t})})}return h.items.forEach(e=>{n.a.each(e.slots,e=>{n.a.isFunction(e)||i[e]&&(r[e]=i[e])})}),[t?e(t,{props:Object.assign({},h,{data:c&&p.form?u:h.data}),on:{submit:o.submitFormEvent,reset:o.resetFormEvent,collapse:o.collapseEvent,"submit-invalid":o.submitInvalidEvent},scopedSlots:r}):ei(o)]}return[]},renderForm(e){const t=this,o=t,r=t.$scopedSlots,{formConfig:l}=o,n=r.form;return!(!n&&!a(l))?e("div",{key:"form",ref:"refFormWrapper",class:"vxe-grid--form-wrapper"},n?n.call(t,{$grid:t,$gantt:null}):t.renderDefaultForm(e)):ei(t)},renderToolbar(e){const t=this,o=t,r=t.$scopedSlots,{toolbarConfig:l}=o,n=r.toolbar,i=t.computeToolbarOpts;return l&&a(i)||n?e("div",{key:"toolbar",ref:"refToolbarWrapper",class:"vxe-grid--toolbar-wrapper"},n?n.call(t,{$grid:t,$gantt:null}):[e(qn,{props:Object.assign({},i,{slots:void 0}),ref:"refToolbar",scopedSlots:t.getToolbarSlots()})]):ei(t)},renderTop(e){const t=this.$scopedSlots.top;return t?e("div",{key:"top",ref:"refTopWrapper",class:"vxe-grid--top-wrapper"},t.call(this,{$grid:this,$gantt:null})):ei(this)},renderTableLeft(e){const t=this,o=t.$scopedSlots.left;return o?e("div",{class:"vxe-grid--left-wrapper"},o({$grid:t,$gantt:null})):ei(t)},renderTableRight(e){const t=this,o=t.$scopedSlots.right;return o?e("div",{class:"vxe-grid--right-wrapper"},o({$grid:t,$gantt:null})):ei(t)},renderTable(e){const t=this.$scopedSlots,o=this.computeTableProps;return e("div",{class:"vxe-grid--table-wrapper"},[e(Hn,{key:"table",props:o,on:li(this),scopedSlots:t,ref:"refTable"})])},renderBottom(e){const t=this.$scopedSlots.bottom;return t?e("div",{key:"bottom",ref:"refBottomWrapper",class:"vxe-grid--bottom-wrapper"},t.call(this,{$grid:this,$gantt:null})):ei(this)},renderPager(e){const t=r.c.getComponent("VxePager"),o=this,l=o,n=o.$scopedSlots,i=o.reactData,{proxyConfig:s,pagerConfig:c}=l,d=o.computeProxyOpts,u=o.computePagerOpts,p=n.pager;return c&&a(u)||n.pager?e("div",{ref:"refPagerWrapper",key:"pager",class:"vxe-grid--pager-wrapper"},p?p.call(o,{$grid:o,$gantt:null}):[t?e(t,{ref:"refPager",props:Object.assign(Object.assign({},u),s&&a(d)?i.tablePage:{}),on:{"page-change":o.pageChangeEvent},scopedSlots:o.getConfigSlot(u.slots)}):ei(o)]):ei(o)},renderChildLayout(e,t){const o=this,r=[];return t.forEach(t=>{switch(t){case"Form":r.push(o.renderForm(e));break;case"Toolbar":r.push(o.renderToolbar(e));break;case"Top":r.push(o.renderTop(e));break;case"Table":r.push(e("div",{key:"table",class:"vxe-grid--table-container"},[o.renderTableLeft(e),o.renderTable(e),o.renderTableRight(e)]));break;case"Bottom":r.push(o.renderBottom(e));break;case"Pager":r.push(o.renderPager(e));break;default:xe("vxe.error.notProp",["[grid] layouts -> "+t])}}),r},renderLayout(e){const t=this.$scopedSlots,o=this.computeCurrLayoutConf,{headKeys:r,bodyKeys:l,footKeys:n}=o,i=t.asideLeft||t["aside-left"],a=t.asideRight||t["aside-right"];return[e("div",{class:"vxe-grid--layout-header-wrapper"},this.renderChildLayout(e,r)),e("div",{class:"vxe-grid--layout-body-wrapper"},[i?e("div",{class:"vxe-grid--layout-aside-left-wrapper"},i({})):ei(this),e("div",{class:"vxe-grid--layout-body-content-wrapper"},this.renderChildLayout(e,l)),a?e("div",{class:"vxe-grid--layout-aside-right-wrapper"},a({})):ei(this)]),e("div",{class:"vxe-grid--layout-footer-wrapper"},this.renderChildLayout(e,n))]},renderVN(e){const t=this.reactData,o=this.computeSize,r=this.computeStyles,l=this.computeIsLoading;return e("div",{ref:"refElem",class:["vxe-grid",{["size--"+o]:o,"is--animat":!!this.animat,"is--round":this.round,"is--maximize":t.isZMax,"is--loading":l}],style:r},this.renderLayout(e))}}),created(){const e=r.c.getComponent("VxeForm"),t=r.c.getComponent("VxePager"),o=this,l=this.computeProxyOpts;o.toolbar&&xe("vxe.error.delProp",["[grid] toolbar","toolbar-config"]),o.toolbarConfig&&!n.a.isObject(o.toolbarConfig)&&xe("vxe.error.errProp",["[grid] toolbar-config="+o.toolbarConfig,"toolbar-config={}"]),l.props&&fe("vxe.error.delProp",["[grid] proxy-config.props","proxy-config.response"]),this.$nextTick(()=>{o.formConfig&&(e||xe("vxe.error.reqComp",["vxe-form"])),o.pagerConfig&&(t||xe("vxe.error.reqComp",["vxe-pager"]))}),this.initPages(),Un.on(this,"keydown",this.handleGlobalKeydownEvent)},mounted(){const e=this,t=e,{columns:o}=t;o&&o.length&&e.loadColumn(o),e.initToolbar(),e.initProxy()},destroyed(){const e=this.internalData;Un.off(this,"keydown"),n.a.assign(e,{})},render(e){return this.renderVN(e)}};let ii=!1;const ai=Object.assign({},ni,{install(e){ii||(ii=!0,r.c.dynamicApp&&r.c.dynamicApp.component(ni.name,ni)),e.component(ni.name,ni)}});r.c.component(ni);const si=ai;var ci=o(0);const{getConfig:di,renderer:ui,getI18n:pi,getComponent:hi}=r.c,gi={};function mi(e,t,o){return n.a.eqNull(e)?n.a.eqNull(t)?o:t:e}function fi(e,t,o){const{dateConfig:r={}}=t;return n.a.toDateString(function(e,t){return e&&t.valueFormat?n.a.toStringDate(e,t.valueFormat):e}(e,t),r.labelFormat||o)}function xi(e,t){return fi(e,t,pi("vxe.input.date.labelFormat."+(t.type||"date")))}function bi({name:e}){return function(e){return"vxe-"+e.replace("$","")}(e)}function vi({name:e}){return hi(e)||e}function Ci(e,t,o){const{$panel:r}=e;r.changeOption({},t,o)}function wi(e){let{name:t,attrs:o}=e;return"input"===t&&(o=Object.assign({type:"text"},o)),o}function Ei(e){const{name:t,immediate:o,props:r}=e;if(!o){if("VxeInput"===t||"$input"===t){const{type:e}=r||{};return!(!e||"text"===e||"number"===e||"integer"===e||"float"===e)}return"input"!==t&&"textarea"!==t&&"$textarea"!==t}return o}function yi(e,t,o,r){return n.a.assign({immediate:Ei(e)},gi,r,e.props,{value:o})}function Ti(e,t,o,r){return n.a.assign({},gi,r,e.props,{value:o})}function Ri(e,t){return"cell"===t.$type||Ei(e)}function Si(e,t,o,r,l){const{placeholder:n}=t;return[e("span",{class:["vxe-cell--label",l?l.class:""]},n&&s(r)?[e("span",{class:"vxe-cell--placeholder"},g(h(n),1))]:g(r,1))]}function Oi(e,t,o){const{events:r}=e,l=tt(e),i=ot(e),{model:a,change:s,blur:c}=o||{},d=i===l,u={};return r&&n.a.objectEach(r,(e,o)=>{u[et(o)]=function(...o){e(t,...o)}}),a&&(u[et(l)]=function(e){a(e),d&&s&&s(e),r&&r[l]&&r[l](t,e)}),!d&&s&&(u[et(i)]=function(e){s(e),r&&r[i]&&r[i](t,e)}),c&&(u[et($i)]=function(e){c(e),r&&r[$i]&&r[$i](t,e)}),u}const $i="blur";function Fi(e,t,o,r){const{events:l}=e,i=tt(e),a=ot(e),{model:s,change:c,blur:d}=o||{},u={};return n.a.objectEach(l,(e,o)=>{u[et(o)]=function(...o){n.a.isFunction(e)||xe("vxe.error.errFunc",[e]),e(t,...o)}}),s&&(u[et(i)]=function(e){s(e),l&&l[i]&&l[i](t,e)}),c&&(u[et(a)]=function(...e){c(...e),l&&l[a]&&l[a](t,...e)}),d&&(u[et($i)]=function(...e){d(...e),l&&l[$i]&&l[$i](t,...e)}),r?Object.assign(u,r):u}function Di(e,t){const{$table:o,row:r,column:l}=t,{name:n}=e,{model:i}=l,a=Ri(e,t);return Fi(e,t,{model(e){i.update=!0,i.value=e,a&&Ke(r,l,e)},change(e){if(!a&&n&&["VxeInput","VxeNumberInput","VxeTextarea","$input","$textarea"].includes(n)){const r=e.value;i.update=!0,i.value=r,o.updateStatus(t,r)}else o.updateStatus(t)},blur(){a?o.handleCellRuleUpdateStatus("blur",t):o.handleCellRuleUpdateStatus("blur",t,i.value)}})}function ki(e,t,o){return Fi(e,t,{model(e){o.data=e},change(){Ci(t,!n.a.eqNull(o.data),o)},blur(){Ci(t,!n.a.eqNull(o.data),o)}})}function Mi(e,t){const{$table:o,row:r,column:l}=t,{model:n}=l;return Oi(e,t,{model(o){const i=o.target;if(i){const o=i.value;Ri(e,t)?Ke(r,l,o):(n.update=!0,n.value=o)}},change(e){const r=e.target;if(r){const e=r.value;o.updateStatus(t,e)}},blur(e){const r=e.target;if(r){const e=r.value;o.updateStatus(t,e)}}})}function Ii(e,t,o){return Oi(e,t,{model(e){const t=e.target;t&&(o.data=t.value)},change(){Ci(t,!n.a.eqNull(o.data),o)},blur(){Ci(t,!n.a.eqNull(o.data),o)}})}function Ai(e,t,o){const{row:r,column:l}=o,{name:n}=t,i=Ri(t,o)?Ye(r,l):l.model.value;return[e(""+n,{class:"vxe-default-"+n,attrs:wi(t),domProps:{value:i},on:Mi(t,o)})]}function Li(e,t,o){const{row:r,column:l}=o,n=Ye(r,l);return[e(vi(t),{props:yi(t,0,n),on:Di(t,o)})]}function _i(e,t,o){const{options:r}=t,{row:l,column:n}=o,i=Ye(l,n);return[e(vi(t),{props:Object.assign({options:r},yi(t,0,i)),on:Di(t,o)})]}function Hi(e,t,o){const{row:r,column:l}=o,n=Ye(r,l);return[e(bi(t),{props:yi(t,0,n),on:Di(t,o)})]}function Pi(e,t,o){return[e("vxe-button",{props:yi(t,0,null),on:Fi(t,o)})]}function Bi(e,t,o,r){const{optionGroups:l,optionGroupProps:n={}}=t,i=n.options||"options",a=n.label||"label";return l?l.map((l,n)=>e("optgroup",{key:n,attrs:{label:l[a]}},r(e,l[i],t,o))):[]}function zi(e,t,o,r){const{optionProps:l={}}=o,{row:n,column:i}=r,a=l.label||"label",s=l.value||"value",c=l.disabled||"disabled",d=Ri(o,r)?Ye(n,i):i.model.value;return t?t.map((t,o)=>e("option",{key:o,attrs:{value:t[s],disabled:t[c]},domProps:{selected:t[s]==d}},t[a])):[]}function ji(e,t,o){const{column:r}=o;return r.filters.map((r,l)=>{const n=r.data;return e(vi(t),{key:l,props:Ti(t,0,n),on:ki(t,o,r)})})}function Gi({option:e,row:t,column:o}){const{data:r}=e;return n.a.get(t,o.field)==r}function Vi({option:e,row:t,column:o}){const{data:r}=e,l=n.a.get(t,o.field);return n.a.toValueString(l).indexOf(r)>-1}function Ni(e,t,o){return[e("select",{class:"vxe-default-select",attrs:wi(t),on:Mi(t,o)},t.optionGroups?Bi(e,t,o,zi):zi(e,t.options,t,o))]}function Wi(e,t,o){const{row:r,column:l}=o,{options:n,optionProps:i,optionGroups:a,optionGroupProps:s}=t,c=Ye(r,l);return[e(vi(t),{props:yi(t,0,c,{options:n,optionProps:i,optionGroups:a,optionGroupProps:s}),on:Di(t,o)})]}function qi(e,t,o){const{row:r,column:l}=o,{options:n,optionProps:i}=t,a=Ye(r,l);return[e(vi(t),{props:yi(t,0,a,{options:n,optionProps:i}),on:Di(t,o)})]}function Xi(e,t,o){const{row:r,column:l}=o,{options:n,optionProps:i,optionGroups:a,optionGroupProps:s}=t,c=Ye(r,l);return[e(bi(t),{props:yi(t,0,c,{options:n,optionProps:i,optionGroups:a,optionGroupProps:s}),on:Di(t,o)})]}function Yi(e,{row:t,column:o}){const{options:r,optionGroups:l,optionProps:i={},optionGroupProps:a={}}=e,s=n.a.get(t,o.field);let c;const d=i.label||"label",u=i.value||"value";return null!=s?n.a.map(n.a.isArray(s)?s:[s],l?e=>{const t=a.options||"options";for(let o=0;o<l.length&&(c=n.a.find(l[o][t],t=>t[u]==e),!c);o++);return c?c[d]:e}:e=>(c=n.a.find(r,t=>t[u]==e),c?c[d]:e)).join(", "):""}function Ki(e){const{row:t,column:o,options:r}=e;return r.original?Ye(t,o):Yi(o.editRender||o.cellRender,e)}function Ui(e,{row:t,column:o}){const{options:r,optionProps:l={}}=e,i=n.a.get(t,o.field),a=l.label||"label",s=l.value||"value",c=l.children||"children";if(null!=i){const e={};return n.a.eachTree(r,t=>{e[n.a.get(t,s)]=t},{children:c}),n.a.map(n.a.isArray(i)?i:[i],t=>{const o=e[t];return o?n.a.get(o,a):o}).join(", ")}return""}function Zi(e){const{row:t,column:o,options:r}=e;return r.original?Ye(t,o):Ui(o.editRender||o.cellRender,e)}function Qi(e,t,o){const{props:r={},showNegativeStatus:l}=t,{row:i,column:a}=o,{type:c}=r;let d=n.a.get(i,a.field),u=!1;if(!s(d)){const e=di().numberInput||{};if("float"===c){const t=mi(r.autoFill,e.autoFill,!0),o=mi(r.digits,e.digits,1);d=n.a.toFixed(n.a.floor(d,o),o),t||(d=n.a.toNumber(d)),l&&d<0&&(u=!0)}else if("amount"===c){const t=mi(r.autoFill,e.autoFill,!0),o=mi(r.digits,e.digits,2),i=mi(r.showCurrency,e.showCurrency,!1);if(d=n.a.toNumber(d),l&&d<0&&(u=!0),d=n.a.commafy(d,{digits:o}),!t){const[e,t]=d.split(".");if(t){const o=t.replace(/0+$/,"");d=o?[e,".",o].join(""):e}}i&&(d=`${r.currencySymbol||e.currencySymbol||pi("vxe.numberInput.currencySymbol")||""}${d}`)}else l&&n.a.toNumber(d)<0&&(u=!0)}return Si(e,t,0,d,u?{class:"is--negative"}:{})}ui.mixin({input:{tableAutoFocus:"input",renderTableEdit:Ai,renderTableDefault:Ai,renderTableFilter:function(e,t,o){const{column:r}=o,{name:l}=t,n=wi(t);return r.filters.map((r,i)=>e(""+l,{key:i,class:"vxe-default-"+l,attrs:n,domProps:{value:r.data},on:Ii(t,o,r)}))},tableFilterDefaultMethod:Vi},textarea:{tableAutoFocus:"textarea",renderTableEdit:Ai},select:{renderTableEdit:Ni,renderTableDefault:Ni,renderTableCell:(e,t,o)=>Si(e,t,0,Yi(t,o)),renderTableFilter(e,t,o){const{column:r}=o;return r.filters.map((r,l)=>e("select",{key:l,class:"vxe-default-select",attrs:wi(t),on:Ii(t,o,r)},t.optionGroups?Bi(e,t,o,zi):zi(e,t.options,t,o)))},tableFilterDefaultMethod:Gi,tableExportMethod:Ki},VxeInput:{tableAutoFocus:"input",renderTableEdit:Li,renderTableCell(e,t,o){const{props:r={}}=t,{row:l,column:i}=o,a=di().input||{},s=r.digits||a.digits||2;let c=n.a.get(l,i.field);if(c)switch(r.type){case"date":case"week":case"month":case"quarter":case"year":c=xi(c,r);break;case"float":c=n.a.toFixed(n.a.floor(c,s),s)}return Si(e,t,0,c)},renderTableDefault:Li,renderTableFilter:ji,tableFilterDefaultMethod:Vi},FormatNumberInput:{renderTableDefault:Qi,tableFilterDefaultMethod:Vi,tableExportMethod(e){const{row:t,column:o}=e;return n.a.get(t,o.field)}},VxeNumberInput:{tableAutoFocus:"input",renderTableEdit:Li,renderTableCell:Qi,renderTableFooter(e,t,o){const{props:r={}}=t,{row:l,column:i,_columnIndex:a}=o,{type:s}=r,c=n.a.isArray(l)?l[a]:n.a.get(l,i.field);if(n.a.isNumber(c)){const e=di().numberInput||{};if("float"===s){const t=mi(r.autoFill,e.autoFill,!0),o=mi(r.digits,e.digits,1);let l=n.a.toFixed(n.a.floor(c,o),o);return t||(l=n.a.toNumber(l)),l}if("amount"===s){const t=mi(r.autoFill,e.autoFill,!0),o=mi(r.digits,e.digits,2),l=mi(r.showCurrency,e.showCurrency,!1);let i=n.a.commafy(n.a.toNumber(c),{digits:o});if(!t){const[e,t]=i.split(".");if(t){const o=t.replace(/0+$/,"");i=o?[e,".",o].join(""):e}}return l&&(i=`${r.currencySymbol||e.currencySymbol||pi("vxe.numberInput.currencySymbol")||""}${i}`),i}}return h(c,1)},renderTableDefault:Li,renderTableFilter:ji,tableFilterDefaultMethod:Vi,tableExportMethod(e){const{row:t,column:o}=e;return n.a.get(t,o.field)}},VxeDatePicker:{tableAutoFocus:"input",renderTableEdit:Li,renderTableCell(e,t,o){const{props:r={}}=t,{row:l,column:i}=o;let a=n.a.get(l,i.field);return a&&"time"!==r.type&&(a=xi(a,r)),Si(e,t,0,a)},renderTableDefault:Li,renderTableFilter:ji,tableFilterDefaultMethod:Gi},VxeDateRangePicker:{tableAutoFocus:"input",renderTableEdit(e,t,o){const{startField:r,endField:l}=t,{$table:i,row:a,column:s}=o,{model:c}=s,d=Ye(a,s),u={},p={};return r&&l&&(u.startValue=n.a.get(a,r),u.endValue=n.a.get(a,l),p["update:startValue"]=e=>{r&&n.a.set(a,r,e)},p["update:endValue"]=e=>{l&&n.a.set(a,l,e)}),[e(vi(t),{props:yi(t,0,d,u),on:Fi(t,o,{model(e){c.update=!0,c.value=e,Ke(a,s,e)},change(){i.updateStatus(o)},blur(){i.handleCellRuleUpdateStatus("blur",o)}},p)})]},renderTableCell(e,t,o){const{startField:r,endField:l}=t,{row:i,column:a}=o;let s="",c="";if(r&&l)s=n.a.get(i,r),c=n.a.get(i,l);else{const e=n.a.get(i,a.field);if(e)if(n.a.isArray(e))s=e[0],c=e[1];else{const t=(""+e).split(",");s=t[0],c=t[1]}}let d="";return s&&c&&(d=`${s} ~ ${c}`),Si(e,t,0,d)}},VxeTextarea:{tableAutoFocus:"textarea",renderTableEdit:Li},VxeButton:{renderTableDefault:function(e,t,o){return[e(vi(t),{props:yi(t,0,null),on:Fi(t,o)})]}},VxeButtonGroup:{renderTableDefault(e,t,o){const{options:r}=t;return[e(vi(t),{props:Object.assign({options:r},yi(t,0,null)),on:Fi(t,o)})]}},VxeSelect:{tableAutoFocus:"input",renderTableEdit:Wi,renderTableDefault:Wi,renderTableCell:(e,t,o)=>Si(e,t,0,Yi(t,o)),renderTableFilter(e,t,o){const{column:r}=o,{options:l,optionProps:n,optionGroups:i,optionGroupProps:a}=t;return r.filters.map((r,s)=>{const c=r.data;return e(vi(t),{key:s,props:Ti(t,0,c,{options:l,optionProps:n,optionGroups:i,optionGroupProps:a}),on:ki(t,o,r)})})},tableFilterDefaultMethod:Gi,tableExportMethod:Ki},VxeText:{renderTableDefault(e,t,o){const{$table:r,row:l,column:n}=o,{props:i}=t,a=r.getCellLabel(l,n);return[e(vi(t),{props:Object.assign(Object.assign({},i||{}),{content:a}),on:Fi(t,o)})]}},VxeLink:{renderTableDefault(e,t,o){const{$table:r,row:l,column:i}=o,{props:a}=t,{href:s}=a||{},c=r.getCellLabel(l,i);return[e(vi(t),{props:Object.assign(Object.assign({},a||{}),{content:c,href:n.a.toFormatString(s,o)}),on:Fi(t,o)})]}},formatOption:{renderTableDefault:(e,t,o)=>Si(e,t,0,Yi(t,o))},FormatSelect:{renderTableDefault:(e,t,o)=>Si(e,t,0,Yi(t,o)),tableFilterDefaultMethod:Gi,tableExportMethod:Ki},VxeTreeSelect:{tableAutoFocus:"input",renderTableEdit:qi,renderTableCell:(e,t,o)=>Si(e,t,0,Ui(t,o)),tableExportMethod:Zi},VxeTableSelect:{tableAutoFocus:"input",renderTableEdit:qi,renderTableCell:(e,t,o)=>Si(e,t,0,Ui(t,o)),tableExportMethod:Zi},formatTree:{renderTableDefault:(e,t,o)=>Si(e,t,0,Ui(t,o))},FormatTreeSelect:{renderTableDefault:(e,t,o)=>Si(e,t,0,Ui(t,o)),tableExportMethod:Zi},VxeColorPicker:{tableAutoFocus:"input",renderTableEdit(e,t,o){const{row:r,column:l}=o,{options:n}=t,i=Ye(r,l);return[e(vi(t),{props:yi(t,0,i,{colors:n}),on:Di(t,o)})]},renderTableCell(e,t,o){const{row:r,column:l}=o;return e("span",{class:"vxe-color-picker--readonly"},[e("div",{class:"vxe-color-picker--readonly-color",style:{backgroundColor:n.a.get(r,l.field)}})])}},VxeIconPicker:{tableAutoFocus:"input",renderTableEdit(e,t,o){const{row:r,column:l}=o,{options:n}=t,i=Ye(r,l);return[e(vi(t),{props:yi(t,0,i,{icons:n}),on:Di(t,o)})]},renderTableCell(e,t,o){const{row:r,column:l}=o;return e("i",{class:n.a.get(r,l.field)})}},VxeRadioGroup:{renderTableDefault:_i},VxeCheckbox:{renderTableDefault:function(e,t,o){const{row:r,column:l}=o,n=Ye(r,l);return[e(vi(t),{props:yi(t,0,n),on:Di(t,o)})]}},VxeCheckboxGroup:{renderTableDefault:_i},VxeSwitch:{tableAutoFocus:"button",renderTableEdit:Li,renderTableDefault:Li},VxeUpload:{renderTableEdit:Li,renderTableCell:Li,renderTableDefault:Li},VxeImage:{renderTableDefault(e,t,o){const{row:r,column:l}=o,{props:n}=t,i=Ye(r,l);return[e(vi(t),{props:Object.assign(Object.assign({},n),{src:i}),on:Di(t,o)})]}},VxeImageGroup:{renderTableDefault(e,t,o){const{row:r,column:l}=o,{props:n}=t,i=Ye(r,l);return[e(vi(t),{props:Object.assign(Object.assign({},n),{urlList:i}),on:Di(t,o)})]}},VxeTextEllipsis:{renderTableDefault(e,t,o){const{row:r,column:l}=o,{props:n}=t,i=Ye(r,l);return[e(vi(t),{props:Object.assign(Object.assign({},n),{content:i}),on:Di(t,o)})]}},VxeRate:{renderTableDefault:Li},VxeSlider:{renderTableDefault:Li},$input:{tableAutoFocus:".vxe-input--inner",renderTableEdit:Hi,renderTableCell(e,t,o){var r;const{props:l={}}=t,{row:i,column:a}=o,s=l.digits||(null===(r=di().input)||void 0===r?void 0:r.digits)||2;let c=n.a.get(i,a.field);if(c)switch(l.type){case"date":case"week":case"month":case"year":c=xi(c,l);break;case"float":c=n.a.toFixed(n.a.floor(c,s),s)}return Si(e,t,0,c)},renderTableDefault:Hi,renderTableFilter:function(e,t,o){const{column:r}=o;return r.filters.map((r,l)=>{const n=r.data;return e(bi(t),{key:l,props:Ti(t,0,n),on:ki(t,o,r)})})},tableFilterDefaultMethod:Vi},$textarea:{tableAutoFocus:".vxe-textarea--inner"},$button:{renderTableDefault:Pi},$buttons:{renderTableDefault:function(e,t,o){const{children:r}=t;return r?r.map(t=>Pi(e,t,o)[0]):[]}},$select:{tableAutoFocus:".vxe-input--inner",renderTableEdit:Xi,renderTableDefault:Xi,renderTableCell:(e,t,o)=>Si(e,t,0,Yi(t,o)),renderTableFilter(e,t,o){const{column:r}=o,{options:l,optionProps:n,optionGroups:i,optionGroupProps:a}=t;return r.filters.map((r,s)=>{const c=r.data;return e(bi(t),{key:s,props:Ti(t,0,c,{options:l,optionProps:n,optionGroups:i,optionGroupProps:a}),on:ki(t,o,r)})})},tableFilterDefaultMethod:Gi,tableExportMethod:Ki},$radio:{tableAutoFocus:".vxe-radio--input"},$checkbox:{tableAutoFocus:".vxe-checkbox--input"},$switch:{tableAutoFocus:".vxe-switch--button",renderTableEdit:Hi,renderTableDefault:Hi}});let Ji=!1;const ea=Object.assign({},Hn,{install(e){"undefined"!=typeof window&&(window.VxeTableExtendCellArea&&window.VxeTableExtendCellArea.use?window.VxeTableExtendCellArea.use(r.c):window.VXETableMixin&&(Hn.mixins.push(window.VXETableMixin),delete window.VXETableMixin),window.VxeTableExtendPivotTable&&window.VxeTableExtendPivotTable.use&&window.VxeTableExtendPivotTable.use(r.c)),"undefined"!=typeof window&&window.VxeTableExtendCellArea&&window.VxeTableExtendCellArea.init?(window.VxeTableExtendCellArea.init(r.c),delete window.VxeTableExtendCellArea,delete window.VXETablePro):"undefined"!=typeof window&&window.VXETablePro&&window.VXETablePro.init&&(window.VXETablePro.init(r.c),delete window.VXETablePro),ci.a.prototype.$vxe?(ci.a.prototype.$vxe.t=r.c.t,ci.a.prototype.$vxe._t=r.c._t):ci.a.prototype.$vxe={t:r.c.t,_t:r.c._t},Ji||(Ji=!0,r.c.dynamicApp&&r.c.dynamicApp.component(Hn.name,Hn)),e.component(Hn.name,Hn)}});r.c.component(Hn);const ta=ea;const oa=Object.assign({},qn,{install(e){e.component(qn.name,qn)}});r.c.dynamicApp&&r.c.dynamicApp.component(qn.name,qn),r.c.component(qn);const ra=oa;const la=[Rt,$t,ai,ea,oa];function na(e,t){r.c.setConfig(t),la.forEach(t=>t.install(e))}if(!r.c.hasLanguage("zh-CN")){const e="zh-CN";r.c.setI18n(e,{vxe:{base:{pleaseInput:"请输入",pleaseSelect:"请选择",comma:"，",fullStop:"。"},loading:{text:"加载中..."},error:{downErr:"下载失败",errLargeData:"当绑定的数据量过大时，应该请使用 {0}，否则可能会出现卡顿",groupFixed:"如果使用分组表头，冻结列必须按组设置",groupMouseRange:'分组表头与 "{0}" 不能同时使用，这可能会出现错误',groupTag:'分组列头应该使用 "{0}" 而不是 "{1}"，这可能会出现错误',scrollErrProp:'启用虚拟滚动后不支持该参数 "{0}"',errConflicts:'参数 "{0}" 与 "{1}" 有冲突',modelConflicts:'绑定的字段值 "{0}" 与 "{1}" 存在冲突，将会出现错误',notSupportProp:'当启用参数 "{0}" 时不支持 "{1}"，应该为 "{2}"，否则将会出现错误',reqSupportProp:'当使用 "{0}" 时，应该设置 "{1}"，否则可能会出现错误',notConflictProp:'当使用 "{0}" 时，应该设置 "{1}"，否则可能会存在功能冲突',unableInsert:"无法插入到指定位置，请检查参数是否正确",useErr:'安装 "{0}" 模块时发生错误，可能顺序不正确，依赖的模块需要在 Table 之前安装',barUnableLink:"工具栏无法关联表格",expandContent:'展开行的插槽应该是 "content"，请检查是否正确',reqComp:'缺少 "{0}" 组件，请检查是否正确安装。 https://vxeui.com/#/start/useGlobal',reqModule:'缺少 "{0}" 模块',reqProp:'缺少必要的 "{0}" 参数，这可能会导致出现错误',emptyProp:'参数 "{0}" 不允许为空',errProp:'不支持的参数 "{0}"，可能为 "{1}"',colRepet:'column.{0}="{1}" 重复了，这可能会导致某些功能无法使用',notFunc:'方法 "{0}" 不存在',errFunc:'参数 "{0}" 不是一个方法',notValidators:'全局校验 "{0}" 不存在',notFormats:'全局格式化 "{0}" 不存在',notCommands:'全局指令 "{0}" 不存在',notSlot:'插槽 "{0}" 不存在',noTree:'树结构不支持 "{0}"',noGroup:'数据分组后不支持 "{0}"',notProp:'不支持的参数 "{0}"',checkProp:'当数据量过大时可能会导致复选框卡顿，建议设置参数 "{0}" 提升渲染速度',coverProp:'"{0}" 的参数 "{1}" 重复定义，这可能会出现错误',uniField:'字段名 "{0}" 重复定义，这可能会出现错误',repeatKey:'主键重复 {0}="{1}"，这可能会出现错误',repeatProp:'参数重复 {0}="{1}"，这可能会出现错误',delFunc:'方法 "{0}" 已废弃，请使用 "{1}"',delProp:'参数 "{0}" 已废弃，请使用 "{1}"',delEvent:'事件 "{0}" 已废弃，请使用 "{1}"',removeProp:'参数 "{0}" 已废弃，不建议使用，这可能会导致出现错误',errFormat:'全局的格式化内容应该使用 "VXETable.formats" 定义，挂载 "formatter={0}" 的方式已不建议使用',notType:'不支持的文件类型 "{0}"',notExp:"该浏览器不支持导入/导出功能",impFields:"导入失败，请检查字段名和数据格式是否正确",treeNotImp:"树表格不支持导入",treeCrossDrag:"只能拖拽第一层级",treeDragChild:"父级不能拖拽到自己的子级中",reqPlugin:'扩展插件未安装 "{1}" https://vxeui.com/other{0}/#/{1}/install',errMaxRow:"超过支持的最大数据量 {0} 行，这可能会导致出现错误",useNew:"不建议使用 {0}，请使用 {1}",errorVersion:"版本不匹配，当前版本 {0}，最低支持版本为 {1}"},table:{emptyText:"暂无数据",allTitle:"全选/取消",seqTitle:"序号",actionTitle:"操作",confirmFilter:"筛选",resetFilter:"重置",allFilter:"全部",sortAsc:"升序：最低到最高",sortDesc:"降序：最高到最低",filter:"对所选的列启用筛选",impSuccess:"成功导入 {0} 条记录",expLoading:"正在导出中",expSuccess:"导出成功",expError:"导出失败",expFilename:"导出_{0}",expOriginFilename:"导出_源_{0}",customTitle:"列设置",customAll:"全部",customConfirm:"确认",customClose:"关闭",customCancel:"取消",customRestore:"恢复默认",maxFixedCol:"最大冻结列的数量不能超过 {0} 个",maxGroupCol:"最大分组字段的数量不能超过 {0} 个",dragTip:"移动：{0}",resizeColTip:"宽：{0} 像素",resizeRowTip:"高：{0} 像素",rowGroupContentTotal:"{0}（{1}）"},grid:{selectOneRecord:"请至少选择一条记录！",deleteSelectRecord:"您确定要删除所选记录吗？",removeSelectRecord:"您确定要移除所选记录吗？",dataUnchanged:"数据未改动！",delSuccess:"成功删除所选记录！",saveSuccess:"保存成功！",operError:"发生错误，操作失败！"},select:{clear:"清除",allChecked:"全选",total:"{0} / {1}",search:"搜索",loadingText:"加载中",emptyText:"暂无数据",maxSize:"最大可选择的数量不能超过 {0} 个",overSizeErr:"已超出最大可选数量 {0} 个，超出部分将被忽略！",searchEmpty:"未匹配到数据！"},tree:{searchEmpty:"未匹配到数据！"},treeSelect:{clearChecked:"清除",allChecked:"全选",allExpand:"全部展开",clearExpand:"全部收起",total:"已选 {0}",search:"搜索",emptyText:"暂无数据"},pager:{goto:"前往",gotoTitle:"页数",pagesize:"{0}条/页",total:"共 {0} 条记录",pageClassifier:"页",homePage:"首页",homePageTitle:"首页",prevPage:"上一页",prevPageTitle:"上一页",nextPage:"下一页",nextPageTitle:"下一页",prevJump:"向上跳页",prevJumpTitle:"向上跳页",nextJump:"向下跳页",nextJumpTitle:"向下跳页",endPage:"末页",endPageTitle:"末页"},alert:{title:"系统提示"},button:{confirm:"确认",cancel:"取消",clear:"清除"},filter:{search:"搜索"},custom:{cstmTitle:"列设置",cstmRestore:"恢复默认",cstmCancel:"取消",cstmConfirm:"确定",cstmConfirmRestore:"请确认是否恢复成默认列配置？",cstmDragTarget:"移动：{0}",setting:{colSort:"排序",sortHelpTip:"点击并拖动图标可以调整顺序",colTitle:"列标题",colResizable:"列宽（像素）",colVisible:"是否显示",colFixed:"冻结列",colFixedMax:"冻结列（最多 {0} 列）",fixedLeft:"左侧",fixedUnset:"不设置",fixedRight:"右侧"}},import:{modes:{covering:"覆盖方式（直接覆盖表格数据）",insert:"底部追加（在表格的底部追加新数据）",insertTop:"顶部追加（在表格的顶部追加新数据）",insertBottom:"底部追加（在表格的底部追加新数据）"},impTitle:"导入数据",impFile:"文件名",impSelect:"选择文件",impType:"文件类型",impOpts:"参数设置",impMode:"导入模式",impConfirm:"导入",impCancel:"取消"},export:{types:{csv:"CSV (逗号分隔)(*.csv)",html:"网页(*.html)",xml:"XML 数据(*.xml)",txt:"文本文件(制表符分隔)(*.txt)",xls:"Excel 97-2003 工作簿(*.xls)",xlsx:"Excel 工作簿(*.xlsx)",pdf:"PDF (*.pdf)"},modes:{empty:"空数据",current:"当前数据（当前页的数据）",selected:"选中数据（当前页选中的数据）",all:"全量数据（包括所有分页的数据）"},printTitle:"打印数据",expTitle:"导出数据",expName:"文件名",expNamePlaceholder:"请输入文件名",expSheetName:"标题",expSheetNamePlaceholder:"请输入标题",expType:"保存类型",expMode:"选择数据",expCurrentColumn:"全部字段",expColumn:"选择字段",expOpts:"参数设置",expOptHeader:"表头",expHeaderTitle:"是否需要表头",expOptFooter:"表尾",expFooterTitle:"是否需要表尾",expOptColgroup:"分组表头",expOptTitle:"列标题",expTitleTitle:"是否为列标题，否则显示为列的字段名",expColgroupTitle:"如果存在，则支持带有分组结构的表头",expOptMerge:"合并",expMergeTitle:"如果存在，则支持带有合并结构的单元格",expOptAllExpand:"展开树",expAllExpandTitle:"如果存在，则支持将带有层级结构的数据全部展开",expOptUseStyle:"样式",expUseStyleTitle:"如果存在，则支持带样式的单元格",expOptOriginal:"源数据",expOriginalTitle:"如果为源数据，则支持导入到表格中",expPrint:"打印",expConfirm:"导出",expCancel:"取消"},modal:{errTitle:"错误提示",zoomMin:"最小化",zoomIn:"最大化",zoomOut:"还原",close:"关闭",miniMaxSize:"最小化窗口的数量不能超过 {0} 个",footPropErr:"show-footer 仅用于启用表尾，需配合 show-confirm-button | show-cancel-button | 插槽使用"},drawer:{close:"关闭"},form:{folding:"收起",unfolding:"展开"},toolbar:{import:"导入",export:"导出",print:"打印",refresh:"刷新",zoomIn:"全屏",zoomOut:"还原",custom:"列设置",customAll:"全部",customConfirm:"确认",customRestore:"重置",fixedLeft:"冻结在左侧",fixedRight:"冻结在右侧",cancelFixed:"取消冻结列"},datePicker:{yearTitle:"{0} 年"},dateRangePicker:{pleaseRange:"请选择开始日期与结束日期"},input:{date:{m1:"01 月",m2:"02 月",m3:"03 月",m4:"04 月",m5:"05 月",m6:"06 月",m7:"07 月",m8:"08 月",m9:"09 月",m10:"10 月",m11:"11 月",m12:"12 月",quarterLabel:"{0} 年",monthLabel:"{0} 年",dayLabel:"{0} 年 {1}",labelFormat:{date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss",week:"yyyy 年第 WW 周",month:"yyyy-MM",quarter:"yyyy 年第 q 季度",year:"yyyy"},weeks:{w:"",w0:"周日",w1:"周一",w2:"周二",w3:"周三",w4:"周四",w5:"周五",w6:"周六"},months:{m0:"一月",m1:"二月",m2:"三月",m3:"四月",m4:"五月",m5:"六月",m6:"七月",m7:"八月",m8:"九月",m9:"十月",m10:"十一月",m11:"十二月"},quarters:{q1:"第一季度",q2:"第二季度",q3:"第三季度",q4:"第四季度"}}},numberInput:{currencySymbol:"¥"},imagePreview:{popupTitle:"预览",operBtn:{zoomOut:"缩小",zoomIn:"放大",pctFull:"等比例缩放",pct11:"显示原始尺寸",rotateLeft:"向左旋转",rotateRight:"向右旋转",print:"点击打印图片",download:"点击下载图片"}},upload:{fileBtnText:"点击或拖拽上传",imgBtnText:"点击或拖拽上传",dragPlaceholder:"请把文件拖放到这个区域即可上传",imgSizeHint:"单张{0}",imgCountHint:"最多{0}张",fileTypeHint:"支持 {0} 文件类型",fileSizeHint:"单个文件大小不超过{0}",fileCountHint:"最多可上传{0}个文件",uploadTypeErr:"文件类型不匹配！",overCountErr:"最多只能选择{0}个文件！",overCountExtraErr:"已超出最大数量{0}个，超出的{1}个文件将被忽略！",overSizeErr:"文件大小最大不能超过{0}！",manualUpload:"点击上传",reUpload:"重新上传",uploadProgress:"上传中 {0}%",uploadErr:"上传失败",uploadSuccess:"上传成功",moreBtnText:"更多（{0}）",viewItemTitle:"点击查看",morePopup:{readTitle:"查看列表",imageTitle:"上传图片",fileTitle:"上传文件"}},empty:{defText:"暂无数据"},colorPicker:{clear:"清除",confirm:"确认",copySuccess:"已复制到剪贴板：{0}",hex:"十六进制"},formDesign:{formName:"表单名称",defFormTitle:"未命名的表单",widgetPropTab:"控件属性",widgetFormTab:"表单属性",error:{wdFormUni:"该类型的控件在表单中只允许添加一个",wdSubUni:"该类型的控件在子表中只允许添加一个"},styleSetting:{btn:"样式设置",title:"表单的样式设置",layoutTitle:"控件布局",verticalLayout:"上下布局",horizontalLayout:"横向布局",styleTitle:"标题样式",boldTitle:"标题加粗",fontBold:"加粗",fontNormal:"常规",colonTitle:"显示冒号",colonVisible:"显示",colonHidden:"隐藏",alignTitle:"对齐方式",widthTitle:"标题宽度",alignLeft:"居左",alignRight:"居右",unitPx:"像素",unitPct:"百分比"},widget:{group:{base:"基础控件",layout:"布局控件",system:"系统控件",module:"模块控件",chart:"图表控件",advanced:"高级控件"},copyTitle:"副本_{0}",component:{input:"输入框",textarea:"文本域",select:"下拉选择",row:"一行多列",title:"标题",text:"文本",subtable:"子表",VxeSwitch:"是/否",VxeInput:"输入框",VxeNumberInput:"数字",VxeDatePicker:"日期",VxeTextarea:"文本域",VxeSelect:"下拉选择",VxeTreeSelect:"树形选择",VxeRadioGroup:"单选框",VxeCheckboxGroup:"复选框",VxeUploadFile:"文件",VxeUploadImage:"图片",VxeRate:"评分",VxeSlider:"滑块"}},widgetProp:{name:"控件名称",placeholder:"提示语",required:"必填校验",multiple:"允许多选",displaySetting:{name:"显示设置",pc:"电脑端",mobile:"手机端",visible:"显示",hidden:"隐藏"},dataSource:{name:"数据源",defValue:"选项{0}",addOption:"添加选项",batchEditOption:"批量编辑",batchEditTip:"每行对应一个选项，支持从表格、Excel、WPS 中直接复制粘贴。",batchEditSubTip:"每行对应一个选项，如果是分组，子项可以是空格或制表键开头，支持从表格、Excel、WPS 中直接复制粘贴。",buildOption:"生成选项"},rowProp:{colSize:"列数",col2:"两列",col3:"三列",col4:"四列",col6:"六列",layout:"布局"},textProp:{name:"内容",alignTitle:"对齐方式",alignLeft:"居左",alignCenter:"居中",alignRight:"居右",colorTitle:"字体颜色",sizeTitle:"字体大小",boldTitle:"字体加粗",fontNormal:"常规",fontBold:"加粗"},subtableProp:{seqTitle:"序号",showSeq:"显示序号",showCheckbox:"允许多选",errSubDrag:"子表不支持该控件，请使用其他控件",colPlace:"将控件拖拽进来"},uploadProp:{limitFileCount:"文件数量限制",limitFileSize:"文件大小限制",multiFile:"允许上传多个文件",limitImgCount:"图片数量限制",limitImgSize:"图片大小限制",multiImg:"允许上传多张图片"}}},listDesign:{fieldSettingTab:"字段设置",listSettingTab:"参数设置",searchTitle:"查询条件",listTitle:"列表字段",searchField:"查询字段",listField:"列表字段",activeBtn:{ActionButtonUpdate:"编辑",ActionButtonDelete:"删除"},search:{addBtn:"编辑",emptyText:"未配置查询条件",editPopupTitle:"编辑查询字段"},searchPopup:{colTitle:"标题",saveBtn:"保存"}},text:{copySuccess:"已复制到剪贴板",copyError:"当前环境不支持该操作"},countdown:{formats:{yyyy:"年",MM:"月",dd:"天",HH:"时",mm:"分",ss:"秒"}},gantt:{tFullFormat:{year:"{yy}年",quarter:"{yy}年第{q}季度",month:"{yy}年{M}月",week:"{yy}年第{W}周",day:"{yy}年{M}月{E}日",date:"{yy}年{M}月{d}日",hour:"{yy}年 {M}月{d}日{H}时",minute:"{yy}年{M}月{d}日{H}时{m}分"},tSimpleFormat:{year:"{yy}年",quarter:"{q}季度",month:"{M}月",week:"{W}周",day:"{d}",date:"{d}",hour:"{H}时",minute:"{m}分"},dayss:{w0:"日",w1:"一",w2:"二",w3:"三",w4:"四",w5:"五",w6:"六"}},plugins:{extendCellArea:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",selectErr:"无法操作指定区域的单元格",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作",cpInvalidErr:"该操作无法进行，您选择的区域中存在被禁止的列（{0}）"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},body:{row:"行：{0}",col:"列：{0}"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},extendPivotTable:{aggregation:{grouping:"分组",values:"值",groupPlaceholder:"拖至此处进行分组",valuesPlaceholder:"拖至此处进行聚合",dragExistCol:"该列已存在",sortHelpTip:"点击并拖动图标可以调整顺序"},aggFuncs:{sum:"求和",count:"计数",avg:"平均值",min:"最小值",max:"最大值",first:"首个值",last:"末尾值"}},filterComplexInput:{menus:{fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧"},cases:{equal:"等于",gt:"大于",lt:"小于",begin:"开头是",endin:"结尾是",include:"包含",isSensitive:"区分大小写"}},filterCombination:{menus:{sort:"排序",clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},empty:"(空白)",notData:"无匹配项"}},pro:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},renderer:{search:"搜索",cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},combination:{menus:{sort:"排序",clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结到左侧",fixedRight:"冻结到右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},empty:"(空白)",notData:"无匹配项"}}}}),r.c.setLanguage(e)}r.c.setTheme("light")},574:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=n(t);if(o&&o.has(e))return o.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=l?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}(o(573));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(n=function(e){return e?o:t})(e)}Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));t.default=l}}]);